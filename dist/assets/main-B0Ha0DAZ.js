var E6=Object.defineProperty;var _v=t=>{throw TypeError(t)};var D6=(t,s,a)=>s in t?E6(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var Gm=(t,s,a)=>D6(t,typeof s!="symbol"?s+"":s,a),Yh=(t,s,a)=>s.has(t)||_v("Cannot "+a);var ut=(t,s,a)=>(Yh(t,s,"read from private field"),a?a.call(t):s.get(t)),Ms=(t,s,a)=>s.has(t)?_v("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,a),hs=(t,s,a,r)=>(Yh(t,s,"write to private field"),r?r.call(t,a):s.set(t,a),a),Ha=(t,s,a)=>(Yh(t,s,"access private method"),a);var qm=(t,s,a,r)=>({set _(n){hs(t,s,n,a)},get _(){return ut(t,s,r)}});import Pv from"../node_modules/lucide-react/dist/esm/icons/test-tube.js";function A6(t,s){for(var a=0;a<s.length;a++){const r=s[a];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(r,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();function dN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mN={exports:{}},Zx={},uN={exports:{}},ks={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=Symbol.for("react.element"),_6=Symbol.for("react.portal"),P6=Symbol.for("react.fragment"),T6=Symbol.for("react.strict_mode"),F6=Symbol.for("react.profiler"),M6=Symbol.for("react.provider"),I6=Symbol.for("react.context"),R6=Symbol.for("react.forward_ref"),O6=Symbol.for("react.suspense"),L6=Symbol.for("react.memo"),$6=Symbol.for("react.lazy"),Tv=Symbol.iterator;function U6(t){return t===null||typeof t!="object"?null:(t=Tv&&t[Tv]||t["@@iterator"],typeof t=="function"?t:null)}var xN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hN=Object.assign,pN={};function zc(t,s,a){this.props=t,this.context=s,this.refs=pN,this.updater=a||xN}zc.prototype.isReactComponent={};zc.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};zc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fN(){}fN.prototype=zc.prototype;function y0(t,s,a){this.props=t,this.context=s,this.refs=pN,this.updater=a||xN}var j0=y0.prototype=new fN;j0.constructor=y0;hN(j0,zc.prototype);j0.isPureReactComponent=!0;var Fv=Array.isArray,gN=Object.prototype.hasOwnProperty,N0={current:null},vN={key:!0,ref:!0,__self:!0,__source:!0};function wN(t,s,a){var r,n={},l=null,i=null;if(s!=null)for(r in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)gN.call(s,r)&&!vN.hasOwnProperty(r)&&(n[r]=s[r]);var o=arguments.length-2;if(o===1)n.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)n[r]===void 0&&(n[r]=o[r]);return{$$typeof:km,type:t,key:l,ref:i,props:n,_owner:N0.current}}function B6(t,s){return{$$typeof:km,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function b0(t){return typeof t=="object"&&t!==null&&t.$$typeof===km}function z6(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return s[a]})}var Mv=/\/+/g;function Wh(t,s){return typeof t=="object"&&t!==null&&t.key!=null?z6(""+t.key):s.toString(36)}function Mu(t,s,a,r,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case km:case _6:i=!0}}if(i)return i=t,n=n(i),t=r===""?"."+Wh(i,0):r,Fv(n)?(a="",t!=null&&(a=t.replace(Mv,"$&/")+"/"),Mu(n,s,a,"",function(d){return d})):n!=null&&(b0(n)&&(n=B6(n,a+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Mv,"$&/")+"/")+t)),s.push(n)),1;if(i=0,r=r===""?".":r+":",Fv(t))for(var o=0;o<t.length;o++){l=t[o];var c=r+Wh(l,o);i+=Mu(l,s,a,c,n)}else if(c=U6(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=r+Wh(l,o++),i+=Mu(l,s,a,c,n);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function Jm(t,s,a){if(t==null)return t;var r=[],n=0;return Mu(t,r,"","",function(l){return s.call(a,l,n++)}),r}function V6(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var xr={current:null},Iu={transition:null},Y6={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:Iu,ReactCurrentOwner:N0};function yN(){throw Error("act(...) is not supported in production builds of React.")}ks.Children={map:Jm,forEach:function(t,s,a){Jm(t,function(){s.apply(this,arguments)},a)},count:function(t){var s=0;return Jm(t,function(){s++}),s},toArray:function(t){return Jm(t,function(s){return s})||[]},only:function(t){if(!b0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ks.Component=zc;ks.Fragment=P6;ks.Profiler=F6;ks.PureComponent=y0;ks.StrictMode=T6;ks.Suspense=O6;ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y6;ks.act=yN;ks.cloneElement=function(t,s,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hN({},t.props),n=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=N0.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)gN.call(s,c)&&!vN.hasOwnProperty(c)&&(r[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)r.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:km,type:t.type,key:n,ref:l,props:r,_owner:i}};ks.createContext=function(t){return t={$$typeof:I6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:M6,_context:t},t.Consumer=t};ks.createElement=wN;ks.createFactory=function(t){var s=wN.bind(null,t);return s.type=t,s};ks.createRef=function(){return{current:null}};ks.forwardRef=function(t){return{$$typeof:R6,render:t}};ks.isValidElement=b0;ks.lazy=function(t){return{$$typeof:$6,_payload:{_status:-1,_result:t},_init:V6}};ks.memo=function(t,s){return{$$typeof:L6,type:t,compare:s===void 0?null:s}};ks.startTransition=function(t){var s=Iu.transition;Iu.transition={};try{t()}finally{Iu.transition=s}};ks.unstable_act=yN;ks.useCallback=function(t,s){return xr.current.useCallback(t,s)};ks.useContext=function(t){return xr.current.useContext(t)};ks.useDebugValue=function(){};ks.useDeferredValue=function(t){return xr.current.useDeferredValue(t)};ks.useEffect=function(t,s){return xr.current.useEffect(t,s)};ks.useId=function(){return xr.current.useId()};ks.useImperativeHandle=function(t,s,a){return xr.current.useImperativeHandle(t,s,a)};ks.useInsertionEffect=function(t,s){return xr.current.useInsertionEffect(t,s)};ks.useLayoutEffect=function(t,s){return xr.current.useLayoutEffect(t,s)};ks.useMemo=function(t,s){return xr.current.useMemo(t,s)};ks.useReducer=function(t,s,a){return xr.current.useReducer(t,s,a)};ks.useRef=function(t){return xr.current.useRef(t)};ks.useState=function(t){return xr.current.useState(t)};ks.useSyncExternalStore=function(t,s,a){return xr.current.useSyncExternalStore(t,s,a)};ks.useTransition=function(){return xr.current.useTransition()};ks.version="18.3.1";uN.exports=ks;var m=uN.exports;const Fe=dN(m),S0=A6({__proto__:null,default:Fe},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W6=m,H6=Symbol.for("react.element"),G6=Symbol.for("react.fragment"),q6=Object.prototype.hasOwnProperty,J6=W6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K6={key:!0,ref:!0,__self:!0,__source:!0};function jN(t,s,a){var r,n={},l=null,i=null;a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(r in s)q6.call(s,r)&&!K6.hasOwnProperty(r)&&(n[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:H6,type:t,key:l,ref:i,props:n,_owner:J6.current}}Zx.Fragment=G6;Zx.jsx=jN;Zx.jsxs=jN;mN.exports=Zx;var e=mN.exports,NN={exports:{}},Wr={},bN={exports:{}},SN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(L,he){var ie=L.length;L.push(he);e:for(;0<ie;){var ke=ie-1>>>1,V=L[ke];if(0<n(V,he))L[ke]=he,L[ie]=V,ie=ke;else break e}}function a(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var he=L[0],ie=L.pop();if(ie!==he){L[0]=ie;e:for(var ke=0,V=L.length,O=V>>>1;ke<O;){var Y=2*(ke+1)-1,W=L[Y],ue=Y+1,U=L[ue];if(0>n(W,ie))ue<V&&0>n(U,W)?(L[ke]=U,L[ue]=ie,ke=ue):(L[ke]=W,L[Y]=ie,ke=Y);else if(ue<V&&0>n(U,ie))L[ke]=U,L[ue]=ie,ke=ue;else break e}}return he}function n(L,he){var ie=L.sortIndex-he.sortIndex;return ie!==0?ie:L.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],u=1,x=null,p=3,h=!1,y=!1,f=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(L){for(var he=a(d);he!==null;){if(he.callback===null)r(d);else if(he.startTime<=L)r(d),he.sortIndex=he.expirationTime,s(c,he);else break;he=a(d)}}function N(L){if(f=!1,j(L),!y)if(a(c)!==null)y=!0,me(E);else{var he=a(d);he!==null&&H(N,he.startTime-L)}}function E(L,he){y=!1,f&&(f=!1,w(A),A=-1),h=!0;var ie=p;try{for(j(he),x=a(c);x!==null&&(!(x.expirationTime>he)||L&&!X());){var ke=x.callback;if(typeof ke=="function"){x.callback=null,p=x.priorityLevel;var V=ke(x.expirationTime<=he);he=t.unstable_now(),typeof V=="function"?x.callback=V:x===a(c)&&r(c),j(he)}else r(c);x=a(c)}if(x!==null)var O=!0;else{var Y=a(d);Y!==null&&H(N,Y.startTime-he),O=!1}return O}finally{x=null,p=ie,h=!1}}var C=!1,k=null,A=-1,T=5,M=-1;function X(){return!(t.unstable_now()-M<T)}function ne(){if(k!==null){var L=t.unstable_now();M=L;var he=!0;try{he=k(!0,L)}finally{he?Q():(C=!1,k=null)}}else C=!1}var Q;if(typeof g=="function")Q=function(){g(ne)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ge=oe.port2;oe.port1.onmessage=ne,Q=function(){ge.postMessage(null)}}else Q=function(){v(ne,0)};function me(L){k=L,C||(C=!0,Q())}function H(L,he){A=v(function(){L(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){y||h||(y=!0,me(E))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var he=3;break;default:he=p}var ie=p;p=he;try{return L()}finally{p=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,he){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ie=p;p=L;try{return he()}finally{p=ie}},t.unstable_scheduleCallback=function(L,he,ie){var ke=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ke+ie:ke):ie=ke,L){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ie+V,L={id:u++,callback:he,priorityLevel:L,startTime:ie,expirationTime:V,sortIndex:-1},ie>ke?(L.sortIndex=ie,s(d,L),a(c)===null&&L===a(d)&&(f?(w(A),A=-1):f=!0,H(N,ie-ke))):(L.sortIndex=V,s(c,L),y||h||(y=!0,me(E))),L},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(L){var he=p;return function(){var ie=p;p=he;try{return L.apply(this,arguments)}finally{p=ie}}}})(SN);bN.exports=SN;var X6=bN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q6=m,Br=X6;function St(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CN=new Set,Wd={};function bo(t,s){Ac(t,s),Ac(t+"Capture",s)}function Ac(t,s){for(Wd[t]=s,t=0;t<s.length;t++)CN.add(s[t])}var vl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qp=Object.prototype.hasOwnProperty,Z6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iv={},Rv={};function ek(t){return Qp.call(Rv,t)?!0:Qp.call(Iv,t)?!1:Z6.test(t)?Rv[t]=!0:(Iv[t]=!0,!1)}function tk(t,s,a,r){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sk(t,s,a,r){if(s===null||typeof s>"u"||tk(t,s,a,r))return!0;if(r)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function hr(t,s,a,r,n,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var Ya={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ya[t]=new hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Ya[s]=new hr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ya[t]=new hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ya[t]=new hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ya[t]=new hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ya[t]=new hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ya[t]=new hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ya[t]=new hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ya[t]=new hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var C0=/[\-:]([a-z])/g;function k0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(C0,k0);Ya[s]=new hr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(C0,k0);Ya[s]=new hr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(C0,k0);Ya[s]=new hr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ya[t]=new hr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ya.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ya[t]=new hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function E0(t,s,a,r){var n=Ya.hasOwnProperty(s)?Ya[s]:null;(n!==null?n.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(sk(s,a,n,r)&&(a=null),r||n===null?ek(s)&&(a===null?t.removeAttribute(s):t.setAttribute(s,""+a)):n.mustUseProperty?t[n.propertyName]=a===null?n.type===3?!1:"":a:(s=n.attributeName,r=n.attributeNamespace,a===null?t.removeAttribute(s):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,r?t.setAttributeNS(r,s,a):t.setAttribute(s,a))))}var _l=Q6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Km=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Yo=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),Zp=Symbol.for("react.profiler"),kN=Symbol.for("react.provider"),EN=Symbol.for("react.context"),A0=Symbol.for("react.forward_ref"),ef=Symbol.for("react.suspense"),tf=Symbol.for("react.suspense_list"),_0=Symbol.for("react.memo"),Yl=Symbol.for("react.lazy"),DN=Symbol.for("react.offscreen"),Ov=Symbol.iterator;function td(t){return t===null||typeof t!="object"?null:(t=Ov&&t[Ov]||t["@@iterator"],typeof t=="function"?t:null)}var da=Object.assign,Hh;function wd(t){if(Hh===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Hh=s&&s[1]||""}return`
`+Hh+t}var Gh=!1;function qh(t,s){if(!t||Gh)return"";Gh=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var r=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){r=d}t.call(s.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),l=r.stack.split(`
`),i=n.length-1,o=l.length-1;1<=i&&0<=o&&n[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||n[i]!==l[o]){var c=`
`+n[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=o);break}}}finally{Gh=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?wd(t):""}function ak(t){switch(t.tag){case 5:return wd(t.type);case 16:return wd("Lazy");case 13:return wd("Suspense");case 19:return wd("SuspenseList");case 0:case 2:case 15:return t=qh(t.type,!1),t;case 11:return t=qh(t.type.render,!1),t;case 1:return t=qh(t.type,!0),t;default:return""}}function sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yo:return"Fragment";case Vo:return"Portal";case Zp:return"Profiler";case D0:return"StrictMode";case ef:return"Suspense";case tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EN:return(t.displayName||"Context")+".Consumer";case kN:return(t._context.displayName||"Context")+".Provider";case A0:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _0:return s=t.displayName||null,s!==null?s:sf(t.type)||"Memo";case Yl:s=t._payload,t=t._init;try{return sf(t(s))}catch{}}return null}function rk(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sf(s);case 8:return s===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AN(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nk(t){var s=AN(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,l=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Xm(t){t._valueTracker||(t._valueTracker=nk(t))}function _N(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),r="";return t&&(r=AN(t)?t.checked?"true":"false":t.value),t=r,t!==a?(s.setValue(t),!0):!1}function tx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function af(t,s){var a=s.checked;return da({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function Lv(t,s){var a=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;a=vi(s.value!=null?s.value:a),t._wrapperState={initialChecked:r,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function PN(t,s){s=s.checked,s!=null&&E0(t,"checked",s,!1)}function rf(t,s){PN(t,s);var a=vi(s.value),r=s.type;if(a!=null)r==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?nf(t,s.type,a):s.hasOwnProperty("defaultValue")&&nf(t,s.type,vi(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function $v(t,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,a||s===t.value||(t.value=s),t.defaultValue=s}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function nf(t,s,a){(s!=="number"||tx(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var yd=Array.isArray;function ac(t,s,a,r){if(t=t.options,s){s={};for(var n=0;n<a.length;n++)s["$"+a[n]]=!0;for(a=0;a<t.length;a++)n=s.hasOwnProperty("$"+t[a].value),t[a].selected!==n&&(t[a].selected=n),n&&r&&(t[a].defaultSelected=!0)}else{for(a=""+vi(a),s=null,n=0;n<t.length;n++){if(t[n].value===a){t[n].selected=!0,r&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function lf(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(St(91));return da({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uv(t,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(St(92));if(yd(a)){if(1<a.length)throw Error(St(93));a=a[0]}s=a}s==null&&(s=""),a=s}t._wrapperState={initialValue:vi(a)}}function TN(t,s){var a=vi(s.value),r=vi(s.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),s.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),r!=null&&(t.defaultValue=""+r)}function Bv(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function FN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function of(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?FN(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qm,MN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,r,n){MSApp.execUnsafeLocalFunction(function(){return t(s,a,r,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Qm=Qm||document.createElement("div"),Qm.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Qm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Hd(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Dd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lk=["Webkit","ms","Moz","O"];Object.keys(Dd).forEach(function(t){lk.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Dd[s]=Dd[t]})});function IN(t,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Dd.hasOwnProperty(t)&&Dd[t]?(""+s).trim():s+"px"}function RN(t,s){t=t.style;for(var a in s)if(s.hasOwnProperty(a)){var r=a.indexOf("--")===0,n=IN(a,s[a],r);a==="float"&&(a="cssFloat"),r?t.setProperty(a,n):t[a]=n}}var ik=da({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cf(t,s){if(s){if(ik[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(St(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(St(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(St(61))}if(s.style!=null&&typeof s.style!="object")throw Error(St(62))}}function df(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mf=null;function P0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uf=null,rc=null,nc=null;function zv(t){if(t=Am(t)){if(typeof uf!="function")throw Error(St(280));var s=t.stateNode;s&&(s=rh(s),uf(t.stateNode,t.type,s))}}function ON(t){rc?nc?nc.push(t):nc=[t]:rc=t}function LN(){if(rc){var t=rc,s=nc;if(nc=rc=null,zv(t),s)for(t=0;t<s.length;t++)zv(s[t])}}function $N(t,s){return t(s)}function UN(){}var Jh=!1;function BN(t,s,a){if(Jh)return t(s,a);Jh=!0;try{return $N(t,s,a)}finally{Jh=!1,(rc!==null||nc!==null)&&(UN(),LN())}}function Gd(t,s){var a=t.stateNode;if(a===null)return null;var r=rh(a);if(r===null)return null;a=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(St(231,s,typeof a));return a}var xf=!1;if(vl)try{var sd={};Object.defineProperty(sd,"passive",{get:function(){xf=!0}}),window.addEventListener("test",sd,sd),window.removeEventListener("test",sd,sd)}catch{xf=!1}function ok(t,s,a,r,n,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(a,d)}catch(u){this.onError(u)}}var Ad=!1,sx=null,ax=!1,hf=null,ck={onError:function(t){Ad=!0,sx=t}};function dk(t,s,a,r,n,l,i,o,c){Ad=!1,sx=null,ok.apply(ck,arguments)}function mk(t,s,a,r,n,l,i,o,c){if(dk.apply(this,arguments),Ad){if(Ad){var d=sx;Ad=!1,sx=null}else throw Error(St(198));ax||(ax=!0,hf=d)}}function So(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function zN(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Vv(t){if(So(t)!==t)throw Error(St(188))}function uk(t){var s=t.alternate;if(!s){if(s=So(t),s===null)throw Error(St(188));return s!==t?null:t}for(var a=t,r=s;;){var n=a.return;if(n===null)break;var l=n.alternate;if(l===null){if(r=n.return,r!==null){a=r;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===a)return Vv(n),t;if(l===r)return Vv(n),s;l=l.sibling}throw Error(St(188))}if(a.return!==r.return)a=n,r=l;else{for(var i=!1,o=n.child;o;){if(o===a){i=!0,a=n,r=l;break}if(o===r){i=!0,r=n,a=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===a){i=!0,a=l,r=n;break}if(o===r){i=!0,r=l,a=n;break}o=o.sibling}if(!i)throw Error(St(189))}}if(a.alternate!==r)throw Error(St(190))}if(a.tag!==3)throw Error(St(188));return a.stateNode.current===a?t:s}function VN(t){return t=uk(t),t!==null?YN(t):null}function YN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=YN(t);if(s!==null)return s;t=t.sibling}return null}var WN=Br.unstable_scheduleCallback,Yv=Br.unstable_cancelCallback,xk=Br.unstable_shouldYield,hk=Br.unstable_requestPaint,ga=Br.unstable_now,pk=Br.unstable_getCurrentPriorityLevel,T0=Br.unstable_ImmediatePriority,HN=Br.unstable_UserBlockingPriority,rx=Br.unstable_NormalPriority,fk=Br.unstable_LowPriority,GN=Br.unstable_IdlePriority,eh=null,qn=null;function gk(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(eh,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:yk,vk=Math.log,wk=Math.LN2;function yk(t){return t>>>=0,t===0?32:31-(vk(t)/wk|0)|0}var Zm=64,eu=4194304;function jd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nx(t,s){var a=t.pendingLanes;if(a===0)return 0;var r=0,n=t.suspendedLanes,l=t.pingedLanes,i=a&268435455;if(i!==0){var o=i&~n;o!==0?r=jd(o):(l&=i,l!==0&&(r=jd(l)))}else i=a&~n,i!==0?r=jd(i):l!==0&&(r=jd(l));if(r===0)return 0;if(s!==0&&s!==r&&!(s&n)&&(n=r&-r,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if(r&4&&(r|=a&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=r;0<s;)a=31-kn(s),n=1<<a,r|=t[a],s&=~n;return r}function jk(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nk(t,s){for(var a=t.suspendedLanes,r=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-kn(l),o=1<<i,c=n[i];c===-1?(!(o&a)||o&r)&&(n[i]=jk(o,s)):c<=s&&(t.expiredLanes|=o),l&=~o}}function pf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qN(){var t=Zm;return Zm<<=1,!(Zm&4194240)&&(Zm=64),t}function Kh(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Em(t,s,a){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-kn(s),t[s]=a}function bk(t,s){var a=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<a;){var n=31-kn(a),l=1<<n;s[n]=0,r[n]=-1,t[n]=-1,a&=~l}}function F0(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var r=31-kn(a),n=1<<r;n&s|t[r]&s&&(t[r]|=s),a&=~n}}var Ws=0;function JN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var KN,M0,XN,QN,ZN,ff=!1,tu=[],oi=null,ci=null,di=null,qd=new Map,Jd=new Map,Hl=[],Sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wv(t,s){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":qd.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jd.delete(s.pointerId)}}function ad(t,s,a,r,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:a,eventSystemFlags:r,nativeEvent:l,targetContainers:[n]},s!==null&&(s=Am(s),s!==null&&M0(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function Ck(t,s,a,r,n){switch(s){case"focusin":return oi=ad(oi,t,s,a,r,n),!0;case"dragenter":return ci=ad(ci,t,s,a,r,n),!0;case"mouseover":return di=ad(di,t,s,a,r,n),!0;case"pointerover":var l=n.pointerId;return qd.set(l,ad(qd.get(l)||null,t,s,a,r,n)),!0;case"gotpointercapture":return l=n.pointerId,Jd.set(l,ad(Jd.get(l)||null,t,s,a,r,n)),!0}return!1}function eb(t){var s=Wi(t.target);if(s!==null){var a=So(s);if(a!==null){if(s=a.tag,s===13){if(s=zN(a),s!==null){t.blockedOn=s,ZN(t.priority,function(){XN(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ru(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=gf(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var r=new a.constructor(a.type,a);mf=r,a.target.dispatchEvent(r),mf=null}else return s=Am(a),s!==null&&M0(s),t.blockedOn=a,!1;s.shift()}return!0}function Hv(t,s,a){Ru(t)&&a.delete(s)}function kk(){ff=!1,oi!==null&&Ru(oi)&&(oi=null),ci!==null&&Ru(ci)&&(ci=null),di!==null&&Ru(di)&&(di=null),qd.forEach(Hv),Jd.forEach(Hv)}function rd(t,s){t.blockedOn===s&&(t.blockedOn=null,ff||(ff=!0,Br.unstable_scheduleCallback(Br.unstable_NormalPriority,kk)))}function Kd(t){function s(n){return rd(n,t)}if(0<tu.length){rd(tu[0],t);for(var a=1;a<tu.length;a++){var r=tu[a];r.blockedOn===t&&(r.blockedOn=null)}}for(oi!==null&&rd(oi,t),ci!==null&&rd(ci,t),di!==null&&rd(di,t),qd.forEach(s),Jd.forEach(s),a=0;a<Hl.length;a++)r=Hl[a],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hl.length&&(a=Hl[0],a.blockedOn===null);)eb(a),a.blockedOn===null&&Hl.shift()}var lc=_l.ReactCurrentBatchConfig,lx=!0;function Ek(t,s,a,r){var n=Ws,l=lc.transition;lc.transition=null;try{Ws=1,I0(t,s,a,r)}finally{Ws=n,lc.transition=l}}function Dk(t,s,a,r){var n=Ws,l=lc.transition;lc.transition=null;try{Ws=4,I0(t,s,a,r)}finally{Ws=n,lc.transition=l}}function I0(t,s,a,r){if(lx){var n=gf(t,s,a,r);if(n===null)lp(t,s,r,ix,a),Wv(t,r);else if(Ck(n,t,s,a,r))r.stopPropagation();else if(Wv(t,r),s&4&&-1<Sk.indexOf(t)){for(;n!==null;){var l=Am(n);if(l!==null&&KN(l),l=gf(t,s,a,r),l===null&&lp(t,s,r,ix,a),l===n)break;n=l}n!==null&&r.stopPropagation()}else lp(t,s,r,null,a)}}var ix=null;function gf(t,s,a,r){if(ix=null,t=P0(r),t=Wi(t),t!==null)if(s=So(t),s===null)t=null;else if(a=s.tag,a===13){if(t=zN(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ix=t,null}function tb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pk()){case T0:return 1;case HN:return 4;case rx:case fk:return 16;case GN:return 536870912;default:return 16}default:return 16}}var Zl=null,R0=null,Ou=null;function sb(){if(Ou)return Ou;var t,s=R0,a=s.length,r,n="value"in Zl?Zl.value:Zl.textContent,l=n.length;for(t=0;t<a&&s[t]===n[t];t++);var i=a-t;for(r=1;r<=i&&s[a-r]===n[l-r];r++);return Ou=n.slice(t,1<r?1-r:void 0)}function Lu(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function Gv(){return!1}function Hr(t){function s(a,r,n,l,i){this._reactName=a,this._targetInst=n,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(a=t[o],this[o]=a?a(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?su:Gv,this.isPropagationStopped=Gv,this}return da(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),s}var Vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O0=Hr(Vc),Dm=da({},Vc,{view:0,detail:0}),Ak=Hr(Dm),Xh,Qh,nd,th=da({},Dm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nd&&(nd&&t.type==="mousemove"?(Xh=t.screenX-nd.screenX,Qh=t.screenY-nd.screenY):Qh=Xh=0,nd=t),Xh)},movementY:function(t){return"movementY"in t?t.movementY:Qh}}),qv=Hr(th),_k=da({},th,{dataTransfer:0}),Pk=Hr(_k),Tk=da({},Dm,{relatedTarget:0}),Zh=Hr(Tk),Fk=da({},Vc,{animationName:0,elapsedTime:0,pseudoElement:0}),Mk=Hr(Fk),Ik=da({},Vc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rk=Hr(Ik),Ok=da({},Vc,{data:0}),Jv=Hr(Ok),Lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$k={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bk(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Uk[t])?!!s[t]:!1}function L0(){return Bk}var zk=da({},Dm,{key:function(t){if(t.key){var s=Lk[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$k[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L0,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vk=Hr(zk),Yk=da({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kv=Hr(Yk),Wk=da({},Dm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L0}),Hk=Hr(Wk),Gk=da({},Vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),qk=Hr(Gk),Jk=da({},th,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kk=Hr(Jk),Xk=[9,13,27,32],$0=vl&&"CompositionEvent"in window,_d=null;vl&&"documentMode"in document&&(_d=document.documentMode);var Qk=vl&&"TextEvent"in window&&!_d,ab=vl&&(!$0||_d&&8<_d&&11>=_d),Xv=" ",Qv=!1;function rb(t,s){switch(t){case"keyup":return Xk.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function Zk(t,s){switch(t){case"compositionend":return nb(s);case"keypress":return s.which!==32?null:(Qv=!0,Xv);case"textInput":return t=s.data,t===Xv&&Qv?null:t;default:return null}}function e5(t,s){if(Wo)return t==="compositionend"||!$0&&rb(t,s)?(t=sb(),Ou=R0=Zl=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ab&&s.locale!=="ko"?null:s.data;default:return null}}var t5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zv(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!t5[t.type]:s==="textarea"}function lb(t,s,a,r){ON(r),s=ox(s,"onChange"),0<s.length&&(a=new O0("onChange","change",null,a,r),t.push({event:a,listeners:s}))}var Pd=null,Xd=null;function s5(t){gb(t,0)}function sh(t){var s=qo(t);if(_N(s))return t}function a5(t,s){if(t==="change")return s}var ib=!1;if(vl){var ep;if(vl){var tp="oninput"in document;if(!tp){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),tp=typeof ew.oninput=="function"}ep=tp}else ep=!1;ib=ep&&(!document.documentMode||9<document.documentMode)}function tw(){Pd&&(Pd.detachEvent("onpropertychange",ob),Xd=Pd=null)}function ob(t){if(t.propertyName==="value"&&sh(Xd)){var s=[];lb(s,Xd,t,P0(t)),BN(s5,s)}}function r5(t,s,a){t==="focusin"?(tw(),Pd=s,Xd=a,Pd.attachEvent("onpropertychange",ob)):t==="focusout"&&tw()}function n5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sh(Xd)}function l5(t,s){if(t==="click")return sh(s)}function i5(t,s){if(t==="input"||t==="change")return sh(s)}function o5(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var An=typeof Object.is=="function"?Object.is:o5;function Qd(t,s){if(An(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),r=Object.keys(s);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var n=a[r];if(!Qp.call(s,n)||!An(t[n],s[n]))return!1}return!0}function sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function aw(t,s){var a=sw(t);t=0;for(var r;a;){if(a.nodeType===3){if(r=t+a.textContent.length,t<=s&&r>=s)return{node:a,offset:s-t};t=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sw(a)}}function cb(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?cb(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function db(){for(var t=window,s=tx();s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=tx(t.document)}return s}function U0(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function c5(t){var s=db(),a=t.focusedElem,r=t.selectionRange;if(s!==a&&a&&a.ownerDocument&&cb(a.ownerDocument.documentElement,a)){if(r!==null&&U0(a)){if(s=r.start,t=r.end,t===void 0&&(t=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(t,a.value.length);else if(t=(s=a.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=a.textContent.length,l=Math.min(r.start,n);r=r.end===void 0?l:Math.min(r.end,n),!t.extend&&l>r&&(n=r,r=l,l=n),n=aw(a,l);var i=aw(a,r);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>r?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=a;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)t=s[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d5=vl&&"documentMode"in document&&11>=document.documentMode,Ho=null,vf=null,Td=null,wf=!1;function rw(t,s,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wf||Ho==null||Ho!==tx(r)||(r=Ho,"selectionStart"in r&&U0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Td&&Qd(Td,r)||(Td=r,r=ox(vf,"onSelect"),0<r.length&&(s=new O0("onSelect","select",null,s,a),t.push({event:s,listeners:r}),s.target=Ho)))}function au(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Go={animationend:au("Animation","AnimationEnd"),animationiteration:au("Animation","AnimationIteration"),animationstart:au("Animation","AnimationStart"),transitionend:au("Transition","TransitionEnd")},sp={},mb={};vl&&(mb=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function ah(t){if(sp[t])return sp[t];if(!Go[t])return t;var s=Go[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in mb)return sp[t]=s[a];return t}var ub=ah("animationend"),xb=ah("animationiteration"),hb=ah("animationstart"),pb=ah("transitionend"),fb=new Map,nw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,s){fb.set(t,s),bo(s,[t])}for(var ap=0;ap<nw.length;ap++){var rp=nw[ap],m5=rp.toLowerCase(),u5=rp[0].toUpperCase()+rp.slice(1);Di(m5,"on"+u5)}Di(ub,"onAnimationEnd");Di(xb,"onAnimationIteration");Di(hb,"onAnimationStart");Di("dblclick","onDoubleClick");Di("focusin","onFocus");Di("focusout","onBlur");Di(pb,"onTransitionEnd");Ac("onMouseEnter",["mouseout","mouseover"]);Ac("onMouseLeave",["mouseout","mouseover"]);Ac("onPointerEnter",["pointerout","pointerover"]);Ac("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function lw(t,s,a){var r=t.type||"unknown-event";t.currentTarget=a,mk(r,s,void 0,t),t.currentTarget=null}function gb(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var r=t[a],n=r.event;r=r.listeners;e:{var l=void 0;if(s)for(var i=r.length-1;0<=i;i--){var o=r[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&n.isPropagationStopped())break e;lw(n,o,d),l=c}else for(i=0;i<r.length;i++){if(o=r[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&n.isPropagationStopped())break e;lw(n,o,d),l=c}}}if(ax)throw t=hf,ax=!1,hf=null,t}function sa(t,s){var a=s[Sf];a===void 0&&(a=s[Sf]=new Set);var r=t+"__bubble";a.has(r)||(vb(s,t,2,!1),a.add(r))}function np(t,s,a){var r=0;s&&(r|=4),vb(a,t,r,s)}var ru="_reactListening"+Math.random().toString(36).slice(2);function Zd(t){if(!t[ru]){t[ru]=!0,CN.forEach(function(a){a!=="selectionchange"&&(x5.has(a)||np(a,!1,t),np(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ru]||(s[ru]=!0,np("selectionchange",!1,s))}}function vb(t,s,a,r){switch(tb(s)){case 1:var n=Ek;break;case 4:n=Dk;break;default:n=I0}a=n.bind(null,s,a,t),n=void 0,!xf||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),r?n!==void 0?t.addEventListener(s,a,{capture:!0,passive:n}):t.addEventListener(s,a,!0):n!==void 0?t.addEventListener(s,a,{passive:n}):t.addEventListener(s,a,!1)}function lp(t,s,a,r,n){var l=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;o!==null;){if(i=Wi(o),i===null)return;if(c=i.tag,c===5||c===6){r=l=i;continue e}o=o.parentNode}}r=r.return}BN(function(){var d=l,u=P0(a),x=[];e:{var p=fb.get(t);if(p!==void 0){var h=O0,y=t;switch(t){case"keypress":if(Lu(a)===0)break e;case"keydown":case"keyup":h=Vk;break;case"focusin":y="focus",h=Zh;break;case"focusout":y="blur",h=Zh;break;case"beforeblur":case"afterblur":h=Zh;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Pk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Hk;break;case ub:case xb:case hb:h=Mk;break;case pb:h=qk;break;case"scroll":h=Ak;break;case"wheel":h=Kk;break;case"copy":case"cut":case"paste":h=Rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Kv}var f=(s&4)!==0,v=!f&&t==="scroll",w=f?p!==null?p+"Capture":null:p;f=[];for(var g=d,j;g!==null;){j=g;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,w!==null&&(N=Gd(g,w),N!=null&&f.push(em(g,N,j)))),v)break;g=g.return}0<f.length&&(p=new h(p,y,null,a,u),x.push({event:p,listeners:f}))}}if(!(s&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&a!==mf&&(y=a.relatedTarget||a.fromElement)&&(Wi(y)||y[wl]))break e;if((h||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,h?(y=a.relatedTarget||a.toElement,h=d,y=y?Wi(y):null,y!==null&&(v=So(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=d),h!==y)){if(f=qv,N="onMouseLeave",w="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(f=Kv,N="onPointerLeave",w="onPointerEnter",g="pointer"),v=h==null?p:qo(h),j=y==null?p:qo(y),p=new f(N,g+"leave",h,a,u),p.target=v,p.relatedTarget=j,N=null,Wi(u)===d&&(f=new f(w,g+"enter",y,a,u),f.target=j,f.relatedTarget=v,N=f),v=N,h&&y)t:{for(f=h,w=y,g=0,j=f;j;j=To(j))g++;for(j=0,N=w;N;N=To(N))j++;for(;0<g-j;)f=To(f),g--;for(;0<j-g;)w=To(w),j--;for(;g--;){if(f===w||w!==null&&f===w.alternate)break t;f=To(f),w=To(w)}f=null}else f=null;h!==null&&iw(x,p,h,f,!1),y!==null&&v!==null&&iw(x,v,y,f,!0)}}e:{if(p=d?qo(d):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var E=a5;else if(Zv(p))if(ib)E=i5;else{E=n5;var C=r5}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=l5);if(E&&(E=E(t,d))){lb(x,E,a,u);break e}C&&C(t,p,d),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&nf(p,"number",p.value)}switch(C=d?qo(d):window,t){case"focusin":(Zv(C)||C.contentEditable==="true")&&(Ho=C,vf=d,Td=null);break;case"focusout":Td=vf=Ho=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,rw(x,a,u);break;case"selectionchange":if(d5)break;case"keydown":case"keyup":rw(x,a,u)}var k;if($0)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Wo?rb(t,a)&&(A="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(A="onCompositionStart");A&&(ab&&a.locale!=="ko"&&(Wo||A!=="onCompositionStart"?A==="onCompositionEnd"&&Wo&&(k=sb()):(Zl=u,R0="value"in Zl?Zl.value:Zl.textContent,Wo=!0)),C=ox(d,A),0<C.length&&(A=new Jv(A,t,null,a,u),x.push({event:A,listeners:C}),k?A.data=k:(k=nb(a),k!==null&&(A.data=k)))),(k=Qk?Zk(t,a):e5(t,a))&&(d=ox(d,"onBeforeInput"),0<d.length&&(u=new Jv("onBeforeInput","beforeinput",null,a,u),x.push({event:u,listeners:d}),u.data=k))}gb(x,s)})}function em(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ox(t,s){for(var a=s+"Capture",r=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Gd(t,a),l!=null&&r.unshift(em(t,l,n)),l=Gd(t,s),l!=null&&r.push(em(t,l,n))),t=t.return}return r}function To(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iw(t,s,a,r,n){for(var l=s._reactName,i=[];a!==null&&a!==r;){var o=a,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,n?(c=Gd(a,l),c!=null&&i.unshift(em(a,c,o))):n||(c=Gd(a,l),c!=null&&i.push(em(a,c,o)))),a=a.return}i.length!==0&&t.push({event:s,listeners:i})}var h5=/\r\n?/g,p5=/\u0000|\uFFFD/g;function ow(t){return(typeof t=="string"?t:""+t).replace(h5,`
`).replace(p5,"")}function nu(t,s,a){if(s=ow(s),ow(t)!==s&&a)throw Error(St(425))}function cx(){}var yf=null,jf=null;function Nf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bf=typeof setTimeout=="function"?setTimeout:void 0,f5=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,g5=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(t){return cw.resolve(null).then(t).catch(v5)}:bf;function v5(t){setTimeout(function(){throw t})}function ip(t,s){var a=s,r=0;do{var n=a.nextSibling;if(t.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){t.removeChild(n),Kd(s);return}r--}else a!=="$"&&a!=="$?"&&a!=="$!"||r++;a=n}while(a);Kd(s)}function mi(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function dw(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}var Yc=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Yc,tm="__reactProps$"+Yc,wl="__reactContainer$"+Yc,Sf="__reactEvents$"+Yc,w5="__reactListeners$"+Yc,y5="__reactHandles$"+Yc;function Wi(t){var s=t[Vn];if(s)return s;for(var a=t.parentNode;a;){if(s=a[wl]||a[Vn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=dw(t);t!==null;){if(a=t[Vn])return a;t=dw(t)}return s}t=a,a=t.parentNode}return null}function Am(t){return t=t[Vn]||t[wl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(St(33))}function rh(t){return t[tm]||null}var Cf=[],Jo=-1;function Ai(t){return{current:t}}function ra(t){0>Jo||(t.current=Cf[Jo],Cf[Jo]=null,Jo--)}function Zs(t,s){Jo++,Cf[Jo]=t.current,t.current=s}var wi={},tr=Ai(wi),jr=Ai(!1),no=wi;function _c(t,s){var a=t.type.contextTypes;if(!a)return wi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in a)n[l]=s[l];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function Nr(t){return t=t.childContextTypes,t!=null}function dx(){ra(jr),ra(tr)}function mw(t,s,a){if(tr.current!==wi)throw Error(St(168));Zs(tr,s),Zs(jr,a)}function wb(t,s,a){var r=t.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return a;r=r.getChildContext();for(var n in r)if(!(n in s))throw Error(St(108,rk(t)||"Unknown",n));return da({},a,r)}function mx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,no=tr.current,Zs(tr,t),Zs(jr,jr.current),!0}function uw(t,s,a){var r=t.stateNode;if(!r)throw Error(St(169));a?(t=wb(t,s,no),r.__reactInternalMemoizedMergedChildContext=t,ra(jr),ra(tr),Zs(tr,t)):ra(jr),Zs(jr,a)}var dl=null,nh=!1,op=!1;function yb(t){dl===null?dl=[t]:dl.push(t)}function j5(t){nh=!0,yb(t)}function _i(){if(!op&&dl!==null){op=!0;var t=0,s=Ws;try{var a=dl;for(Ws=1;t<a.length;t++){var r=a[t];do r=r(!0);while(r!==null)}dl=null,nh=!1}catch(n){throw dl!==null&&(dl=dl.slice(t+1)),WN(T0,_i),n}finally{Ws=s,op=!1}}return null}var Ko=[],Xo=0,ux=null,xx=0,Qr=[],Zr=0,lo=null,ul=1,xl="";function Bi(t,s){Ko[Xo++]=xx,Ko[Xo++]=ux,ux=t,xx=s}function jb(t,s,a){Qr[Zr++]=ul,Qr[Zr++]=xl,Qr[Zr++]=lo,lo=t;var r=ul;t=xl;var n=32-kn(r)-1;r&=~(1<<n),a+=1;var l=32-kn(s)+n;if(30<l){var i=n-n%5;l=(r&(1<<i)-1).toString(32),r>>=i,n-=i,ul=1<<32-kn(s)+n|a<<n|r,xl=l+t}else ul=1<<l|a<<n|r,xl=t}function B0(t){t.return!==null&&(Bi(t,1),jb(t,1,0))}function z0(t){for(;t===ux;)ux=Ko[--Xo],Ko[Xo]=null,xx=Ko[--Xo],Ko[Xo]=null;for(;t===lo;)lo=Qr[--Zr],Qr[Zr]=null,xl=Qr[--Zr],Qr[Zr]=null,ul=Qr[--Zr],Qr[Zr]=null}var Lr=null,Rr=null,la=!1,bn=null;function Nb(t,s){var a=en(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=t,s=t.deletions,s===null?(t.deletions=[a],t.flags|=16):s.push(a)}function xw(t,s){switch(t.tag){case 5:var a=t.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Lr=t,Rr=mi(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Lr=t,Rr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=lo!==null?{id:ul,overflow:xl}:null,t.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=en(18,null,null,0),a.stateNode=s,a.return=t,t.child=a,Lr=t,Rr=null,!0):!1;default:return!1}}function kf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ef(t){if(la){var s=Rr;if(s){var a=s;if(!xw(t,s)){if(kf(t))throw Error(St(418));s=mi(a.nextSibling);var r=Lr;s&&xw(t,s)?Nb(r,a):(t.flags=t.flags&-4097|2,la=!1,Lr=t)}}else{if(kf(t))throw Error(St(418));t.flags=t.flags&-4097|2,la=!1,Lr=t}}}function hw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lr=t}function lu(t){if(t!==Lr)return!1;if(!la)return hw(t),la=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Nf(t.type,t.memoizedProps)),s&&(s=Rr)){if(kf(t))throw bb(),Error(St(418));for(;s;)Nb(t,s),s=mi(s.nextSibling)}if(hw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(St(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(s===0){Rr=mi(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}t=t.nextSibling}Rr=null}}else Rr=Lr?mi(t.stateNode.nextSibling):null;return!0}function bb(){for(var t=Rr;t;)t=mi(t.nextSibling)}function Pc(){Rr=Lr=null,la=!1}function V0(t){bn===null?bn=[t]:bn.push(t)}var N5=_l.ReactCurrentBatchConfig;function ld(t,s,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(St(309));var r=a.stateNode}if(!r)throw Error(St(147,t));var n=r,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=n.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(St(284));if(!a._owner)throw Error(St(290,t))}return t}function iu(t,s){throw t=Object.prototype.toString.call(s),Error(St(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function pw(t){var s=t._init;return s(t._payload)}function Sb(t){function s(w,g){if(t){var j=w.deletions;j===null?(w.deletions=[g],w.flags|=16):j.push(g)}}function a(w,g){if(!t)return null;for(;g!==null;)s(w,g),g=g.sibling;return null}function r(w,g){for(w=new Map;g!==null;)g.key!==null?w.set(g.key,g):w.set(g.index,g),g=g.sibling;return w}function n(w,g){return w=pi(w,g),w.index=0,w.sibling=null,w}function l(w,g,j){return w.index=j,t?(j=w.alternate,j!==null?(j=j.index,j<g?(w.flags|=2,g):j):(w.flags|=2,g)):(w.flags|=1048576,g)}function i(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,g,j,N){return g===null||g.tag!==6?(g=pp(j,w.mode,N),g.return=w,g):(g=n(g,j),g.return=w,g)}function c(w,g,j,N){var E=j.type;return E===Yo?u(w,g,j.props.children,N,j.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Yl&&pw(E)===g.type)?(N=n(g,j.props),N.ref=ld(w,g,j),N.return=w,N):(N=Wu(j.type,j.key,j.props,null,w.mode,N),N.ref=ld(w,g,j),N.return=w,N)}function d(w,g,j,N){return g===null||g.tag!==4||g.stateNode.containerInfo!==j.containerInfo||g.stateNode.implementation!==j.implementation?(g=fp(j,w.mode,N),g.return=w,g):(g=n(g,j.children||[]),g.return=w,g)}function u(w,g,j,N,E){return g===null||g.tag!==7?(g=to(j,w.mode,N,E),g.return=w,g):(g=n(g,j),g.return=w,g)}function x(w,g,j){if(typeof g=="string"&&g!==""||typeof g=="number")return g=pp(""+g,w.mode,j),g.return=w,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Km:return j=Wu(g.type,g.key,g.props,null,w.mode,j),j.ref=ld(w,null,g),j.return=w,j;case Vo:return g=fp(g,w.mode,j),g.return=w,g;case Yl:var N=g._init;return x(w,N(g._payload),j)}if(yd(g)||td(g))return g=to(g,w.mode,j,null),g.return=w,g;iu(w,g)}return null}function p(w,g,j,N){var E=g!==null?g.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return E!==null?null:o(w,g,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Km:return j.key===E?c(w,g,j,N):null;case Vo:return j.key===E?d(w,g,j,N):null;case Yl:return E=j._init,p(w,g,E(j._payload),N)}if(yd(j)||td(j))return E!==null?null:u(w,g,j,N,null);iu(w,j)}return null}function h(w,g,j,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(j)||null,o(g,w,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Km:return w=w.get(N.key===null?j:N.key)||null,c(g,w,N,E);case Vo:return w=w.get(N.key===null?j:N.key)||null,d(g,w,N,E);case Yl:var C=N._init;return h(w,g,j,C(N._payload),E)}if(yd(N)||td(N))return w=w.get(j)||null,u(g,w,N,E,null);iu(g,N)}return null}function y(w,g,j,N){for(var E=null,C=null,k=g,A=g=0,T=null;k!==null&&A<j.length;A++){k.index>A?(T=k,k=null):T=k.sibling;var M=p(w,k,j[A],N);if(M===null){k===null&&(k=T);break}t&&k&&M.alternate===null&&s(w,k),g=l(M,g,A),C===null?E=M:C.sibling=M,C=M,k=T}if(A===j.length)return a(w,k),la&&Bi(w,A),E;if(k===null){for(;A<j.length;A++)k=x(w,j[A],N),k!==null&&(g=l(k,g,A),C===null?E=k:C.sibling=k,C=k);return la&&Bi(w,A),E}for(k=r(w,k);A<j.length;A++)T=h(k,w,A,j[A],N),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?A:T.key),g=l(T,g,A),C===null?E=T:C.sibling=T,C=T);return t&&k.forEach(function(X){return s(w,X)}),la&&Bi(w,A),E}function f(w,g,j,N){var E=td(j);if(typeof E!="function")throw Error(St(150));if(j=E.call(j),j==null)throw Error(St(151));for(var C=E=null,k=g,A=g=0,T=null,M=j.next();k!==null&&!M.done;A++,M=j.next()){k.index>A?(T=k,k=null):T=k.sibling;var X=p(w,k,M.value,N);if(X===null){k===null&&(k=T);break}t&&k&&X.alternate===null&&s(w,k),g=l(X,g,A),C===null?E=X:C.sibling=X,C=X,k=T}if(M.done)return a(w,k),la&&Bi(w,A),E;if(k===null){for(;!M.done;A++,M=j.next())M=x(w,M.value,N),M!==null&&(g=l(M,g,A),C===null?E=M:C.sibling=M,C=M);return la&&Bi(w,A),E}for(k=r(w,k);!M.done;A++,M=j.next())M=h(k,w,A,M.value,N),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?A:M.key),g=l(M,g,A),C===null?E=M:C.sibling=M,C=M);return t&&k.forEach(function(ne){return s(w,ne)}),la&&Bi(w,A),E}function v(w,g,j,N){if(typeof j=="object"&&j!==null&&j.type===Yo&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Km:e:{for(var E=j.key,C=g;C!==null;){if(C.key===E){if(E=j.type,E===Yo){if(C.tag===7){a(w,C.sibling),g=n(C,j.props.children),g.return=w,w=g;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Yl&&pw(E)===C.type){a(w,C.sibling),g=n(C,j.props),g.ref=ld(w,C,j),g.return=w,w=g;break e}a(w,C);break}else s(w,C);C=C.sibling}j.type===Yo?(g=to(j.props.children,w.mode,N,j.key),g.return=w,w=g):(N=Wu(j.type,j.key,j.props,null,w.mode,N),N.ref=ld(w,g,j),N.return=w,w=N)}return i(w);case Vo:e:{for(C=j.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===j.containerInfo&&g.stateNode.implementation===j.implementation){a(w,g.sibling),g=n(g,j.children||[]),g.return=w,w=g;break e}else{a(w,g);break}else s(w,g);g=g.sibling}g=fp(j,w.mode,N),g.return=w,w=g}return i(w);case Yl:return C=j._init,v(w,g,C(j._payload),N)}if(yd(j))return y(w,g,j,N);if(td(j))return f(w,g,j,N);iu(w,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,g!==null&&g.tag===6?(a(w,g.sibling),g=n(g,j),g.return=w,w=g):(a(w,g),g=pp(j,w.mode,N),g.return=w,w=g),i(w)):a(w,g)}return v}var Tc=Sb(!0),Cb=Sb(!1),hx=Ai(null),px=null,Qo=null,Y0=null;function W0(){Y0=Qo=px=null}function H0(t){var s=hx.current;ra(hx),t._currentValue=s}function Df(t,s,a){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===a)break;t=t.return}}function ic(t,s){px=t,Y0=Qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(vr=!0),t.firstContext=null)}function ln(t){var s=t._currentValue;if(Y0!==t)if(t={context:t,memoizedValue:s,next:null},Qo===null){if(px===null)throw Error(St(308));Qo=t,px.dependencies={lanes:0,firstContext:t}}else Qo=Qo.next=t;return s}var Hi=null;function G0(t){Hi===null?Hi=[t]:Hi.push(t)}function kb(t,s,a,r){var n=s.interleaved;return n===null?(a.next=a,G0(s)):(a.next=n.next,n.next=a),s.interleaved=a,yl(t,r)}function yl(t,s){t.lanes|=s;var a=t.alternate;for(a!==null&&(a.lanes|=s),a=t,t=t.return;t!==null;)t.childLanes|=s,a=t.alternate,a!==null&&(a.childLanes|=s),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Wl=!1;function q0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eb(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hl(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ui(t,s,a){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ts&2){var n=r.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),r.pending=s,yl(t,a)}return n=r.interleaved,n===null?(s.next=s,G0(r)):(s.next=n.next,n.next=s),r.interleaved=s,yl(t,a)}function $u(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var r=s.lanes;r&=t.pendingLanes,a|=r,s.lanes=a,F0(t,a)}}function fw(t,s){var a=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var n=null,l=null;if(a=a.firstBaseUpdate,a!==null){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};l===null?n=l=i:l=l.next=i,a=a.next}while(a!==null);l===null?n=l=s:l=l.next=s}else n=l=s;a={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:r.shared,effects:r.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}function fx(t,s,a,r){var n=t.updateQueue;Wl=!1;var l=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==i&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(l!==null){var x=n.baseState;i=0,u=d=c=null,o=l;do{var p=o.lane,h=o.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,f=o;switch(p=s,h=a,f.tag){case 1:if(y=f.payload,typeof y=="function"){x=y.call(h,x,p);break e}x=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=f.payload,p=typeof y=="function"?y.call(h,x,p):y,p==null)break e;x=da({},x,p);break e;case 2:Wl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=n.effects,p===null?n.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=h,c=x):u=u.next=h,i|=p;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;p=o,o=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(u===null&&(c=x),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,s=n.shared.interleaved,s!==null){n=s;do i|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);oo|=i,t.lanes=i,t.memoizedState=x}}function gw(t,s,a){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var r=t[s],n=r.callback;if(n!==null){if(r.callback=null,r=a,typeof n!="function")throw Error(St(191,n));n.call(r)}}}var _m={},Jn=Ai(_m),sm=Ai(_m),am=Ai(_m);function Gi(t){if(t===_m)throw Error(St(174));return t}function J0(t,s){switch(Zs(am,s),Zs(sm,t),Zs(Jn,_m),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:of(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=of(s,t)}ra(Jn),Zs(Jn,s)}function Fc(){ra(Jn),ra(sm),ra(am)}function Db(t){Gi(am.current);var s=Gi(Jn.current),a=of(s,t.type);s!==a&&(Zs(sm,t),Zs(Jn,a))}function K0(t){sm.current===t&&(ra(Jn),ra(sm))}var oa=Ai(0);function gx(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cp=[];function X0(){for(var t=0;t<cp.length;t++)cp[t]._workInProgressVersionPrimary=null;cp.length=0}var Uu=_l.ReactCurrentDispatcher,dp=_l.ReactCurrentBatchConfig,io=0,ca=null,Da=null,Pa=null,vx=!1,Fd=!1,rm=0,b5=0;function Ga(){throw Error(St(321))}function Q0(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!An(t[a],s[a]))return!1;return!0}function Z0(t,s,a,r,n,l){if(io=l,ca=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Uu.current=t===null||t.memoizedState===null?E5:D5,t=a(r,n),Fd){l=0;do{if(Fd=!1,rm=0,25<=l)throw Error(St(301));l+=1,Pa=Da=null,s.updateQueue=null,Uu.current=A5,t=a(r,n)}while(Fd)}if(Uu.current=wx,s=Da!==null&&Da.next!==null,io=0,Pa=Da=ca=null,vx=!1,s)throw Error(St(300));return t}function eg(){var t=rm!==0;return rm=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pa===null?ca.memoizedState=Pa=t:Pa=Pa.next=t,Pa}function on(){if(Da===null){var t=ca.alternate;t=t!==null?t.memoizedState:null}else t=Da.next;var s=Pa===null?ca.memoizedState:Pa.next;if(s!==null)Pa=s,Da=t;else{if(t===null)throw Error(St(310));Da=t,t={memoizedState:Da.memoizedState,baseState:Da.baseState,baseQueue:Da.baseQueue,queue:Da.queue,next:null},Pa===null?ca.memoizedState=Pa=t:Pa=Pa.next=t}return Pa}function nm(t,s){return typeof s=="function"?s(t):s}function mp(t){var s=on(),a=s.queue;if(a===null)throw Error(St(311));a.lastRenderedReducer=t;var r=Da,n=r.baseQueue,l=a.pending;if(l!==null){if(n!==null){var i=n.next;n.next=l.next,l.next=i}r.baseQueue=n=l,a.pending=null}if(n!==null){l=n.next,r=r.baseState;var o=i=null,c=null,d=l;do{var u=d.lane;if((io&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var x={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=x,i=r):c=c.next=x,ca.lanes|=u,oo|=u}d=d.next}while(d!==null&&d!==l);c===null?i=r:c.next=o,An(r,s.memoizedState)||(vr=!0),s.memoizedState=r,s.baseState=i,s.baseQueue=c,a.lastRenderedState=r}if(t=a.interleaved,t!==null){n=t;do l=n.lane,ca.lanes|=l,oo|=l,n=n.next;while(n!==t)}else n===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function up(t){var s=on(),a=s.queue;if(a===null)throw Error(St(311));a.lastRenderedReducer=t;var r=a.dispatch,n=a.pending,l=s.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do l=t(l,i.action),i=i.next;while(i!==n);An(l,s.memoizedState)||(vr=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),a.lastRenderedState=l}return[l,r]}function Ab(){}function _b(t,s){var a=ca,r=on(),n=s(),l=!An(r.memoizedState,n);if(l&&(r.memoizedState=n,vr=!0),r=r.queue,tg(Fb.bind(null,a,r,t),[t]),r.getSnapshot!==s||l||Pa!==null&&Pa.memoizedState.tag&1){if(a.flags|=2048,lm(9,Tb.bind(null,a,r,n,s),void 0,null),Ra===null)throw Error(St(349));io&30||Pb(a,s,n)}return n}function Pb(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ca.updateQueue,s===null?(s={lastEffect:null,stores:null},ca.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Tb(t,s,a,r){s.value=a,s.getSnapshot=r,Mb(s)&&Ib(t)}function Fb(t,s,a){return a(function(){Mb(s)&&Ib(t)})}function Mb(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!An(t,a)}catch{return!0}}function Ib(t){var s=yl(t,1);s!==null&&En(s,t,1,-1)}function vw(t){var s=Ln();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nm,lastRenderedState:t},s.queue=t,t=t.dispatch=k5.bind(null,ca,t),[s.memoizedState,t]}function lm(t,s,a,r){return t={tag:t,create:s,destroy:a,deps:r,next:null},s=ca.updateQueue,s===null?(s={lastEffect:null,stores:null},ca.updateQueue=s,s.lastEffect=t.next=t):(a=s.lastEffect,a===null?s.lastEffect=t.next=t:(r=a.next,a.next=t,t.next=r,s.lastEffect=t)),t}function Rb(){return on().memoizedState}function Bu(t,s,a,r){var n=Ln();ca.flags|=t,n.memoizedState=lm(1|s,a,void 0,r===void 0?null:r)}function lh(t,s,a,r){var n=on();r=r===void 0?null:r;var l=void 0;if(Da!==null){var i=Da.memoizedState;if(l=i.destroy,r!==null&&Q0(r,i.deps)){n.memoizedState=lm(s,a,l,r);return}}ca.flags|=t,n.memoizedState=lm(1|s,a,l,r)}function ww(t,s){return Bu(8390656,8,t,s)}function tg(t,s){return lh(2048,8,t,s)}function Ob(t,s){return lh(4,2,t,s)}function Lb(t,s){return lh(4,4,t,s)}function $b(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Ub(t,s,a){return a=a!=null?a.concat([t]):null,lh(4,4,$b.bind(null,s,t),a)}function sg(){}function Bb(t,s){var a=on();s=s===void 0?null:s;var r=a.memoizedState;return r!==null&&s!==null&&Q0(s,r[1])?r[0]:(a.memoizedState=[t,s],t)}function zb(t,s){var a=on();s=s===void 0?null:s;var r=a.memoizedState;return r!==null&&s!==null&&Q0(s,r[1])?r[0]:(t=t(),a.memoizedState=[t,s],t)}function Vb(t,s,a){return io&21?(An(a,s)||(a=qN(),ca.lanes|=a,oo|=a,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,vr=!0),t.memoizedState=a)}function S5(t,s){var a=Ws;Ws=a!==0&&4>a?a:4,t(!0);var r=dp.transition;dp.transition={};try{t(!1),s()}finally{Ws=a,dp.transition=r}}function Yb(){return on().memoizedState}function C5(t,s,a){var r=hi(t);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},Wb(t))Hb(s,a);else if(a=kb(t,s,a,r),a!==null){var n=dr();En(a,t,r,n),Gb(a,s,r)}}function k5(t,s,a){var r=hi(t),n={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wb(t))Hb(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,a);if(n.hasEagerState=!0,n.eagerState=o,An(o,i)){var c=s.interleaved;c===null?(n.next=n,G0(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}a=kb(t,s,n,r),a!==null&&(n=dr(),En(a,t,r,n),Gb(a,s,r))}}function Wb(t){var s=t.alternate;return t===ca||s!==null&&s===ca}function Hb(t,s){Fd=vx=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Gb(t,s,a){if(a&4194240){var r=s.lanes;r&=t.pendingLanes,a|=r,s.lanes=a,F0(t,a)}}var wx={readContext:ln,useCallback:Ga,useContext:Ga,useEffect:Ga,useImperativeHandle:Ga,useInsertionEffect:Ga,useLayoutEffect:Ga,useMemo:Ga,useReducer:Ga,useRef:Ga,useState:Ga,useDebugValue:Ga,useDeferredValue:Ga,useTransition:Ga,useMutableSource:Ga,useSyncExternalStore:Ga,useId:Ga,unstable_isNewReconciler:!1},E5={readContext:ln,useCallback:function(t,s){return Ln().memoizedState=[t,s===void 0?null:s],t},useContext:ln,useEffect:ww,useImperativeHandle:function(t,s,a){return a=a!=null?a.concat([t]):null,Bu(4194308,4,$b.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Bu(4194308,4,t,s)},useInsertionEffect:function(t,s){return Bu(4,2,t,s)},useMemo:function(t,s){var a=Ln();return s=s===void 0?null:s,t=t(),a.memoizedState=[t,s],t},useReducer:function(t,s,a){var r=Ln();return s=a!==void 0?a(s):s,r.memoizedState=r.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=C5.bind(null,ca,t),[r.memoizedState,t]},useRef:function(t){var s=Ln();return t={current:t},s.memoizedState=t},useState:vw,useDebugValue:sg,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=vw(!1),s=t[0];return t=S5.bind(null,t[1]),Ln().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,a){var r=ca,n=Ln();if(la){if(a===void 0)throw Error(St(407));a=a()}else{if(a=s(),Ra===null)throw Error(St(349));io&30||Pb(r,s,a)}n.memoizedState=a;var l={value:a,getSnapshot:s};return n.queue=l,ww(Fb.bind(null,r,l,t),[t]),r.flags|=2048,lm(9,Tb.bind(null,r,l,a,s),void 0,null),a},useId:function(){var t=Ln(),s=Ra.identifierPrefix;if(la){var a=xl,r=ul;a=(r&~(1<<32-kn(r)-1)).toString(32)+a,s=":"+s+"R"+a,a=rm++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=b5++,s=":"+s+"r"+a.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},D5={readContext:ln,useCallback:Bb,useContext:ln,useEffect:tg,useImperativeHandle:Ub,useInsertionEffect:Ob,useLayoutEffect:Lb,useMemo:zb,useReducer:mp,useRef:Rb,useState:function(){return mp(nm)},useDebugValue:sg,useDeferredValue:function(t){var s=on();return Vb(s,Da.memoizedState,t)},useTransition:function(){var t=mp(nm)[0],s=on().memoizedState;return[t,s]},useMutableSource:Ab,useSyncExternalStore:_b,useId:Yb,unstable_isNewReconciler:!1},A5={readContext:ln,useCallback:Bb,useContext:ln,useEffect:tg,useImperativeHandle:Ub,useInsertionEffect:Ob,useLayoutEffect:Lb,useMemo:zb,useReducer:up,useRef:Rb,useState:function(){return up(nm)},useDebugValue:sg,useDeferredValue:function(t){var s=on();return Da===null?s.memoizedState=t:Vb(s,Da.memoizedState,t)},useTransition:function(){var t=up(nm)[0],s=on().memoizedState;return[t,s]},useMutableSource:Ab,useSyncExternalStore:_b,useId:Yb,unstable_isNewReconciler:!1};function vn(t,s){if(t&&t.defaultProps){s=da({},s),t=t.defaultProps;for(var a in t)s[a]===void 0&&(s[a]=t[a]);return s}return s}function Af(t,s,a,r){s=t.memoizedState,a=a(r,s),a=a==null?s:da({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ih={isMounted:function(t){return(t=t._reactInternals)?So(t)===t:!1},enqueueSetState:function(t,s,a){t=t._reactInternals;var r=dr(),n=hi(t),l=hl(r,n);l.payload=s,a!=null&&(l.callback=a),s=ui(t,l,n),s!==null&&(En(s,t,n,r),$u(s,t,n))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var r=dr(),n=hi(t),l=hl(r,n);l.tag=1,l.payload=s,a!=null&&(l.callback=a),s=ui(t,l,n),s!==null&&(En(s,t,n,r),$u(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=dr(),r=hi(t),n=hl(a,r);n.tag=2,s!=null&&(n.callback=s),s=ui(t,n,r),s!==null&&(En(s,t,r,a),$u(s,t,r))}};function yw(t,s,a,r,n,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,l,i):s.prototype&&s.prototype.isPureReactComponent?!Qd(a,r)||!Qd(n,l):!0}function qb(t,s,a){var r=!1,n=wi,l=s.contextType;return typeof l=="object"&&l!==null?l=ln(l):(n=Nr(s)?no:tr.current,r=s.contextTypes,l=(r=r!=null)?_c(t,n):wi),s=new s(a,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ih,t.stateNode=s,s._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function jw(t,s,a,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,r),s.state!==t&&ih.enqueueReplaceState(s,s.state,null)}function _f(t,s,a,r){var n=t.stateNode;n.props=a,n.state=t.memoizedState,n.refs={},q0(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=ln(l):(l=Nr(s)?no:tr.current,n.context=_c(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Af(t,s,l,a),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&ih.enqueueReplaceState(n,n.state,null),fx(t,a,n,r),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Mc(t,s){try{var a="",r=s;do a+=ak(r),r=r.return;while(r);var n=a}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function xp(t,s,a){return{value:t,source:null,stack:a??null,digest:s??null}}function Pf(t,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var _5=typeof WeakMap=="function"?WeakMap:Map;function Jb(t,s,a){a=hl(-1,a),a.tag=3,a.payload={element:null};var r=s.value;return a.callback=function(){jx||(jx=!0,Bf=r),Pf(t,s)},a}function Kb(t,s,a){a=hl(-1,a),a.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var n=s.value;a.payload=function(){return r(n)},a.callback=function(){Pf(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(a.callback=function(){Pf(t,s),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),a}function Nw(t,s,a){var r=t.pingCache;if(r===null){r=t.pingCache=new _5;var n=new Set;r.set(s,n)}else n=r.get(s),n===void 0&&(n=new Set,r.set(s,n));n.has(a)||(n.add(a),t=Y5.bind(null,t,s,a),s.then(t,t))}function bw(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Sw(t,s,a,r,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=hl(-1,1),s.tag=2,ui(a,s,1))),a.lanes|=1),t)}var P5=_l.ReactCurrentOwner,vr=!1;function rr(t,s,a,r){s.child=t===null?Cb(s,null,a,r):Tc(s,t.child,a,r)}function Cw(t,s,a,r,n){a=a.render;var l=s.ref;return ic(s,n),r=Z0(t,s,a,r,l,n),a=eg(),t!==null&&!vr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,jl(t,s,n)):(la&&a&&B0(s),s.flags|=1,rr(t,s,r,n),s.child)}function kw(t,s,a,r,n){if(t===null){var l=a.type;return typeof l=="function"&&!dg(l)&&l.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=l,Xb(t,s,l,r,n)):(t=Wu(a.type,null,r,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&n)){var i=l.memoizedProps;if(a=a.compare,a=a!==null?a:Qd,a(i,r)&&t.ref===s.ref)return jl(t,s,n)}return s.flags|=1,t=pi(l,r),t.ref=s.ref,t.return=s,s.child=t}function Xb(t,s,a,r,n){if(t!==null){var l=t.memoizedProps;if(Qd(l,r)&&t.ref===s.ref)if(vr=!1,s.pendingProps=r=l,(t.lanes&n)!==0)t.flags&131072&&(vr=!0);else return s.lanes=t.lanes,jl(t,s,n)}return Tf(t,s,a,r,n)}function Qb(t,s,a){var r=s.pendingProps,n=r.children,l=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zs(ec,_r),_r|=a;else{if(!(a&1073741824))return t=l!==null?l.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Zs(ec,_r),_r|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:a,Zs(ec,_r),_r|=r}else l!==null?(r=l.baseLanes|a,s.memoizedState=null):r=a,Zs(ec,_r),_r|=r;return rr(t,s,n,a),s.child}function Zb(t,s){var a=s.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Tf(t,s,a,r,n){var l=Nr(a)?no:tr.current;return l=_c(s,l),ic(s,n),a=Z0(t,s,a,r,l,n),r=eg(),t!==null&&!vr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,jl(t,s,n)):(la&&r&&B0(s),s.flags|=1,rr(t,s,a,n),s.child)}function Ew(t,s,a,r,n){if(Nr(a)){var l=!0;mx(s)}else l=!1;if(ic(s,n),s.stateNode===null)zu(t,s),qb(s,a,r),_f(s,a,r,n),r=!0;else if(t===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,d=a.contextType;typeof d=="object"&&d!==null?d=ln(d):(d=Nr(a)?no:tr.current,d=_c(s,d));var u=a.getDerivedStateFromProps,x=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";x||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||c!==d)&&jw(s,i,r,d),Wl=!1;var p=s.memoizedState;i.state=p,fx(s,r,i,n),c=s.memoizedState,o!==r||p!==c||jr.current||Wl?(typeof u=="function"&&(Af(s,a,u,r),c=s.memoizedState),(o=Wl||yw(s,a,o,r,p,c,d))?(x||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=c),i.props=r,i.state=c,i.context=d,r=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{i=s.stateNode,Eb(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:vn(s.type,o),i.props=d,x=s.pendingProps,p=i.context,c=a.contextType,typeof c=="object"&&c!==null?c=ln(c):(c=Nr(a)?no:tr.current,c=_c(s,c));var h=a.getDerivedStateFromProps;(u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==x||p!==c)&&jw(s,i,r,c),Wl=!1,p=s.memoizedState,i.state=p,fx(s,r,i,n);var y=s.memoizedState;o!==x||p!==y||jr.current||Wl?(typeof h=="function"&&(Af(s,a,h,r),y=s.memoizedState),(d=Wl||yw(s,a,d,r,p,y,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=y),i.props=r,i.state=y,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(s.flags|=1024),r=!1)}return Ff(t,s,a,r,l,n)}function Ff(t,s,a,r,n,l){Zb(t,s);var i=(s.flags&128)!==0;if(!r&&!i)return n&&uw(s,a,!1),jl(t,s,l);r=s.stateNode,P5.current=s;var o=i&&typeof a.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,t!==null&&i?(s.child=Tc(s,t.child,null,l),s.child=Tc(s,null,o,l)):rr(t,s,o,l),s.memoizedState=r.state,n&&uw(s,a,!0),s.child}function e1(t){var s=t.stateNode;s.pendingContext?mw(t,s.pendingContext,s.pendingContext!==s.context):s.context&&mw(t,s.context,!1),J0(t,s.containerInfo)}function Dw(t,s,a,r,n){return Pc(),V0(n),s.flags|=256,rr(t,s,a,r),s.child}var Mf={dehydrated:null,treeContext:null,retryLane:0};function If(t){return{baseLanes:t,cachePool:null,transitions:null}}function t1(t,s,a){var r=s.pendingProps,n=oa.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Zs(oa,n&1),t===null)return Ef(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=r.children,t=r.fallback,l?(r=s.mode,l=s.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=dh(i,r,0,null),t=to(t,r,a,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=If(a),s.memoizedState=Mf,t):ag(s,i));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return T5(t,s,i,r,o,n,a);if(l){l=r.fallback,i=s.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&s.child!==n?(r=s.child,r.childLanes=0,r.pendingProps=c,s.deletions=null):(r=pi(n,c),r.subtreeFlags=n.subtreeFlags&14680064),o!==null?l=pi(o,l):(l=to(l,i,a,null),l.flags|=2),l.return=s,r.return=s,r.sibling=l,s.child=r,r=l,l=s.child,i=t.child.memoizedState,i=i===null?If(a):{baseLanes:i.baseLanes|a,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~a,s.memoizedState=Mf,r}return l=t.child,t=l.sibling,r=pi(l,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=a),r.return=s,r.sibling=null,t!==null&&(a=s.deletions,a===null?(s.deletions=[t],s.flags|=16):a.push(t)),s.child=r,s.memoizedState=null,r}function ag(t,s){return s=dh({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function ou(t,s,a,r){return r!==null&&V0(r),Tc(s,t.child,null,a),t=ag(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function T5(t,s,a,r,n,l,i){if(a)return s.flags&256?(s.flags&=-257,r=xp(Error(St(422))),ou(t,s,i,r)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=r.fallback,n=s.mode,r=dh({mode:"visible",children:r.children},n,0,null),l=to(l,n,i,null),l.flags|=2,r.return=s,l.return=s,r.sibling=l,s.child=r,s.mode&1&&Tc(s,t.child,null,i),s.child.memoizedState=If(i),s.memoizedState=Mf,l);if(!(s.mode&1))return ou(t,s,i,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var o=r.dgst;return r=o,l=Error(St(419)),r=xp(l,r,void 0),ou(t,s,i,r)}if(o=(i&t.childLanes)!==0,vr||o){if(r=Ra,r!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|i)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,yl(t,n),En(r,t,n,-1))}return cg(),r=xp(Error(St(421))),ou(t,s,i,r)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=W5.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,Rr=mi(n.nextSibling),Lr=s,la=!0,bn=null,t!==null&&(Qr[Zr++]=ul,Qr[Zr++]=xl,Qr[Zr++]=lo,ul=t.id,xl=t.overflow,lo=s),s=ag(s,r.children),s.flags|=4096,s)}function Aw(t,s,a){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),Df(t.return,s,a)}function hp(t,s,a,r,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=a,l.tailMode=n)}function s1(t,s,a){var r=s.pendingProps,n=r.revealOrder,l=r.tail;if(rr(t,s,r.children,a),r=oa.current,r&2)r=r&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,a,s);else if(t.tag===19)Aw(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Zs(oa,r),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(a=s.child,n=null;a!==null;)t=a.alternate,t!==null&&gx(t)===null&&(n=a),a=a.sibling;a=n,a===null?(n=s.child,s.child=null):(n=a.sibling,a.sibling=null),hp(s,!1,n,a,l);break;case"backwards":for(a=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&gx(t)===null){s.child=n;break}t=n.sibling,n.sibling=a,a=n,n=t}hp(s,!0,a,null,l);break;case"together":hp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function zu(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function jl(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),oo|=s.lanes,!(a&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(St(153));if(s.child!==null){for(t=s.child,a=pi(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=pi(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function F5(t,s,a){switch(s.tag){case 3:e1(s),Pc();break;case 5:Db(s);break;case 1:Nr(s.type)&&mx(s);break;case 4:J0(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,n=s.memoizedProps.value;Zs(hx,r._currentValue),r._currentValue=n;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(Zs(oa,oa.current&1),s.flags|=128,null):a&s.child.childLanes?t1(t,s,a):(Zs(oa,oa.current&1),t=jl(t,s,a),t!==null?t.sibling:null);Zs(oa,oa.current&1);break;case 19:if(r=(a&s.childLanes)!==0,t.flags&128){if(r)return s1(t,s,a);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Zs(oa,oa.current),r)break;return null;case 22:case 23:return s.lanes=0,Qb(t,s,a)}return jl(t,s,a)}var a1,Rf,r1,n1;a1=function(t,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Rf=function(){};r1=function(t,s,a,r){var n=t.memoizedProps;if(n!==r){t=s.stateNode,Gi(Jn.current);var l=null;switch(a){case"input":n=af(t,n),r=af(t,r),l=[];break;case"select":n=da({},n,{value:void 0}),r=da({},r,{value:void 0}),l=[];break;case"textarea":n=lf(t,n),r=lf(t,r),l=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cx)}cf(a,r);var i;a=null;for(d in n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var o=n[d];for(i in o)o.hasOwnProperty(i)&&(a||(a={}),a[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wd.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(o=n!=null?n[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(a||(a={}),a[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(a||(a={}),a[i]=c[i])}else a||(l||(l=[]),l.push(d,a)),a=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&sa("scroll",t),l||o===c||(l=[])):(l=l||[]).push(d,c))}a&&(l=l||[]).push("style",a);var d=l;(s.updateQueue=d)&&(s.flags|=4)}};n1=function(t,s,a,r){a!==r&&(s.flags|=4)};function id(t,s){if(!la)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qa(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,r=0;if(s)for(var n=t.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=r,t.childLanes=a,s}function M5(t,s,a){var r=s.pendingProps;switch(z0(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(s),null;case 1:return Nr(s.type)&&dx(),qa(s),null;case 3:return r=s.stateNode,Fc(),ra(jr),ra(tr),X0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lu(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,bn!==null&&(Yf(bn),bn=null))),Rf(t,s),qa(s),null;case 5:K0(s);var n=Gi(am.current);if(a=s.type,t!==null&&s.stateNode!=null)r1(t,s,a,r,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(St(166));return qa(s),null}if(t=Gi(Jn.current),lu(s)){r=s.stateNode,a=s.type;var l=s.memoizedProps;switch(r[Vn]=s,r[tm]=l,t=(s.mode&1)!==0,a){case"dialog":sa("cancel",r),sa("close",r);break;case"iframe":case"object":case"embed":sa("load",r);break;case"video":case"audio":for(n=0;n<Nd.length;n++)sa(Nd[n],r);break;case"source":sa("error",r);break;case"img":case"image":case"link":sa("error",r),sa("load",r);break;case"details":sa("toggle",r);break;case"input":Lv(r,l),sa("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},sa("invalid",r);break;case"textarea":Uv(r,l),sa("invalid",r)}cf(a,l),n=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?r.textContent!==o&&(l.suppressHydrationWarning!==!0&&nu(r.textContent,o,t),n=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&nu(r.textContent,o,t),n=["children",""+o]):Wd.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&sa("scroll",r)}switch(a){case"input":Xm(r),$v(r,l,!0);break;case"textarea":Xm(r),Bv(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=cx)}r=n,s.updateQueue=r,r!==null&&(s.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FN(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(a,{is:r.is}):(t=i.createElement(a),a==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,a),t[Vn]=s,t[tm]=r,a1(t,s,!1,!1),s.stateNode=t;e:{switch(i=df(a,r),a){case"dialog":sa("cancel",t),sa("close",t),n=r;break;case"iframe":case"object":case"embed":sa("load",t),n=r;break;case"video":case"audio":for(n=0;n<Nd.length;n++)sa(Nd[n],t);n=r;break;case"source":sa("error",t),n=r;break;case"img":case"image":case"link":sa("error",t),sa("load",t),n=r;break;case"details":sa("toggle",t),n=r;break;case"input":Lv(t,r),n=af(t,r),sa("invalid",t);break;case"option":n=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},n=da({},r,{value:void 0}),sa("invalid",t);break;case"textarea":Uv(t,r),n=lf(t,r),sa("invalid",t);break;default:n=r}cf(a,n),o=n;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?RN(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&MN(t,c)):l==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&Hd(t,c):typeof c=="number"&&Hd(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Wd.hasOwnProperty(l)?c!=null&&l==="onScroll"&&sa("scroll",t):c!=null&&E0(t,l,c,i))}switch(a){case"input":Xm(t),$v(t,r,!1);break;case"textarea":Xm(t),Bv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vi(r.value));break;case"select":t.multiple=!!r.multiple,l=r.value,l!=null?ac(t,!!r.multiple,l,!1):r.defaultValue!=null&&ac(t,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=cx)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qa(s),null;case 6:if(t&&s.stateNode!=null)n1(t,s,t.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(St(166));if(a=Gi(am.current),Gi(Jn.current),lu(s)){if(r=s.stateNode,a=s.memoizedProps,r[Vn]=s,(l=r.nodeValue!==a)&&(t=Lr,t!==null))switch(t.tag){case 3:nu(r.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,a,(t.mode&1)!==0)}l&&(s.flags|=4)}else r=(a.nodeType===9?a:a.ownerDocument).createTextNode(r),r[Vn]=s,s.stateNode=r}return qa(s),null;case 13:if(ra(oa),r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(la&&Rr!==null&&s.mode&1&&!(s.flags&128))bb(),Pc(),s.flags|=98560,l=!1;else if(l=lu(s),r!==null&&r.dehydrated!==null){if(t===null){if(!l)throw Error(St(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(St(317));l[Vn]=s}else Pc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;qa(s),l=!1}else bn!==null&&(Yf(bn),bn=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(t===null||oa.current&1?Aa===0&&(Aa=3):cg())),s.updateQueue!==null&&(s.flags|=4),qa(s),null);case 4:return Fc(),Rf(t,s),t===null&&Zd(s.stateNode.containerInfo),qa(s),null;case 10:return H0(s.type._context),qa(s),null;case 17:return Nr(s.type)&&dx(),qa(s),null;case 19:if(ra(oa),l=s.memoizedState,l===null)return qa(s),null;if(r=(s.flags&128)!==0,i=l.rendering,i===null)if(r)id(l,!1);else{if(Aa!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=gx(t),i!==null){for(s.flags|=128,id(l,!1),r=i.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=a,a=s.child;a!==null;)l=a,t=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Zs(oa,oa.current&1|2),s.child}t=t.sibling}l.tail!==null&&ga()>Ic&&(s.flags|=128,r=!0,id(l,!1),s.lanes=4194304)}else{if(!r)if(t=gx(i),t!==null){if(s.flags|=128,r=!0,a=t.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),id(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!la)return qa(s),null}else 2*ga()-l.renderingStartTime>Ic&&a!==1073741824&&(s.flags|=128,r=!0,id(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(a=l.last,a!==null?a.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=ga(),s.sibling=null,a=oa.current,Zs(oa,r?a&1|2:a&1),s):(qa(s),null);case 22:case 23:return og(),r=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?_r&1073741824&&(qa(s),s.subtreeFlags&6&&(s.flags|=8192)):qa(s),null;case 24:return null;case 25:return null}throw Error(St(156,s.tag))}function I5(t,s){switch(z0(s),s.tag){case 1:return Nr(s.type)&&dx(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Fc(),ra(jr),ra(tr),X0(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return K0(s),null;case 13:if(ra(oa),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(St(340));Pc()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ra(oa),null;case 4:return Fc(),null;case 10:return H0(s.type._context),null;case 22:case 23:return og(),null;case 24:return null;default:return null}}var cu=!1,Qa=!1,R5=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Zo(t,s){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(r){ua(t,s,r)}else a.current=null}function Of(t,s,a){try{a()}catch(r){ua(t,s,r)}}var _w=!1;function O5(t,s){if(yf=lx,t=db(),U0(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var n=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var i=0,o=-1,c=-1,d=0,u=0,x=t,p=null;t:for(;;){for(var h;x!==a||n!==0&&x.nodeType!==3||(o=i+n),x!==l||r!==0&&x.nodeType!==3||(c=i+r),x.nodeType===3&&(i+=x.nodeValue.length),(h=x.firstChild)!==null;)p=x,x=h;for(;;){if(x===t)break t;if(p===a&&++d===n&&(o=i),p===l&&++u===r&&(c=i),(h=x.nextSibling)!==null)break;x=p,p=x.parentNode}x=h}a=o===-1||c===-1?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(jf={focusedElem:t,selectionRange:a},lx=!1,Gt=s;Gt!==null;)if(s=Gt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Gt=t;else for(;Gt!==null;){s=Gt;try{var y=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var f=y.memoizedProps,v=y.memoizedState,w=s.stateNode,g=w.getSnapshotBeforeUpdate(s.elementType===s.type?f:vn(s.type,f),v);w.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(N){ua(s,s.return,N)}if(t=s.sibling,t!==null){t.return=s.return,Gt=t;break}Gt=s.return}return y=_w,_w=!1,y}function Md(t,s,a){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&Of(s,a,l)}n=n.next}while(n!==r)}}function oh(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var r=a.create;a.destroy=r()}a=a.next}while(a!==s)}}function Lf(t){var s=t.ref;if(s!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof s=="function"?s(t):s.current=t}}function l1(t){var s=t.alternate;s!==null&&(t.alternate=null,l1(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Vn],delete s[tm],delete s[Sf],delete s[w5],delete s[y5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function i1(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||i1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $f(t,s,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(t,s):a.insertBefore(t,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(t,a)):(s=a,s.appendChild(t)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=cx));else if(r!==4&&(t=t.child,t!==null))for($f(t,s,a),t=t.sibling;t!==null;)$f(t,s,a),t=t.sibling}function Uf(t,s,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uf(t,s,a),t=t.sibling;t!==null;)Uf(t,s,a),t=t.sibling}var La=null,Nn=!1;function Il(t,s,a){for(a=a.child;a!==null;)o1(t,s,a),a=a.sibling}function o1(t,s,a){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(eh,a)}catch{}switch(a.tag){case 5:Qa||Zo(a,s);case 6:var r=La,n=Nn;La=null,Il(t,s,a),La=r,Nn=n,La!==null&&(Nn?(t=La,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):La.removeChild(a.stateNode));break;case 18:La!==null&&(Nn?(t=La,a=a.stateNode,t.nodeType===8?ip(t.parentNode,a):t.nodeType===1&&ip(t,a),Kd(t)):ip(La,a.stateNode));break;case 4:r=La,n=Nn,La=a.stateNode.containerInfo,Nn=!0,Il(t,s,a),La=r,Nn=n;break;case 0:case 11:case 14:case 15:if(!Qa&&(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var l=n,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Of(a,s,i),n=n.next}while(n!==r)}Il(t,s,a);break;case 1:if(!Qa&&(Zo(a,s),r=a.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(o){ua(a,s,o)}Il(t,s,a);break;case 21:Il(t,s,a);break;case 22:a.mode&1?(Qa=(r=Qa)||a.memoizedState!==null,Il(t,s,a),Qa=r):Il(t,s,a);break;default:Il(t,s,a)}}function Tw(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new R5),s.forEach(function(r){var n=H5.bind(null,t,r);a.has(r)||(a.add(r),r.then(n,n))})}}function mn(t,s){var a=s.deletions;if(a!==null)for(var r=0;r<a.length;r++){var n=a[r];try{var l=t,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:La=o.stateNode,Nn=!1;break e;case 3:La=o.stateNode.containerInfo,Nn=!0;break e;case 4:La=o.stateNode.containerInfo,Nn=!0;break e}o=o.return}if(La===null)throw Error(St(160));o1(l,i,n),La=null,Nn=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){ua(n,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)c1(s,t),s=s.sibling}function c1(t,s){var a=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(s,t),In(t),r&4){try{Md(3,t,t.return),oh(3,t)}catch(f){ua(t,t.return,f)}try{Md(5,t,t.return)}catch(f){ua(t,t.return,f)}}break;case 1:mn(s,t),In(t),r&512&&a!==null&&Zo(a,a.return);break;case 5:if(mn(s,t),In(t),r&512&&a!==null&&Zo(a,a.return),t.flags&32){var n=t.stateNode;try{Hd(n,"")}catch(f){ua(t,t.return,f)}}if(r&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,i=a!==null?a.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&PN(n,l),df(o,i);var d=df(o,l);for(i=0;i<c.length;i+=2){var u=c[i],x=c[i+1];u==="style"?RN(n,x):u==="dangerouslySetInnerHTML"?MN(n,x):u==="children"?Hd(n,x):E0(n,u,x,d)}switch(o){case"input":rf(n,l);break;case"textarea":TN(n,l);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var h=l.value;h!=null?ac(n,!!l.multiple,h,!1):p!==!!l.multiple&&(l.defaultValue!=null?ac(n,!!l.multiple,l.defaultValue,!0):ac(n,!!l.multiple,l.multiple?[]:"",!1))}n[tm]=l}catch(f){ua(t,t.return,f)}}break;case 6:if(mn(s,t),In(t),r&4){if(t.stateNode===null)throw Error(St(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(f){ua(t,t.return,f)}}break;case 3:if(mn(s,t),In(t),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Kd(s.containerInfo)}catch(f){ua(t,t.return,f)}break;case 4:mn(s,t),In(t);break;case 13:mn(s,t),In(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(lg=ga())),r&4&&Tw(t);break;case 22:if(u=a!==null&&a.memoizedState!==null,t.mode&1?(Qa=(d=Qa)||u,mn(s,t),Qa=d):mn(s,t),In(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Gt=t,u=t.child;u!==null;){for(x=Gt=u;Gt!==null;){switch(p=Gt,h=p.child,p.tag){case 0:case 11:case 14:case 15:Md(4,p,p.return);break;case 1:Zo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,a=p.return;try{s=r,y.props=s.memoizedProps,y.state=s.memoizedState,y.componentWillUnmount()}catch(f){ua(r,a,f)}}break;case 5:Zo(p,p.return);break;case 22:if(p.memoizedState!==null){Mw(x);continue}}h!==null?(h.return=p,Gt=h):Mw(x)}u=u.sibling}e:for(u=null,x=t;;){if(x.tag===5){if(u===null){u=x;try{n=x.stateNode,d?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=x.stateNode,c=x.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=IN("display",i))}catch(f){ua(t,t.return,f)}}}else if(x.tag===6){if(u===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(f){ua(t,t.return,f)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;u===x&&(u=null),x=x.return}u===x&&(u=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:mn(s,t),In(t),r&4&&Tw(t);break;case 21:break;default:mn(s,t),In(t)}}function In(t){var s=t.flags;if(s&2){try{e:{for(var a=t.return;a!==null;){if(i1(a)){var r=a;break e}a=a.return}throw Error(St(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Hd(n,""),r.flags&=-33);var l=Pw(t);Uf(t,l,n);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Pw(t);$f(t,o,i);break;default:throw Error(St(161))}}catch(c){ua(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function L5(t,s,a){Gt=t,d1(t)}function d1(t,s,a){for(var r=(t.mode&1)!==0;Gt!==null;){var n=Gt,l=n.child;if(n.tag===22&&r){var i=n.memoizedState!==null||cu;if(!i){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Qa;o=cu;var d=Qa;if(cu=i,(Qa=c)&&!d)for(Gt=n;Gt!==null;)i=Gt,c=i.child,i.tag===22&&i.memoizedState!==null?Iw(n):c!==null?(c.return=i,Gt=c):Iw(n);for(;l!==null;)Gt=l,d1(l),l=l.sibling;Gt=n,cu=o,Qa=d}Fw(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,Gt=l):Fw(t)}}function Fw(t){for(;Gt!==null;){var s=Gt;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Qa||oh(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!Qa)if(a===null)r.componentDidMount();else{var n=s.elementType===s.type?a.memoizedProps:vn(s.type,a.memoizedProps);r.componentDidUpdate(n,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&gw(s,l,r);break;case 3:var i=s.updateQueue;if(i!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}gw(s,i,a)}break;case 5:var o=s.stateNode;if(a===null&&s.flags&4){a=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var x=u.dehydrated;x!==null&&Kd(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}Qa||s.flags&512&&Lf(s)}catch(p){ua(s,s.return,p)}}if(s===t){Gt=null;break}if(a=s.sibling,a!==null){a.return=s.return,Gt=a;break}Gt=s.return}}function Mw(t){for(;Gt!==null;){var s=Gt;if(s===t){Gt=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Gt=a;break}Gt=s.return}}function Iw(t){for(;Gt!==null;){var s=Gt;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{oh(4,s)}catch(c){ua(s,a,c)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var n=s.return;try{r.componentDidMount()}catch(c){ua(s,n,c)}}var l=s.return;try{Lf(s)}catch(c){ua(s,l,c)}break;case 5:var i=s.return;try{Lf(s)}catch(c){ua(s,i,c)}}}catch(c){ua(s,s.return,c)}if(s===t){Gt=null;break}var o=s.sibling;if(o!==null){o.return=s.return,Gt=o;break}Gt=s.return}}var $5=Math.ceil,yx=_l.ReactCurrentDispatcher,rg=_l.ReactCurrentOwner,sn=_l.ReactCurrentBatchConfig,Ts=0,Ra=null,ba=null,za=0,_r=0,ec=Ai(0),Aa=0,im=null,oo=0,ch=0,ng=0,Id=null,fr=null,lg=0,Ic=1/0,cl=null,jx=!1,Bf=null,xi=null,du=!1,ei=null,Nx=0,Rd=0,zf=null,Vu=-1,Yu=0;function dr(){return Ts&6?ga():Vu!==-1?Vu:Vu=ga()}function hi(t){return t.mode&1?Ts&2&&za!==0?za&-za:N5.transition!==null?(Yu===0&&(Yu=qN()),Yu):(t=Ws,t!==0||(t=window.event,t=t===void 0?16:tb(t.type)),t):1}function En(t,s,a,r){if(50<Rd)throw Rd=0,zf=null,Error(St(185));Em(t,a,r),(!(Ts&2)||t!==Ra)&&(t===Ra&&(!(Ts&2)&&(ch|=a),Aa===4&&Gl(t,za)),br(t,r),a===1&&Ts===0&&!(s.mode&1)&&(Ic=ga()+500,nh&&_i()))}function br(t,s){var a=t.callbackNode;Nk(t,s);var r=nx(t,t===Ra?za:0);if(r===0)a!==null&&Yv(a),t.callbackNode=null,t.callbackPriority=0;else if(s=r&-r,t.callbackPriority!==s){if(a!=null&&Yv(a),s===1)t.tag===0?j5(Rw.bind(null,t)):yb(Rw.bind(null,t)),g5(function(){!(Ts&6)&&_i()}),a=null;else{switch(JN(r)){case 1:a=T0;break;case 4:a=HN;break;case 16:a=rx;break;case 536870912:a=GN;break;default:a=rx}a=v1(a,m1.bind(null,t))}t.callbackPriority=s,t.callbackNode=a}}function m1(t,s){if(Vu=-1,Yu=0,Ts&6)throw Error(St(327));var a=t.callbackNode;if(oc()&&t.callbackNode!==a)return null;var r=nx(t,t===Ra?za:0);if(r===0)return null;if(r&30||r&t.expiredLanes||s)s=bx(t,r);else{s=r;var n=Ts;Ts|=2;var l=x1();(Ra!==t||za!==s)&&(cl=null,Ic=ga()+500,eo(t,s));do try{z5();break}catch(o){u1(t,o)}while(!0);W0(),yx.current=l,Ts=n,ba!==null?s=0:(Ra=null,za=0,s=Aa)}if(s!==0){if(s===2&&(n=pf(t),n!==0&&(r=n,s=Vf(t,n))),s===1)throw a=im,eo(t,0),Gl(t,r),br(t,ga()),a;if(s===6)Gl(t,r);else{if(n=t.current.alternate,!(r&30)&&!U5(n)&&(s=bx(t,r),s===2&&(l=pf(t),l!==0&&(r=l,s=Vf(t,l))),s===1))throw a=im,eo(t,0),Gl(t,r),br(t,ga()),a;switch(t.finishedWork=n,t.finishedLanes=r,s){case 0:case 1:throw Error(St(345));case 2:zi(t,fr,cl);break;case 3:if(Gl(t,r),(r&130023424)===r&&(s=lg+500-ga(),10<s)){if(nx(t,0)!==0)break;if(n=t.suspendedLanes,(n&r)!==r){dr(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=bf(zi.bind(null,t,fr,cl),s);break}zi(t,fr,cl);break;case 4:if(Gl(t,r),(r&4194240)===r)break;for(s=t.eventTimes,n=-1;0<r;){var i=31-kn(r);l=1<<i,i=s[i],i>n&&(n=i),r&=~l}if(r=n,r=ga()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$5(r/1960))-r,10<r){t.timeoutHandle=bf(zi.bind(null,t,fr,cl),r);break}zi(t,fr,cl);break;case 5:zi(t,fr,cl);break;default:throw Error(St(329))}}}return br(t,ga()),t.callbackNode===a?m1.bind(null,t):null}function Vf(t,s){var a=Id;return t.current.memoizedState.isDehydrated&&(eo(t,s).flags|=256),t=bx(t,s),t!==2&&(s=fr,fr=a,s!==null&&Yf(s)),t}function Yf(t){fr===null?fr=t:fr.push.apply(fr,t)}function U5(t){for(var s=t;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var r=0;r<a.length;r++){var n=a[r],l=n.getSnapshot;n=n.value;try{if(!An(l(),n))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gl(t,s){for(s&=~ng,s&=~ch,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var a=31-kn(s),r=1<<a;t[a]=-1,s&=~r}}function Rw(t){if(Ts&6)throw Error(St(327));oc();var s=nx(t,0);if(!(s&1))return br(t,ga()),null;var a=bx(t,s);if(t.tag!==0&&a===2){var r=pf(t);r!==0&&(s=r,a=Vf(t,r))}if(a===1)throw a=im,eo(t,0),Gl(t,s),br(t,ga()),a;if(a===6)throw Error(St(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,zi(t,fr,cl),br(t,ga()),null}function ig(t,s){var a=Ts;Ts|=1;try{return t(s)}finally{Ts=a,Ts===0&&(Ic=ga()+500,nh&&_i())}}function co(t){ei!==null&&ei.tag===0&&!(Ts&6)&&oc();var s=Ts;Ts|=1;var a=sn.transition,r=Ws;try{if(sn.transition=null,Ws=1,t)return t()}finally{Ws=r,sn.transition=a,Ts=s,!(Ts&6)&&_i()}}function og(){_r=ec.current,ra(ec)}function eo(t,s){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,f5(a)),ba!==null)for(a=ba.return;a!==null;){var r=a;switch(z0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dx();break;case 3:Fc(),ra(jr),ra(tr),X0();break;case 5:K0(r);break;case 4:Fc();break;case 13:ra(oa);break;case 19:ra(oa);break;case 10:H0(r.type._context);break;case 22:case 23:og()}a=a.return}if(Ra=t,ba=t=pi(t.current,null),za=_r=s,Aa=0,im=null,ng=ch=oo=0,fr=Id=null,Hi!==null){for(s=0;s<Hi.length;s++)if(a=Hi[s],r=a.interleaved,r!==null){a.interleaved=null;var n=r.next,l=a.pending;if(l!==null){var i=l.next;l.next=n,r.next=i}a.pending=r}Hi=null}return t}function u1(t,s){do{var a=ba;try{if(W0(),Uu.current=wx,vx){for(var r=ca.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}vx=!1}if(io=0,Pa=Da=ca=null,Fd=!1,rm=0,rg.current=null,a===null||a.return===null){Aa=1,im=s,ba=null;break}e:{var l=t,i=a.return,o=a,c=s;if(s=za,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,x=u.tag;if(!(u.mode&1)&&(x===0||x===11||x===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=bw(i);if(h!==null){h.flags&=-257,Sw(h,i,o,l,s),h.mode&1&&Nw(l,d,s),s=h,c=d;var y=s.updateQueue;if(y===null){var f=new Set;f.add(c),s.updateQueue=f}else y.add(c);break e}else{if(!(s&1)){Nw(l,d,s),cg();break e}c=Error(St(426))}}else if(la&&o.mode&1){var v=bw(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Sw(v,i,o,l,s),V0(Mc(c,o));break e}}l=c=Mc(c,o),Aa!==4&&(Aa=2),Id===null?Id=[l]:Id.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var w=Jb(l,c,s);fw(l,w);break e;case 1:o=c;var g=l.type,j=l.stateNode;if(!(l.flags&128)&&(typeof g.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(xi===null||!xi.has(j)))){l.flags|=65536,s&=-s,l.lanes|=s;var N=Kb(l,o,s);fw(l,N);break e}}l=l.return}while(l!==null)}p1(a)}catch(E){s=E,ba===a&&a!==null&&(ba=a=a.return);continue}break}while(!0)}function x1(){var t=yx.current;return yx.current=wx,t===null?wx:t}function cg(){(Aa===0||Aa===3||Aa===2)&&(Aa=4),Ra===null||!(oo&268435455)&&!(ch&268435455)||Gl(Ra,za)}function bx(t,s){var a=Ts;Ts|=2;var r=x1();(Ra!==t||za!==s)&&(cl=null,eo(t,s));do try{B5();break}catch(n){u1(t,n)}while(!0);if(W0(),Ts=a,yx.current=r,ba!==null)throw Error(St(261));return Ra=null,za=0,Aa}function B5(){for(;ba!==null;)h1(ba)}function z5(){for(;ba!==null&&!xk();)h1(ba)}function h1(t){var s=g1(t.alternate,t,_r);t.memoizedProps=t.pendingProps,s===null?p1(t):ba=s,rg.current=null}function p1(t){var s=t;do{var a=s.alternate;if(t=s.return,s.flags&32768){if(a=I5(a,s),a!==null){a.flags&=32767,ba=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Aa=6,ba=null;return}}else if(a=M5(a,s,_r),a!==null){ba=a;return}if(s=s.sibling,s!==null){ba=s;return}ba=s=t}while(s!==null);Aa===0&&(Aa=5)}function zi(t,s,a){var r=Ws,n=sn.transition;try{sn.transition=null,Ws=1,V5(t,s,a,r)}finally{sn.transition=n,Ws=r}return null}function V5(t,s,a,r){do oc();while(ei!==null);if(Ts&6)throw Error(St(327));a=t.finishedWork;var n=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(St(177));t.callbackNode=null,t.callbackPriority=0;var l=a.lanes|a.childLanes;if(bk(t,l),t===Ra&&(ba=Ra=null,za=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||du||(du=!0,v1(rx,function(){return oc(),null})),l=(a.flags&15990)!==0,a.subtreeFlags&15990||l){l=sn.transition,sn.transition=null;var i=Ws;Ws=1;var o=Ts;Ts|=4,rg.current=null,O5(t,a),c1(a,t),c5(jf),lx=!!yf,jf=yf=null,t.current=a,L5(a),hk(),Ts=o,Ws=i,sn.transition=l}else t.current=a;if(du&&(du=!1,ei=t,Nx=n),l=t.pendingLanes,l===0&&(xi=null),gk(a.stateNode),br(t,ga()),s!==null)for(r=t.onRecoverableError,a=0;a<s.length;a++)n=s[a],r(n.value,{componentStack:n.stack,digest:n.digest});if(jx)throw jx=!1,t=Bf,Bf=null,t;return Nx&1&&t.tag!==0&&oc(),l=t.pendingLanes,l&1?t===zf?Rd++:(Rd=0,zf=t):Rd=0,_i(),null}function oc(){if(ei!==null){var t=JN(Nx),s=sn.transition,a=Ws;try{if(sn.transition=null,Ws=16>t?16:t,ei===null)var r=!1;else{if(t=ei,ei=null,Nx=0,Ts&6)throw Error(St(331));var n=Ts;for(Ts|=4,Gt=t.current;Gt!==null;){var l=Gt,i=l.child;if(Gt.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Gt=d;Gt!==null;){var u=Gt;switch(u.tag){case 0:case 11:case 15:Md(8,u,l)}var x=u.child;if(x!==null)x.return=u,Gt=x;else for(;Gt!==null;){u=Gt;var p=u.sibling,h=u.return;if(l1(u),u===d){Gt=null;break}if(p!==null){p.return=h,Gt=p;break}Gt=h}}}var y=l.alternate;if(y!==null){var f=y.child;if(f!==null){y.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(f!==null)}}Gt=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,Gt=i;else e:for(;Gt!==null;){if(l=Gt,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Md(9,l,l.return)}var w=l.sibling;if(w!==null){w.return=l.return,Gt=w;break e}Gt=l.return}}var g=t.current;for(Gt=g;Gt!==null;){i=Gt;var j=i.child;if(i.subtreeFlags&2064&&j!==null)j.return=i,Gt=j;else e:for(i=g;Gt!==null;){if(o=Gt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:oh(9,o)}}catch(E){ua(o,o.return,E)}if(o===i){Gt=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Gt=N;break e}Gt=o.return}}if(Ts=n,_i(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(eh,t)}catch{}r=!0}return r}finally{Ws=a,sn.transition=s}}return!1}function Ow(t,s,a){s=Mc(a,s),s=Jb(t,s,1),t=ui(t,s,1),s=dr(),t!==null&&(Em(t,1,s),br(t,s))}function ua(t,s,a){if(t.tag===3)Ow(t,t,a);else for(;s!==null;){if(s.tag===3){Ow(s,t,a);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xi===null||!xi.has(r))){t=Mc(a,t),t=Kb(s,t,1),s=ui(s,t,1),t=dr(),s!==null&&(Em(s,1,t),br(s,t));break}}s=s.return}}function Y5(t,s,a){var r=t.pingCache;r!==null&&r.delete(s),s=dr(),t.pingedLanes|=t.suspendedLanes&a,Ra===t&&(za&a)===a&&(Aa===4||Aa===3&&(za&130023424)===za&&500>ga()-lg?eo(t,0):ng|=a),br(t,s)}function f1(t,s){s===0&&(t.mode&1?(s=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):s=1);var a=dr();t=yl(t,s),t!==null&&(Em(t,s,a),br(t,a))}function W5(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),f1(t,a)}function H5(t,s){var a=0;switch(t.tag){case 13:var r=t.stateNode,n=t.memoizedState;n!==null&&(a=n.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(St(314))}r!==null&&r.delete(s),f1(t,a)}var g1;g1=function(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps||jr.current)vr=!0;else{if(!(t.lanes&a)&&!(s.flags&128))return vr=!1,F5(t,s,a);vr=!!(t.flags&131072)}else vr=!1,la&&s.flags&1048576&&jb(s,xx,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;zu(t,s),t=s.pendingProps;var n=_c(s,tr.current);ic(s,a),n=Z0(null,s,r,t,n,a);var l=eg();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Nr(r)?(l=!0,mx(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,q0(s),n.updater=ih,s.stateNode=n,n._reactInternals=s,_f(s,r,t,a),s=Ff(null,s,r,!0,l,a)):(s.tag=0,la&&l&&B0(s),rr(null,s,n,a),s=s.child),s;case 16:r=s.elementType;e:{switch(zu(t,s),t=s.pendingProps,n=r._init,r=n(r._payload),s.type=r,n=s.tag=q5(r),t=vn(r,t),n){case 0:s=Tf(null,s,r,t,a);break e;case 1:s=Ew(null,s,r,t,a);break e;case 11:s=Cw(null,s,r,t,a);break e;case 14:s=kw(null,s,r,vn(r.type,t),a);break e}throw Error(St(306,r,""))}return s;case 0:return r=s.type,n=s.pendingProps,n=s.elementType===r?n:vn(r,n),Tf(t,s,r,n,a);case 1:return r=s.type,n=s.pendingProps,n=s.elementType===r?n:vn(r,n),Ew(t,s,r,n,a);case 3:e:{if(e1(s),t===null)throw Error(St(387));r=s.pendingProps,l=s.memoizedState,n=l.element,Eb(t,s),fx(s,r,null,a);var i=s.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=Mc(Error(St(423)),s),s=Dw(t,s,r,a,n);break e}else if(r!==n){n=Mc(Error(St(424)),s),s=Dw(t,s,r,a,n);break e}else for(Rr=mi(s.stateNode.containerInfo.firstChild),Lr=s,la=!0,bn=null,a=Cb(s,null,r,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Pc(),r===n){s=jl(t,s,a);break e}rr(t,s,r,a)}s=s.child}return s;case 5:return Db(s),t===null&&Ef(s),r=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,i=n.children,Nf(r,n)?i=null:l!==null&&Nf(r,l)&&(s.flags|=32),Zb(t,s),rr(t,s,i,a),s.child;case 6:return t===null&&Ef(s),null;case 13:return t1(t,s,a);case 4:return J0(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=Tc(s,null,r,a):rr(t,s,r,a),s.child;case 11:return r=s.type,n=s.pendingProps,n=s.elementType===r?n:vn(r,n),Cw(t,s,r,n,a);case 7:return rr(t,s,s.pendingProps,a),s.child;case 8:return rr(t,s,s.pendingProps.children,a),s.child;case 12:return rr(t,s,s.pendingProps.children,a),s.child;case 10:e:{if(r=s.type._context,n=s.pendingProps,l=s.memoizedProps,i=n.value,Zs(hx,r._currentValue),r._currentValue=i,l!==null)if(An(l.value,i)){if(l.children===n.children&&!jr.current){s=jl(t,s,a);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=hl(-1,a&-a),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=a,c=l.alternate,c!==null&&(c.lanes|=a),Df(l.return,a,s),o.lanes|=a;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(St(341));i.lanes|=a,o=i.alternate,o!==null&&(o.lanes|=a),Df(i,a,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}rr(t,s,n.children,a),s=s.child}return s;case 9:return n=s.type,r=s.pendingProps.children,ic(s,a),n=ln(n),r=r(n),s.flags|=1,rr(t,s,r,a),s.child;case 14:return r=s.type,n=vn(r,s.pendingProps),n=vn(r.type,n),kw(t,s,r,n,a);case 15:return Xb(t,s,s.type,s.pendingProps,a);case 17:return r=s.type,n=s.pendingProps,n=s.elementType===r?n:vn(r,n),zu(t,s),s.tag=1,Nr(r)?(t=!0,mx(s)):t=!1,ic(s,a),qb(s,r,n),_f(s,r,n,a),Ff(null,s,r,!0,t,a);case 19:return s1(t,s,a);case 22:return Qb(t,s,a)}throw Error(St(156,s.tag))};function v1(t,s){return WN(t,s)}function G5(t,s,a,r){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,s,a,r){return new G5(t,s,a,r)}function dg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q5(t){if(typeof t=="function")return dg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===A0)return 11;if(t===_0)return 14}return 2}function pi(t,s){var a=t.alternate;return a===null?(a=en(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function Wu(t,s,a,r,n,l){var i=2;if(r=t,typeof t=="function")dg(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Yo:return to(a.children,n,l,s);case D0:i=8,n|=8;break;case Zp:return t=en(12,a,s,n|2),t.elementType=Zp,t.lanes=l,t;case ef:return t=en(13,a,s,n),t.elementType=ef,t.lanes=l,t;case tf:return t=en(19,a,s,n),t.elementType=tf,t.lanes=l,t;case DN:return dh(a,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kN:i=10;break e;case EN:i=9;break e;case A0:i=11;break e;case _0:i=14;break e;case Yl:i=16,r=null;break e}throw Error(St(130,t==null?t:typeof t,""))}return s=en(i,a,s,n),s.elementType=t,s.type=r,s.lanes=l,s}function to(t,s,a,r){return t=en(7,t,r,s),t.lanes=a,t}function dh(t,s,a,r){return t=en(22,t,r,s),t.elementType=DN,t.lanes=a,t.stateNode={isHidden:!1},t}function pp(t,s,a){return t=en(6,t,null,s),t.lanes=a,t}function fp(t,s,a){return s=en(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function J5(t,s,a,r,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kh(0),this.expirationTimes=Kh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function mg(t,s,a,r,n,l,i,o,c){return t=new J5(t,s,a,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=en(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},q0(l),t}function K5(t,s,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:r==null?null:""+r,children:t,containerInfo:s,implementation:a}}function w1(t){if(!t)return wi;t=t._reactInternals;e:{if(So(t)!==t||t.tag!==1)throw Error(St(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Nr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(St(171))}if(t.tag===1){var a=t.type;if(Nr(a))return wb(t,a,s)}return s}function y1(t,s,a,r,n,l,i,o,c){return t=mg(a,r,!0,t,n,l,i,o,c),t.context=w1(null),a=t.current,r=dr(),n=hi(a),l=hl(r,n),l.callback=s??null,ui(a,l,n),t.current.lanes=n,Em(t,n,r),br(t,r),t}function mh(t,s,a,r){var n=s.current,l=dr(),i=hi(n);return a=w1(a),s.context===null?s.context=a:s.pendingContext=a,s=hl(l,i),s.payload={element:t},r=r===void 0?null:r,r!==null&&(s.callback=r),t=ui(n,s,i),t!==null&&(En(t,n,i,l),$u(t,n,i)),i}function Sx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lw(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function ug(t,s){Lw(t,s),(t=t.alternate)&&Lw(t,s)}function X5(){return null}var j1=typeof reportError=="function"?reportError:function(t){console.error(t)};function xg(t){this._internalRoot=t}uh.prototype.render=xg.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(St(409));mh(t,s,null,null)};uh.prototype.unmount=xg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;co(function(){mh(null,t,null,null)}),s[wl]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var s=QN();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Hl.length&&s!==0&&s<Hl[a].priority;a++);Hl.splice(a,0,t),a===0&&eb(t)}};function hg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $w(){}function Q5(t,s,a,r,n){if(n){if(typeof r=="function"){var l=r;r=function(){var d=Sx(i);l.call(d)}}var i=y1(s,r,t,0,null,!1,!1,"",$w);return t._reactRootContainer=i,t[wl]=i.current,Zd(t.nodeType===8?t.parentNode:t),co(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof r=="function"){var o=r;r=function(){var d=Sx(c);o.call(d)}}var c=mg(t,0,!1,null,null,!1,!1,"",$w);return t._reactRootContainer=c,t[wl]=c.current,Zd(t.nodeType===8?t.parentNode:t),co(function(){mh(s,c,a,r)}),c}function hh(t,s,a,r,n){var l=a._reactRootContainer;if(l){var i=l;if(typeof n=="function"){var o=n;n=function(){var c=Sx(i);o.call(c)}}mh(s,i,t,n)}else i=Q5(a,s,t,n,r);return Sx(i)}KN=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var a=jd(s.pendingLanes);a!==0&&(F0(s,a|1),br(s,ga()),!(Ts&6)&&(Ic=ga()+500,_i()))}break;case 13:co(function(){var r=yl(t,1);if(r!==null){var n=dr();En(r,t,1,n)}}),ug(t,1)}};M0=function(t){if(t.tag===13){var s=yl(t,134217728);if(s!==null){var a=dr();En(s,t,134217728,a)}ug(t,134217728)}};XN=function(t){if(t.tag===13){var s=hi(t),a=yl(t,s);if(a!==null){var r=dr();En(a,t,s,r)}ug(t,s)}};QN=function(){return Ws};ZN=function(t,s){var a=Ws;try{return Ws=t,s()}finally{Ws=a}};uf=function(t,s,a){switch(s){case"input":if(rf(t,a),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var r=a[s];if(r!==t&&r.form===t.form){var n=rh(r);if(!n)throw Error(St(90));_N(r),rf(r,n)}}}break;case"textarea":TN(t,a);break;case"select":s=a.value,s!=null&&ac(t,!!a.multiple,s,!1)}};$N=ig;UN=co;var Z5={usingClientEntryPoint:!1,Events:[Am,qo,rh,ON,LN,ig]},od={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eE={bundleType:od.bundleType,version:od.version,rendererPackageName:od.rendererPackageName,rendererConfig:od.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_l.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VN(t),t===null?null:t.stateNode},findFiberByHostInstance:od.findFiberByHostInstance||X5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{eh=mu.inject(eE),qn=mu}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z5;Wr.createPortal=function(t,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hg(s))throw Error(St(200));return K5(t,s,null,a)};Wr.createRoot=function(t,s){if(!hg(t))throw Error(St(299));var a=!1,r="",n=j1;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=mg(t,1,!1,null,null,a,!1,r,n),t[wl]=s.current,Zd(t.nodeType===8?t.parentNode:t),new xg(s)};Wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(St(188)):(t=Object.keys(t).join(","),Error(St(268,t)));return t=VN(s),t=t===null?null:t.stateNode,t};Wr.flushSync=function(t){return co(t)};Wr.hydrate=function(t,s,a){if(!xh(s))throw Error(St(200));return hh(null,t,s,!0,a)};Wr.hydrateRoot=function(t,s,a){if(!hg(t))throw Error(St(405));var r=a!=null&&a.hydratedSources||null,n=!1,l="",i=j1;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onRecoverableError!==void 0&&(i=a.onRecoverableError)),s=y1(s,null,t,1,a??null,n,!1,l,i),t[wl]=s.current,Zd(t),r)for(t=0;t<r.length;t++)a=r[t],n=a._getVersion,n=n(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,n]:s.mutableSourceEagerHydrationData.push(a,n);return new uh(s)};Wr.render=function(t,s,a){if(!xh(s))throw Error(St(200));return hh(null,t,s,!1,a)};Wr.unmountComponentAtNode=function(t){if(!xh(t))throw Error(St(40));return t._reactRootContainer?(co(function(){hh(null,null,t,!1,function(){t._reactRootContainer=null,t[wl]=null})}),!0):!1};Wr.unstable_batchedUpdates=ig;Wr.unstable_renderSubtreeIntoContainer=function(t,s,a,r){if(!xh(a))throw Error(St(200));if(t==null||t._reactInternals===void 0)throw Error(St(38));return hh(t,s,a,!1,r)};Wr.version="18.3.1-next-f1338f8080-20240426";function N1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N1)}catch(t){console.error(t)}}N1(),NN.exports=Wr;var zr=NN.exports;const b1=dN(zr);var S1,Uw=zr;S1=Uw.createRoot,Uw.hydrateRoot;const tE="modulepreload",sE=function(t){return"/"+t},Bw={},ms=function(s,a,r){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(a.map(c=>{if(c=sE(c),c in Bw)return;Bw[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const x=document.createElement("link");if(x.rel=d?"stylesheet":tE,d||(x.as="script"),x.crossOrigin="",x.href=c,o&&x.setAttribute("nonce",o),document.head.appendChild(x),d)return new Promise((p,h)=>{x.addEventListener("load",p),x.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return n.then(i=>{for(const o of i||[])o.status==="rejected"&&l(o.reason);return s().catch(l)})};function C1(t){var s,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(a=C1(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function k1(){for(var t,s,a=0,r="",n=arguments.length;a<n;a++)(t=arguments[a])&&(s=C1(t))&&(r&&(r+=" "),r+=s);return r}const pg="-",aE=t=>{const s=nE(t),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const o=i.split(pg);return o[0]===""&&o.length!==1&&o.shift(),E1(o,s)||rE(i)},getConflictingClassGroupIds:(i,o)=>{const c=a[i]||[];return o&&r[i]?[...c,...r[i]]:c}}},E1=(t,s)=>{var i;if(t.length===0)return s.classGroupId;const a=t[0],r=s.nextPart.get(a),n=r?E1(t.slice(1),r):void 0;if(n)return n;if(s.validators.length===0)return;const l=t.join(pg);return(i=s.validators.find(({validator:o})=>o(l)))==null?void 0:i.classGroupId},zw=/^\[(.+)\]$/,rE=t=>{if(zw.test(t)){const s=zw.exec(t)[1],a=s==null?void 0:s.substring(0,s.indexOf(":"));if(a)return"arbitrary.."+a}},nE=t=>{const{theme:s,prefix:a}=t,r={nextPart:new Map,validators:[]};return iE(Object.entries(t.classGroups),a).forEach(([l,i])=>{Wf(i,r,l,s)}),r},Wf=(t,s,a,r)=>{t.forEach(n=>{if(typeof n=="string"){const l=n===""?s:Vw(s,n);l.classGroupId=a;return}if(typeof n=="function"){if(lE(n)){Wf(n(r),s,a,r);return}s.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(([l,i])=>{Wf(i,Vw(s,l),a,r)})})},Vw=(t,s)=>{let a=t;return s.split(pg).forEach(r=>{a.nextPart.has(r)||a.nextPart.set(r,{nextPart:new Map,validators:[]}),a=a.nextPart.get(r)}),a},lE=t=>t.isThemeGetter,iE=(t,s)=>s?t.map(([a,r])=>{const n=r.map(l=>typeof l=="string"?s+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([i,o])=>[s+i,o])):l);return[a,n]}):t,oE=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,a=new Map,r=new Map;const n=(l,i)=>{a.set(l,i),s++,s>t&&(s=0,r=a,a=new Map)};return{get(l){let i=a.get(l);if(i!==void 0)return i;if((i=r.get(l))!==void 0)return n(l,i),i},set(l,i){a.has(l)?a.set(l,i):n(l,i)}}},D1="!",cE=t=>{const{separator:s,experimentalParseClassName:a}=t,r=s.length===1,n=s[0],l=s.length,i=o=>{const c=[];let d=0,u=0,x;for(let v=0;v<o.length;v++){let w=o[v];if(d===0){if(w===n&&(r||o.slice(v,v+l)===s)){c.push(o.slice(u,v)),u=v+l;continue}if(w==="/"){x=v;continue}}w==="["?d++:w==="]"&&d--}const p=c.length===0?o:o.substring(u),h=p.startsWith(D1),y=h?p.substring(1):p,f=x&&x>u?x-u:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:y,maybePostfixModifierPosition:f}};return a?o=>a({className:o,parseClassName:i}):i},dE=t=>{if(t.length<=1)return t;const s=[];let a=[];return t.forEach(r=>{r[0]==="["?(s.push(...a.sort(),r),a=[]):a.push(r)}),s.push(...a.sort()),s},mE=t=>({cache:oE(t.cacheSize),parseClassName:cE(t),...aE(t)}),uE=/\s+/,xE=(t,s)=>{const{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:n}=s,l=[],i=t.trim().split(uE);let o="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:x,baseClassName:p,maybePostfixModifierPosition:h}=a(d);let y=!!h,f=r(y?p.substring(0,h):p);if(!f){if(!y){o=d+(o.length>0?" "+o:o);continue}if(f=r(p),!f){o=d+(o.length>0?" "+o:o);continue}y=!1}const v=dE(u).join(":"),w=x?v+D1:v,g=w+f;if(l.includes(g))continue;l.push(g);const j=n(f,y);for(let N=0;N<j.length;++N){const E=j[N];l.push(w+E)}o=d+(o.length>0?" "+o:o)}return o};function hE(){let t=0,s,a,r="";for(;t<arguments.length;)(s=arguments[t++])&&(a=A1(s))&&(r&&(r+=" "),r+=a);return r}const A1=t=>{if(typeof t=="string")return t;let s,a="";for(let r=0;r<t.length;r++)t[r]&&(s=A1(t[r]))&&(a&&(a+=" "),a+=s);return a};function pE(t,...s){let a,r,n,l=i;function i(c){const d=s.reduce((u,x)=>x(u),t());return a=mE(d),r=a.cache.get,n=a.cache.set,l=o,o(c)}function o(c){const d=r(c);if(d)return d;const u=xE(c,a);return n(c,u),u}return function(){return l(hE.apply(null,arguments))}}const ta=t=>{const s=a=>a[t]||[];return s.isThemeGetter=!0,s},_1=/^\[(?:([a-z-]+):)?(.+)\]$/i,fE=/^\d+\/\d+$/,gE=new Set(["px","full","screen"]),vE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nl=t=>cc(t)||gE.has(t)||fE.test(t),Rl=t=>Wc(t,"length",_E),cc=t=>!!t&&!Number.isNaN(Number(t)),gp=t=>Wc(t,"number",cc),cd=t=>!!t&&Number.isInteger(Number(t)),bE=t=>t.endsWith("%")&&cc(t.slice(0,-1)),gs=t=>_1.test(t),Ol=t=>vE.test(t),SE=new Set(["length","size","percentage"]),CE=t=>Wc(t,SE,P1),kE=t=>Wc(t,"position",P1),EE=new Set(["image","url"]),DE=t=>Wc(t,EE,TE),AE=t=>Wc(t,"",PE),dd=()=>!0,Wc=(t,s,a)=>{const r=_1.exec(t);return r?r[1]?typeof s=="string"?r[1]===s:s.has(r[1]):a(r[2]):!1},_E=t=>wE.test(t)&&!yE.test(t),P1=()=>!1,PE=t=>jE.test(t),TE=t=>NE.test(t),FE=()=>{const t=ta("colors"),s=ta("spacing"),a=ta("blur"),r=ta("brightness"),n=ta("borderColor"),l=ta("borderRadius"),i=ta("borderSpacing"),o=ta("borderWidth"),c=ta("contrast"),d=ta("grayscale"),u=ta("hueRotate"),x=ta("invert"),p=ta("gap"),h=ta("gradientColorStops"),y=ta("gradientColorStopPositions"),f=ta("inset"),v=ta("margin"),w=ta("opacity"),g=ta("padding"),j=ta("saturate"),N=ta("scale"),E=ta("sepia"),C=ta("skew"),k=ta("space"),A=ta("translate"),T=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",gs,s],ne=()=>[gs,s],Q=()=>["",nl,Rl],oe=()=>["auto",cc,gs],ge=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],me=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],he=()=>["","0",gs],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ke=()=>[cc,gs];return{cacheSize:500,separator:":",theme:{colors:[dd],spacing:[nl,Rl],blur:["none","",Ol,gs],brightness:ke(),borderColor:[t],borderRadius:["none","","full",Ol,gs],borderSpacing:ne(),borderWidth:Q(),contrast:ke(),grayscale:he(),hueRotate:ke(),invert:he(),gap:ne(),gradientColorStops:[t],gradientColorStopPositions:[bE,Rl],inset:X(),margin:X(),opacity:ke(),padding:ne(),saturate:ke(),scale:ke(),sepia:he(),skew:ke(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",gs]}],container:["container"],columns:[{columns:[Ol]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ge(),gs]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",cd,gs]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gs]}],grow:[{grow:he()}],shrink:[{shrink:he()}],order:[{order:["first","last","none",cd,gs]}],"grid-cols":[{"grid-cols":[dd]}],"col-start-end":[{col:["auto",{span:["full",cd,gs]},gs]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[dd]}],"row-start-end":[{row:["auto",{span:[cd,gs]},gs]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gs]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gs]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gs,s]}],"min-w":[{"min-w":[gs,s,"min","max","fit"]}],"max-w":[{"max-w":[gs,s,"none","full","min","max","fit","prose",{screen:[Ol]},Ol]}],h:[{h:[gs,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gs,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gs,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gs,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Ol,Rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gp]}],"font-family":[{font:[dd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gs]}],"line-clamp":[{"line-clamp":["none",cc,gp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",nl,gs]}],"list-image":[{"list-image":["none",gs]}],"list-style-type":[{list:["none","disc","decimal",gs]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",nl,Rl]}],"underline-offset":[{"underline-offset":["auto",nl,gs]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gs]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gs]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ge(),kE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",CE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DE]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...me(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:me()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...me()]}],"outline-offset":[{"outline-offset":[nl,gs]}],"outline-w":[{outline:[nl,Rl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[nl,Rl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ol,AE]}],"shadow-color":[{shadow:[dd]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ol,gs]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[x]}],saturate:[{saturate:[j]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gs]}],duration:[{duration:ke()}],ease:[{ease:["linear","in","out","in-out",gs]}],delay:[{delay:ke()}],animate:[{animate:["none","spin","ping","pulse","bounce",gs]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[cd,gs]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gs]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gs]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gs]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[nl,Rl,gp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ME=pE(FE);function bt(...t){return ME(k1(t))}const Ie=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:bt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));Ie.displayName="Card";const Zt=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:bt("flex flex-col space-y-1.5 p-6",t),...s}));Zt.displayName="CardHeader";const Es=m.forwardRef(({className:t,...s},a)=>e.jsx("h3",{ref:a,className:bt("text-2xl font-semibold leading-none tracking-tight",t),...s}));Es.displayName="CardTitle";const ti=m.forwardRef(({className:t,...s},a)=>e.jsx("p",{ref:a,className:bt("text-sm text-muted-foreground",t),...s}));ti.displayName="CardDescription";const Re=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:bt("p-6 pt-0",t),...s}));Re.displayName="CardContent";const Hu=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:bt("flex items-center p-6 pt-0",t),...s}));Hu.displayName="CardFooter";function Yw(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function T1(...t){return s=>{let a=!1;const r=t.map(n=>{const l=Yw(n,s);return!a&&typeof l=="function"&&(a=!0),l});if(a)return()=>{for(let n=0;n<r.length;n++){const l=r[n];typeof l=="function"?l():Yw(t[n],null)}}}}function Gs(...t){return m.useCallback(T1(...t),t)}function mo(t){const s=RE(t),a=m.forwardRef((r,n)=>{const{children:l,...i}=r,o=m.Children.toArray(l),c=o.find(LE);if(c){const d=c.props.children,u=o.map(x=>x===c?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:x);return e.jsx(s,{...i,ref:n,children:m.isValidElement(d)?m.cloneElement(d,void 0,u):null})}return e.jsx(s,{...i,ref:n,children:l})});return a.displayName=`${t}.Slot`,a}var IE=mo("Slot");function RE(t){const s=m.forwardRef((a,r)=>{const{children:n,...l}=a;if(m.isValidElement(n)){const i=UE(n),o=$E(l,n.props);return n.type!==m.Fragment&&(o.ref=r?T1(r,i):i),m.cloneElement(n,o)}return m.Children.count(n)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var F1=Symbol("radix.slottable");function OE(t){const s=({children:a})=>e.jsx(e.Fragment,{children:a});return s.displayName=`${t}.Slottable`,s.__radixId=F1,s}function LE(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===F1}function $E(t,s){const a={...s};for(const r in s){const n=t[r],l=s[r];/^on[A-Z]/.test(r)?n&&l?a[r]=(...o)=>{const c=l(...o);return n(...o),c}:n&&(a[r]=n):r==="style"?a[r]={...n,...l}:r==="className"&&(a[r]=[n,l].filter(Boolean).join(" "))}return{...t,...a}}function UE(t){var r,n;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}const Ww=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Hw=k1,ph=(t,s)=>a=>{var r;if((s==null?void 0:s.variants)==null)return Hw(t,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:n,defaultVariants:l}=s,i=Object.keys(n).map(d=>{const u=a==null?void 0:a[d],x=l==null?void 0:l[d];if(u===null)return null;const p=Ww(u)||Ww(x);return n[d][p]}),o=a&&Object.entries(a).reduce((d,u)=>{let[x,p]=u;return p===void 0||(d[x]=p),d},{}),c=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:x,className:p,...h}=u;return Object.entries(h).every(y=>{let[f,v]=y;return Array.isArray(v)?v.includes({...l,...o}[f]):{...l,...o}[f]===v})?[...d,x,p]:d},[]);return Hw(t,i,c,a==null?void 0:a.class,a==null?void 0:a.className)},om=ph("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=m.forwardRef(({className:t,variant:s,size:a,asChild:r=!1,...n},l)=>{const i=r?IE:"button";return e.jsx(i,{className:bt(om({variant:s,size:a,className:t})),ref:l,...n})});P.displayName="Button";const BE=ph("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function kt({className:t,variant:s,...a}){return e.jsx("div",{className:bt(BE({variant:s}),t),...a})}function zE(t,s){const a=m.createContext(s),r=l=>{const{children:i,...o}=l,c=m.useMemo(()=>o,Object.values(o));return e.jsx(a.Provider,{value:c,children:i})};r.displayName=t+"Provider";function n(l){const i=m.useContext(a);if(i)return i;if(s!==void 0)return s;throw new Error(`\`${l}\` must be used within \`${t}\``)}return[r,n]}function Pl(t,s=[]){let a=[];function r(l,i){const o=m.createContext(i),c=a.length;a=[...a,i];const d=x=>{var w;const{scope:p,children:h,...y}=x,f=((w=p==null?void 0:p[t])==null?void 0:w[c])||o,v=m.useMemo(()=>y,Object.values(y));return e.jsx(f.Provider,{value:v,children:h})};d.displayName=l+"Provider";function u(x,p){var f;const h=((f=p==null?void 0:p[t])==null?void 0:f[c])||o,y=m.useContext(h);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${x}\` must be used within \`${l}\``)}return[d,u]}const n=()=>{const l=a.map(i=>m.createContext(i));return function(o){const c=(o==null?void 0:o[t])||l;return m.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return n.scopeName=t,[r,VE(n,...s)]}function VE(...t){const s=t[0];if(t.length===1)return s;const a=()=>{const r=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(l){const i=r.reduce((o,{useScope:c,scopeName:d})=>{const x=c(l)[`__scope${d}`];return{...o,...x}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return a.scopeName=s.scopeName,a}function cn(t){const s=m.useRef(t);return m.useEffect(()=>{s.current=t}),m.useMemo(()=>(...a)=>{var r;return(r=s.current)==null?void 0:r.call(s,...a)},[])}var Ca=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},YE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ws=YE.reduce((t,s)=>{const a=mo(`Primitive.${s}`),r=m.forwardRef((n,l)=>{const{asChild:i,...o}=n,c=i?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:l})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function M1(t,s){t&&zr.flushSync(()=>t.dispatchEvent(s))}var I1={exports:{}},R1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rc=m;function WE(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var HE=typeof Object.is=="function"?Object.is:WE,GE=Rc.useState,qE=Rc.useEffect,JE=Rc.useLayoutEffect,KE=Rc.useDebugValue;function XE(t,s){var a=s(),r=GE({inst:{value:a,getSnapshot:s}}),n=r[0].inst,l=r[1];return JE(function(){n.value=a,n.getSnapshot=s,vp(n)&&l({inst:n})},[t,a,s]),qE(function(){return vp(n)&&l({inst:n}),t(function(){vp(n)&&l({inst:n})})},[t]),KE(a),a}function vp(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!HE(t,a)}catch{return!0}}function QE(t,s){return s()}var ZE=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QE:XE;R1.useSyncExternalStore=Rc.useSyncExternalStore!==void 0?Rc.useSyncExternalStore:ZE;I1.exports=R1;var eD=I1.exports;function tD(){return eD.useSyncExternalStore(sD,()=>!0,()=>!1)}function sD(){return()=>{}}var fg="Avatar",[aD,wY]=Pl(fg),[rD,O1]=aD(fg),L1=m.forwardRef((t,s)=>{const{__scopeAvatar:a,...r}=t,[n,l]=m.useState("idle");return e.jsx(rD,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:e.jsx(ws.span,{...r,ref:s})})});L1.displayName=fg;var $1="AvatarImage",U1=m.forwardRef((t,s)=>{const{__scopeAvatar:a,src:r,onLoadingStatusChange:n=()=>{},...l}=t,i=O1($1,a),o=nD(r,l),c=cn(d=>{n(d),i.onImageLoadingStatusChange(d)});return Ca(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?e.jsx(ws.img,{...l,ref:s,src:r}):null});U1.displayName=$1;var B1="AvatarFallback",z1=m.forwardRef((t,s)=>{const{__scopeAvatar:a,delayMs:r,...n}=t,l=O1(B1,a),[i,o]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&l.imageLoadingStatus!=="loaded"?e.jsx(ws.span,{...n,ref:s}):null});z1.displayName=B1;function Gw(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function nD(t,{referrerPolicy:s,crossOrigin:a}){const r=tD(),n=m.useRef(null),l=r?(n.current||(n.current=new window.Image),n.current):null,[i,o]=m.useState(()=>Gw(l,t));return Ca(()=>{o(Gw(l,t))},[l,t]),Ca(()=>{const c=x=>()=>{o(x)};if(!l)return;const d=c("loaded"),u=c("error");return l.addEventListener("load",d),l.addEventListener("error",u),s&&(l.referrerPolicy=s),typeof a=="string"&&(l.crossOrigin=a),()=>{l.removeEventListener("load",d),l.removeEventListener("error",u)}},[l,a,s]),i}var V1=L1,Y1=U1,W1=z1;const Qn=m.forwardRef(({className:t,...s},a)=>e.jsx(V1,{ref:a,className:bt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Qn.displayName=V1.displayName;const Nl=m.forwardRef(({className:t,...s},a)=>e.jsx(Y1,{ref:a,className:bt("aspect-square h-full w-full",t),...s}));Nl.displayName=Y1.displayName;const Zn=m.forwardRef(({className:t,...s},a)=>e.jsx(W1,{ref:a,className:bt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Zn.displayName=W1.displayName;const Ve=m.forwardRef(({className:t,type:s,...a},r)=>e.jsx("input",{type:s,className:bt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a}));Ve.displayName="Input";const lD=1,iD=1e6;let wp=0;function oD(){return wp=(wp+1)%Number.MAX_SAFE_INTEGER,wp.toString()}const yp=new Map,qw=t=>{if(yp.has(t))return;const s=setTimeout(()=>{yp.delete(t),Od({type:"REMOVE_TOAST",toastId:t})},iD);yp.set(t,s)},cD=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,lD)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?qw(a):t.toasts.forEach(r=>{qw(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},Gu=[];let qu={toasts:[]};function Od(t){qu=cD(qu,t),Gu.forEach(s=>{s(qu)})}function Te({...t}){const s=oD(),a=n=>Od({type:"UPDATE_TOAST",toast:{...n,id:s}}),r=()=>Od({type:"DISMISS_TOAST",toastId:s});return Od({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:n=>{n||r()}}}),{id:s,dismiss:r,update:a}}function ya(){const[t,s]=m.useState(qu);return m.useEffect(()=>(Gu.push(s),()=>{const a=Gu.indexOf(s);a>-1&&Gu.splice(a,1)}),[t]),{...t,toast:Te,dismiss:a=>Od({type:"DISMISS_TOAST",toastId:a})}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cm(){return cm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},cm.apply(this,arguments)}var si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(si||(si={}));const Jw="popstate";function dD(t){t===void 0&&(t={});function s(r,n){let{pathname:l,search:i,hash:o}=r.location;return Hf("",{pathname:l,search:i,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(r,n){return typeof n=="string"?n:Cx(n)}return uD(s,a,null,t)}function wa(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function H1(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function mD(){return Math.random().toString(36).substr(2,8)}function Kw(t,s){return{usr:t.state,key:t.key,idx:s}}function Hf(t,s,a,r){return a===void 0&&(a=null),cm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Hc(s):s,{state:a,key:s&&s.key||r||mD()})}function Cx(t){let{pathname:s="/",search:a="",hash:r=""}=t;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Hc(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substr(a),t=t.substr(0,a));let r=t.indexOf("?");r>=0&&(s.search=t.substr(r),t=t.substr(0,r)),t&&(s.pathname=t)}return s}function uD(t,s,a,r){r===void 0&&(r={});let{window:n=document.defaultView,v5Compat:l=!1}=r,i=n.history,o=si.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(cm({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function x(){o=si.Pop;let v=u(),w=v==null?null:v-d;d=v,c&&c({action:o,location:f.location,delta:w})}function p(v,w){o=si.Push;let g=Hf(f.location,v,w);d=u()+1;let j=Kw(g,d),N=f.createHref(g);try{i.pushState(j,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(N)}l&&c&&c({action:o,location:f.location,delta:1})}function h(v,w){o=si.Replace;let g=Hf(f.location,v,w);d=u();let j=Kw(g,d),N=f.createHref(g);i.replaceState(j,"",N),l&&c&&c({action:o,location:f.location,delta:0})}function y(v){let w=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof v=="string"?v:Cx(v);return g=g.replace(/ $/,"%20"),wa(w,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,w)}let f={get action(){return o},get location(){return t(n,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Jw,x),c=v,()=>{n.removeEventListener(Jw,x),c=null}},createHref(v){return s(n,v)},createURL:y,encodeLocation(v){let w=y(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:h,go(v){return i.go(v)}};return f}var Xw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xw||(Xw={}));function xD(t,s,a){return a===void 0&&(a="/"),hD(t,s,a)}function hD(t,s,a,r){let n=typeof s=="string"?Hc(s):s,l=gg(n.pathname||"/",a);if(l==null)return null;let i=G1(t);pD(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=ED(l);o=SD(i[c],d)}return o}function G1(t,s,a,r){s===void 0&&(s=[]),a===void 0&&(a=[]),r===void 0&&(r="");let n=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(wa(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=fi([r,c.relativePath]),u=a.concat(c);l.children&&l.children.length>0&&(wa(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),G1(l.children,s,u,d)),!(l.path==null&&!l.index)&&s.push({path:d,score:ND(d,l.index),routesMeta:u})};return t.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))n(l,i);else for(let c of q1(l.path))n(l,i,c)}),s}function q1(t){let s=t.split("/");if(s.length===0)return[];let[a,...r]=s,n=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return n?[l,""]:[l];let i=q1(r.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),n&&o.push(...i),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function pD(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:bD(s.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}const fD=/^:[\w-]+$/,gD=3,vD=2,wD=1,yD=10,jD=-2,Qw=t=>t==="*";function ND(t,s){let a=t.split("/"),r=a.length;return a.some(Qw)&&(r+=jD),s&&(r+=vD),a.filter(n=>!Qw(n)).reduce((n,l)=>n+(fD.test(l)?gD:l===""?wD:yD),r)}function bD(t,s){return t.length===s.length&&t.slice(0,-1).every((r,n)=>r===s[n])?t[t.length-1]-s[s.length-1]:0}function SD(t,s,a){let{routesMeta:r}=t,n={},l="/",i=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,u=l==="/"?s:s.slice(l.length)||"/",x=CD({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!x)return null;Object.assign(n,x.params),i.push({params:n,pathname:fi([l,x.pathname]),pathnameBase:PD(fi([l,x.pathnameBase])),route:p}),x.pathnameBase!=="/"&&(l=fi([l,x.pathnameBase]))}return i}function CD(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=kD(t.path,t.caseSensitive,t.end),n=s.match(a);if(!n)return null;let l=n[0],i=l.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((d,u,x)=>{let{paramName:p,isOptional:h}=u;if(p==="*"){let f=o[x]||"";i=l.slice(0,l.length-f.length).replace(/(.)\/+$/,"$1")}const y=o[x];return h&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:t}}function kD(t,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),H1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),r]}function ED(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return H1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function gg(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function DD(t,s){s===void 0&&(s="/");let{pathname:a,search:r="",hash:n=""}=typeof t=="string"?Hc(t):t;return{pathname:a?a.startsWith("/")?a:AD(a,s):s,search:TD(r),hash:FD(n)}}function AD(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function jp(t,s,a,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _D(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function vg(t,s){let a=_D(t);return s?a.map((r,n)=>n===a.length-1?r.pathname:r.pathnameBase):a.map(r=>r.pathnameBase)}function wg(t,s,a,r){r===void 0&&(r=!1);let n;typeof t=="string"?n=Hc(t):(n=cm({},t),wa(!n.pathname||!n.pathname.includes("?"),jp("?","pathname","search",n)),wa(!n.pathname||!n.pathname.includes("#"),jp("#","pathname","hash",n)),wa(!n.search||!n.search.includes("#"),jp("#","search","hash",n)));let l=t===""||n.pathname==="",i=l?"/":n.pathname,o;if(i==null)o=a;else{let x=s.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),x-=1;n.pathname=p.join("/")}o=x>=0?s[x]:"/"}let c=DD(n,o),d=i&&i!=="/"&&i.endsWith("/"),u=(l||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const fi=t=>t.join("/").replace(/\/\/+/g,"/"),PD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const J1=["post","put","patch","delete"];new Set(J1);const ID=["get",...J1];new Set(ID);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dm.apply(this,arguments)}const yg=m.createContext(null),RD=m.createContext(null),Pi=m.createContext(null),fh=m.createContext(null),Tl=m.createContext({outlet:null,matches:[],isDataRoute:!1}),K1=m.createContext(null);function OD(t,s){let{relative:a}=s===void 0?{}:s;Gc()||wa(!1);let{basename:r,navigator:n}=m.useContext(Pi),{hash:l,pathname:i,search:o}=Q1(t,{relative:a}),c=i;return r!=="/"&&(c=i==="/"?r:fi([r,i])),n.createHref({pathname:c,search:o,hash:l})}function Gc(){return m.useContext(fh)!=null}function Co(){return Gc()||wa(!1),m.useContext(fh).location}function X1(t){m.useContext(Pi).static||m.useLayoutEffect(t)}function al(){let{isDataRoute:t}=m.useContext(Tl);return t?XD():LD()}function LD(){Gc()||wa(!1);let t=m.useContext(yg),{basename:s,future:a,navigator:r}=m.useContext(Pi),{matches:n}=m.useContext(Tl),{pathname:l}=Co(),i=JSON.stringify(vg(n,a.v7_relativeSplatPath)),o=m.useRef(!1);return X1(()=>{o.current=!0}),m.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let x=wg(d,JSON.parse(i),l,u.relative==="path");t==null&&s!=="/"&&(x.pathname=x.pathname==="/"?s:fi([s,x.pathname])),(u.replace?r.replace:r.push)(x,u.state,u)},[s,r,i,l,t])}function $D(){let{matches:t}=m.useContext(Tl),s=t[t.length-1];return s?s.params:{}}function Q1(t,s){let{relative:a}=s===void 0?{}:s,{future:r}=m.useContext(Pi),{matches:n}=m.useContext(Tl),{pathname:l}=Co(),i=JSON.stringify(vg(n,r.v7_relativeSplatPath));return m.useMemo(()=>wg(t,JSON.parse(i),l,a==="path"),[t,i,l,a])}function UD(t,s){return BD(t,s)}function BD(t,s,a,r){Gc()||wa(!1);let{navigator:n}=m.useContext(Pi),{matches:l}=m.useContext(Tl),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Co(),u;if(s){var x;let v=typeof s=="string"?Hc(s):s;c==="/"||(x=v.pathname)!=null&&x.startsWith(c)||wa(!1),u=v}else u=d;let p=u.pathname||"/",h=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=xD(t,{pathname:h}),f=HD(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:fi([c,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:fi([c,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,a,r);return s&&f?m.createElement(fh.Provider,{value:{location:dm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:si.Pop}},f):f}function zD(){let t=KD(),s=MD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},s),a?m.createElement("pre",{style:n},a):null,null)}const VD=m.createElement(zD,null);class YD extends m.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error!==void 0?m.createElement(Tl.Provider,{value:this.props.routeContext},m.createElement(K1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WD(t){let{routeContext:s,match:a,children:r}=t,n=m.useContext(yg);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),m.createElement(Tl.Provider,{value:s},r)}function HD(t,s,a,r){var n;if(s===void 0&&(s=[]),a===void 0&&(a=null),r===void 0&&(r=null),t==null){var l;if(!a)return null;if(a.errors)t=a.matches;else if((l=r)!=null&&l.v7_partialHydration&&s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,o=(n=a)==null?void 0:n.errors;if(o!=null){let u=i.findIndex(x=>x.route.id&&(o==null?void 0:o[x.route.id])!==void 0);u>=0||wa(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(a&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let x=i[u];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=u),x.route.id){let{loaderData:p,errors:h}=a,y=x.route.loader&&p[x.route.id]===void 0&&(!h||h[x.route.id]===void 0);if(x.route.lazy||y){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,x,p)=>{let h,y=!1,f=null,v=null;a&&(h=o&&x.route.id?o[x.route.id]:void 0,f=x.route.errorElement||VD,c&&(d<0&&p===0?(QD("route-fallback"),y=!0,v=null):d===p&&(y=!0,v=x.route.hydrateFallbackElement||null)));let w=s.concat(i.slice(0,p+1)),g=()=>{let j;return h?j=f:y?j=v:x.route.Component?j=m.createElement(x.route.Component,null):x.route.element?j=x.route.element:j=u,m.createElement(WD,{match:x,routeContext:{outlet:u,matches:w,isDataRoute:a!=null},children:j})};return a&&(x.route.ErrorBoundary||x.route.errorElement||p===0)?m.createElement(YD,{location:a.location,revalidation:a.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):g()},null)}var Z1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Z1||{}),e2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(e2||{});function GD(t){let s=m.useContext(yg);return s||wa(!1),s}function qD(t){let s=m.useContext(RD);return s||wa(!1),s}function JD(t){let s=m.useContext(Tl);return s||wa(!1),s}function t2(t){let s=JD(),a=s.matches[s.matches.length-1];return a.route.id||wa(!1),a.route.id}function KD(){var t;let s=m.useContext(K1),a=qD(),r=t2();return s!==void 0?s:(t=a.errors)==null?void 0:t[r]}function XD(){let{router:t}=GD(Z1.UseNavigateStable),s=t2(e2.UseNavigateStable),a=m.useRef(!1);return X1(()=>{a.current=!0}),m.useCallback(function(n,l){l===void 0&&(l={}),a.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,dm({fromRouteId:s},l)))},[t,s])}const Zw={};function QD(t,s,a){Zw[t]||(Zw[t]=!0)}function ZD(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ey(t){let{to:s,replace:a,state:r,relative:n}=t;Gc()||wa(!1);let{future:l,static:i}=m.useContext(Pi),{matches:o}=m.useContext(Tl),{pathname:c}=Co(),d=al(),u=wg(s,vg(o,l.v7_relativeSplatPath),c,n==="path"),x=JSON.stringify(u);return m.useEffect(()=>d(JSON.parse(x),{replace:a,state:r,relative:n}),[d,x,n,a,r]),null}function Xt(t){wa(!1)}function eA(t){let{basename:s="/",children:a=null,location:r,navigationType:n=si.Pop,navigator:l,static:i=!1,future:o}=t;Gc()&&wa(!1);let c=s.replace(/^\/*/,"/"),d=m.useMemo(()=>({basename:c,navigator:l,static:i,future:dm({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof r=="string"&&(r=Hc(r));let{pathname:u="/",search:x="",hash:p="",state:h=null,key:y="default"}=r,f=m.useMemo(()=>{let v=gg(u,c);return v==null?null:{location:{pathname:v,search:x,hash:p,state:h,key:y},navigationType:n}},[c,u,x,p,h,y,n]);return f==null?null:m.createElement(Pi.Provider,{value:d},m.createElement(fh.Provider,{children:a,value:f}))}function tA(t){let{children:s,location:a}=t;return UD(Gf(s),a)}new Promise(()=>{});function Gf(t,s){s===void 0&&(s=[]);let a=[];return m.Children.forEach(t,(r,n)=>{if(!m.isValidElement(r))return;let l=[...s,n];if(r.type===m.Fragment){a.push.apply(a,Gf(r.props.children,l));return}r.type!==Xt&&wa(!1),!r.props.index||!r.props.children||wa(!1);let i={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Gf(r.props.children,l)),a.push(i)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},qf.apply(this,arguments)}function sA(t,s){if(t==null)return{};var a={},r=Object.keys(t),n,l;for(l=0;l<r.length;l++)n=r[l],!(s.indexOf(n)>=0)&&(a[n]=t[n]);return a}function aA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rA(t,s){return t.button===0&&(!s||s==="_self")&&!aA(t)}const nA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lA="6";try{window.__reactRouterVersion=lA}catch{}const iA="startTransition",ty=S0[iA];function oA(t){let{basename:s,children:a,future:r,window:n}=t,l=m.useRef();l.current==null&&(l.current=dD({window:n,v5Compat:!0}));let i=l.current,[o,c]=m.useState({action:i.action,location:i.location}),{v7_startTransition:d}=r||{},u=m.useCallback(x=>{d&&ty?ty(()=>c(x)):c(x)},[c,d]);return m.useLayoutEffect(()=>i.listen(u),[i,u]),m.useEffect(()=>ZD(r),[r]),m.createElement(eA,{basename:s,children:a,location:o.location,navigationType:o.action,navigator:i,future:r})}const cA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sy=m.forwardRef(function(s,a){let{onClick:r,relative:n,reloadDocument:l,replace:i,state:o,target:c,to:d,preventScrollReset:u,viewTransition:x}=s,p=sA(s,nA),{basename:h}=m.useContext(Pi),y,f=!1;if(typeof d=="string"&&dA.test(d)&&(y=d,cA))try{let j=new URL(window.location.href),N=d.startsWith("//")?new URL(j.protocol+d):new URL(d),E=gg(N.pathname,h);N.origin===j.origin&&E!=null?d=E+N.search+N.hash:f=!0}catch{}let v=OD(d,{relative:n}),w=mA(d,{replace:i,state:o,target:c,preventScrollReset:u,relative:n,viewTransition:x});function g(j){r&&r(j),j.defaultPrevented||w(j)}return m.createElement("a",qf({},p,{href:y||v,onClick:f||l?r:g,ref:a,target:c}))});var ay;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ay||(ay={}));var ry;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ry||(ry={}));function mA(t,s){let{target:a,replace:r,state:n,preventScrollReset:l,relative:i,viewTransition:o}=s===void 0?{}:s,c=al(),d=Co(),u=Q1(t,{relative:i});return m.useCallback(x=>{if(rA(x,a)){x.preventDefault();let p=r!==void 0?r:Cx(d)===Cx(u);c(t,{replace:p,state:n,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,u,r,n,a,t,l,i,o])}const uA={"/dashboard":"Dashboard","/patients/add":"Add Patient","/patients/list":"Patient List","/patients/test-report-amount":"Test Report Amount","/patients/deleted":"Deleted Patients","/patients/attendance":"Patient Attendance","/patients/history":"Patient History","/patients/payment-fees":"Payment Fees","/management/add-doctor":"Add Doctor","/management/deleted-doctors":"Deleted Doctors","/management/doctor-attendance":"Doctor Attendance","/management/doctor-salary":"Doctor Salary","/management/doctor-category":"Doctor Category","/management/staff-category":"Staff Category","/management/add-staff":"Add Staff","/management/staff":"Staff Management","/management/deleted-staff":"Deleted Staff","/management/doctors":"Doctor Management","/management/suppliers":"Supplier Management","/management/grocery":"Grocery List","/management/attendance":"Attendance Management","/management/salary-payment":"Salary Payment","/medicine/management":"Medicine List","/medicine/categories":"Medicine Categories","/medicine/suppliers":"Medicine Suppliers","/medicine/stock":"Medicine Stock","/medicine/accounts":"Medicine Accounts","/grocery/categories":"Grocery Categories","/grocery/suppliers":"Grocery Suppliers","/grocery/stock":"Grocery Stock","/grocery/accounts":"Grocery Accounts","/general/management":"General Management","/general/add":"Add General Item","/general/categories":"General Categories","/general/suppliers":"General Suppliers","/general/stock":"General Stock","/general/accounts":"General Accounts","/leads/list":"Leads List","/leads/add-category":"Add Lead Category","/users/add":"Add User","/users/list":"User Management","/users/add-role":"Add Role","/management/user-role/add":"Add User Role","/management/user-role/roles":"User Roles","/administration":"Administration","/patients/medical-records":"Medical Records","/management/staff-advance":"Staff Advance","/settings":"Settings"},xA=t=>t.match(/^\/patients\/details\/\d+$/)?"Patient Details":t.match(/^\/patients\/fully-history\/\d+$/)?"Patient History":t.match(/^\/test\/\w+$/)?"Test Details":null,js=t=>{const s=Co();m.useEffect(()=>{let a="Gandhi by CRM";if(t)a=`Gandhi by CRM / ${t}`;else{const r=uA[s.pathname];if(r)a=`Gandhi by CRM / ${r}`;else{const n=xA(s.pathname);n&&(a=`Gandhi by CRM / ${n}`)}}document.title=a,console.log(` Page title updated: ${a}`)},[s.pathname,t])};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s2=(...t)=>t.filter((s,a,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===a).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=m.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:l,iconNode:i,...o},c)=>m.createElement("svg",{ref:c,...pA,width:s,height:s,stroke:t,strokeWidth:r?Number(a)*24/Number(s):a,className:s2("lucide",n),...o},[...i.map(([d,u])=>m.createElement(d,u)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=(t,s)=>{const a=m.forwardRef(({className:r,...n},l)=>m.createElement(fA,{ref:l,iconNode:s,className:s2(`lucide-${hA(t)}`,r),...n}));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=ht("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ht("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=ht("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=ht("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ht("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=ht("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ht("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=ht("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=ht("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=ht("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ht("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=ht("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ht("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=ht("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ht("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=ht("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=ht("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=ht("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=ht("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ht("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ht("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=ht("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=ht("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ht("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=ht("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=ht("Contact",[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ht("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=ht("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=ht("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=ht("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ht("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=ht("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ht("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=ht("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=ht("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=ht("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ht("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=ht("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ht("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=ht("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=ht("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=ht("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ht("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ht("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=ht("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=ht("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ht("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=ht("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=ht("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=ht("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ht("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=ht("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ht("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=ht("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=ht("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=ht("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=ht("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ht("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ht("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=ht("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=ht("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=ht("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ht("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=ht("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=ht("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ht("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ht("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=ht("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ht("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=ht("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=ht("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ht("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ht("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=ht("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ht("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ht("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ht("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=ht("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ht("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=ht("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=ht("ShoppingBasket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=ht("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=ht("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=ht("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=ht("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ht("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=ht("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ht("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=ht("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ht("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=ht("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=ht("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ht("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ht("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=ht("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=ht("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ht("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ht("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ht("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=ht("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ht("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ht("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ht("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=ht("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=ht("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ht("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=ht("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=ht("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),zA=m.memo(({metric:t})=>{const s=t.icon;return e.jsxs(Ie,{className:bt("relative overflow-hidden border-0 shadow-2xl hover:shadow-3xl transition-all duration-700 transform hover:-translate-y-3 hover:scale-[1.03] group cursor-pointer bg-gradient-to-br",t.color,"before:absolute before:inset-0 before:bg-gradient-to-br before:from-white/30 before:via-transparent before:to-black/10 before:opacity-0 hover:before:opacity-100 before:transition-opacity before:duration-500"),children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-white/20 rounded-full blur-xl group-hover:blur-2xl transition-all duration-700"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-24 h-24 bg-white/15 rounded-full blur-lg group-hover:blur-xl transition-all duration-700"}),e.jsx("div",{className:"absolute top-1/2 right-1/3 w-16 h-16 bg-white/10 rounded-full blur-md group-hover:blur-lg transition-all duration-700"}),e.jsx(Zt,{className:"pb-4 relative z-20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-2xl blur-md group-hover:blur-lg transition-all duration-500"}),e.jsx("div",{className:"relative p-4 bg-white/25 backdrop-blur-xl rounded-2xl border border-white/30 group-hover:bg-white/35 group-hover:scale-110 transition-all duration-500 shadow-xl",children:e.jsx(s,{className:"w-8 h-8 text-white drop-shadow-lg filter brightness-110"})})]}),e.jsx("div",{className:"text-right space-y-1",children:e.jsx(kt,{variant:"secondary",className:bt("bg-white/30 backdrop-blur-xl text-white border-white/40 font-bold text-xs px-3 py-1.5 shadow-lg","group-hover:bg-white/40 group-hover:scale-105 transition-all duration-300",t.trend==="up"?"shadow-green-400/30":"shadow-red-400/30"),children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[t.trend==="up"?e.jsx(ns,{className:"w-3.5 h-3.5"}):e.jsx(va,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"font-bold",children:["+",t.change,"%"]})]})})})]})}),e.jsxs(Re,{className:"relative z-20 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-4xl font-black text-white drop-shadow-lg filter brightness-110 tracking-tight",children:t.value}),e.jsx("p",{className:"text-white/95 text-sm font-semibold tracking-wide uppercase letter-spacing-wide",children:t.title})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/90 font-medium",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-white/80 rounded-full animate-pulse"}),t.description]}),e.jsxs("span",{className:"font-bold",children:[t.progress,"%"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-full h-2.5 bg-white/20 rounded-full backdrop-blur-sm overflow-hidden shadow-inner",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-white/90 via-white/80 to-white/70 rounded-full transition-all duration-1000 ease-out shadow-lg",style:{width:`${t.progress}%`}})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent rounded-full animate-pulse"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bd,{className:"w-4 h-4 text-yellow-300 animate-pulse"}),e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Premium Analytics"})]}),e.jsx(Pm,{className:"w-4 h-4 text-white/60 group-hover:text-white/90 group-hover:translate-x-1 transition-all duration-300"})]})]})]})}),VA=m.memo(({action:t,onClick:s})=>{const a=t.icon;return e.jsxs(P,{variant:"ghost",className:"group relative w-full h-20 p-0 border-0 bg-gradient-to-br from-white via-slate-50 to-gray-100 hover:from-blue-50 hover:via-indigo-50 hover:to-purple-50 shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] hover:-translate-y-1 overflow-hidden rounded-2xl",onClick:s,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx("div",{className:"absolute -top-10 -right-10 w-24 h-24 bg-blue-200/30 rounded-full blur-xl group-hover:bg-blue-300/40 group-hover:scale-125 transition-all duration-700"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-16 h-16 bg-indigo-200/30 rounded-full blur-lg group-hover:bg-indigo-300/40 group-hover:scale-110 transition-all duration-700"}),e.jsx("div",{className:"relative z-10 flex items-center w-full px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-5 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/20 to-indigo-500/20 rounded-2xl blur-md group-hover:blur-lg transition-all duration-500"}),e.jsx("div",{className:bt("relative w-14 h-14 rounded-2xl flex items-center justify-center shadow-xl group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 border border-white/50",t.color.replace("bg-","bg-gradient-to-br from-").concat("/90 to-").concat(t.color.replace("bg-","")).concat("/70")),children:e.jsx(a,{className:"w-7 h-7 text-white drop-shadow-lg filter brightness-110"})})]}),e.jsxs("div",{className:"text-left space-y-1.5 flex-1",children:[e.jsx("div",{className:"font-bold text-gray-900 text-base tracking-tight group-hover:text-gray-800 transition-colors duration-300",children:t.title}),e.jsx("div",{className:"text-sm text-gray-600 font-medium leading-relaxed group-hover:text-gray-700 transition-colors duration-300",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse shadow-sm"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Active"})]}),e.jsx("div",{className:"w-px h-3 bg-gray-300"}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Premium"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center group-hover:from-blue-100 group-hover:to-indigo-100 group-hover:scale-110 group-hover:rotate-12 transition-all duration-500 shadow-md",children:e.jsx(gA,{className:"w-5 h-5 text-gray-600 group-hover:text-blue-600 group-hover:translate-x-0.5 transition-all duration-300"})})})]})}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 transform translate-x-[-100%] group-hover:translate-x-[200%] transition-transform duration-1000"})})]})}),YA=m.memo(({user:t})=>{const{toast:s}=ya();js("Dashboard - Gandhi Bai Healthcare");const[a,r]=m.useState(!0),[n,l]=m.useState(new Date),[i,o]=m.useState(""),[c,d]=m.useState("all"),u=m.useMemo(()=>[{id:"patients",title:"Total Active Patients",value:"2,847",change:12.5,trend:"up",icon:Rt,color:"from-blue-600 via-blue-500 to-cyan-400",description:"+127 new this month",progress:89},{id:"revenue",title:"Monthly Revenue",value:"28.5L",change:15.8,trend:"up",icon:ai,color:"from-emerald-600 via-green-500 to-teal-400",description:"2.1L above target",progress:94},{id:"team",title:"Medical Excellence Team",value:"63",change:4.2,trend:"up",icon:fa,color:"from-purple-600 via-violet-500 to-fuchsia-400",description:"18 specialists, 45 staff",progress:82},{id:"inventory",title:"Smart Inventory",value:"1,247",change:8.1,trend:"up",icon:Jt,color:"from-orange-600 via-amber-500 to-yellow-400",description:"AI-optimized stock levels",progress:76}],[]),x=m.useMemo(()=>[{id:"patients",title:"Patient Care Hub",description:"Comprehensive patient management & records",icon:uo,color:"bg-gradient-to-br from-blue-500 to-blue-600",href:"/patients/list"},{id:"appointments",title:"Smart Scheduling",description:"AI-powered appointment management system",icon:Pt,color:"bg-gradient-to-br from-green-500 to-green-600",href:"/appointments"},{id:"inventory",title:"Intelligent Pharmacy",description:"Advanced medicine inventory & analytics",icon:Xa,color:"bg-gradient-to-br from-purple-500 to-purple-600",href:"/medicine"},{id:"payments",title:"Financial Excellence",description:"Premium payment & billing solutions",icon:ts,color:"bg-gradient-to-br from-orange-500 to-orange-600",href:"/patients/payment-fees"},{id:"staff",title:"Team Management",description:"Professional staff & payroll system",icon:dc,color:"bg-gradient-to-br from-indigo-500 to-indigo-600",href:"/staff/list"},{id:"analytics",title:"Business Intelligence",description:"Advanced analytics & performance insights",icon:cr,color:"bg-gradient-to-br from-pink-500 to-pink-600",href:"/analytics"}],[]),p=m.useMemo(()=>[{id:"1",type:"appointment",title:"Follow-up Appointment",description:"Mrs. Priya Sharma - Diabetes checkup",date:new Date().toISOString().split("T")[0],priority:"high",status:"pending"},{id:"2",type:"payment",title:"Payment Due",description:"Mr. Rajesh Kumar - Monthly fees 15,000",date:new Date().toISOString().split("T")[0],priority:"medium",status:"pending"},{id:"3",type:"medicine",title:"Low Stock Alert",description:"Paracetamol 500mg - Only 50 tablets left",date:new Date().toISOString().split("T")[0],priority:"high",status:"pending"},{id:"4",type:"followup",title:"Lab Report Follow-up",description:"Mr. Suresh Patel - Blood test results review",date:new Date().toISOString().split("T")[0],priority:"medium",status:"pending"}],[]),h=m.useMemo(()=>{const g=new Date().toISOString().split("T")[0];return p.filter(j=>j.date===g&&j.status==="pending"&&(c==="all"||j.priority===c)&&(i===""||j.title.toLowerCase().includes(i.toLowerCase())||j.description.toLowerCase().includes(i.toLowerCase())))},[p,c,i]),y=m.useCallback(g=>{window.location.href=g},[]),f=m.useCallback(()=>{s({title:"Dashboard Updated",description:"All data has been refreshed successfully."})},[s]),v=m.useCallback(g=>{switch(g){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},[]),w=m.useCallback(g=>{switch(g){case"appointment":return e.jsx(Pt,{className:"w-4 h-4"});case"payment":return e.jsx(ts,{className:"w-4 h-4"});case"medicine":return e.jsx(Xa,{className:"w-4 h-4"});case"followup":return e.jsx(st,{className:"w-4 h-4"});default:return e.jsx(ny,{className:"w-4 h-4"})}},[]);return m.useEffect(()=>{const g=setInterval(()=>l(new Date),6e4);return()=>clearInterval(g)},[]),m.useEffect(()=>{const g=setTimeout(()=>r(!1),300);return()=>clearTimeout(g)},[]),a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-40",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/5 to-transparent"}),[...Array(20)].map((g,j)=>e.jsx("div",{className:"absolute w-2 h-2 bg-white/20 rounded-full animate-pulse",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},j))]}),e.jsx("div",{className:"absolute top-20 left-20 w-96 h-96 bg-blue-400/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-purple-400/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute top-1/3 right-1/4 w-64 h-64 bg-indigo-400/20 rounded-full blur-2xl animate-pulse"}),e.jsxs("div",{className:"text-center space-y-8 relative z-10",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"w-32 h-32 border-4 border-blue-200/30 rounded-full animate-spin border-t-blue-400 shadow-2xl"}),e.jsx("div",{className:"absolute w-24 h-24 border-4 border-transparent rounded-full animate-pulse border-t-purple-400 shadow-xl"}),e.jsx("div",{className:"absolute w-16 h-16 border-4 border-transparent rounded-full animate-spin border-t-indigo-400 shadow-lg",style:{animationDirection:"reverse"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-2xl flex items-center justify-center shadow-2xl animate-pulse",children:e.jsx(mm,{className:"w-6 h-6 text-white"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-4xl font-black text-white flex items-center justify-center gap-3 tracking-tight",children:[e.jsx(bd,{className:"w-8 h-8 text-yellow-400 animate-bounce"}),"Premium Healthcare CRM",e.jsx(uy,{className:"w-6 h-6 text-blue-400 animate-pulse"})]}),e.jsx("p",{className:"text-xl text-blue-100 font-semibold tracking-wide",children:"Gandhi Bai Healthcare  Enterprise Edition"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[e.jsx(Ku,{className:"w-5 h-5 text-yellow-400 animate-pulse"}),e.jsx("span",{className:"text-blue-200 font-medium",children:"Lightning-fast loading experience..."})]}),e.jsxs("div",{className:"w-80 mx-auto mt-8",children:[e.jsx("div",{className:"w-full h-2 bg-white/20 rounded-full overflow-hidden backdrop-blur-sm",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 via-purple-400 to-indigo-400 rounded-full animate-pulse shadow-lg",style:{width:"85%"}})}),e.jsx("p",{className:"text-center text-blue-200 text-sm mt-2 font-medium",children:"Initializing premium features..."})]})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/50 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-br from-blue-200/30 to-indigo-300/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-br from-purple-200/30 to-pink-300/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-br from-cyan-200/20 to-blue-300/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"2s"}}),[...Array(15)].map((g,j)=>e.jsx("div",{className:"absolute w-2 h-2 bg-blue-300/40 rounded-full animate-float",style:{top:`${20+Math.random()*60}%`,left:`${10+Math.random()*80}%`,animationDelay:`${Math.random()*4}s`,animationDuration:`${4+Math.random()*4}s`}},j))]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-2xl border-b border-gray-200/50 sticky top-0 z-50 shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-purple-600/5 to-indigo-600/5"}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 relative",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-indigo-600/20 rounded-2xl blur-md"}),e.jsx("div",{className:"relative w-14 h-14 bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-2xl border border-blue-300/30",children:e.jsx(mm,{className:"w-8 h-8 text-white filter drop-shadow-lg"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"Gandhi Bai Healthcare"}),e.jsx(bd,{className:"w-5 h-5 text-yellow-500 animate-pulse"})]}),e.jsxs("p",{className:"text-sm text-gray-600 font-semibold flex items-center gap-2",children:[e.jsx(Ku,{className:"w-4 h-4 text-blue-500"}),"Enterprise CRM  Premium Edition"]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-3 px-4 py-2.5 bg-gradient-to-r from-gray-50 to-gray-100/80 rounded-2xl border border-gray-200/50 shadow-lg backdrop-blur-sm",children:[e.jsx(Qt,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:n.toLocaleTimeString()}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse shadow-sm"})]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:f,className:"hidden sm:flex h-10 px-4 bg-white/80 backdrop-blur-sm border-gray-300/50 hover:bg-white hover:shadow-lg transition-all duration-300 group",children:[e.jsx(es,{className:"w-4 h-4 mr-2 group-hover:rotate-180 transition-transform duration-500"}),e.jsx("span",{className:"font-semibold",children:"Refresh"})]}),e.jsxs(P,{size:"sm",className:"h-10 px-6 bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-600 shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:scale-105 border-0",children:[e.jsx(us,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"font-bold",children:"Quick Action"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/30 to-indigo-500/30 rounded-full blur-md animate-pulse"}),e.jsx(Qn,{className:"relative h-10 w-10 ring-4 ring-blue-200/50 shadow-xl",children:e.jsx(Zn,{className:"bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 text-white font-black text-sm",children:t.name.split(" ").map(g=>g[0]).join("")})})]})]})]})})]}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-10 relative z-10",children:[e.jsx("div",{className:"mb-12",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h2",{className:"text-5xl font-black text-gray-900 mb-3 flex items-center gap-4 tracking-tight",children:[e.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Welcome back,"}),e.jsx("span",{className:"text-gray-800",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bd,{className:"w-8 h-8 text-yellow-500 animate-bounce"}),e.jsx(uy,{className:"w-6 h-6 text-blue-500 animate-pulse"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-xl text-gray-600 font-semibold",children:["Enterprise Dashboard  ",new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),e.jsx(kt,{className:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-200 px-4 py-1.5 font-bold text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Premium Active"]})})]}),e.jsx("div",{className:"flex items-center gap-6 mt-6",children:[{icon:ns,label:"Growth",value:"+15.2%",color:"text-green-600"},{icon:xy,label:"Efficiency",value:"94%",color:"text-blue-600"},{icon:vA,label:"Rating",value:"4.9",color:"text-yellow-600"}].map((g,j)=>{const N=g.icon;return e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/60 backdrop-blur-sm rounded-xl border border-gray-200/50 shadow-sm",children:[e.jsx(N,{className:bt("w-5 h-5",g.color)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:g.label}),e.jsx("div",{className:bt("text-sm font-bold",g.color),children:g.value})]})]},j)})})]})})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:u.map(g=>e.jsx(zA,{metric:g},g.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Ie,{className:"shadow-3xl border-0 bg-white/95 backdrop-blur-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white/50 to-indigo-50/80"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-blue-200/20 to-transparent rounded-full -translate-y-48 translate-x-48"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-gradient-to-tr from-purple-200/20 to-transparent rounded-full translate-y-32 -translate-x-32"}),e.jsx(Zt,{className:"border-b border-gray-200/50 bg-gradient-to-r from-blue-50/90 to-indigo-50/90 backdrop-blur-sm relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/30 to-indigo-500/30 rounded-2xl blur-lg animate-pulse"}),e.jsx("div",{className:"relative w-16 h-16 bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-2xl border border-blue-300/30",children:e.jsx(ny,{className:"w-8 h-8 text-white filter drop-shadow-lg"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(Es,{className:"text-2xl font-black text-gray-900 flex items-center gap-3 tracking-tight",children:["Today's Priority Intelligence",e.jsx(xy,{className:"w-6 h-6 text-blue-600 animate-pulse"})]}),e.jsxs(ti,{className:"text-base text-gray-600 font-semibold",children:["Advanced AI-powered task management  ",new Date().toLocaleDateString("en-US",{month:"long",day:"numeric"})]})]})]}),e.jsxs(kt,{variant:"secondary",className:"bg-blue-100/80 text-blue-800 px-4 py-2 text-base font-black border border-blue-200/50 shadow-lg",children:[h.length," active items"]})]})}),e.jsxs(Re,{className:"p-0 relative z-10",children:[e.jsx("div",{className:"p-8 border-b border-gray-200/30 bg-gradient-to-r from-gray-50/80 to-blue-50/30 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl blur-sm"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5"}),e.jsx(Ve,{placeholder:" Intelligent search across all tasks...",value:i,onChange:g=>o(g.target.value),className:"pl-12 pr-4 py-3 border-0 bg-white/90 backdrop-blur-sm shadow-lg rounded-2xl text-base font-medium focus:bg-white focus:shadow-xl transition-all duration-300"})]})]}),e.jsx("div",{className:"flex gap-3",children:[{key:"all",label:"All Tasks",color:"border-gray-300 hover:bg-gray-50"},{key:"high",label:"High Priority",color:"border-red-300 text-red-600 hover:bg-red-50"},{key:"medium",label:"Medium Priority",color:"border-yellow-300 text-yellow-600 hover:bg-yellow-50"}].map(g=>e.jsx(P,{variant:c===g.key?"default":"outline",size:"sm",onClick:()=>d(g.key),className:bt("px-4 py-2.5 font-semibold text-sm transition-all duration-300 rounded-xl shadow-sm hover:shadow-lg transform hover:scale-105",c===g.key?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":`bg-white/80 backdrop-blur-sm ${g.color}`),children:g.label},g.key))})]})}),e.jsx("div",{className:"divide-y divide-gray-100/50",children:h.length>0?h.map(g=>e.jsxs("div",{className:"p-6 hover:bg-gradient-to-r hover:from-blue-50/30 hover:to-indigo-50/30 transition-all duration-300 group relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform skew-x-12 translate-x-[-100%] group-hover:translate-x-[100%]"}),e.jsxs("div",{className:"flex items-center space-x-6 relative z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl blur-md opacity-50 group-hover:opacity-100 transition-opacity duration-300",style:{background:g.type==="appointment"?"linear-gradient(135deg, #3b82f6, #1d4ed8)":g.type==="payment"?"linear-gradient(135deg, #10b981, #047857)":g.type==="medicine"?"linear-gradient(135deg, #f59e0b, #d97706)":"linear-gradient(135deg, #8b5cf6, #7c3aed)"}}),e.jsx("div",{className:bt("relative w-14 h-14 rounded-2xl flex items-center justify-center shadow-2xl group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 border border-white/30",g.type==="appointment"&&"bg-gradient-to-br from-blue-500 to-blue-600",g.type==="payment"&&"bg-gradient-to-br from-green-500 to-green-600",g.type==="medicine"&&"bg-gradient-to-br from-orange-500 to-orange-600",g.type==="followup"&&"bg-gradient-to-br from-purple-500 to-purple-600"),children:w(g.type)})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-gray-800 transition-colors duration-300",children:g.title}),e.jsxs(kt,{className:bt("px-3 py-1.5 text-xs font-bold rounded-xl shadow-sm border",v(g.priority)),children:[g.priority.toUpperCase()," PRIORITY"]})]}),e.jsx("p",{className:"text-gray-600 font-medium leading-relaxed group-hover:text-gray-700 transition-colors duration-300",children:g.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Pt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Today"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:"Active"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"ghost",size:"sm",className:"w-10 h-10 p-0 rounded-xl hover:bg-blue-100 hover:scale-110 transition-all duration-300 group/btn",children:e.jsx(vs,{className:"w-5 h-5 text-gray-500 group-hover/btn:text-blue-600 transition-colors duration-300"})}),e.jsx(P,{variant:"ghost",size:"sm",className:"w-10 h-10 p-0 rounded-xl hover:bg-green-100 hover:scale-110 transition-all duration-300 group/btn",children:e.jsx(Xs,{className:"w-5 h-5 text-gray-500 group-hover/btn:text-green-600 transition-colors duration-300"})}),e.jsx(P,{variant:"ghost",size:"sm",className:"w-10 h-10 p-0 rounded-xl hover:bg-gray-100 hover:scale-110 transition-all duration-300 group/btn",children:e.jsx(SA,{className:"w-5 h-5 text-gray-500 group-hover/btn:text-gray-700 transition-colors duration-300"})})]})]})]},g.id)):e.jsx("div",{className:"text-center py-20",children:e.jsxs("div",{className:"text-gray-500 space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-300/30 to-blue-400/30 rounded-full blur-2xl animate-pulse"}),e.jsx("div",{className:"relative w-24 h-24 bg-gradient-to-br from-green-500 via-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto shadow-2xl",children:e.jsx(Xs,{className:"w-12 h-12 text-white filter drop-shadow-lg"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-2xl font-black text-gray-700 flex items-center justify-center gap-2",children:["Outstanding Work!",e.jsx(bd,{className:"w-6 h-6 text-yellow-500"})]}),e.jsx("p",{className:"text-lg text-gray-600 font-semibold",children:"All priority tasks completed - you're ahead of schedule!"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[e.jsx(UA,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Premium efficiency achieved"})]})]})]})})})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(Ie,{className:"shadow-3xl border-0 bg-white/95 backdrop-blur-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50/80 via-white/50 to-pink-50/80"}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-purple-200/20 to-transparent rounded-full -translate-y-32 translate-x-32"}),e.jsxs(Zt,{className:"bg-gradient-to-r from-purple-50/90 to-pink-50/90 backdrop-blur-sm relative z-10 border-b border-gray-200/30",children:[e.jsxs(Es,{className:"text-xl font-black text-gray-900 flex items-center gap-3 tracking-tight",children:[e.jsx(OA,{className:"w-6 h-6 text-purple-600 animate-pulse"}),"Enterprise Navigation"]}),e.jsx(ti,{className:"text-base text-gray-600 font-semibold",children:"Premium quick access portal"})]}),e.jsx(Re,{className:"space-y-4 p-6 relative z-10",children:x.map(g=>e.jsx(VA,{action:g,onClick:()=>y(g.href)},g.id))})]}),e.jsxs(Ie,{className:"shadow-3xl border-0 bg-white/95 backdrop-blur-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-50/80 via-white/50 to-emerald-50/80"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-green-200/20 to-transparent rounded-full translate-y-24 -translate-x-24"}),e.jsxs(Zt,{className:"bg-gradient-to-r from-green-50/90 to-emerald-50/90 backdrop-blur-sm relative z-10 border-b border-gray-200/30",children:[e.jsxs(Es,{className:"text-xl font-black text-gray-900 flex items-center gap-3 tracking-tight",children:[e.jsx(Ks,{className:"w-6 h-6 text-green-600 animate-pulse"}),"System Intelligence"]}),e.jsx(ti,{className:"text-base text-gray-600 font-semibold",children:"Real-time performance monitoring"})]}),e.jsx(Re,{className:"space-y-5 p-6 relative z-10",children:[{name:"Database Performance",status:"Optimal",icon:bA,color:"text-green-600",metric:"99.9% uptime",bgColor:"bg-green-100/80"},{name:"API Response Time",status:"< 50ms",icon:Ku,color:"text-blue-600",metric:"Lightning fast",bgColor:"bg-blue-100/80"},{name:"Security Shield",status:"Protected",icon:$n,color:"text-purple-600",metric:"Enterprise grade",bgColor:"bg-purple-100/80"},{name:"System Health",status:"Excellent",icon:st,color:"text-emerald-600",metric:"100% operational",bgColor:"bg-emerald-100/80"}].map((g,j)=>{const N=g.icon;return e.jsxs("div",{className:"group p-4 rounded-2xl hover:bg-white/60 transition-all duration-300 cursor-pointer hover:shadow-lg transform hover:scale-[1.02] relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:bt("w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",g.bgColor),children:e.jsx(N,{className:bt("h-6 w-6",g.color)})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:g.name}),e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:g.metric})]})]}),e.jsx(kt,{className:bt("font-bold text-xs px-3 py-1.5 shadow-sm",g.bgColor,g.color,"border-0"),children:g.status})]})]},j)})})]}),e.jsxs(Ie,{className:"shadow-3xl border-0 bg-white/95 backdrop-blur-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50/80 via-white/50 to-red-50/80"}),e.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-gradient-to-br from-orange-200/20 to-transparent rounded-full -translate-y-20 -translate-x-20"}),e.jsxs(Zt,{className:"bg-gradient-to-r from-orange-50/90 to-red-50/90 backdrop-blur-sm relative z-10 border-b border-gray-200/30",children:[e.jsxs(Es,{className:"text-xl font-black text-gray-900 flex items-center gap-3 tracking-tight",children:[e.jsx($A,{className:"w-6 h-6 text-orange-600 animate-pulse"}),"Live Intelligence Feed"]}),e.jsx(ti,{className:"text-base text-gray-600 font-semibold",children:"Real-time business activity"})]}),e.jsx(Re,{className:"space-y-4 p-6 relative z-10",children:[{title:"New Premium Patient",desc:"Mrs. Kavita Patel registered",time:"2 min",color:"bg-gradient-to-r from-green-400 to-emerald-500",icon:uo},{title:"Payment Processed",desc:"25,000 from Mr. Sharma",time:"5 min",color:"bg-gradient-to-r from-blue-400 to-cyan-500",icon:ts},{title:"Inventory Restocked",desc:"Premium medicine delivery",time:"8 min",color:"bg-gradient-to-r from-orange-400 to-red-500",icon:Jt},{title:"System Backup",desc:"Automated data protection",time:"12 min",color:"bg-gradient-to-r from-purple-400 to-pink-500",icon:Ks}].map((g,j)=>{const N=g.icon;return e.jsxs("div",{className:"group flex items-start space-x-4 p-4 rounded-2xl hover:bg-white/60 transition-all duration-300 cursor-pointer hover:shadow-lg transform hover:scale-[1.02] relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:bt("w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-all duration-300",g.color),children:e.jsx(N,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full animate-pulse shadow-sm"})]}),e.jsxs("div",{className:"text-sm flex-1 space-y-1 relative z-10",children:[e.jsx("p",{className:"font-bold text-gray-900 group-hover:text-gray-800 transition-colors duration-300",children:g.title}),e.jsx("p",{className:"text-gray-600 font-medium group-hover:text-gray-700 transition-colors duration-300",children:g.desc}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Qt,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:"text-xs text-gray-500 font-medium",children:[g.time," ago"]}),e.jsx("div",{className:"w-px h-3 bg-gray-300"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Live"})]})]})]},j)})})]})]})]})]})]})}),WA=({user:t={name:"Admin",role:"Administrator"}})=>e.jsx(YA,{user:t}),hy=({user:t})=>e.jsx(WA,{user:t});var gh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vh=typeof window>"u"||"Deno"in globalThis;function wn(){}function HA(t,s){return typeof t=="function"?t(s):t}function GA(t){return typeof t=="number"&&t>=0&&t!==1/0}function qA(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Xf(t,s){return typeof t=="function"?t(s):t}function JA(t,s){return typeof t=="function"?t(s):t}function py(t,s){const{type:a="all",exact:r,fetchStatus:n,predicate:l,queryKey:i,stale:o}=t;if(i){if(r){if(s.queryHash!==Ng(i,s.options))return!1}else if(!xm(s.queryKey,i))return!1}if(a!=="all"){const c=s.isActive();if(a==="active"&&!c||a==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||n&&n!==s.state.fetchStatus||l&&!l(s))}function fy(t,s){const{exact:a,status:r,predicate:n,mutationKey:l}=t;if(l){if(!s.options.mutationKey)return!1;if(a){if(um(s.options.mutationKey)!==um(l))return!1}else if(!xm(s.options.mutationKey,l))return!1}return!(r&&s.state.status!==r||n&&!n(s))}function Ng(t,s){return((s==null?void 0:s.queryKeyHashFn)||um)(t)}function um(t){return JSON.stringify(t,(s,a)=>Qf(a)?Object.keys(a).sort().reduce((r,n)=>(r[n]=a[n],r),{}):a)}function xm(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(a=>xm(t[a],s[a])):!1}function n2(t,s){if(t===s)return t;const a=gy(t)&&gy(s);if(a||Qf(t)&&Qf(s)){const r=a?t:Object.keys(t),n=r.length,l=a?s:Object.keys(s),i=l.length,o=a?[]:{},c=new Set(r);let d=0;for(let u=0;u<i;u++){const x=a?u:l[u];(!a&&c.has(x)||a)&&t[x]===void 0&&s[x]===void 0?(o[x]=void 0,d++):(o[x]=n2(t[x],s[x]),o[x]===t[x]&&t[x]!==void 0&&d++)}return n===i&&d===n?t:o}return s}function gy(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Qf(t){if(!vy(t))return!1;const s=t.constructor;if(s===void 0)return!0;const a=s.prototype;return!(!vy(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vy(t){return Object.prototype.toString.call(t)==="[object Object]"}function KA(t){return new Promise(s=>{setTimeout(s,t)})}function XA(t,s,a){return typeof a.structuralSharing=="function"?a.structuralSharing(t,s):a.structuralSharing!==!1?n2(t,s):s}function QA(t,s,a=0){const r=[...t,s];return a&&r.length>a?r.slice(1):r}function ZA(t,s,a=0){const r=[s,...t];return a&&r.length>a?r.slice(0,-1):r}var bg=Symbol();function l2(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===bg?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ji,ql,yc,sN,e_=(sN=class extends gh{constructor(){super();Ms(this,Ji);Ms(this,ql);Ms(this,yc);hs(this,yc,s=>{if(!vh&&window.addEventListener){const a=()=>s();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}})}onSubscribe(){ut(this,ql)||this.setEventListener(ut(this,yc))}onUnsubscribe(){var s;this.hasListeners()||((s=ut(this,ql))==null||s.call(this),hs(this,ql,void 0))}setEventListener(s){var a;hs(this,yc,s),(a=ut(this,ql))==null||a.call(this),hs(this,ql,s(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(s){ut(this,Ji)!==s&&(hs(this,Ji,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(a=>{a(s)})}isFocused(){var s;return typeof ut(this,Ji)=="boolean"?ut(this,Ji):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Ji=new WeakMap,ql=new WeakMap,yc=new WeakMap,sN),i2=new e_,jc,Jl,Nc,aN,t_=(aN=class extends gh{constructor(){super();Ms(this,jc,!0);Ms(this,Jl);Ms(this,Nc);hs(this,Nc,s=>{if(!vh&&window.addEventListener){const a=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",r)}}})}onSubscribe(){ut(this,Jl)||this.setEventListener(ut(this,Nc))}onUnsubscribe(){var s;this.hasListeners()||((s=ut(this,Jl))==null||s.call(this),hs(this,Jl,void 0))}setEventListener(s){var a;hs(this,Nc,s),(a=ut(this,Jl))==null||a.call(this),hs(this,Jl,s(this.setOnline.bind(this)))}setOnline(s){ut(this,jc)!==s&&(hs(this,jc,s),this.listeners.forEach(r=>{r(s)}))}isOnline(){return ut(this,jc)}},jc=new WeakMap,Jl=new WeakMap,Nc=new WeakMap,aN),Ax=new t_;function s_(){let t,s;const a=new Promise((n,l)=>{t=n,s=l});a.status="pending",a.catch(()=>{});function r(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},a.reject=n=>{r({status:"rejected",reason:n}),s(n)},a}function a_(t){return Math.min(1e3*2**t,3e4)}function o2(t){return(t??"online")==="online"?Ax.isOnline():!0}var c2=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function d2(t){let s=!1,a=0,r;const n=s_(),l=()=>n.status!=="pending",i=f=>{var v;l()||(p(new c2(f)),(v=t.abort)==null||v.call(t))},o=()=>{s=!0},c=()=>{s=!1},d=()=>i2.isFocused()&&(t.networkMode==="always"||Ax.isOnline())&&t.canRun(),u=()=>o2(t.networkMode)&&t.canRun(),x=f=>{l()||(r==null||r(),n.resolve(f))},p=f=>{l()||(r==null||r(),n.reject(f))},h=()=>new Promise(f=>{var v;r=w=>{(l()||d())&&f(w)},(v=t.onPause)==null||v.call(t)}).then(()=>{var f;r=void 0,l()||(f=t.onContinue)==null||f.call(t)}),y=()=>{if(l())return;let f;const v=a===0?t.initialPromise:void 0;try{f=v??t.fn()}catch(w){f=Promise.reject(w)}Promise.resolve(f).then(x).catch(w=>{var C;if(l())return;const g=t.retry??(vh?0:3),j=t.retryDelay??a_,N=typeof j=="function"?j(a,w):j,E=g===!0||typeof g=="number"&&a<g||typeof g=="function"&&g(a,w);if(s||!E){p(w);return}a++,(C=t.onFail)==null||C.call(t,a,w),KA(N).then(()=>d()?void 0:h()).then(()=>{s?p(w):y()})})};return{promise:n,status:()=>n.status,cancel:i,continue:()=>(r==null||r(),n),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?y():h().then(y),n)}}var r_=t=>setTimeout(t,0);function n_(){let t=[],s=0,a=o=>{o()},r=o=>{o()},n=r_;const l=o=>{s?t.push(o):n(()=>{a(o)})},i=()=>{const o=t;t=[],o.length&&n(()=>{r(()=>{o.forEach(c=>{a(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||i()}return c},batchCalls:o=>(...c)=>{l(()=>{o(...c)})},schedule:l,setNotifyFunction:o=>{a=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{n=o}}}var or=n_(),Ki,rN,m2=(rN=class{constructor(){Ms(this,Ki)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),GA(this.gcTime)&&hs(this,Ki,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vh?1/0:5*60*1e3))}clearGcTimeout(){ut(this,Ki)&&(clearTimeout(ut(this,Ki)),hs(this,Ki,void 0))}},Ki=new WeakMap,rN),bc,Sc,Kr,Xi,_a,Sm,Qi,yn,ol,nN,l_=(nN=class extends m2{constructor(s){super();Ms(this,yn);Ms(this,bc);Ms(this,Sc);Ms(this,Kr);Ms(this,Xi);Ms(this,_a);Ms(this,Sm);Ms(this,Qi);hs(this,Qi,!1),hs(this,Sm,s.defaultOptions),this.setOptions(s.options),this.observers=[],hs(this,Xi,s.client),hs(this,Kr,ut(this,Xi).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,hs(this,bc,o_(this.options)),this.state=s.state??ut(this,bc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=ut(this,_a))==null?void 0:s.promise}setOptions(s){this.options={...ut(this,Sm),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ut(this,Kr).remove(this)}setData(s,a){const r=XA(this.state.data,s,this.options);return Ha(this,yn,ol).call(this,{data:r,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),r}setState(s,a){Ha(this,yn,ol).call(this,{type:"setState",state:s,setStateOptions:a})}cancel(s){var r,n;const a=(r=ut(this,_a))==null?void 0:r.promise;return(n=ut(this,_a))==null||n.cancel(s),a?a.then(wn).catch(wn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ut(this,bc))}isActive(){return this.observers.some(s=>JA(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Xf(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!qA(this.state.dataUpdatedAt,s)}onFocus(){var a;const s=this.observers.find(r=>r.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(a=ut(this,_a))==null||a.continue()}onOnline(){var a;const s=this.observers.find(r=>r.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(a=ut(this,_a))==null||a.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),ut(this,Kr).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(a=>a!==s),this.observers.length||(ut(this,_a)&&(ut(this,Qi)?ut(this,_a).cancel({revert:!0}):ut(this,_a).cancelRetry()),this.scheduleGc()),ut(this,Kr).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ha(this,yn,ol).call(this,{type:"invalidate"})}async fetch(s,a){var c,d,u,x,p,h,y,f,v,w,g,j;if(this.state.fetchStatus!=="idle"&&((c=ut(this,_a))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(ut(this,_a))return ut(this,_a).continueRetry(),ut(this,_a).promise}if(s&&this.setOptions(s),!this.options.queryFn){const N=this.observers.find(E=>E.options.queryFn);N&&this.setOptions(N.options)}const r=new AbortController,n=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(hs(this,Qi,!0),r.signal)})},l=()=>{const N=l2(this.options,a),C=(()=>{const k={client:ut(this,Xi),queryKey:this.queryKey,meta:this.meta};return n(k),k})();return hs(this,Qi,!1),this.options.persister?this.options.persister(N,C,this):N(C)},o=(()=>{const N={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:ut(this,Xi),state:this.state,fetchFn:l};return n(N),N})();(d=this.options.behavior)==null||d.onFetch(o,this),hs(this,Sc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Ha(this,yn,ol).call(this,{type:"fetch",meta:(x=o.fetchOptions)==null?void 0:x.meta}),hs(this,_a,d2({initialPromise:a==null?void 0:a.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onFail:(N,E)=>{Ha(this,yn,ol).call(this,{type:"failed",failureCount:N,error:E})},onPause:()=>{Ha(this,yn,ol).call(this,{type:"pause"})},onContinue:()=>{Ha(this,yn,ol).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const N=await ut(this,_a).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(h=(p=ut(this,Kr).config).onSuccess)==null||h.call(p,N,this),(f=(y=ut(this,Kr).config).onSettled)==null||f.call(y,N,this.state.error,this),N}catch(N){if(N instanceof c2){if(N.silent)return ut(this,_a).promise;if(N.revert){if(this.setState({...ut(this,Sc),fetchStatus:"idle"}),this.state.data===void 0)throw N;return this.state.data}}throw Ha(this,yn,ol).call(this,{type:"error",error:N}),(w=(v=ut(this,Kr).config).onError)==null||w.call(v,N,this),(j=(g=ut(this,Kr).config).onSettled)==null||j.call(g,this.state.data,N,this),N}finally{this.scheduleGc()}}},bc=new WeakMap,Sc=new WeakMap,Kr=new WeakMap,Xi=new WeakMap,_a=new WeakMap,Sm=new WeakMap,Qi=new WeakMap,yn=new WeakSet,ol=function(s){const a=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...i_(r.data,this.options),fetchMeta:s.meta??null};case"success":const n={...r,data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return hs(this,Sc,s.manual?n:void 0),n;case"error":const l=s.error;return{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=a(this.state),or.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ut(this,Kr).notify({query:this,type:"updated",action:s})})},nN);function i_(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:o2(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function o_(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,a=s!==void 0,r=a?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:a?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var Un,lN,c_=(lN=class extends gh{constructor(s={}){super();Ms(this,Un);this.config=s,hs(this,Un,new Map)}build(s,a,r){const n=a.queryKey,l=a.queryHash??Ng(n,a);let i=this.get(l);return i||(i=new l_({client:s,queryKey:n,queryHash:l,options:s.defaultQueryOptions(a),state:r,defaultOptions:s.getQueryDefaults(n)}),this.add(i)),i}add(s){ut(this,Un).has(s.queryHash)||(ut(this,Un).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const a=ut(this,Un).get(s.queryHash);a&&(s.destroy(),a===s&&ut(this,Un).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){or.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return ut(this,Un).get(s)}getAll(){return[...ut(this,Un).values()]}find(s){const a={exact:!0,...s};return this.getAll().find(r=>py(a,r))}findAll(s={}){const a=this.getAll();return Object.keys(s).length>0?a.filter(r=>py(s,r)):a}notify(s){or.batch(()=>{this.listeners.forEach(a=>{a(s)})})}onFocus(){or.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){or.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Un=new WeakMap,lN),Bn,ar,Zi,zn,zl,iN,d_=(iN=class extends m2{constructor(s){super();Ms(this,zn);Ms(this,Bn);Ms(this,ar);Ms(this,Zi);this.mutationId=s.mutationId,hs(this,ar,s.mutationCache),hs(this,Bn,[]),this.state=s.state||m_(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){ut(this,Bn).includes(s)||(ut(this,Bn).push(s),this.clearGcTimeout(),ut(this,ar).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){hs(this,Bn,ut(this,Bn).filter(a=>a!==s)),this.scheduleGc(),ut(this,ar).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){ut(this,Bn).length||(this.state.status==="pending"?this.scheduleGc():ut(this,ar).remove(this))}continue(){var s;return((s=ut(this,Zi))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var l,i,o,c,d,u,x,p,h,y,f,v,w,g,j,N,E,C,k,A;const a=()=>{Ha(this,zn,zl).call(this,{type:"continue"})};hs(this,Zi,d2({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(T,M)=>{Ha(this,zn,zl).call(this,{type:"failed",failureCount:T,error:M})},onPause:()=>{Ha(this,zn,zl).call(this,{type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ut(this,ar).canRun(this)}));const r=this.state.status==="pending",n=!ut(this,Zi).canStart();try{if(r)a();else{Ha(this,zn,zl).call(this,{type:"pending",variables:s,isPaused:n}),await((i=(l=ut(this,ar).config).onMutate)==null?void 0:i.call(l,s,this));const M=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,s));M!==this.state.context&&Ha(this,zn,zl).call(this,{type:"pending",context:M,variables:s,isPaused:n})}const T=await ut(this,Zi).start();return await((u=(d=ut(this,ar).config).onSuccess)==null?void 0:u.call(d,T,s,this.state.context,this)),await((p=(x=this.options).onSuccess)==null?void 0:p.call(x,T,s,this.state.context)),await((y=(h=ut(this,ar).config).onSettled)==null?void 0:y.call(h,T,null,this.state.variables,this.state.context,this)),await((v=(f=this.options).onSettled)==null?void 0:v.call(f,T,null,s,this.state.context)),Ha(this,zn,zl).call(this,{type:"success",data:T}),T}catch(T){try{throw await((g=(w=ut(this,ar).config).onError)==null?void 0:g.call(w,T,s,this.state.context,this)),await((N=(j=this.options).onError)==null?void 0:N.call(j,T,s,this.state.context)),await((C=(E=ut(this,ar).config).onSettled)==null?void 0:C.call(E,void 0,T,this.state.variables,this.state.context,this)),await((A=(k=this.options).onSettled)==null?void 0:A.call(k,void 0,T,s,this.state.context)),T}finally{Ha(this,zn,zl).call(this,{type:"error",error:T})}}finally{ut(this,ar).runNext(this)}}},Bn=new WeakMap,ar=new WeakMap,Zi=new WeakMap,zn=new WeakSet,zl=function(s){const a=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=a(this.state),or.batch(()=>{ut(this,Bn).forEach(r=>{r.onMutationUpdate(s)}),ut(this,ar).notify({mutation:this,type:"updated",action:s})})},iN);function m_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ml,jn,Cm,oN,u_=(oN=class extends gh{constructor(s={}){super();Ms(this,ml);Ms(this,jn);Ms(this,Cm);this.config=s,hs(this,ml,new Set),hs(this,jn,new Map),hs(this,Cm,0)}build(s,a,r){const n=new d_({mutationCache:this,mutationId:++qm(this,Cm)._,options:s.defaultMutationOptions(a),state:r});return this.add(n),n}add(s){ut(this,ml).add(s);const a=uu(s);if(typeof a=="string"){const r=ut(this,jn).get(a);r?r.push(s):ut(this,jn).set(a,[s])}this.notify({type:"added",mutation:s})}remove(s){if(ut(this,ml).delete(s)){const a=uu(s);if(typeof a=="string"){const r=ut(this,jn).get(a);if(r)if(r.length>1){const n=r.indexOf(s);n!==-1&&r.splice(n,1)}else r[0]===s&&ut(this,jn).delete(a)}}this.notify({type:"removed",mutation:s})}canRun(s){const a=uu(s);if(typeof a=="string"){const r=ut(this,jn).get(a),n=r==null?void 0:r.find(l=>l.state.status==="pending");return!n||n===s}else return!0}runNext(s){var r;const a=uu(s);if(typeof a=="string"){const n=(r=ut(this,jn).get(a))==null?void 0:r.find(l=>l!==s&&l.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){or.batch(()=>{ut(this,ml).forEach(s=>{this.notify({type:"removed",mutation:s})}),ut(this,ml).clear(),ut(this,jn).clear()})}getAll(){return Array.from(ut(this,ml))}find(s){const a={exact:!0,...s};return this.getAll().find(r=>fy(a,r))}findAll(s={}){return this.getAll().filter(a=>fy(s,a))}notify(s){or.batch(()=>{this.listeners.forEach(a=>{a(s)})})}resumePausedMutations(){const s=this.getAll().filter(a=>a.state.isPaused);return or.batch(()=>Promise.all(s.map(a=>a.continue().catch(wn))))}},ml=new WeakMap,jn=new WeakMap,Cm=new WeakMap,oN);function uu(t){var s;return(s=t.options.scope)==null?void 0:s.id}function wy(t){return{onFetch:(s,a)=>{var u,x,p,h,y;const r=s.options,n=(p=(x=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:x.fetchMore)==null?void 0:p.direction,l=((h=s.state.data)==null?void 0:h.pages)||[],i=((y=s.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let f=!1;const v=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(s.signal.aborted?f=!0:s.signal.addEventListener("abort",()=>{f=!0}),s.signal)})},w=l2(s.options,s.fetchOptions),g=async(j,N,E)=>{if(f)return Promise.reject();if(N==null&&j.pages.length)return Promise.resolve(j);const k=(()=>{const X={client:s.client,queryKey:s.queryKey,pageParam:N,direction:E?"backward":"forward",meta:s.options.meta};return v(X),X})(),A=await w(k),{maxPages:T}=s.options,M=E?ZA:QA;return{pages:M(j.pages,A,T),pageParams:M(j.pageParams,N,T)}};if(n&&l.length){const j=n==="backward",N=j?x_:yy,E={pages:l,pageParams:i},C=N(r,E);o=await g(E,C,j)}else{const j=t??l.length;do{const N=c===0?i[0]??r.initialPageParam:yy(r,o);if(c>0&&N==null)break;o=await g(o,N),c++}while(c<j)}return o};s.options.persister?s.fetchFn=()=>{var f,v;return(v=(f=s.options).persister)==null?void 0:v.call(f,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},a)}:s.fetchFn=d}}}function yy(t,{pages:s,pageParams:a}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,a[r],a):void 0}function x_(t,{pages:s,pageParams:a}){var r;return s.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,s[0],s,a[0],a):void 0}var ma,Kl,Xl,Cc,kc,Ql,Ec,Dc,cN,h_=(cN=class{constructor(t={}){Ms(this,ma);Ms(this,Kl);Ms(this,Xl);Ms(this,Cc);Ms(this,kc);Ms(this,Ql);Ms(this,Ec);Ms(this,Dc);hs(this,ma,t.queryCache||new c_),hs(this,Kl,t.mutationCache||new u_),hs(this,Xl,t.defaultOptions||{}),hs(this,Cc,new Map),hs(this,kc,new Map),hs(this,Ql,0)}mount(){qm(this,Ql)._++,ut(this,Ql)===1&&(hs(this,Ec,i2.subscribe(async t=>{t&&(await this.resumePausedMutations(),ut(this,ma).onFocus())})),hs(this,Dc,Ax.subscribe(async t=>{t&&(await this.resumePausedMutations(),ut(this,ma).onOnline())})))}unmount(){var t,s;qm(this,Ql)._--,ut(this,Ql)===0&&((t=ut(this,Ec))==null||t.call(this),hs(this,Ec,void 0),(s=ut(this,Dc))==null||s.call(this),hs(this,Dc,void 0))}isFetching(t){return ut(this,ma).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ut(this,Kl).findAll({...t,status:"pending"}).length}getQueryData(t){var a;const s=this.defaultQueryOptions({queryKey:t});return(a=ut(this,ma).get(s.queryHash))==null?void 0:a.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),a=ut(this,ma).build(this,s),r=a.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&a.isStaleByTime(Xf(s.staleTime,a))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(t){return ut(this,ma).findAll(t).map(({queryKey:s,state:a})=>{const r=a.data;return[s,r]})}setQueryData(t,s,a){const r=this.defaultQueryOptions({queryKey:t}),n=ut(this,ma).get(r.queryHash),l=n==null?void 0:n.state.data,i=HA(s,l);if(i!==void 0)return ut(this,ma).build(this,r).setData(i,{...a,manual:!0})}setQueriesData(t,s,a){return or.batch(()=>ut(this,ma).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,a)]))}getQueryState(t){var a;const s=this.defaultQueryOptions({queryKey:t});return(a=ut(this,ma).get(s.queryHash))==null?void 0:a.state}removeQueries(t){const s=ut(this,ma);or.batch(()=>{s.findAll(t).forEach(a=>{s.remove(a)})})}resetQueries(t,s){const a=ut(this,ma);return or.batch(()=>(a.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const a={revert:!0,...s},r=or.batch(()=>ut(this,ma).findAll(t).map(n=>n.cancel(a)));return Promise.all(r).then(wn).catch(wn)}invalidateQueries(t,s={}){return or.batch(()=>(ut(this,ma).findAll(t).forEach(a=>{a.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const a={...s,cancelRefetch:s.cancelRefetch??!0},r=or.batch(()=>ut(this,ma).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let l=n.fetch(void 0,a);return a.throwOnError||(l=l.catch(wn)),n.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(wn)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const a=ut(this,ma).build(this,s);return a.isStaleByTime(Xf(s.staleTime,a))?a.fetch(s):Promise.resolve(a.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(wn).catch(wn)}fetchInfiniteQuery(t){return t.behavior=wy(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(wn).catch(wn)}ensureInfiniteQueryData(t){return t.behavior=wy(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ax.isOnline()?ut(this,Kl).resumePausedMutations():Promise.resolve()}getQueryCache(){return ut(this,ma)}getMutationCache(){return ut(this,Kl)}getDefaultOptions(){return ut(this,Xl)}setDefaultOptions(t){hs(this,Xl,t)}setQueryDefaults(t,s){ut(this,Cc).set(um(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...ut(this,Cc).values()],a={};return s.forEach(r=>{xm(t,r.queryKey)&&Object.assign(a,r.defaultOptions)}),a}setMutationDefaults(t,s){ut(this,kc).set(um(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...ut(this,kc).values()],a={};return s.forEach(r=>{xm(t,r.mutationKey)&&Object.assign(a,r.defaultOptions)}),a}defaultQueryOptions(t){if(t._defaulted)return t;const s={...ut(this,Xl).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Ng(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===bg&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ut(this,Xl).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ut(this,ma).clear(),ut(this,Kl).clear()}},ma=new WeakMap,Kl=new WeakMap,Xl=new WeakMap,Cc=new WeakMap,kc=new WeakMap,Ql=new WeakMap,Ec=new WeakMap,Dc=new WeakMap,cN),p_=m.createContext(void 0),f_=({client:t,children:s})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(p_.Provider,{value:t,children:s}));function ps(t,s,{checkForDefaultPrevented:a=!0}={}){return function(n){if(t==null||t(n),a===!1||!n.defaultPrevented)return s==null?void 0:s(n)}}function u2(t){const s=t+"CollectionProvider",[a,r]=Pl(s),[n,l]=a(s,{collectionRef:{current:null},itemMap:new Map}),i=f=>{const{scope:v,children:w}=f,g=Fe.useRef(null),j=Fe.useRef(new Map).current;return e.jsx(n,{scope:v,itemMap:j,collectionRef:g,children:w})};i.displayName=s;const o=t+"CollectionSlot",c=mo(o),d=Fe.forwardRef((f,v)=>{const{scope:w,children:g}=f,j=l(o,w),N=Gs(v,j.collectionRef);return e.jsx(c,{ref:N,children:g})});d.displayName=o;const u=t+"CollectionItemSlot",x="data-radix-collection-item",p=mo(u),h=Fe.forwardRef((f,v)=>{const{scope:w,children:g,...j}=f,N=Fe.useRef(null),E=Gs(v,N),C=l(u,w);return Fe.useEffect(()=>(C.itemMap.set(N,{ref:N,...j}),()=>void C.itemMap.delete(N))),e.jsx(p,{[x]:"",ref:E,children:g})});h.displayName=u;function y(f){const v=l(t+"CollectionConsumer",f);return Fe.useCallback(()=>{const g=v.collectionRef.current;if(!g)return[];const j=Array.from(g.querySelectorAll(`[${x}]`));return Array.from(v.itemMap.values()).sort((C,k)=>j.indexOf(C.ref.current)-j.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:d,ItemSlot:h},y,r]}function g_(t,s=globalThis==null?void 0:globalThis.document){const a=cn(t);m.useEffect(()=>{const r=n=>{n.key==="Escape"&&a(n)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[a,s])}var v_="DismissableLayer",Zf="dismissableLayer.update",w_="dismissableLayer.pointerDownOutside",y_="dismissableLayer.focusOutside",jy,x2=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tm=m.forwardRef((t,s)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:r,onPointerDownOutside:n,onFocusOutside:l,onInteractOutside:i,onDismiss:o,...c}=t,d=m.useContext(x2),[u,x]=m.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=m.useState({}),y=Gs(s,k=>x(k)),f=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=f.indexOf(v),g=u?f.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,N=g>=w,E=N_(k=>{const A=k.target,T=[...d.branches].some(M=>M.contains(A));!N||T||(n==null||n(k),i==null||i(k),k.defaultPrevented||o==null||o())},p),C=b_(k=>{const A=k.target;[...d.branches].some(M=>M.contains(A))||(l==null||l(k),i==null||i(k),k.defaultPrevented||o==null||o())},p);return g_(k=>{g===d.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&o&&(k.preventDefault(),o()))},p),m.useEffect(()=>{if(u)return a&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(jy=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Ny(),()=>{a&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=jy)}},[u,p,a,d]),m.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Ny())},[u,d]),m.useEffect(()=>{const k=()=>h({});return document.addEventListener(Zf,k),()=>document.removeEventListener(Zf,k)},[]),e.jsx(ws.div,{...c,ref:y,style:{pointerEvents:j?N?"auto":"none":void 0,...t.style},onFocusCapture:ps(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ps(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ps(t.onPointerDownCapture,E.onPointerDownCapture)})});Tm.displayName=v_;var j_="DismissableLayerBranch",h2=m.forwardRef((t,s)=>{const a=m.useContext(x2),r=m.useRef(null),n=Gs(s,r);return m.useEffect(()=>{const l=r.current;if(l)return a.branches.add(l),()=>{a.branches.delete(l)}},[a.branches]),e.jsx(ws.div,{...t,ref:n})});h2.displayName=j_;function N_(t,s=globalThis==null?void 0:globalThis.document){const a=cn(t),r=m.useRef(!1),n=m.useRef(()=>{});return m.useEffect(()=>{const l=o=>{if(o.target&&!r.current){let c=function(){p2(w_,a,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",n.current),n.current=c,s.addEventListener("click",n.current,{once:!0})):c()}else s.removeEventListener("click",n.current);r.current=!1},i=window.setTimeout(()=>{s.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(i),s.removeEventListener("pointerdown",l),s.removeEventListener("click",n.current)}},[s,a]),{onPointerDownCapture:()=>r.current=!0}}function b_(t,s=globalThis==null?void 0:globalThis.document){const a=cn(t),r=m.useRef(!1);return m.useEffect(()=>{const n=l=>{l.target&&!r.current&&p2(y_,a,{originalEvent:l},{discrete:!1})};return s.addEventListener("focusin",n),()=>s.removeEventListener("focusin",n)},[s,a]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ny(){const t=new CustomEvent(Zf);document.dispatchEvent(t)}function p2(t,s,a,{discrete:r}){const n=a.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:a});s&&n.addEventListener(t,s,{once:!0}),r?M1(n,l):n.dispatchEvent(l)}var S_=Tm,C_=h2,k_="Portal",Fm=m.forwardRef((t,s)=>{var o;const{container:a,...r}=t,[n,l]=m.useState(!1);Ca(()=>l(!0),[]);const i=a||n&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return i?b1.createPortal(e.jsx(ws.div,{...r,ref:s}),i):null});Fm.displayName=k_;function E_(t,s){return m.useReducer((a,r)=>s[a][r]??a,t)}var Ti=t=>{const{present:s,children:a}=t,r=D_(s),n=typeof a=="function"?a({present:r.isPresent}):m.Children.only(a),l=Gs(r.ref,A_(n));return typeof a=="function"||r.isPresent?m.cloneElement(n,{ref:l}):null};Ti.displayName="Presence";function D_(t){const[s,a]=m.useState(),r=m.useRef(null),n=m.useRef(t),l=m.useRef("none"),i=t?"mounted":"unmounted",[o,c]=E_(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const d=xu(r.current);l.current=o==="mounted"?d:"none"},[o]),Ca(()=>{const d=r.current,u=n.current;if(u!==t){const p=l.current,h=xu(d);t?c("MOUNT"):h==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&p!==h?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,c]),Ca(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,x=h=>{const f=xu(r.current).includes(CSS.escape(h.animationName));if(h.target===s&&f&&(c("ANIMATION_END"),!n.current)){const v=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=v)})}},p=h=>{h.target===s&&(l.current=xu(r.current))};return s.addEventListener("animationstart",p),s.addEventListener("animationcancel",x),s.addEventListener("animationend",x),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",p),s.removeEventListener("animationcancel",x),s.removeEventListener("animationend",x)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:m.useCallback(d=>{r.current=d?getComputedStyle(d):null,a(d)},[])}}function xu(t){return(t==null?void 0:t.animationName)||"none"}function A_(t){var r,n;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var __=S0[" useInsertionEffect ".trim().toString()]||Ca;function Oc({prop:t,defaultProp:s,onChange:a=()=>{},caller:r}){const[n,l,i]=P_({defaultProp:s,onChange:a}),o=t!==void 0,c=o?t:n;{const u=m.useRef(t!==void 0);m.useEffect(()=>{const x=u.current;x!==o&&console.warn(`${r} is changing from ${x?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const d=m.useCallback(u=>{var x;if(o){const p=T_(u)?u(t):u;p!==t&&((x=i.current)==null||x.call(i,p))}else l(u)},[o,t,l,i]);return[c,d]}function P_({defaultProp:t,onChange:s}){const[a,r]=m.useState(t),n=m.useRef(a),l=m.useRef(s);return __(()=>{l.current=s},[s]),m.useEffect(()=>{var i;n.current!==a&&((i=l.current)==null||i.call(l,a),n.current=a)},[a,n]),[a,r,l]}function T_(t){return typeof t=="function"}var f2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),F_="VisuallyHidden",Sg=m.forwardRef((t,s)=>e.jsx(ws.span,{...t,ref:s,style:{...f2,...t.style}}));Sg.displayName=F_;var Cg="ToastProvider",[kg,M_,I_]=u2("Toast"),[g2,yY]=Pl("Toast",[I_]),[R_,wh]=g2(Cg),v2=t=>{const{__scopeToast:s,label:a="Notification",duration:r=5e3,swipeDirection:n="right",swipeThreshold:l=50,children:i}=t,[o,c]=m.useState(null),[d,u]=m.useState(0),x=m.useRef(!1),p=m.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cg}\`. Expected non-empty \`string\`.`),e.jsx(kg.Provider,{scope:s,children:e.jsx(R_,{scope:s,label:a,duration:r,swipeDirection:n,swipeThreshold:l,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:m.useCallback(()=>u(h=>h+1),[]),onToastRemove:m.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:p,children:i})})};v2.displayName=Cg;var w2="ToastViewport",O_=["F8"],e0="toast.viewportPause",t0="toast.viewportResume",y2=m.forwardRef((t,s)=>{const{__scopeToast:a,hotkey:r=O_,label:n="Notifications ({hotkey})",...l}=t,i=wh(w2,a),o=M_(a),c=m.useRef(null),d=m.useRef(null),u=m.useRef(null),x=m.useRef(null),p=Gs(s,x,i.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;m.useEffect(()=>{const v=w=>{var j;r.length!==0&&r.every(N=>w[N]||w.code===N)&&((j=x.current)==null||j.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),m.useEffect(()=>{const v=c.current,w=x.current;if(y&&v&&w){const g=()=>{if(!i.isClosePausedRef.current){const C=new CustomEvent(e0);w.dispatchEvent(C),i.isClosePausedRef.current=!0}},j=()=>{if(i.isClosePausedRef.current){const C=new CustomEvent(t0);w.dispatchEvent(C),i.isClosePausedRef.current=!1}},N=C=>{!v.contains(C.relatedTarget)&&j()},E=()=>{v.contains(document.activeElement)||j()};return v.addEventListener("focusin",g),v.addEventListener("focusout",N),v.addEventListener("pointermove",g),v.addEventListener("pointerleave",E),window.addEventListener("blur",g),window.addEventListener("focus",j),()=>{v.removeEventListener("focusin",g),v.removeEventListener("focusout",N),v.removeEventListener("pointermove",g),v.removeEventListener("pointerleave",E),window.removeEventListener("blur",g),window.removeEventListener("focus",j)}}},[y,i.isClosePausedRef]);const f=m.useCallback(({tabbingDirection:v})=>{const g=o().map(j=>{const N=j.ref.current,E=[N,...K_(N)];return v==="forwards"?E:E.reverse()});return(v==="forwards"?g.reverse():g).flat()},[o]);return m.useEffect(()=>{const v=x.current;if(v){const w=g=>{var E,C,k;const j=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!j){const A=document.activeElement,T=g.shiftKey;if(g.target===v&&T){(E=d.current)==null||E.focus();return}const ne=f({tabbingDirection:T?"backwards":"forwards"}),Q=ne.findIndex(oe=>oe===A);Sp(ne.slice(Q+1))?g.preventDefault():T?(C=d.current)==null||C.focus():(k=u.current)==null||k.focus()}};return v.addEventListener("keydown",w),()=>v.removeEventListener("keydown",w)}},[o,f]),e.jsxs(C_,{ref:c,role:"region","aria-label":n.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&e.jsx(s0,{ref:d,onFocusFromOutsideViewport:()=>{const v=f({tabbingDirection:"forwards"});Sp(v)}}),e.jsx(kg.Slot,{scope:a,children:e.jsx(ws.ol,{tabIndex:-1,...l,ref:p})}),y&&e.jsx(s0,{ref:u,onFocusFromOutsideViewport:()=>{const v=f({tabbingDirection:"backwards"});Sp(v)}})]})});y2.displayName=w2;var j2="ToastFocusProxy",s0=m.forwardRef((t,s)=>{const{__scopeToast:a,onFocusFromOutsideViewport:r,...n}=t,l=wh(j2,a);return e.jsx(Sg,{tabIndex:0,...n,ref:s,style:{position:"fixed"},onFocus:i=>{var d;const o=i.relatedTarget;!((d=l.viewport)!=null&&d.contains(o))&&r()}})});s0.displayName=j2;var Mm="Toast",L_="toast.swipeStart",$_="toast.swipeMove",U_="toast.swipeCancel",B_="toast.swipeEnd",N2=m.forwardRef((t,s)=>{const{forceMount:a,open:r,defaultOpen:n,onOpenChange:l,...i}=t,[o,c]=Oc({prop:r,defaultProp:n??!0,onChange:l,caller:Mm});return e.jsx(Ti,{present:a||o,children:e.jsx(Y_,{open:o,...i,ref:s,onClose:()=>c(!1),onPause:cn(t.onPause),onResume:cn(t.onResume),onSwipeStart:ps(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ps(t.onSwipeMove,d=>{const{x:u,y:x}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:ps(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ps(t.onSwipeEnd,d=>{const{x:u,y:x}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),c(!1)})})})});N2.displayName=Mm;var[z_,V_]=g2(Mm,{onClose(){}}),Y_=m.forwardRef((t,s)=>{const{__scopeToast:a,type:r="foreground",duration:n,open:l,onClose:i,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:x,onSwipeCancel:p,onSwipeEnd:h,...y}=t,f=wh(Mm,a),[v,w]=m.useState(null),g=Gs(s,oe=>w(oe)),j=m.useRef(null),N=m.useRef(null),E=n||f.duration,C=m.useRef(0),k=m.useRef(E),A=m.useRef(0),{onToastAdd:T,onToastRemove:M}=f,X=cn(()=>{var ge;(v==null?void 0:v.contains(document.activeElement))&&((ge=f.viewport)==null||ge.focus()),i()}),ne=m.useCallback(oe=>{!oe||oe===1/0||(window.clearTimeout(A.current),C.current=new Date().getTime(),A.current=window.setTimeout(X,oe))},[X]);m.useEffect(()=>{const oe=f.viewport;if(oe){const ge=()=>{ne(k.current),d==null||d()},me=()=>{const H=new Date().getTime()-C.current;k.current=k.current-H,window.clearTimeout(A.current),c==null||c()};return oe.addEventListener(e0,me),oe.addEventListener(t0,ge),()=>{oe.removeEventListener(e0,me),oe.removeEventListener(t0,ge)}}},[f.viewport,E,c,d,ne]),m.useEffect(()=>{l&&!f.isClosePausedRef.current&&ne(E)},[l,E,f.isClosePausedRef,ne]),m.useEffect(()=>(T(),()=>M()),[T,M]);const Q=m.useMemo(()=>v?A2(v):null,[v]);return f.viewport?e.jsxs(e.Fragment,{children:[Q&&e.jsx(W_,{__scopeToast:a,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:Q}),e.jsx(z_,{scope:a,onClose:X,children:zr.createPortal(e.jsx(kg.ItemSlot,{scope:a,children:e.jsx(S_,{asChild:!0,onEscapeKeyDown:ps(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||X(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(ws.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":f.swipeDirection,...y,ref:g,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ps(t.onKeyDown,oe=>{oe.key==="Escape"&&(o==null||o(oe.nativeEvent),oe.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:ps(t.onPointerDown,oe=>{oe.button===0&&(j.current={x:oe.clientX,y:oe.clientY})}),onPointerMove:ps(t.onPointerMove,oe=>{if(!j.current)return;const ge=oe.clientX-j.current.x,me=oe.clientY-j.current.y,H=!!N.current,L=["left","right"].includes(f.swipeDirection),he=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,ie=L?he(0,ge):0,ke=L?0:he(0,me),V=oe.pointerType==="touch"?10:2,O={x:ie,y:ke},Y={originalEvent:oe,delta:O};H?(N.current=O,hu($_,x,Y,{discrete:!1})):by(O,f.swipeDirection,V)?(N.current=O,hu(L_,u,Y,{discrete:!1}),oe.target.setPointerCapture(oe.pointerId)):(Math.abs(ge)>V||Math.abs(me)>V)&&(j.current=null)}),onPointerUp:ps(t.onPointerUp,oe=>{const ge=N.current,me=oe.target;if(me.hasPointerCapture(oe.pointerId)&&me.releasePointerCapture(oe.pointerId),N.current=null,j.current=null,ge){const H=oe.currentTarget,L={originalEvent:oe,delta:ge};by(ge,f.swipeDirection,f.swipeThreshold)?hu(B_,h,L,{discrete:!0}):hu(U_,p,L,{discrete:!0}),H.addEventListener("click",he=>he.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),W_=t=>{const{__scopeToast:s,children:a,...r}=t,n=wh(Mm,s),[l,i]=m.useState(!1),[o,c]=m.useState(!1);return q_(()=>i(!0)),m.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:e.jsx(Fm,{asChild:!0,children:e.jsx(Sg,{...r,children:l&&e.jsxs(e.Fragment,{children:[n.label," ",a]})})})},H_="ToastTitle",b2=m.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t;return e.jsx(ws.div,{...r,ref:s})});b2.displayName=H_;var G_="ToastDescription",S2=m.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t;return e.jsx(ws.div,{...r,ref:s})});S2.displayName=G_;var C2="ToastAction",k2=m.forwardRef((t,s)=>{const{altText:a,...r}=t;return a.trim()?e.jsx(D2,{altText:a,asChild:!0,children:e.jsx(Eg,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${C2}\`. Expected non-empty \`string\`.`),null)});k2.displayName=C2;var E2="ToastClose",Eg=m.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t,n=V_(E2,a);return e.jsx(D2,{asChild:!0,children:e.jsx(ws.button,{type:"button",...r,ref:s,onClick:ps(t.onClick,n.onClose)})})});Eg.displayName=E2;var D2=m.forwardRef((t,s)=>{const{__scopeToast:a,altText:r,...n}=t;return e.jsx(ws.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...n,ref:s})});function A2(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),J_(r)){const n=r.ariaHidden||r.hidden||r.style.display==="none",l=r.dataset.radixToastAnnounceExclude==="";if(!n)if(l){const i=r.dataset.radixToastAnnounceAlt;i&&s.push(i)}else s.push(...A2(r))}}),s}function hu(t,s,a,{discrete:r}){const n=a.originalEvent.currentTarget,l=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:a});s&&n.addEventListener(t,s,{once:!0}),r?M1(n,l):n.dispatchEvent(l)}var by=(t,s,a=0)=>{const r=Math.abs(t.x),n=Math.abs(t.y),l=r>n;return s==="left"||s==="right"?l&&r>a:!l&&n>a};function q_(t=()=>{}){const s=cn(t);Ca(()=>{let a=0,r=0;return a=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(r)}},[s])}function J_(t){return t.nodeType===t.ELEMENT_NODE}function K_(t){const s=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function Sp(t){const s=document.activeElement;return t.some(a=>a===s?!0:(a.focus(),document.activeElement!==s))}var X_=v2,_2=y2,P2=N2,T2=b2,F2=S2,M2=k2,I2=Eg;const Q_=X_,R2=m.forwardRef(({className:t,...s},a)=>e.jsx(_2,{ref:a,className:bt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));R2.displayName=_2.displayName;const Z_=ph("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),O2=m.forwardRef(({className:t,variant:s,...a},r)=>e.jsx(P2,{ref:r,className:bt(Z_({variant:s}),t),...a}));O2.displayName=P2.displayName;const eP=m.forwardRef(({className:t,...s},a)=>e.jsx(M2,{ref:a,className:bt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));eP.displayName=M2.displayName;const L2=m.forwardRef(({className:t,...s},a)=>e.jsx(I2,{ref:a,className:bt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(jt,{className:"h-4 w-4"})}));L2.displayName=I2.displayName;const $2=m.forwardRef(({className:t,...s},a)=>e.jsx(T2,{ref:a,className:bt("text-sm font-semibold",t),...s}));$2.displayName=T2.displayName;const U2=m.forwardRef(({className:t,...s},a)=>e.jsx(F2,{ref:a,className:bt("text-sm opacity-90",t),...s}));U2.displayName=F2.displayName;function tP(){const{toasts:t}=ya();return e.jsxs(Q_,{children:[t.map(function({id:s,title:a,description:r,action:n,...l}){return e.jsxs(O2,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx($2,{children:a}),r&&e.jsx(U2,{children:r})]}),n,e.jsx(L2,{})]},s)}),e.jsx(R2,{})]})}var sP="Label",B2=m.forwardRef((t,s)=>e.jsx(ws.label,{...t,ref:s,onMouseDown:a=>{var n;a.target.closest("button, input, select, textarea")||((n=t.onMouseDown)==null||n.call(t,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));B2.displayName=sP;var z2=B2;const aP=ph("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ae=m.forwardRef(({className:t,...s},a)=>e.jsx(z2,{ref:a,className:bt(aP(),t),...s}));ae.displayName=z2.displayName;const uc={BACKEND_URL:"http://localhost:4000/api".replace(/\/api$/,"")||"http://localhost:4000",BACKEND_API:"http://localhost:4000/api",FRONTEND_URL:"http://localhost:8080",TIMEOUT:1e4,HEADERS:{"Content-Type":"application/json",Accept:"application/json"}};async function Na(t,s={}){try{const a=t.startsWith("/")?t.slice(1):t,r=`${uc.BACKEND_API}/${a}`;console.log(` API Call: ${s.method||"GET"} ${r}`);const n=await fetch(r,{timeout:uc.TIMEOUT,headers:{...uc.HEADERS,...s.headers},...s});if(console.log(` Response: ${n.status} ${n.statusText}`),!n.ok){const i=await n.json().catch(()=>({error:`HTTP ${n.status}: ${n.statusText}`}));throw new Error(i.error||`API Error: ${n.status}`)}const l=await n.json();return console.log(` Success: Received ${Array.isArray(l)?l.length+" items":"data"}`),l}catch(a){throw console.error(" API call failed:",a.message),a}}const V2={getAll:()=>Na("settings"),get:t=>Na(`settings/${t}`),update:(t,s,a="text",r="")=>Na(`settings/${t}`,{method:"PUT",body:JSON.stringify({value:s,setting_type:a,description:r})}),create:(t,s,a="text",r="")=>Na("settings",{method:"POST",body:JSON.stringify({key:t,value:s,setting_type:a,description:r})}),delete:t=>Na(`settings/${t}`,{method:"DELETE"}),uploadFile:(t,s,a="")=>{const r=new FormData;return r.append("file",t),r.append("setting_key",s),r.append("description",a),fetch(`${uc.BACKEND_URL}/api/upload-settings-file`,{method:"POST",body:r}).then(n=>n.json())},getFileUrl:t=>`${uc.BACKEND_URL}/api/settings/files/${t}`,deleteFile:t=>Na(`settings/files/${t}`,{method:"DELETE"}),bulkUpdate:t=>Na("settings/bulk-update",{method:"POST",body:JSON.stringify({settings:t})}),export:async()=>{const t=await Na("settings");return{exportDate:new Date().toISOString(),settingsCount:t.length,settings:t}},import:t=>{const s=Array.isArray(t)?t:t.settings;return Na("settings/bulk-update",{method:"POST",body:JSON.stringify({settings:s})})}},Y2={getAll:()=>Na("patients"),getById:t=>Na(`patients/${t}`),create:t=>Na("patients",{method:"POST",body:JSON.stringify(t)}),update:(t,s)=>Na(`patients/${t}`,{method:"PUT",body:JSON.stringify(s)}),delete:t=>Na(`patients/${t}`,{method:"DELETE"})},W2={getAll:()=>Na("management-users"),getById:t=>Na(`management-users/${t}`),create:t=>Na("management-users",{method:"POST",body:JSON.stringify(t)}),update:(t,s)=>Na(`management-users/${t}`,{method:"PUT",body:JSON.stringify(s)}),delete:t=>Na(`management-users/${t}`,{method:"DELETE"})};async function H2(){try{const s=(await V2.getAll()).reduce((a,r)=>(a[r.setting_key]=r.setting_value,r.file_path&&(a[`${r.setting_key}_file_path`]=r.file_path),a),{});if(s.website_title&&(document.title=s.website_title),s.website_favicon_file_path){let a=document.querySelector("link[rel~='icon']");a||(a=document.createElement("link"),a.rel="icon",document.getElementsByTagName("head")[0].appendChild(a)),a.href=s.website_favicon_file_path}return s}catch(t){return console.error("Failed to load website settings:",t),{}}}const rP=Object.freeze(Object.defineProperty({__proto__:null,API_CONFIG:uc,apiCall:Na,loadWebsiteSettings:H2,patientsAPI:Y2,settingsAPI:V2,usersAPI:W2},Symbol.toStringTag,{value:"Module"})),nP=({onLogin:t})=>{const s=al(),[a,r]=m.useState(""),[n,l]=m.useState(""),[i,o]=m.useState(!1),[c,d]=m.useState(null),[u,x]=m.useState([]),[p,h]=m.useState(0);m.useRef(null);const y=["/server/Photos/Login Scrolling/hand-with-medication-dark-style.jpg","/server/Photos/Login Scrolling/hand-with-pills-dark-environment.jpg","/server/Photos/Login Scrolling/people-meeting-support-group.jpg"];m.useEffect(()=>{const v=setInterval(()=>{h(w=>(w+1)%y.length)},5e3);return()=>clearInterval(v)},[y.length]),m.useEffect(()=>{localStorage.getItem("healthcare_user")&&s("/dashboard",{replace:!0})},[s]),m.useEffect(()=>{(async()=>{try{console.log(" Loading website settings via unified API..."),await H2(),console.log(" Website settings applied successfully")}catch(w){console.error(" Failed to load settings:",w)}})()},[]),m.useEffect(()=>{(async()=>{try{const w=await W2.getAll();w&&x(w.filter(g=>(g.user_status||g.status)==="Active"))}catch{}})()},[]);const f=async v=>{v.preventDefault(),o(!0);try{const w=await fetch("http://localhost:4000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:n})}),g=await w.json();if(!w.ok){Te({title:"Login Failed",description:g.error||"Invalid credentials",variant:"destructive"}),o(!1);return}console.log(" Database login successful:",g),t({email:g.email,role:g.role,name:g.name,permissions:g.permissions||[]}),Te({title:"Welcome!",description:`Logged in as ${g.name} (${g.role})`}),s("/dashboard",{replace:!0})}catch(w){console.error(" Login error:",w),Te({title:"Connection Error",description:"Failed to connect to server. Make sure backend is running on port 4000.",variant:"destructive"})}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-20 -left-20 w-96 h-96 bg-gradient-to-r from-blue-200/30 to-purple-200/30 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-20 -right-20 w-96 h-96 bg-gradient-to-r from-indigo-200/30 to-pink-200/30 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-72 h-72 bg-gradient-to-r from-cyan-200/20 to-blue-200/20 rounded-full blur-3xl animate-pulse delay-500"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[600px]",children:[e.jsxs("div",{className:"lg:flex-1 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[y.map((v,w)=>e.jsx("div",{className:`absolute inset-0 bg-cover bg-center transition-all duration-1000 ease-in-out ${w===p?"opacity-100 scale-100":"opacity-0 scale-105"}`,style:{backgroundImage:`url('${v}')`}},w)),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/60 via-black/40 to-black/60"})]}),e.jsxs("div",{className:"relative z-10 h-full min-h-[400px] lg:min-h-[600px] p-8 lg:p-12 flex flex-col justify-between",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-white/5 bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[length:60px_60px]"})}),e.jsx("div",{}),e.jsx("div",{className:"flex justify-center space-x-2",children:y.map((v,w)=>e.jsx("button",{className:`h-2 rounded-full transition-all duration-300 ${w===p?"bg-yellow-300 w-8":"bg-white/50 w-2 hover:bg-white/70"}`,onClick:()=>h(w)},w))})]})]}),e.jsx("div",{className:"lg:flex-1 p-8 lg:p-12 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-3xl lg:text-4xl font-bold text-gray-900",children:"Sign In"}),e.jsx("p",{className:"text-gray-600",children:"Access your healthcare dashboard"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"email",className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[e.jsx(yi,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Email Address"})]}),e.jsx("div",{className:"relative",children:e.jsx(Ve,{id:"email",type:"email",placeholder:"Enter your email address",value:a,onChange:v=>r(v.target.value),required:!0,className:"w-full pl-4 pr-4 py-3 text-base border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 hover:bg-white"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"password",className:"text-sm font-semibold text-gray-700 flex items-center space-x-2",children:[e.jsx(Ks,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Password"})]}),e.jsx("div",{className:"relative",children:e.jsx(Ve,{id:"password",type:"password",placeholder:"Enter your password",value:n,onChange:v=>l(v.target.value),required:!0,className:"w-full pl-4 pr-4 py-3 text-base border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 hover:bg-white"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"remember",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"remember",className:"text-sm text-gray-600",children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:()=>{window.history.pushState(null,"","/forgot-password"),window.location.reload()},className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Forgot Password?"})]}),e.jsx(P,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:i?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Signing In..."})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"Sign In to Dashboard"}),e.jsx(st,{className:"w-5 h-5"})]})}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Secure access to your healthcare management platform"})})]})]})})]})}),e.jsx("div",{className:"text-center mt-8 text-gray-600",children:e.jsx("p",{className:"text-sm",children:" 2024 Nova CRM. Secure. Reliable. Efficient."})})]})]})},lP=({onBack:t})=>{const[s,a]=m.useState("email"),[r,n]=m.useState(""),[l,i]=m.useState(""),[o,c]=m.useState(""),[d,u]=m.useState(""),[x,p]=m.useState(!1),[h,y]=m.useState(!1),[f,v]=m.useState(300),[w,g]=m.useState(""),[j,N]=m.useState(""),[E,C]=m.useState("");m.useEffect(()=>{let oe;return h&&f>0?oe=setInterval(()=>{v(ge=>ge-1)},1e3):f===0&&(y(!1),g(""),Te({title:"OTP Expired",description:"The OTP has expired. Please request a new one.",variant:"destructive"}),a("email")),()=>clearInterval(oe)},[h,f]);const k=oe=>{const ge=Math.floor(oe/60),me=oe%60;return`${ge}:${me.toString().padStart(2,"0")}`},A=async oe=>{oe.preventDefault(),p(!0);try{console.log(" Sending OTP request for:",r);const ge=await fetch("http://localhost:4000/api/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),me=await ge.json();if(!ge.ok)throw new Error(me.error||"Failed to send OTP");console.log(" OTP sent successfully:",me),y(!0),v(300),a("otp"),Te({title:"OTP Sent Successfully",description:`A 6-digit OTP has been sent to ${me.sentTo} for user: ${r}`})}catch(ge){console.error(" Error:",ge),Te({title:"Error",description:ge.message||"Failed to send OTP. Please try again.",variant:"destructive"})}finally{p(!1)}},T=async oe=>{oe.preventDefault(),p(!0);try{console.log(" Verifying OTP:",{email:r,otp:l});const ge=await fetch("http://localhost:4000/api/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:l})}),me=await ge.json();if(!ge.ok)throw new Error(me.error||"Failed to verify OTP");console.log(" OTP verified successfully:",me),N(me.userId),C(me.userRole),a("reset"),Te({title:"OTP Verified",description:"OTP verified successfully. Please set your new password."})}catch(ge){console.error(" Error:",ge),Te({title:"Verification Failed",description:ge.message||"Invalid or expired OTP. Please try again.",variant:"destructive"})}finally{p(!1)}},M=async oe=>{oe.preventDefault(),p(!0);try{if(o!==d){Te({title:"Password Mismatch",description:"Passwords do not match. Please try again.",variant:"destructive"}),p(!1);return}if(o.length<6){Te({title:"Weak Password",description:"Password must be at least 6 characters long.",variant:"destructive"}),p(!1);return}if(!(await fetch(`http://localhost:4000/api/management-users/${j}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,role:E,password:o,status:"Active"})})).ok)throw new Error("Failed to update password");Te({title:"Password Reset Successful",description:"Your password has been updated successfully. You can now login with your new password."}),setTimeout(()=>{t()},2e3)}catch(ge){console.error(" Error:",ge),Te({title:"Error",description:"Failed to reset password. Please try again.",variant:"destructive"})}finally{p(!1)}},X=()=>e.jsxs(Ie,{className:"w-full max-w-md shadow-medical",children:[e.jsxs(Zt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(ia,{className:"w-16 h-16 text-primary"})}),e.jsx(Es,{className:"text-2xl font-bold text-primary",children:"Forgot Password"}),e.jsx(ti,{children:"Enter your email address to receive an OTP"})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email Address"}),e.jsx(Ve,{id:"email",type:"email",placeholder:"Enter your registered email",value:r,onChange:oe=>n(oe.target.value),required:!0,className:"transition-medical"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground bg-accent p-3 rounded-md",children:[e.jsx("strong",{children:"Note:"})," OTP will be sent to aedentek@gmail.com for verification. Please check your email inbox for the 6-digit code."]})]}),e.jsxs(Hu,{className:"flex flex-col gap-3",children:[e.jsx(P,{type:"submit",className:"w-full bg-gradient-medical hover:shadow-hover transition-medical",disabled:x||!r,children:x?"Sending OTP...":"Send OTP"}),e.jsxs("button",{type:"button",onClick:t,className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-primary",children:[e.jsx(kx,{className:"w-4 h-4"}),"Back to Login"]})]})]})]}),ne=()=>e.jsxs(Ie,{className:"w-full max-w-md shadow-medical",children:[e.jsxs(Zt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Ks,{className:"w-16 h-16 text-primary"})}),e.jsx(Es,{className:"text-2xl font-bold text-primary",children:"Verify OTP"}),e.jsx(ti,{children:"Enter the 6-digit OTP sent to aedentek@gmail.com"})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"otp",children:"OTP Code"}),e.jsx(Ve,{id:"otp",type:"text",placeholder:"Enter 6-digit OTP",value:l,onChange:oe=>i(oe.target.value.replace(/\D/g,"").slice(0,6)),required:!0,className:"transition-medical text-center text-2xl tracking-widest",maxLength:6})]}),e.jsxs("div",{className:"text-sm text-center",children:[e.jsxs("div",{className:"text-muted-foreground",children:["Time remaining: ",e.jsx("span",{className:"font-mono text-primary",children:k(f)})]}),e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground bg-accent p-2 rounded",children:[e.jsx("strong",{children:"Check your email:"})," OTP sent to aedentek@gmail.com",e.jsx("br",{}),"If you don't see the email, please check your spam folder."]})]})]}),e.jsxs(Hu,{className:"flex flex-col gap-3",children:[e.jsx(P,{type:"submit",className:"w-full bg-gradient-medical hover:shadow-hover transition-medical",disabled:x||l.length!==6,children:x?"Verifying...":"Verify OTP"}),e.jsxs("button",{type:"button",onClick:()=>a("email"),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-primary",children:[e.jsx(kx,{className:"w-4 h-4"}),"Back to Email"]})]})]})]}),Q=()=>e.jsxs(Ie,{className:"w-full max-w-md shadow-medical",children:[e.jsxs(Zt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(EA,{className:"w-16 h-16 text-primary"})}),e.jsx(Es,{className:"text-2xl font-bold text-primary",children:"Reset Password"}),e.jsx(ti,{children:"Create a new password for your account"})]}),e.jsxs("form",{onSubmit:M,children:[e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"password",children:"New Password"}),e.jsx(Ve,{id:"password",type:"password",placeholder:"Enter new password",value:o,onChange:oe=>c(oe.target.value),required:!0,className:"transition-medical",minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(Ve,{id:"confirmPassword",type:"password",placeholder:"Confirm new password",value:d,onChange:oe=>u(oe.target.value),required:!0,className:"transition-medical",minLength:6})]}),e.jsxs("div",{className:"text-sm text-muted-foreground bg-accent p-3 rounded-md",children:[e.jsx("strong",{children:"Password Requirements:"}),e.jsx("br",{})," At least 6 characters long",e.jsx("br",{})," Both passwords must match"]})]}),e.jsx(Hu,{className:"flex flex-col gap-3",children:e.jsx(P,{type:"submit",className:"w-full bg-gradient-medical hover:shadow-hover transition-medical",disabled:x||!o||!d||o!==d,children:x?"Saving...":"Save New Password"})})]})]});return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-8 bg-gradient-subtle",children:[s==="email"&&X(),s==="otp"&&ne(),s==="reset"&&Q()]})},ni={dashboard:{route:"/dashboard",name:"Dashboard",category:"Main"},"add-patient":{route:"/patients/add",name:"Add Patient",category:"Patient Management"},"patient-list":{route:"/patients/list",name:"Patient List",category:"Patient Management"},"test-report-amount":{route:"/patients/test-report-amount",name:"Test Report Amount",category:"Patient Management"},"patient-attendance":{route:"/patients/attendance",name:"Patient Attendance",category:"Patient Management"},"medical-records":{route:"/patients/medical-records",name:"Medical Record",category:"Patient Management"},"patient-history":{route:"/patients/history",name:"Patient History",category:"Patient Management"},"call-records":{route:"/patients/call-records",name:"Call Records",category:"Patient Management"},"payment-fees":{route:"/patients/payment-fees",name:"Payment Fees",category:"Patient Management"},"deleted-patients":{route:"/patients/deleted",name:"Deleted Patients",category:"Patient Management"},"add-staff":{route:"/management/add-staff",name:"Add Staff",category:"Staff Management"},"staff-category":{route:"/management/staff-category",name:"Staff Category",category:"Staff Management"},"staff-list":{route:"/management/staff",name:"Staff List",category:"Staff Management"},"staff-attendance":{route:"/management/attendance",name:"Staff Attendance",category:"Staff Management"},"salary-payment":{route:"/management/salary-payment",name:"Salary Payment",category:"Staff Management"},"deleted-staff":{route:"/management/deleted-staff",name:"Deleted Staff",category:"Staff Management"},"add-doctor":{route:"/management/add-doctor",name:"Add Doctor",category:"Doctor Management"},"doctor-role":{route:"/management/doctor-category",name:"Doctor Role",category:"Doctor Management"},"doctor-list":{route:"/management/doctors",name:"Doctor List",category:"Doctor Management"},"doctor-attendance":{route:"/management/doctor-attendance",name:"Doctor Attendance",category:"Doctor Management"},"doctor-salary":{route:"/management/doctor-salary",name:"Doctor Salary",category:"Doctor Management"},"doctor-advance":{route:"/management/doctor-advance",name:"Doctor Advance",category:"Doctor Management"},"deleted-doctors":{route:"/management/deleted-doctors",name:"Deleted Doctors",category:"Doctor Management"},"add-medicine":{route:"/medicine/add",name:"Add Medicine",category:"Medicine Management"},"medicine-categories":{route:"/medicine/categories",name:"Medicine Categories",category:"Medicine Management"},"medicine-suppliers":{route:"/medicine/suppliers",name:"Medicine Suppliers",category:"Medicine Management"},"medicine-stock":{route:"/medicine/stock",name:"Medicine Stock",category:"Medicine Management"},"medicine-accounts":{route:"/medicine/accounts",name:"Medicine Accounts",category:"Medicine Management"},"add-grocery":{route:"/grocery",name:"Add Grocery",category:"Grocery Management"},"grocery-categories":{route:"/grocery/categories",name:"Grocery Categories",category:"Grocery Management"},"grocery-suppliers":{route:"/grocery/suppliers",name:"Grocery Suppliers",category:"Grocery Management"},"grocery-stock":{route:"/grocery/stock",name:"Grocery Stock",category:"Grocery Management"},"grocery-accounts":{route:"/grocery/accounts",name:"Grocery Accounts",category:"Grocery Management"},"add-products":{route:"/general/add",name:"Add Products",category:"General Purchase"},"general-categories":{route:"/general/categories",name:"General Categories",category:"General Purchase"},"general-suppliers":{route:"/general/suppliers",name:"General Suppliers",category:"General Purchase"},"general-stock":{route:"/general/stock",name:"General Stock",category:"General Purchase"},"general-accounts":{route:"/general/accounts",name:"General Accounts",category:"General Purchase"},administration:{route:"/administration",name:"Administration",category:"User Management"},"add-role":{route:"/management/user-role/add",name:"Add Role",category:"User Management"},"role-management":{route:"/management/user-role/roles",name:"Role Management",category:"User Management"},"add-lead-category":{route:"/leads/add-category",name:"Add Lead Category",category:"Leads Management"},"leads-list":{route:"/leads/list",name:"Leads List",category:"Leads Management"},settings:{route:"/settings",name:"Settings",category:"Settings"}},iP=()=>{try{const t=localStorage.getItem("userData")||localStorage.getItem("healthcare_user");if(!t)return{permissions:[],role:""};const s=JSON.parse(t);return{permissions:s.permissions||[],role:s.role||""}}catch(t){return console.error("Error getting user permissions:",t),{permissions:[],role:""}}},oP=()=>Object.keys(ni).map(t=>({id:t,name:ni[t].name,route:ni[t].route,category:ni[t].category})),cP=(t,s,a)=>{if(a&&(a.toLowerCase()==="admin"||a.toLowerCase()==="administrator"||a.toLowerCase()==="super admin"))return t;const r=n=>{if(n.href){const l=Object.keys(ni).find(i=>ni[i].route===n.href);if(l&&!s.includes(l))return null}if(n.submenu&&Array.isArray(n.submenu)){const l=n.submenu.map(r).filter(i=>i!==null);return l.length===0?null:{...n,submenu:l}}return n};return t.map(r).filter(n=>n!==null)},dP=()=>{const t={};return Object.keys(ni).forEach(s=>{const a=ni[s];t[a.category]||(t[a.category]=[]),t[a.category].push({id:s,name:a.name,route:a.route})}),t},mP=({user:t,onLogout:s,onCollapsedChange:a})=>{const[r,n]=m.useState(!1),[l,i]=m.useState(!1),[o,c]=m.useState(null),[d,u]=m.useState([]),x=Co();m.useEffect(()=>{const w=iP(),g=t.permissions||w.permissions;u(g)},[t]);const p=()=>{const w=!r;n(w),a==null||a(w)};m.useEffect(()=>{i(!1)},[x.pathname]);const y=cP([{title:"Dashboard",icon:DA,href:"/dashboard",badge:null},{title:"Patient List",icon:Rt,submenu:[{title:"Add Patient",href:"/patients/add",icon:yi},{title:"Patient List",href:"/patients/list",icon:AA},{title:"Attendance",href:"/patients/attendance",icon:Pt},{title:"Medical Record",href:"/patients/medical-records",icon:It},{title:"Patient History",href:"/patients/history",icon:wr},{title:"Call Records",href:"/patients/call-records",icon:IA},{title:"Test Report Amount",href:"/patients/test-report-amount",icon:cs},{title:"Payment Fees",href:"/patients/payment-fees",icon:ts},{title:"Deleted Patients",href:"/patients/deleted",icon:mt}]},{title:"Staff List",icon:Kf,submenu:[{title:"Add Staff",href:"/management/add-staff",icon:us},{title:"Staff Category",href:"/management/staff-category",icon:ds},{title:"Staff List",href:"/management/staff",icon:Kf},{title:"Staff Attendance",href:"/management/attendance",icon:yA},{title:"Staff Advance",href:"/management/staff-advance",icon:cs},{title:"Salary Payment",href:"/management/salary-payment",icon:ts},{title:"Deleted Staff",href:"/management/deleted-staff",icon:mt}]},{title:"Doctors List",icon:fa,submenu:[{title:"Add Doctor",href:"/management/add-doctor",icon:us},{title:"Doctor Role",href:"/management/doctor-category",icon:ds},{title:"Doctor List",href:"/management/doctors",icon:fa},{title:"Doctor Attendance",href:"/management/doctor-attendance",icon:Pt},{title:"Doctor Advance",href:"/management/doctor-advance",icon:cs},{title:"Doctor Salary",href:"/management/doctor-salary",icon:ts},{title:"Deleted Doctors",href:"/management/deleted-doctors",icon:mt}]},{title:"Medicine",icon:Xa,submenu:[{title:"Add Medicine",href:"/medicine/add",icon:us},{title:"Categories",href:"/medicine/categories",icon:ds},{title:"Suppliers",href:"/medicine/suppliers",icon:Ta},{title:"Stock List",href:"/medicine/stock",icon:Jt},{title:"Accounts",href:"/medicine/accounts",icon:ts}]},{title:"Grocery",icon:gr,submenu:[{title:"Add Grocery",href:"/grocery",icon:us},{title:"Categories",href:"/grocery/categories",icon:ds},{title:"Suppliers",href:"/grocery/suppliers",icon:Ta},{title:"Stock List",href:"/grocery/stock",icon:Jt},{title:"Accounts",href:"/grocery/accounts",icon:ts}]},{title:"General Purchase",icon:LA,submenu:[{title:"Add Products",href:"/general/add",icon:us},{title:"Category",href:"/general/categories",icon:ds},{title:"Suppliers",href:"/general/suppliers",icon:Ta},{title:"Stock List",href:"/general/stock",icon:Jt},{title:"Accounts",href:"/general/accounts",icon:ts}]},{title:"User Role",icon:Ks,submenu:[{title:"Administration",href:"/administration",icon:Rt},{title:"Add Role",href:"/management/user-role/add",icon:us},{title:"Role Management",href:"/management/user-role/roles",icon:Ks}]},{title:"Leads",icon:ds,submenu:[{title:"Add Category",href:"/leads/add-category",icon:us},{title:"Leads List",href:"/leads/list",icon:Rt}]},{title:"Settings",icon:Ld,href:"/settings",badge:null}],d,t.role),f=w=>x.pathname===w,v=()=>e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsxs("div",{className:bt("flex items-center",r?"justify-center":"space-x-3"),children:[e.jsxs(Qn,{className:"h-12 w-12 ring-2 ring-white shadow-lg",children:[e.jsx(Nl,{src:"/api/placeholder/48/48"}),e.jsx(Zn,{className:"bg-blue-600 text-white text-lg font-semibold",children:t.role.split(" ").map(w=>w[0]).join("")})]}),!r&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-semibold text-lg truncate",children:t.role}),e.jsx("p",{className:"text-blue-100 text-sm truncate",children:t.email||t.name})]})]})}),e.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto scrollbar-hide",children:e.jsx("ul",{className:"space-y-2",children:y.map(w=>{const g=w.icon,j=w.href?f(w.href):!1,N=w.submenu&&w.submenu.length>0,E=o===w.title;return e.jsxs("li",{children:[N?e.jsxs("button",{onClick:()=>c(E?null:w.title),className:bt("flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 group relative w-full text-left",E?"bg-white/20 text-white shadow-lg":"text-blue-100 hover:bg-white/10 hover:text-white"),children:[e.jsx(g,{className:bt("h-5 w-5 flex-shrink-0 transition-colors",E?"text-white":"text-blue-200 group-hover:text-white"),strokeWidth:1.5}),!r&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium flex-1 ml-3",children:w.title}),e.jsx(Dx,{className:bt("h-4 w-4 transition-transform duration-200",E?"rotate-180":"")})]})]}):e.jsxs(sy,{to:w.href,className:bt("flex items-center px-3 py-2.5 rounded-lg transition-all duration-200 group relative",j?"bg-white/20 text-white shadow-lg":"text-blue-100 hover:bg-white/10 hover:text-white"),children:[e.jsx(g,{className:bt("h-5 w-5 flex-shrink-0 transition-colors",j?"text-white":"text-blue-200 group-hover:text-white"),strokeWidth:1.5}),!r&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium flex-1 ml-3",children:w.title}),w.badge&&e.jsx("span",{className:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full",children:w.badge}),e.jsx("div",{className:"h-4 w-4"})]}),j&&e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-1 h-6 bg-white rounded-l-full"})]}),N&&!r&&e.jsx("div",{className:bt("overflow-hidden transition-all duration-300 ease-in-out",E?"max-h-screen opacity-100":"max-h-0 opacity-0"),children:e.jsx("ul",{className:"mt-2 ml-6 space-y-1 border-l border-white/20 pl-4 pb-2",children:w.submenu.map(C=>{const k=C.icon,A=f(C.href);return e.jsx("li",{children:e.jsxs(sy,{to:C.href,className:bt("flex items-center px-3 py-2 rounded-lg transition-all duration-200 group text-sm relative",A?"bg-white/15 text-white shadow-md":"text-blue-100 hover:bg-white/10 hover:text-white"),children:[e.jsx(k,{className:bt("h-4 w-4 transition-colors",A?"text-white":"text-blue-200 group-hover:text-white")}),e.jsx("span",{className:"font-medium ml-3",children:C.title}),A&&e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-1 h-4 bg-white rounded-l-full"})]})},C.href)})})})]},w.title)})})}),e.jsx("div",{className:"p-4 border-t border-slate-200",children:e.jsxs(P,{onClick:p,variant:"ghost",size:"sm",className:bt("text-blue-100 hover:text-white hover:bg-white/10",r?"w-12 h-10 p-0 justify-center":"w-full"),children:[r?e.jsx(Pm,{className:"h-4 w-4"}):e.jsx(Dx,{className:"h-4 w-4"}),!r&&e.jsx("span",{className:"ml-2",children:"Collapse"})]})}),e.jsx("div",{className:"p-4",children:e.jsxs(P,{onClick:s,variant:"ghost",className:bt("text-blue-100 hover:text-white hover:bg-red-500/20",r?"w-12 h-10 p-0 justify-center":"w-full justify-start"),children:[e.jsx(PA,{className:"h-4 w-4"}),!r&&e.jsx("span",{className:"ml-2",children:"Logout"})]})})]});return e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>i(!l),variant:"outline",size:"icon",className:"lg:hidden fixed top-4 left-4 z-50 bg-white shadow-lg",children:l?e.jsx(jt,{className:"h-4 w-4"}):e.jsx(TA,{className:"h-4 w-4"})}),l&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>i(!1)}),e.jsx("aside",{className:bt("hidden lg:flex fixed left-0 top-0 h-screen bg-gradient-to-b from-slate-800 to-slate-900 shadow-xl z-30 transition-all duration-300 ease-in-out",r?"w-20":"w-64"),children:e.jsx(v,{})}),e.jsx("aside",{className:bt("lg:hidden fixed left-0 top-0 h-screen bg-gradient-to-b from-slate-800 to-slate-900 shadow-xl z-50 transition-transform duration-300 w-64",l?"translate-x-0":"-translate-x-full"),children:e.jsx(v,{})})]})},uP=()=>{var n,l;const[t,s]=m.useState("desktop"),a=[{icon:MA,title:"Modern Dashboard Design",description:"Clean, professional interface matching the provided design",status:"completed"},{icon:my,title:"Mobile Responsive",description:"Automatically adapts to mobile screens with touch-friendly interface",status:"completed"},{icon:cr,title:"Interactive Charts",description:"Beautiful animated charts and data visualizations",status:"completed"},{icon:Rt,title:"User Profile Integration",description:"Dynamic user information and avatar display",status:"completed"},{icon:dy,title:"Modern Color Scheme",description:"Blue/orange theme matching the reference design",status:"completed"},{icon:Ku,title:"Smooth Animations",description:"Subtle transitions and hover effects",status:"completed"}],r=[{id:"desktop",label:"Desktop",icon:FA,width:"100%"},{id:"tablet",label:"Tablet",icon:BA,width:"768px"},{id:"mobile",label:"Mobile",icon:my,width:"375px"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Modern Dashboard Design"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"A responsive, modern dashboard interface based on your design reference"}),e.jsxs(kt,{className:"bg-green-100 text-green-800 px-4 py-2 text-lg",children:[e.jsx(Ex,{className:"h-4 w-4 mr-2"}),"Implementation Complete"]})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"bg-white rounded-lg p-1 shadow-lg",children:r.map(i=>{const o=i.icon;return e.jsxs(P,{variant:t===i.id?"default":"ghost",size:"sm",onClick:()=>s(i.id),className:"mx-1",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),i.label]},i.id)})})}),e.jsx("div",{className:"mb-8",children:e.jsxs(Ie,{className:"overflow-hidden",children:[e.jsx(Zt,{className:"bg-gray-50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Es,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"Live Preview"]}),e.jsx(kt,{variant:"secondary",children:(n=r.find(i=>i.id===t))==null?void 0:n.width})]})}),e.jsx(Re,{className:"p-0",children:e.jsx("div",{className:"flex justify-center bg-gray-200 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl transition-all duration-300",style:{width:(l=r.find(i=>i.id===t))==null?void 0:l.width,maxWidth:"100%",height:t==="mobile"?"600px":"500px"},children:e.jsx("iframe",{src:"/dashboard",className:"w-full h-full rounded-lg",title:"Dashboard Preview"})})})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:a.map((i,o)=>{const c=i.icon;return e.jsx(Ie,{className:"hover:shadow-lg transition-shadow",children:e.jsx(Re,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(c,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:i.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:i.description}),e.jsxs(kt,{variant:i.status==="completed"?"default":"secondary",className:i.status==="completed"?"bg-green-100 text-green-800":"",children:[e.jsx(Ex,{className:"h-3 w-3 mr-1"}),i.status==="completed"?"Completed":"In Progress"]})]})]})})},o)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Ie,{children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"flex items-center gap-2",children:[e.jsx(NA,{className:"h-5 w-5"}),"Technical Implementation"]})}),e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Framework & Tools:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" React 18 + TypeScript"}),e.jsx("li",{children:" Tailwind CSS for styling"}),e.jsx("li",{children:" shadcn/ui component library"}),e.jsx("li",{children:" Lucide React icons"}),e.jsx("li",{children:" Responsive design patterns"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Key Features:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Auto-detects screen size"}),e.jsx("li",{children:" Modern sidebar navigation"}),e.jsx("li",{children:" Interactive data visualization"}),e.jsx("li",{children:" Smooth animations"}),e.jsx("li",{children:" Touch-friendly mobile interface"})]})]})]})]}),e.jsxs(Ie,{children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"flex items-center gap-2",children:[e.jsx(dy,{className:"h-5 w-5"}),"Design Specifications"]})}),e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Color Scheme:"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full h-8 bg-blue-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Primary Blue"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full h-8 bg-orange-500 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Accent Orange"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full h-8 bg-gray-900 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Sidebar Dark"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full h-8 bg-gray-50 rounded border"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Background"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Layout:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:" Left sidebar navigation"}),e.jsx("li",{children:" Main content area with cards"}),e.jsx("li",{children:" Stats grid at the top"}),e.jsx("li",{children:" Chart visualizations"}),e.jsx("li",{children:" Quick actions sidebar"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[e.jsx(P,{asChild:!0,size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:e.jsxs("a",{href:"/dashboard",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"View Live Dashboard"]})}),e.jsx(P,{asChild:!0,variant:"outline",size:"lg",children:e.jsxs("a",{href:"/",children:[e.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Back to Original"]})})]})]})})};class gt{static async getMedicineStockHistory(s){const a=await fetch(`${this.apiBaseUrl}/medicine-stock-history/${s}`);if(!a.ok)throw new Error("Failed to fetch medicine stock history");return a.json()}static async addMedicineStockHistoryRecord(s){const a=await fetch(`${this.apiBaseUrl}/medicine-stock-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add medicine stock history record");return a.json()}static async deleteMedicineStockHistoryRecord(s){const a=await fetch(`${this.apiBaseUrl}/medicine-stock-history/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete medicine stock history record");return a.json()}static async getAllGeneralProducts(){const s=await fetch(`${this.apiBaseUrl}/general-products`);if(!s.ok)throw new Error("Failed to fetch general products");return s.json()}static async getGeneralProductById(s){const a=await fetch(`${this.apiBaseUrl}/general-products/${s}`);if(!a.ok)throw new Error("Failed to fetch general product");return a.json()}static async addGeneralProduct(s){const a=await fetch(`${this.apiBaseUrl}/general-products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add general product");return a.json()}static async updateGeneralProduct(s,a){const r=await fetch(`${this.apiBaseUrl}/general-products/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update general product");return r.json()}static async updateGeneralProductAccounting(s,a){const r=await fetch(`${this.apiBaseUrl}/general-products/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update accounting information");return r.json()}static async deleteGeneralProduct(s){const a=await fetch(`${this.apiBaseUrl}/general-products/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete general product");return a.json()}static async getSettlementHistory(s){const a=await fetch(`${this.apiBaseUrl}/settlement-history/${s}`);if(!a.ok)throw new Error("Failed to fetch settlement history");return a.json()}static async addSettlementRecord(s){const a=await fetch(`${this.apiBaseUrl}/settlement-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add settlement record");return a.json()}static async deleteSettlementRecord(s){const a=await fetch(`${this.apiBaseUrl}/settlement-history/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete settlement record");return a.json()}static async getAllGeneralSuppliers(){const s=await fetch(`${this.apiBaseUrl}/general-suppliers`);if(!s.ok)throw new Error("Failed to fetch general suppliers");return s.json()}static async addGeneralSupplier(s){const a=await fetch(`${this.apiBaseUrl}/general-suppliers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add general supplier");return a.json()}static async updateGeneralSupplier(s,a){const r=await fetch(`${this.apiBaseUrl}/general-suppliers/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update general supplier");return r.json()}static async deleteGeneralSupplier(s){const a=await fetch(`${this.apiBaseUrl}/general-suppliers/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete general supplier");return a.json()}static async getAllGeneralCategories(){const s=await fetch(`${this.apiBaseUrl}/general-categories`);if(!s.ok)throw new Error("Failed to fetch general categories");return s.json()}static async addGeneralCategory(s){const a=await fetch(`${this.apiBaseUrl}/general-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add general category");return a.json()}static async updateGeneralCategory(s,a){const r=await fetch(`${this.apiBaseUrl}/general-categories/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update general category");return r.json()}static async deleteGeneralCategory(s){const a=await fetch(`${this.apiBaseUrl}/general-categories/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete general category");return a.json()}static async getAllLeadCategories(){const s=await fetch(`${this.apiBaseUrl}/lead-categories`);if(!s.ok)throw new Error("Failed to fetch lead categories");return s.json()}static async addLeadCategory(s){const a=await fetch(`${this.apiBaseUrl}/lead-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add lead category");return a.json()}static async updateLeadCategory(s,a){const r=await fetch(`${this.apiBaseUrl}/lead-categories/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update lead category");return r.json()}static async deleteLeadCategory(s){const a=await fetch(`${this.apiBaseUrl}/lead-categories/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete lead category");return a.json()}static async updateLeadCategoryReferences(s,a){const r=await fetch(`${this.apiBaseUrl}/leads/update-category-references`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldCategoryName:s,newCategoryName:a})});if(!r.ok)throw new Error("Failed to update lead category references");return r.json()}static async getAllUsers(){const s=await fetch(`${this.apiBaseUrl}/users`);if(!s.ok)throw new Error("Failed to fetch users");return s.json()}static async getUser(s){const a=await fetch(`${this.apiBaseUrl}/users/${s}`);if(!a.ok)throw new Error("Failed to fetch user");return a.json()}static async addUser(s){const a=await fetch(`${this.apiBaseUrl}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add user");return a.json()}static async updateUser(s,a){const r=await fetch(`${this.apiBaseUrl}/users/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update user");return r.json()}static async deleteUser(s){const a=await fetch(`${this.apiBaseUrl}/users/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete user");return a.json()}static async getAllLeads(){const s=await fetch(`${this.apiBaseUrl}/leads`);if(!s.ok)throw new Error("Failed to fetch leads");return s.json()}static async getLead(s){const a=await fetch(`${this.apiBaseUrl}/leads/${s}`);if(!a.ok)throw new Error("Failed to fetch lead");return a.json()}static async addLead(s){const a=await fetch(`${this.apiBaseUrl}/leads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add lead");return a.json()}static async updateLead(s,a){const r=await fetch(`${this.apiBaseUrl}/leads/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update lead");return r.json()}static async deleteLead(s){const a=await fetch(`${this.apiBaseUrl}/leads/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete lead");return a.json()}static async getAllPatients(){const s=await fetch(`${this.apiBaseUrl}/patients`);if(!s.ok)throw new Error("Failed to fetch patients");return s.json()}static async getPatient(s){const a=await fetch(`${this.apiBaseUrl}/patients/${s}`);if(!a.ok)throw new Error("Failed to fetch patient");return a.json()}static async addPatient(s){const a=await fetch(`${this.apiBaseUrl}/patients`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add patient");return a.json()}static async updatePatient(s,a){const r=await fetch(`${this.apiBaseUrl}/patients/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update patient");return r.json()}static async deletePatient(s){try{try{await this.deletePatientAttendanceByPatientId(s)}catch(r){console.warn("Failed to delete patient attendance records:",r)}try{await this.deletePatientHistoryByPatientId(s)}catch(r){console.warn("Failed to delete patient history records:",r)}try{await this.deletePatientPaymentsByPatientId(s)}catch(r){console.warn("Failed to delete patient payment records:",r)}const a=await fetch(`${this.apiBaseUrl}/patients/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete patient");return a.json()}catch(a){throw new Error(`Failed to delete patient and related records: ${a.message}`)}}static async getAllPatientPayments(){const s=await fetch(`${this.apiBaseUrl}/patient-payments`);if(!s.ok)throw new Error("Failed to fetch patient payments");return s.json()}static async addPatientPayment(s){const a=await fetch(`${this.apiBaseUrl}/patient-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add patient payment");return a.json()}static async updatePatientPayment(s,a){const r=await fetch(`${this.apiBaseUrl}/patient-payments/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update patient payment");return r.json()}static async deletePatientPayment(s){const a=await fetch(`${this.apiBaseUrl}/patient-payments/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete patient payment");return a.json()}static async deletePatientAttendanceByPatientId(s){const a=await fetch(`${this.apiBaseUrl}/patient-attendance/patient/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete patient attendance records");return a.json()}static async deletePatientHistoryByPatientId(s){const a=await fetch(`${this.apiBaseUrl}/patient-history/patient/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete patient history records");return a.json()}static async deletePatientPaymentsByPatientId(s){const a=await fetch(`${this.apiBaseUrl}/patient-payments/patient/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete patient payment records");return a.json()}static async getAllPatientHistory(){const s=await fetch(`${this.apiBaseUrl}/patient-history`);if(!s.ok)throw new Error("Failed to fetch patient history");return s.json()}static async getPatientHistory(s){const a=await fetch(`${this.apiBaseUrl}/patient-history/patient/${s}`);if(!a.ok)throw new Error("Failed to fetch patient history");return a.json()}static async getPatientHistoryRecord(s){const a=await fetch(`${this.apiBaseUrl}/patient-history/${s}`);if(!a.ok)throw new Error("Failed to fetch patient history record");return a.json()}static async addPatientHistory(s){console.log(" DatabaseService.addPatientHistory called with:",s),console.log(" API URL:",`${this.apiBaseUrl}/patient-history`);const a=await fetch(`${this.apiBaseUrl}/patient-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(console.log(" Response status:",a.status,a.statusText),!a.ok){const n=await a.text();throw console.error(" Response error:",n),new Error(`Failed to add patient history record: ${a.status} - ${n}`)}const r=await a.json();return console.log(" Response result:",r),r}static async updatePatientHistory(s,a){const r=await fetch(`${this.apiBaseUrl}/patient-history/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update patient history record");return r.json()}static async deletePatientHistory(s){const a=await fetch(`${this.apiBaseUrl}/patient-history/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete patient history record");return a.json()}static async getAllPatientAttendance(){const s=await fetch(`${this.apiBaseUrl}/patient-attendance`);if(!s.ok)throw new Error("Failed to fetch patient attendance");return s.json()}static async getPatientAttendance(s,a){let r=`${this.apiBaseUrl}/patient-attendance/patient/${s}`;a&&(r+=`?date=${a}`);const n=await fetch(r);if(!n.ok)throw new Error("Failed to fetch patient attendance");return n.json()}static async addPatientAttendance(s){const a=await fetch(`${this.apiBaseUrl}/patient-attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const r=await a.json().catch(()=>({error:"Unknown error"}));throw new Error(r.error||"Failed to add patient attendance record")}return a.json()}static async updatePatientAttendance(s,a){const r=await fetch(`${this.apiBaseUrl}/patient-attendance/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const n=await r.json().catch(()=>({error:"Unknown error"}));throw new Error(n.error||"Failed to update patient attendance record")}return r.json()}static async markPatientAttendance(s){const a=await fetch(`${this.apiBaseUrl}/patient-attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to mark patient attendance");return a.json()}static async deletePatientAttendance(s,a){const r=await fetch(`${this.apiBaseUrl}/patient-attendance`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:s,date:a})});if(!r.ok)throw new Error("Failed to delete patient attendance");return r.json()}static async deletePatientAttendanceById(s){const a=await fetch(`${this.apiBaseUrl}/patient-attendance/${s}`,{method:"DELETE"});if(!a.ok){const r=await a.json();throw new Error(r.error||"Failed to delete patient attendance record")}return a.json()}static async getAllStaff(){try{const s=await fetch(`${this.apiBaseUrl}/staff`);if(!s.ok)throw new Error("Failed to fetch staff");return await s.json()}catch(s){throw console.error("Error fetching all staff:",s),s}}static async getDeletedStaff(){try{const s=await fetch(`${this.apiBaseUrl}/staff/deleted`);if(!s.ok)throw new Error("Failed to fetch deleted staff");const a=await s.json();return console.log("Raw deleted staff data from API:",a),a}catch(s){throw console.error("Error fetching deleted staff:",s),s}}static async getStaff(s){try{const a=await fetch(`${this.apiBaseUrl}/staff/${s}`);if(!a.ok)throw new Error("Failed to fetch staff member");return await a.json()}catch(a){throw console.error(`Error fetching staff member ${s}:`,a),a}}static async addStaff(s){try{const a=await fetch(`${this.apiBaseUrl}/staff`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const r=await a.json();throw new Error(r.message||"Failed to add staff member")}return await a.json()}catch(a){throw console.error("Error adding staff member:",a),a}}static async updateStaff(s,a){try{const r=await fetch(`${this.apiBaseUrl}/staff/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to update staff member")}return await r.json()}catch(r){throw console.error(`Error updating staff member ${s}:`,r),r}}static async deleteStaff(s,a){try{const r=await fetch(`${this.apiBaseUrl}/staff/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({deletedBy:a||"System"})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to delete staff member")}return await r.json()}catch(r){throw console.error(`Error deleting staff member ${s}:`,r),r}}static async restoreStaff(s){const a=await fetch(`${this.apiBaseUrl}/staff/${s}/restore`,{method:"PUT",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to restore staff member");return a.json()}static async getStaffSalarySummary(){const s=await fetch(`${this.apiBaseUrl}/staff/salary-summary`);if(!s.ok)throw new Error("Failed to fetch staff salary summary");return s.json()}static async updateStaffSalaryPayment(s,a){const r=await fetch(`${this.apiBaseUrl}/staff/${s}/salary-payment`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update staff salary payment");return r.json()}static async getAllStaffCategories(){const s=await fetch(`${this.apiBaseUrl}/staff-categories`);if(!s.ok)throw new Error("Failed to fetch staff categories");return s.json()}static async getStaffCategory(s){const a=await fetch(`${this.apiBaseUrl}/staff-categories/${s}`);if(!a.ok)throw new Error("Failed to fetch staff category");return a.json()}static async addStaffCategory(s){const a=await fetch(`${this.apiBaseUrl}/staff-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const r=await a.json();throw new Error(r.error||"Failed to add staff category")}return a.json()}static async updateStaffCategory(s,a){const r=await fetch(`${this.apiBaseUrl}/staff-categories/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to update staff category")}return r.json()}static async deleteStaffCategory(s){const a=await fetch(`${this.apiBaseUrl}/staff-categories/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete staff category");return a.json()}static async getAllGeneralStock(){const s=await fetch(`${this.apiBaseUrl}/general-stock`);if(!s.ok)throw new Error("Failed to fetch general stock");return s.json()}static async updateGeneralStock(s,a){const r=await fetch(`${this.apiBaseUrl}/stock/general-stock/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update general stock");return r.json()}static async getGeneralStockSettlements(s){const a=await fetch(`${this.apiBaseUrl}/general-products/${s}/settlements`);if(!a.ok)throw new Error("Failed to fetch settlement history");return a.json()}static async addGeneralStockSettlement(s,a){const r=await fetch(`${this.apiBaseUrl}/general-products/${s}/settlements`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to add settlement");return r.json()}static async deleteGeneralStockSettlement(s,a){const r=await fetch(`${this.apiBaseUrl}/general-products/${s}/settlements/${a}`,{method:"DELETE"});if(!r.ok)throw new Error("Failed to delete settlement");return r.json()}static async getStockHistory(s){const a=await fetch(`${this.apiBaseUrl}/stock-history/${s}`);if(!a.ok)throw new Error("Failed to fetch stock history");return a.json()}static async addStockHistoryRecord(s){const a=await fetch(`${this.apiBaseUrl}/stock-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add stock history record");return a.json()}static async deleteStockHistoryRecord(s){const a=await fetch(`${this.apiBaseUrl}/stock-history/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete stock history record");return a.json()}static async getAllMedicineCategories(){const s=await fetch(`${this.apiBaseUrl}/medicine-categories`);if(!s.ok)throw new Error("Failed to fetch medicine categories");return s.json()}static async addMedicineCategory(s){const a=await fetch(`${this.apiBaseUrl}/medicine-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add medicine category");return a.json()}static async updateMedicineCategory(s,a){const r=await fetch(`${this.apiBaseUrl}/medicine-categories/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update medicine category");return r.json()}static async deleteMedicineCategory(s){const a=await fetch(`${this.apiBaseUrl}/medicine-categories/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete medicine category");return a.json()}static async getAllMedicineSuppliers(){const s=await fetch(`${this.apiBaseUrl}/medicine-suppliers`);if(!s.ok)throw new Error("Failed to fetch medicine suppliers");return s.json()}static async addMedicineSupplier(s){const a=await fetch(`${this.apiBaseUrl}/medicine-suppliers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add medicine supplier");return a.json()}static async updateMedicineSupplier(s,a){const r=await fetch(`${this.apiBaseUrl}/medicine-suppliers/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update medicine supplier");return r.json()}static async deleteMedicineSupplier(s){const a=await fetch(`${this.apiBaseUrl}/medicine-suppliers/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete medicine supplier");return a.json()}static async getAllMedicineProducts(){const s=await fetch(`${this.apiBaseUrl}/medicine-products`);if(!s.ok)throw new Error("Failed to fetch medicine products");return s.json()}static async addMedicineProduct(s){const a=await fetch(`${this.apiBaseUrl}/medicine-products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add medicine product");return a.json()}static async updateMedicineProduct(s,a){const r=await fetch(`${this.apiBaseUrl}/medicine-products/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update medicine product");return r.json()}static async deleteMedicineProduct(s){const a=await fetch(`${this.apiBaseUrl}/medicine-products/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete medicine product");return a.json()}static async getMedicineSettlementHistory(s){const a=await fetch(`${this.apiBaseUrl}/medicine-settlement-history/${s}`);if(!a.ok)throw new Error("Failed to fetch medicine settlement history");return a.json()}static async addMedicineSettlementRecord(s){const a=await fetch(`${this.apiBaseUrl}/medicine-settlement-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add medicine settlement record");return a.json()}static async deleteMedicineSettlementRecord(s){const a=await fetch(`${this.apiBaseUrl}/medicine-settlement-history/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete medicine settlement record");return a.json()}static async getAllGroceryProducts(){const s=await fetch(`${this.apiBaseUrl}/grocery-products`);if(!s.ok)throw new Error("Failed to fetch grocery products");return s.json()}static async addGroceryProduct(s){const a=await fetch(`${this.apiBaseUrl}/grocery-products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add grocery product");return a.json()}static async updateGroceryProduct(s,a){const r=await fetch(`${this.apiBaseUrl}/grocery-products/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update grocery product");return r.json()}static async updateGroceryStock(s,a){const r=await fetch(`${this.apiBaseUrl}/grocery-products/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update grocery stock");return r.json()}static async deleteGroceryProduct(s){const a=await fetch(`${this.apiBaseUrl}/grocery-products/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete grocery product");return a.json()}static async getAllGroceryCategories(){const s=await fetch(`${this.apiBaseUrl}/grocery-categories`);if(!s.ok)throw new Error("Failed to fetch grocery categories");return s.json()}static async addGroceryCategory(s){const a=await fetch(`${this.apiBaseUrl}/grocery-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add grocery category");return a.json()}static async updateGroceryCategory(s,a){const r=await fetch(`${this.apiBaseUrl}/grocery-categories/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update grocery category");return r.json()}static async deleteGroceryCategory(s){const a=await fetch(`${this.apiBaseUrl}/grocery-categories/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete grocery category");return a.json()}static async getAllGrocerySuppliers(){const s=await fetch(`${this.apiBaseUrl}/grocery-suppliers`);if(!s.ok)throw new Error("Failed to fetch grocery suppliers");return s.json()}static async addGrocerySupplier(s){const a=await fetch(`${this.apiBaseUrl}/grocery-suppliers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add grocery supplier");return a.json()}static async updateGrocerySupplier(s,a){const r=await fetch(`${this.apiBaseUrl}/grocery-suppliers/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update grocery supplier");return r.json()}static async deleteGrocerySupplier(s){const a=await fetch(`${this.apiBaseUrl}/grocery-suppliers/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete grocery supplier");return a.json()}static async getGrocerySettlementHistory(s){const a=await fetch(`${this.apiBaseUrl}/grocery-settlement-history/${s}`);if(!a.ok)throw new Error("Failed to fetch grocery settlement history");return a.json()}static async addGrocerySettlementRecord(s){const a=await fetch(`${this.apiBaseUrl}/grocery-settlement-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add grocery settlement record");return a.json()}static async deleteGrocerySettlementRecord(s){const a=await fetch(`${this.apiBaseUrl}/grocery-settlement-history/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete grocery settlement record");return a.json()}static async getGroceryStockHistory(s){const a=await fetch(`${this.apiBaseUrl}/grocery-stock-history/${s}`);if(!a.ok)throw new Error("Failed to fetch grocery stock history");return a.json()}static async addGroceryStockHistoryRecord(s){const a=await fetch(`${this.apiBaseUrl}/grocery-stock-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add grocery stock history record");return a.json()}static async deleteGroceryStockHistoryRecord(s){const a=await fetch(`${this.apiBaseUrl}/grocery-stock-history/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete grocery stock history record");return a.json()}static async getAllDoctorCategories(){const s=await fetch(`${this.apiBaseUrl}/doctor-categories`);if(!s.ok)throw new Error("Failed to fetch doctor categories");return s.json()}static async addDoctorCategory(s){const a=await fetch(`${this.apiBaseUrl}/doctor-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add doctor category");return a.json()}static async updateDoctorCategory(s,a){const r=await fetch(`${this.apiBaseUrl}/doctor-categories/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update doctor category");return r.json()}static async deleteDoctorCategory(s){const a=await fetch(`${this.apiBaseUrl}/doctor-categories/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete doctor category");return a.json()}static async getAllDoctors(){const s=await fetch(`${this.apiBaseUrl}/doctors`);if(!s.ok)throw new Error("Failed to fetch doctors");return(await s.json()).map(r=>{const n={...r,joinDate:r.join_date,role:r.specialization||r.department};if(r.documents&&typeof r.documents=="string")try{let l=r.documents;for(;typeof l=="string"&&l.startsWith('"');)l=JSON.parse(l);typeof l=="string"&&(l=JSON.parse(l)),l&&typeof l=="object"&&Object.values(l).some(o=>o&&o!=="")&&(n.Front=l.Front||null,n.CardBack=l.CardBack||null,n.panCardFront=l.panCardFront||null,n.panCardBack=l.panCardBack||null,n.documents=l)}catch(l){console.error("Error parsing documents for doctor:",r.id,l),console.error("Raw documents string:",r.documents)}return n})}static async getDoctorById(s){const a=await fetch(`${this.apiBaseUrl}/doctors/${s}`);if(!a.ok)throw new Error("Failed to fetch doctor");const r=await a.json(),n={...r,joinDate:r.join_date,role:r.specialization||r.department};if(r.documents&&typeof r.documents=="string")try{let l=r.documents;for(;typeof l=="string"&&l.startsWith('"');)l=JSON.parse(l);typeof l=="string"&&(l=JSON.parse(l)),l&&typeof l=="object"&&Object.values(l).some(o=>o&&o!=="")&&(n.Front=l.Front||null,n.CardBack=l.CardBack||null,n.panCardFront=l.panCardFront||null,n.panCardBack=l.panCardBack||null,n.documents=l)}catch(l){console.error("Error parsing documents for doctor:",r.id,l),console.error("Raw documents string:",r.documents)}return n}static async addDoctor(s){try{console.log("DatabaseService.addDoctor() - Starting with data:",s);const a=await fetch(`${this.apiBaseUrl}/doctors/next-id`);if(!a.ok)throw new Error("Failed to get next doctor ID");const n=(await a.json()).nextId;console.log("DatabaseService.addDoctor() - Got next sequential ID:",n);const l={id:n,name:s.name,email:s.email,phone:s.phone,address:s.address,specialization:s.specialization,department:s.department,join_date:s.join_date,salary:s.salary,status:"Active",photo:s.photo,documents:s.documents};console.log("DatabaseService.addDoctor() - Sending payload:",l);const i=await fetch(`${this.apiBaseUrl}/doctors`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(console.log("DatabaseService.addDoctor() - Response status:",i.status),console.log("DatabaseService.addDoctor() - Response ok:",i.ok),!i.ok){let c=`HTTP error! status: ${i.status}`;try{const d=await i.text();if(console.log("DatabaseService.addDoctor() - Error response text:",d),d)try{const u=JSON.parse(d);c=u.error||u.message||d}catch{c=d}}catch(d){console.log("DatabaseService.addDoctor() - Error parsing error response:",d)}throw console.log("DatabaseService.addDoctor() - Final error message:",c),new Error(c)}const o=await i.json();return console.log("DatabaseService.addDoctor() - Success result:",o),o}catch(a){throw console.error("DatabaseService.addDoctor() - Catch block error:",a),new Error(`Failed to add doctor: ${a.message}`)}}static async updateDoctor(s,a){const r=await fetch(`${this.apiBaseUrl}/doctors/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update doctor");return r.json()}static async deleteDoctor(s,a){const r=await fetch(`${this.apiBaseUrl}/doctors/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({deletedBy:a||"System"})});if(!r.ok)throw new Error("Failed to delete doctor");return r.json()}static async getDeletedDoctors(){console.log("DatabaseService.getDeletedDoctors() - Fetching deleted doctors");const s=await fetch(`${this.apiBaseUrl}/doctors/deleted`);if(!s.ok)throw new Error("Failed to fetch deleted doctors");const a=await s.json();console.log("DatabaseService.getDeletedDoctors() - Raw API response:",a);const r=a.map(n=>{const l={...n,joinDate:n.join_date,deletedAt:n.deletedAt||n.deleted_at,deletedBy:n.deletedBy||n.deleted_by||"System",role:n.specialization||n.department};if(n.documents&&typeof n.documents=="string")try{let i=n.documents;for(;typeof i=="string"&&i.startsWith('"');)i=JSON.parse(i);typeof i=="string"&&(i=JSON.parse(i)),i&&typeof i=="object"&&Object.values(i).some(c=>c&&c!=="")&&(l.Front=i.Front||null,l.CardBack=i.CardBack||null,l.panCardFront=i.panCardFront||null,l.panCardBack=i.panCardBack||null,l.documents=i)}catch(i){console.error("Error parsing documents for deleted doctor:",n.id,i)}return l});return console.log("DatabaseService.getDeletedDoctors() - Mapped doctors:",r),r}static async restoreDoctor(s){const a=await fetch(`${this.apiBaseUrl}/doctors/${s}/restore`,{method:"PUT"});if(!a.ok)throw new Error("Failed to restore doctor");return a.json()}static async getAllDoctorAttendance(s,a){const r=new URLSearchParams;s&&r.append("date",s),a&&r.append("doctor_id",a);const n=await fetch(`${this.apiBaseUrl}/doctor-attendance?${r}`);if(!n.ok)throw new Error("Failed to fetch doctor attendance");return n.json()}static async markDoctorAttendance(s){const a=await fetch(`${this.apiBaseUrl}/doctor-attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to mark attendance");return a.json()}static async updateDoctorAttendance(s,a){const r=await fetch(`${this.apiBaseUrl}/doctor-attendance/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update attendance");return r.json()}static async deleteDoctorAttendance(s){const a=await fetch(`${this.apiBaseUrl}/doctor-attendance/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete attendance");return a.json()}static async getNextDoctorId(){const s=await fetch(`${this.apiBaseUrl}/doctors/next-id`);if(!s.ok)throw new Error("Failed to get next doctor ID");return s.json()}static async getAllStaffAttendance(s,a){let r=`${this.apiBaseUrl}/staff-attendance`;const n=new URLSearchParams;s&&n.append("date",s),a&&n.append("staff_id",a),n.toString()&&(r+=`?${n.toString()}`);const l=await fetch(r);if(!l.ok)throw new Error("Failed to fetch staff attendance");return l.json()}static async markStaffAttendance(s){const a=await fetch(`${this.apiBaseUrl}/staff-attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to mark staff attendance");return a.json()}static async updateStaffAttendance(s,a){const r=await fetch(`${this.apiBaseUrl}/staff-attendance/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update staff attendance");return r.json()}static async deleteStaffAttendance(s){const a=await fetch(`${this.apiBaseUrl}/staff-attendance/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete staff attendance");return a.json()}static async getAllDoctorSalaryPayments(){try{const s=await fetch(`${this.apiBaseUrl}/doctor-salaries/settlements`);if(!s.ok)return console.warn("Failed to fetch doctor salary settlements, returning empty array"),[];const a=await s.json();return a.data||a}catch(s){return console.warn("Error fetching doctor salary payments:",s),[]}}static async getAllDoctorAdvances(){const s=await fetch(`${this.apiBaseUrl}/doctor-advance`);if(!s.ok)throw new Error("Failed to fetch doctor advances");const a=await s.json();return a.data||a}}Gm(gt,"apiBaseUrl","http://localhost:4000/api");const xs=Object.freeze(Object.defineProperty({__proto__:null,DatabaseService:gt},Symbol.toStringTag,{value:"Module"})),xP=async(t,s)=>{try{console.log(" Moving patient files from temp to patient folder:",t),console.log(" Temp paths to move:",s);const a=await fetch("/api/move-patient-files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,tempPaths:s})});if(!a.ok){const n=await a.text();throw console.error(" File move failed:",a.status,n),new Error(`File move failed: ${a.status} - ${n}`)}const r=await a.json();return console.log(" Files moved successfully:",r),r.newPaths||{}}catch(a){throw console.error(" Error moving files:",a),a}},md=async(t,s="temp",a="photo")=>{try{if(console.log(" Simple upload - Starting file upload..."),console.log(" File details:",{name:t.name,size:t.size,type:t.type}),!t)throw new Error("No file provided");if(t.size>5*1024*1024)throw new Error("File size exceeds 5MB limit");const r=new FormData;r.append("file",t),r.append("patientId",s),r.append("fieldName",a),console.log(" Uploading to /api/upload-patient-file...");const n=await fetch("/api/upload-patient-file",{method:"POST",body:r});if(console.log(" Upload response:",n.status,n.statusText),!n.ok){const i=await n.text();throw console.error(" Upload failed with status:",n.status),console.error(" Error response:",i),new Error(`Upload failed: ${n.status} - ${i}`)}const l=await n.json();if(console.log(" Upload successful:",l),!l.filePath)throw new Error("Server did not return a file path");return l.filePath}catch(r){throw console.error(" Upload error:",r),r}},As=m.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:bt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));As.displayName="Textarea";function Sy(t,[s,a]){return Math.min(a,Math.max(s,t))}var hP=m.createContext(void 0);function pP(t){const s=m.useContext(hP);return t||s||"ltr"}var Cp=0;function Dg(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Cy()),document.body.insertAdjacentElement("beforeend",t[1]??Cy()),Cp++,()=>{Cp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Cp--}},[])}function Cy(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kp="focusScope.autoFocusOnMount",Ep="focusScope.autoFocusOnUnmount",ky={bubbles:!1,cancelable:!0},fP="FocusScope",yh=m.forwardRef((t,s)=>{const{loop:a=!1,trapped:r=!1,onMountAutoFocus:n,onUnmountAutoFocus:l,...i}=t,[o,c]=m.useState(null),d=cn(n),u=cn(l),x=m.useRef(null),p=Gs(s,f=>c(f)),h=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let f=function(j){if(h.paused||!o)return;const N=j.target;o.contains(N)?x.current=N:Vl(x.current,{select:!0})},v=function(j){if(h.paused||!o)return;const N=j.relatedTarget;N!==null&&(o.contains(N)||Vl(x.current,{select:!0}))},w=function(j){if(document.activeElement===document.body)for(const E of j)E.removedNodes.length>0&&Vl(o)};document.addEventListener("focusin",f),document.addEventListener("focusout",v);const g=new MutationObserver(w);return o&&g.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",v),g.disconnect()}}},[r,o,h.paused]),m.useEffect(()=>{if(o){Dy.add(h);const f=document.activeElement;if(!o.contains(f)){const w=new CustomEvent(kp,ky);o.addEventListener(kp,d),o.dispatchEvent(w),w.defaultPrevented||(gP(NP(G2(o)),{select:!0}),document.activeElement===f&&Vl(o))}return()=>{o.removeEventListener(kp,d),setTimeout(()=>{const w=new CustomEvent(Ep,ky);o.addEventListener(Ep,u),o.dispatchEvent(w),w.defaultPrevented||Vl(f??document.body,{select:!0}),o.removeEventListener(Ep,u),Dy.remove(h)},0)}}},[o,d,u,h]);const y=m.useCallback(f=>{if(!a&&!r||h.paused)return;const v=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,w=document.activeElement;if(v&&w){const g=f.currentTarget,[j,N]=vP(g);j&&N?!f.shiftKey&&w===N?(f.preventDefault(),a&&Vl(j,{select:!0})):f.shiftKey&&w===j&&(f.preventDefault(),a&&Vl(N,{select:!0})):w===g&&f.preventDefault()}},[a,r,h.paused]);return e.jsx(ws.div,{tabIndex:-1,...i,ref:p,onKeyDown:y})});yh.displayName=fP;function gP(t,{select:s=!1}={}){const a=document.activeElement;for(const r of t)if(Vl(r,{select:s}),document.activeElement!==a)return}function vP(t){const s=G2(t),a=Ey(s,t),r=Ey(s.reverse(),t);return[a,r]}function G2(t){const s=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function Ey(t,s){for(const a of t)if(!wP(a,{upTo:s}))return a}function wP(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function yP(t){return t instanceof HTMLInputElement&&"select"in t}function Vl(t,{select:s=!1}={}){if(t&&t.focus){const a=document.activeElement;t.focus({preventScroll:!0}),t!==a&&yP(t)&&s&&t.select()}}var Dy=jP();function jP(){let t=[];return{add(s){const a=t[0];s!==a&&(a==null||a.pause()),t=Ay(t,s),t.unshift(s)},remove(s){var a;t=Ay(t,s),(a=t[0])==null||a.resume()}}}function Ay(t,s){const a=[...t],r=a.indexOf(s);return r!==-1&&a.splice(r,1),a}function NP(t){return t.filter(s=>s.tagName!=="A")}var bP=S0[" useId ".trim().toString()]||(()=>{}),SP=0;function ao(t){const[s,a]=m.useState(bP());return Ca(()=>{a(r=>r??String(SP++))},[t]),s?`radix-${s}`:""}const CP=["top","right","bottom","left"],ji=Math.min,Tr=Math.max,_x=Math.round,pu=Math.floor,Xn=t=>({x:t,y:t}),kP={left:"right",right:"left",bottom:"top",top:"bottom"},EP={start:"end",end:"start"};function a0(t,s,a){return Tr(t,ji(s,a))}function Cl(t,s){return typeof t=="function"?t(s):t}function kl(t){return t.split("-")[0]}function qc(t){return t.split("-")[1]}function Ag(t){return t==="x"?"y":"x"}function _g(t){return t==="y"?"height":"width"}const DP=new Set(["top","bottom"]);function Hn(t){return DP.has(kl(t))?"y":"x"}function Pg(t){return Ag(Hn(t))}function AP(t,s,a){a===void 0&&(a=!1);const r=qc(t),n=Pg(t),l=_g(n);let i=n==="x"?r===(a?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[l]>s.floating[l]&&(i=Px(i)),[i,Px(i)]}function _P(t){const s=Px(t);return[r0(t),s,r0(s)]}function r0(t){return t.replace(/start|end/g,s=>EP[s])}const _y=["left","right"],Py=["right","left"],PP=["top","bottom"],TP=["bottom","top"];function FP(t,s,a){switch(t){case"top":case"bottom":return a?s?Py:_y:s?_y:Py;case"left":case"right":return s?PP:TP;default:return[]}}function MP(t,s,a,r){const n=qc(t);let l=FP(kl(t),a==="start",r);return n&&(l=l.map(i=>i+"-"+n),s&&(l=l.concat(l.map(r0)))),l}function Px(t){return t.replace(/left|right|bottom|top/g,s=>kP[s])}function IP(t){return{top:0,right:0,bottom:0,left:0,...t}}function q2(t){return typeof t!="number"?IP(t):{top:t,right:t,bottom:t,left:t}}function Tx(t){const{x:s,y:a,width:r,height:n}=t;return{width:r,height:n,top:a,left:s,right:s+r,bottom:a+n,x:s,y:a}}function Ty(t,s,a){let{reference:r,floating:n}=t;const l=Hn(s),i=Pg(s),o=_g(i),c=kl(s),d=l==="y",u=r.x+r.width/2-n.width/2,x=r.y+r.height/2-n.height/2,p=r[o]/2-n[o]/2;let h;switch(c){case"top":h={x:u,y:r.y-n.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:x};break;case"left":h={x:r.x-n.width,y:x};break;default:h={x:r.x,y:r.y}}switch(qc(s)){case"start":h[i]-=p*(a&&d?-1:1);break;case"end":h[i]+=p*(a&&d?-1:1);break}return h}const RP=async(t,s,a)=>{const{placement:r="bottom",strategy:n="absolute",middleware:l=[],platform:i}=a,o=l.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(s));let d=await i.getElementRects({reference:t,floating:s,strategy:n}),{x:u,y:x}=Ty(d,r,c),p=r,h={},y=0;for(let f=0;f<o.length;f++){const{name:v,fn:w}=o[f],{x:g,y:j,data:N,reset:E}=await w({x:u,y:x,initialPlacement:r,placement:p,strategy:n,middlewareData:h,rects:d,platform:i,elements:{reference:t,floating:s}});u=g??u,x=j??x,h={...h,[v]:{...h[v],...N}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(d=E.rects===!0?await i.getElementRects({reference:t,floating:s,strategy:n}):E.rects),{x:u,y:x}=Ty(d,p,c)),f=-1)}return{x:u,y:x,placement:p,strategy:n,middlewareData:h}};async function hm(t,s){var a;s===void 0&&(s={});const{x:r,y:n,platform:l,rects:i,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:x="floating",altBoundary:p=!1,padding:h=0}=Cl(s,t),y=q2(h),v=o[p?x==="floating"?"reference":"floating":x],w=Tx(await l.getClippingRect({element:(a=await(l.isElement==null?void 0:l.isElement(v)))==null||a?v:v.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),g=x==="floating"?{x:r,y:n,width:i.floating.width,height:i.floating.height}:i.reference,j=await(l.getOffsetParent==null?void 0:l.getOffsetParent(o.floating)),N=await(l.isElement==null?void 0:l.isElement(j))?await(l.getScale==null?void 0:l.getScale(j))||{x:1,y:1}:{x:1,y:1},E=Tx(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:j,strategy:c}):g);return{top:(w.top-E.top+y.top)/N.y,bottom:(E.bottom-w.bottom+y.bottom)/N.y,left:(w.left-E.left+y.left)/N.x,right:(E.right-w.right+y.right)/N.x}}const OP=t=>({name:"arrow",options:t,async fn(s){const{x:a,y:r,placement:n,rects:l,platform:i,elements:o,middlewareData:c}=s,{element:d,padding:u=0}=Cl(t,s)||{};if(d==null)return{};const x=q2(u),p={x:a,y:r},h=Pg(n),y=_g(h),f=await i.getDimensions(d),v=h==="y",w=v?"top":"left",g=v?"bottom":"right",j=v?"clientHeight":"clientWidth",N=l.reference[y]+l.reference[h]-p[h]-l.floating[y],E=p[h]-l.reference[h],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let k=C?C[j]:0;(!k||!await(i.isElement==null?void 0:i.isElement(C)))&&(k=o.floating[j]||l.floating[y]);const A=N/2-E/2,T=k/2-f[y]/2-1,M=ji(x[w],T),X=ji(x[g],T),ne=M,Q=k-f[y]-X,oe=k/2-f[y]/2+A,ge=a0(ne,oe,Q),me=!c.arrow&&qc(n)!=null&&oe!==ge&&l.reference[y]/2-(oe<ne?M:X)-f[y]/2<0,H=me?oe<ne?oe-ne:oe-Q:0;return{[h]:p[h]+H,data:{[h]:ge,centerOffset:oe-ge-H,...me&&{alignmentOffset:H}},reset:me}}}),LP=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var a,r;const{placement:n,middlewareData:l,rects:i,initialPlacement:o,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:x=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:f=!0,...v}=Cl(t,s);if((a=l.arrow)!=null&&a.alignmentOffset)return{};const w=kl(n),g=Hn(o),j=kl(o)===o,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),E=p||(j||!f?[Px(o)]:_P(o)),C=y!=="none";!p&&C&&E.push(...MP(o,f,y,N));const k=[o,...E],A=await hm(s,v),T=[];let M=((r=l.flip)==null?void 0:r.overflows)||[];if(u&&T.push(A[w]),x){const oe=AP(n,i,N);T.push(A[oe[0]],A[oe[1]])}if(M=[...M,{placement:n,overflows:T}],!T.every(oe=>oe<=0)){var X,ne;const oe=(((X=l.flip)==null?void 0:X.index)||0)+1,ge=k[oe];if(ge&&(!(x==="alignment"?g!==Hn(ge):!1)||M.every(L=>Hn(L.placement)===g?L.overflows[0]>0:!0)))return{data:{index:oe,overflows:M},reset:{placement:ge}};let me=(ne=M.filter(H=>H.overflows[0]<=0).sort((H,L)=>H.overflows[1]-L.overflows[1])[0])==null?void 0:ne.placement;if(!me)switch(h){case"bestFit":{var Q;const H=(Q=M.filter(L=>{if(C){const he=Hn(L.placement);return he===g||he==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(he=>he>0).reduce((he,ie)=>he+ie,0)]).sort((L,he)=>L[1]-he[1])[0])==null?void 0:Q[0];H&&(me=H);break}case"initialPlacement":me=o;break}if(n!==me)return{reset:{placement:me}}}return{}}}};function Fy(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function My(t){return CP.some(s=>t[s]>=0)}const $P=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:a}=s,{strategy:r="referenceHidden",...n}=Cl(t,s);switch(r){case"referenceHidden":{const l=await hm(s,{...n,elementContext:"reference"}),i=Fy(l,a.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:My(i)}}}case"escaped":{const l=await hm(s,{...n,altBoundary:!0}),i=Fy(l,a.floating);return{data:{escapedOffsets:i,escaped:My(i)}}}default:return{}}}}},J2=new Set(["left","top"]);async function UP(t,s){const{placement:a,platform:r,elements:n}=t,l=await(r.isRTL==null?void 0:r.isRTL(n.floating)),i=kl(a),o=qc(a),c=Hn(a)==="y",d=J2.has(i)?-1:1,u=l&&c?-1:1,x=Cl(s,t);let{mainAxis:p,crossAxis:h,alignmentAxis:y}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return o&&typeof y=="number"&&(h=o==="end"?y*-1:y),c?{x:h*u,y:p*d}:{x:p*d,y:h*u}}const BP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var a,r;const{x:n,y:l,placement:i,middlewareData:o}=s,c=await UP(s,t);return i===((a=o.offset)==null?void 0:a.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:n+c.x,y:l+c.y,data:{...c,placement:i}}}}},zP=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:a,y:r,placement:n}=s,{mainAxis:l=!0,crossAxis:i=!1,limiter:o={fn:v=>{let{x:w,y:g}=v;return{x:w,y:g}}},...c}=Cl(t,s),d={x:a,y:r},u=await hm(s,c),x=Hn(kl(n)),p=Ag(x);let h=d[p],y=d[x];if(l){const v=p==="y"?"top":"left",w=p==="y"?"bottom":"right",g=h+u[v],j=h-u[w];h=a0(g,h,j)}if(i){const v=x==="y"?"top":"left",w=x==="y"?"bottom":"right",g=y+u[v],j=y-u[w];y=a0(g,y,j)}const f=o.fn({...s,[p]:h,[x]:y});return{...f,data:{x:f.x-a,y:f.y-r,enabled:{[p]:l,[x]:i}}}}}},VP=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:a,y:r,placement:n,rects:l,middlewareData:i}=s,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=Cl(t,s),u={x:a,y:r},x=Hn(n),p=Ag(x);let h=u[p],y=u[x];const f=Cl(o,s),v=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(c){const j=p==="y"?"height":"width",N=l.reference[p]-l.floating[j]+v.mainAxis,E=l.reference[p]+l.reference[j]-v.mainAxis;h<N?h=N:h>E&&(h=E)}if(d){var w,g;const j=p==="y"?"width":"height",N=J2.has(kl(n)),E=l.reference[x]-l.floating[j]+(N&&((w=i.offset)==null?void 0:w[x])||0)+(N?0:v.crossAxis),C=l.reference[x]+l.reference[j]+(N?0:((g=i.offset)==null?void 0:g[x])||0)-(N?v.crossAxis:0);y<E?y=E:y>C&&(y=C)}return{[p]:h,[x]:y}}}},YP=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var a,r;const{placement:n,rects:l,platform:i,elements:o}=s,{apply:c=()=>{},...d}=Cl(t,s),u=await hm(s,d),x=kl(n),p=qc(n),h=Hn(n)==="y",{width:y,height:f}=l.floating;let v,w;x==="top"||x==="bottom"?(v=x,w=p===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(w=x,v=p==="end"?"top":"bottom");const g=f-u.top-u.bottom,j=y-u.left-u.right,N=ji(f-u[v],g),E=ji(y-u[w],j),C=!s.middlewareData.shift;let k=N,A=E;if((a=s.middlewareData.shift)!=null&&a.enabled.x&&(A=j),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(k=g),C&&!p){const M=Tr(u.left,0),X=Tr(u.right,0),ne=Tr(u.top,0),Q=Tr(u.bottom,0);h?A=y-2*(M!==0||X!==0?M+X:Tr(u.left,u.right)):k=f-2*(ne!==0||Q!==0?ne+Q:Tr(u.top,u.bottom))}await c({...s,availableWidth:A,availableHeight:k});const T=await i.getDimensions(o.floating);return y!==T.width||f!==T.height?{reset:{rects:!0}}:{}}}};function jh(){return typeof window<"u"}function Jc(t){return K2(t)?(t.nodeName||"").toLowerCase():"#document"}function Ur(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function rl(t){var s;return(s=(K2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function K2(t){return jh()?t instanceof Node||t instanceof Ur(t).Node:!1}function _n(t){return jh()?t instanceof Element||t instanceof Ur(t).Element:!1}function el(t){return jh()?t instanceof HTMLElement||t instanceof Ur(t).HTMLElement:!1}function Iy(t){return!jh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ur(t).ShadowRoot}const WP=new Set(["inline","contents"]);function Im(t){const{overflow:s,overflowX:a,overflowY:r,display:n}=Pn(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+a)&&!WP.has(n)}const HP=new Set(["table","td","th"]);function GP(t){return HP.has(Jc(t))}const qP=[":popover-open",":modal"];function Nh(t){return qP.some(s=>{try{return t.matches(s)}catch{return!1}})}const JP=["transform","translate","scale","rotate","perspective"],KP=["transform","translate","scale","rotate","perspective","filter"],XP=["paint","layout","strict","content"];function Tg(t){const s=Fg(),a=_n(t)?Pn(t):t;return JP.some(r=>a[r]?a[r]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!s&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!s&&(a.filter?a.filter!=="none":!1)||KP.some(r=>(a.willChange||"").includes(r))||XP.some(r=>(a.contain||"").includes(r))}function QP(t){let s=Ni(t);for(;el(s)&&!Lc(s);){if(Tg(s))return s;if(Nh(s))return null;s=Ni(s)}return null}function Fg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZP=new Set(["html","body","#document"]);function Lc(t){return ZP.has(Jc(t))}function Pn(t){return Ur(t).getComputedStyle(t)}function bh(t){return _n(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ni(t){if(Jc(t)==="html")return t;const s=t.assignedSlot||t.parentNode||Iy(t)&&t.host||rl(t);return Iy(s)?s.host:s}function X2(t){const s=Ni(t);return Lc(s)?t.ownerDocument?t.ownerDocument.body:t.body:el(s)&&Im(s)?s:X2(s)}function pm(t,s,a){var r;s===void 0&&(s=[]),a===void 0&&(a=!0);const n=X2(t),l=n===((r=t.ownerDocument)==null?void 0:r.body),i=Ur(n);if(l){const o=n0(i);return s.concat(i,i.visualViewport||[],Im(n)?n:[],o&&a?pm(o):[])}return s.concat(n,pm(n,[],a))}function n0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Q2(t){const s=Pn(t);let a=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const n=el(t),l=n?t.offsetWidth:a,i=n?t.offsetHeight:r,o=_x(a)!==l||_x(r)!==i;return o&&(a=l,r=i),{width:a,height:r,$:o}}function Mg(t){return _n(t)?t:t.contextElement}function xc(t){const s=Mg(t);if(!el(s))return Xn(1);const a=s.getBoundingClientRect(),{width:r,height:n,$:l}=Q2(s);let i=(l?_x(a.width):a.width)/r,o=(l?_x(a.height):a.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!o||!Number.isFinite(o))&&(o=1),{x:i,y:o}}const eT=Xn(0);function Z2(t){const s=Ur(t);return!Fg()||!s.visualViewport?eT:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function tT(t,s,a){return s===void 0&&(s=!1),!a||s&&a!==Ur(t)?!1:s}function xo(t,s,a,r){s===void 0&&(s=!1),a===void 0&&(a=!1);const n=t.getBoundingClientRect(),l=Mg(t);let i=Xn(1);s&&(r?_n(r)&&(i=xc(r)):i=xc(t));const o=tT(l,a,r)?Z2(l):Xn(0);let c=(n.left+o.x)/i.x,d=(n.top+o.y)/i.y,u=n.width/i.x,x=n.height/i.y;if(l){const p=Ur(l),h=r&&_n(r)?Ur(r):r;let y=p,f=n0(y);for(;f&&r&&h!==y;){const v=xc(f),w=f.getBoundingClientRect(),g=Pn(f),j=w.left+(f.clientLeft+parseFloat(g.paddingLeft))*v.x,N=w.top+(f.clientTop+parseFloat(g.paddingTop))*v.y;c*=v.x,d*=v.y,u*=v.x,x*=v.y,c+=j,d+=N,y=Ur(f),f=n0(y)}}return Tx({width:u,height:x,x:c,y:d})}function Sh(t,s){const a=bh(t).scrollLeft;return s?s.left+a:xo(rl(t)).left+a}function e4(t,s){const a=t.getBoundingClientRect(),r=a.left+s.scrollLeft-Sh(t,a),n=a.top+s.scrollTop;return{x:r,y:n}}function sT(t){let{elements:s,rect:a,offsetParent:r,strategy:n}=t;const l=n==="fixed",i=rl(r),o=s?Nh(s.floating):!1;if(r===i||o&&l)return a;let c={scrollLeft:0,scrollTop:0},d=Xn(1);const u=Xn(0),x=el(r);if((x||!x&&!l)&&((Jc(r)!=="body"||Im(i))&&(c=bh(r)),el(r))){const h=xo(r);d=xc(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const p=i&&!x&&!l?e4(i,c):Xn(0);return{width:a.width*d.x,height:a.height*d.y,x:a.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:a.y*d.y-c.scrollTop*d.y+u.y+p.y}}function aT(t){return Array.from(t.getClientRects())}function rT(t){const s=rl(t),a=bh(t),r=t.ownerDocument.body,n=Tr(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),l=Tr(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let i=-a.scrollLeft+Sh(t);const o=-a.scrollTop;return Pn(r).direction==="rtl"&&(i+=Tr(s.clientWidth,r.clientWidth)-n),{width:n,height:l,x:i,y:o}}const Ry=25;function nT(t,s){const a=Ur(t),r=rl(t),n=a.visualViewport;let l=r.clientWidth,i=r.clientHeight,o=0,c=0;if(n){l=n.width,i=n.height;const u=Fg();(!u||u&&s==="fixed")&&(o=n.offsetLeft,c=n.offsetTop)}const d=Sh(r);if(d<=0){const u=r.ownerDocument,x=u.body,p=getComputedStyle(x),h=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(r.clientWidth-x.clientWidth-h);y<=Ry&&(l-=y)}else d<=Ry&&(l+=d);return{width:l,height:i,x:o,y:c}}const lT=new Set(["absolute","fixed"]);function iT(t,s){const a=xo(t,!0,s==="fixed"),r=a.top+t.clientTop,n=a.left+t.clientLeft,l=el(t)?xc(t):Xn(1),i=t.clientWidth*l.x,o=t.clientHeight*l.y,c=n*l.x,d=r*l.y;return{width:i,height:o,x:c,y:d}}function Oy(t,s,a){let r;if(s==="viewport")r=nT(t,a);else if(s==="document")r=rT(rl(t));else if(_n(s))r=iT(s,a);else{const n=Z2(t);r={x:s.x-n.x,y:s.y-n.y,width:s.width,height:s.height}}return Tx(r)}function t4(t,s){const a=Ni(t);return a===s||!_n(a)||Lc(a)?!1:Pn(a).position==="fixed"||t4(a,s)}function oT(t,s){const a=s.get(t);if(a)return a;let r=pm(t,[],!1).filter(o=>_n(o)&&Jc(o)!=="body"),n=null;const l=Pn(t).position==="fixed";let i=l?Ni(t):t;for(;_n(i)&&!Lc(i);){const o=Pn(i),c=Tg(i);!c&&o.position==="fixed"&&(n=null),(l?!c&&!n:!c&&o.position==="static"&&!!n&&lT.has(n.position)||Im(i)&&!c&&t4(t,i))?r=r.filter(u=>u!==i):n=o,i=Ni(i)}return s.set(t,r),r}function cT(t){let{element:s,boundary:a,rootBoundary:r,strategy:n}=t;const i=[...a==="clippingAncestors"?Nh(s)?[]:oT(s,this._c):[].concat(a),r],o=i[0],c=i.reduce((d,u)=>{const x=Oy(s,u,n);return d.top=Tr(x.top,d.top),d.right=ji(x.right,d.right),d.bottom=ji(x.bottom,d.bottom),d.left=Tr(x.left,d.left),d},Oy(s,o,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function dT(t){const{width:s,height:a}=Q2(t);return{width:s,height:a}}function mT(t,s,a){const r=el(s),n=rl(s),l=a==="fixed",i=xo(t,!0,l,s);let o={scrollLeft:0,scrollTop:0};const c=Xn(0);function d(){c.x=Sh(n)}if(r||!r&&!l)if((Jc(s)!=="body"||Im(n))&&(o=bh(s)),r){const h=xo(s,!0,l,s);c.x=h.x+s.clientLeft,c.y=h.y+s.clientTop}else n&&d();l&&!r&&n&&d();const u=n&&!r&&!l?e4(n,o):Xn(0),x=i.left+o.scrollLeft-c.x-u.x,p=i.top+o.scrollTop-c.y-u.y;return{x,y:p,width:i.width,height:i.height}}function Dp(t){return Pn(t).position==="static"}function Ly(t,s){if(!el(t)||Pn(t).position==="fixed")return null;if(s)return s(t);let a=t.offsetParent;return rl(t)===a&&(a=a.ownerDocument.body),a}function s4(t,s){const a=Ur(t);if(Nh(t))return a;if(!el(t)){let n=Ni(t);for(;n&&!Lc(n);){if(_n(n)&&!Dp(n))return n;n=Ni(n)}return a}let r=Ly(t,s);for(;r&&GP(r)&&Dp(r);)r=Ly(r,s);return r&&Lc(r)&&Dp(r)&&!Tg(r)?a:r||QP(t)||a}const uT=async function(t){const s=this.getOffsetParent||s4,a=this.getDimensions,r=await a(t.floating);return{reference:mT(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xT(t){return Pn(t).direction==="rtl"}const hT={convertOffsetParentRelativeRectToViewportRelativeRect:sT,getDocumentElement:rl,getClippingRect:cT,getOffsetParent:s4,getElementRects:uT,getClientRects:aT,getDimensions:dT,getScale:xc,isElement:_n,isRTL:xT};function a4(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function pT(t,s){let a=null,r;const n=rl(t);function l(){var o;clearTimeout(r),(o=a)==null||o.disconnect(),a=null}function i(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),l();const d=t.getBoundingClientRect(),{left:u,top:x,width:p,height:h}=d;if(o||s(),!p||!h)return;const y=pu(x),f=pu(n.clientWidth-(u+p)),v=pu(n.clientHeight-(x+h)),w=pu(u),j={rootMargin:-y+"px "+-f+"px "+-v+"px "+-w+"px",threshold:Tr(0,ji(1,c))||1};let N=!0;function E(C){const k=C[0].intersectionRatio;if(k!==c){if(!N)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!a4(d,t.getBoundingClientRect())&&i(),N=!1}try{a=new IntersectionObserver(E,{...j,root:n.ownerDocument})}catch{a=new IntersectionObserver(E,j)}a.observe(t)}return i(!0),l}function fT(t,s,a,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:l=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Mg(t),u=n||l?[...d?pm(d):[],...pm(s)]:[];u.forEach(w=>{n&&w.addEventListener("scroll",a,{passive:!0}),l&&w.addEventListener("resize",a)});const x=d&&o?pT(d,a):null;let p=-1,h=null;i&&(h=new ResizeObserver(w=>{let[g]=w;g&&g.target===d&&h&&(h.unobserve(s),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var j;(j=h)==null||j.observe(s)})),a()}),d&&!c&&h.observe(d),h.observe(s));let y,f=c?xo(t):null;c&&v();function v(){const w=xo(t);f&&!a4(f,w)&&a(),f=w,y=requestAnimationFrame(v)}return a(),()=>{var w;u.forEach(g=>{n&&g.removeEventListener("scroll",a),l&&g.removeEventListener("resize",a)}),x==null||x(),(w=h)==null||w.disconnect(),h=null,c&&cancelAnimationFrame(y)}}const gT=BP,vT=zP,wT=LP,yT=YP,jT=$P,$y=OP,NT=VP,bT=(t,s,a)=>{const r=new Map,n={platform:hT,...a},l={...n.platform,_c:r};return RP(t,s,{...n,platform:l})};var ST=typeof document<"u",CT=function(){},Xu=ST?m.useLayoutEffect:CT;function Fx(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let a,r,n;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(a=t.length,a!==s.length)return!1;for(r=a;r--!==0;)if(!Fx(t[r],s[r]))return!1;return!0}if(n=Object.keys(t),a=n.length,a!==Object.keys(s).length)return!1;for(r=a;r--!==0;)if(!{}.hasOwnProperty.call(s,n[r]))return!1;for(r=a;r--!==0;){const l=n[r];if(!(l==="_owner"&&t.$$typeof)&&!Fx(t[l],s[l]))return!1}return!0}return t!==t&&s!==s}function r4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Uy(t,s){const a=r4(t);return Math.round(s*a)/a}function Ap(t){const s=m.useRef(t);return Xu(()=>{s.current=t}),s}function kT(t){t===void 0&&(t={});const{placement:s="bottom",strategy:a="absolute",middleware:r=[],platform:n,elements:{reference:l,floating:i}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[u,x]=m.useState({x:0,y:0,strategy:a,placement:s,middlewareData:{},isPositioned:!1}),[p,h]=m.useState(r);Fx(p,r)||h(r);const[y,f]=m.useState(null),[v,w]=m.useState(null),g=m.useCallback(L=>{L!==C.current&&(C.current=L,f(L))},[]),j=m.useCallback(L=>{L!==k.current&&(k.current=L,w(L))},[]),N=l||y,E=i||v,C=m.useRef(null),k=m.useRef(null),A=m.useRef(u),T=c!=null,M=Ap(c),X=Ap(n),ne=Ap(d),Q=m.useCallback(()=>{if(!C.current||!k.current)return;const L={placement:s,strategy:a,middleware:p};X.current&&(L.platform=X.current),bT(C.current,k.current,L).then(he=>{const ie={...he,isPositioned:ne.current!==!1};oe.current&&!Fx(A.current,ie)&&(A.current=ie,zr.flushSync(()=>{x(ie)}))})},[p,s,a,X,ne]);Xu(()=>{d===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,x(L=>({...L,isPositioned:!1})))},[d]);const oe=m.useRef(!1);Xu(()=>(oe.current=!0,()=>{oe.current=!1}),[]),Xu(()=>{if(N&&(C.current=N),E&&(k.current=E),N&&E){if(M.current)return M.current(N,E,Q);Q()}},[N,E,Q,M,T]);const ge=m.useMemo(()=>({reference:C,floating:k,setReference:g,setFloating:j}),[g,j]),me=m.useMemo(()=>({reference:N,floating:E}),[N,E]),H=m.useMemo(()=>{const L={position:a,left:0,top:0};if(!me.floating)return L;const he=Uy(me.floating,u.x),ie=Uy(me.floating,u.y);return o?{...L,transform:"translate("+he+"px, "+ie+"px)",...r4(me.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:he,top:ie}},[a,o,me.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:Q,refs:ge,elements:me,floatingStyles:H}),[u,Q,ge,me,H])}const ET=t=>{function s(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:t,fn(a){const{element:r,padding:n}=typeof t=="function"?t(a):t;return r&&s(r)?r.current!=null?$y({element:r.current,padding:n}).fn(a):{}:r?$y({element:r,padding:n}).fn(a):{}}}},DT=(t,s)=>({...gT(t),options:[t,s]}),AT=(t,s)=>({...vT(t),options:[t,s]}),_T=(t,s)=>({...NT(t),options:[t,s]}),PT=(t,s)=>({...wT(t),options:[t,s]}),TT=(t,s)=>({...yT(t),options:[t,s]}),FT=(t,s)=>({...jT(t),options:[t,s]}),MT=(t,s)=>({...ET(t),options:[t,s]});var IT="Arrow",n4=m.forwardRef((t,s)=>{const{children:a,width:r=10,height:n=5,...l}=t;return e.jsx(ws.svg,{...l,ref:s,width:r,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?a:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});n4.displayName=IT;var RT=n4;function l4(t){const[s,a]=m.useState(void 0);return Ca(()=>{if(t){a({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const l=n[0];let i,o;if("borderBoxSize"in l){const c=l.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,o=d.blockSize}else i=t.offsetWidth,o=t.offsetHeight;a({width:i,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else a(void 0)},[t]),s}var Ig="Popper",[i4,Ch]=Pl(Ig),[OT,o4]=i4(Ig),c4=t=>{const{__scopePopper:s,children:a}=t,[r,n]=m.useState(null);return e.jsx(OT,{scope:s,anchor:r,onAnchorChange:n,children:a})};c4.displayName=Ig;var d4="PopperAnchor",m4=m.forwardRef((t,s)=>{const{__scopePopper:a,virtualRef:r,...n}=t,l=o4(d4,a),i=m.useRef(null),o=Gs(s,i),c=m.useRef(null);return m.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||i.current,d!==c.current&&l.onAnchorChange(c.current)}),r?null:e.jsx(ws.div,{...n,ref:o})});m4.displayName=d4;var Rg="PopperContent",[LT,$T]=i4(Rg),u4=m.forwardRef((t,s)=>{var U,z,te,se,J,je;const{__scopePopper:a,side:r="bottom",sideOffset:n=0,align:l="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:x="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:y,...f}=t,v=o4(Rg,a),[w,g]=m.useState(null),j=Gs(s,b=>g(b)),[N,E]=m.useState(null),C=l4(N),k=(C==null?void 0:C.width)??0,A=(C==null?void 0:C.height)??0,T=r+(l!=="center"?"-"+l:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},X=Array.isArray(d)?d:[d],ne=X.length>0,Q={padding:M,boundary:X.filter(BT),altBoundary:ne},{refs:oe,floatingStyles:ge,placement:me,isPositioned:H,middlewareData:L}=kT({strategy:"fixed",placement:T,whileElementsMounted:(...b)=>fT(...b,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[DT({mainAxis:n+A,alignmentAxis:i}),c&&AT({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?_T():void 0,...Q}),c&&PT({...Q}),TT({...Q,apply:({elements:b,rects:S,availableWidth:D,availableHeight:R})=>{const{width:F,height:I}=S.reference,ce=b.floating.style;ce.setProperty("--radix-popper-available-width",`${D}px`),ce.setProperty("--radix-popper-available-height",`${R}px`),ce.setProperty("--radix-popper-anchor-width",`${F}px`),ce.setProperty("--radix-popper-anchor-height",`${I}px`)}}),N&&MT({element:N,padding:o}),zT({arrowWidth:k,arrowHeight:A}),p&&FT({strategy:"referenceHidden",...Q})]}),[he,ie]=p4(me),ke=cn(y);Ca(()=>{H&&(ke==null||ke())},[H,ke]);const V=(U=L.arrow)==null?void 0:U.x,O=(z=L.arrow)==null?void 0:z.y,Y=((te=L.arrow)==null?void 0:te.centerOffset)!==0,[W,ue]=m.useState();return Ca(()=>{w&&ue(window.getComputedStyle(w).zIndex)},[w]),e.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:H?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(se=L.transformOrigin)==null?void 0:se.x,(J=L.transformOrigin)==null?void 0:J.y].join(" "),...((je=L.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(LT,{scope:a,placedSide:he,onArrowChange:E,arrowX:V,arrowY:O,shouldHideArrow:Y,children:e.jsx(ws.div,{"data-side":he,"data-align":ie,...f,ref:j,style:{...f.style,animation:H?void 0:"none"}})})})});u4.displayName=Rg;var x4="PopperArrow",UT={top:"bottom",right:"left",bottom:"top",left:"right"},h4=m.forwardRef(function(s,a){const{__scopePopper:r,...n}=s,l=$T(x4,r),i=UT[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(RT,{...n,ref:a,style:{...n.style,display:"block"}})})});h4.displayName=x4;function BT(t){return t!==null}var zT=t=>({name:"transformOrigin",options:t,fn(s){var v,w,g;const{placement:a,rects:r,middlewareData:n}=s,i=((v=n.arrow)==null?void 0:v.centerOffset)!==0,o=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[d,u]=p4(a),x={start:"0%",center:"50%",end:"100%"}[u],p=(((w=n.arrow)==null?void 0:w.x)??0)+o/2,h=(((g=n.arrow)==null?void 0:g.y)??0)+c/2;let y="",f="";return d==="bottom"?(y=i?x:`${p}px`,f=`${-c}px`):d==="top"?(y=i?x:`${p}px`,f=`${r.floating.height+c}px`):d==="right"?(y=`${-c}px`,f=i?x:`${h}px`):d==="left"&&(y=`${r.floating.width+c}px`,f=i?x:`${h}px`),{data:{x:y,y:f}}}});function p4(t){const[s,a="center"]=t.split("-");return[s,a]}var f4=c4,Og=m4,g4=u4,v4=h4;function w4(t){const s=m.useRef({value:t,previous:t});return m.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var VT=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Fo=new WeakMap,fu=new WeakMap,gu={},_p=0,y4=function(t){return t&&(t.host||y4(t.parentNode))},YT=function(t,s){return s.map(function(a){if(t.contains(a))return a;var r=y4(a);return r&&t.contains(r)?r:(console.error("aria-hidden",a,"in not contained inside",t,". Doing nothing"),null)}).filter(function(a){return!!a})},WT=function(t,s,a,r){var n=YT(s,Array.isArray(t)?t:[t]);gu[a]||(gu[a]=new WeakMap);var l=gu[a],i=[],o=new Set,c=new Set(n),d=function(x){!x||o.has(x)||(o.add(x),d(x.parentNode))};n.forEach(d);var u=function(x){!x||c.has(x)||Array.prototype.forEach.call(x.children,function(p){if(o.has(p))u(p);else try{var h=p.getAttribute(r),y=h!==null&&h!=="false",f=(Fo.get(p)||0)+1,v=(l.get(p)||0)+1;Fo.set(p,f),l.set(p,v),i.push(p),f===1&&y&&fu.set(p,!0),v===1&&p.setAttribute(a,"true"),y||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return u(s),o.clear(),_p++,function(){i.forEach(function(x){var p=Fo.get(x)-1,h=l.get(x)-1;Fo.set(x,p),l.set(x,h),p||(fu.has(x)||x.removeAttribute(r),fu.delete(x)),h||x.removeAttribute(a)}),_p--,_p||(Fo=new WeakMap,Fo=new WeakMap,fu=new WeakMap,gu={})}},Lg=function(t,s,a){a===void 0&&(a="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),n=VT(t);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live], script"))),WT(r,n,a,"aria-hidden")):function(){return null}},Yn=function(){return Yn=Object.assign||function(s){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},Yn.apply(this,arguments)};function j4(t,s){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)s.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(a[r[n]]=t[r[n]]);return a}function HT(t,s,a){if(a||arguments.length===2)for(var r=0,n=s.length,l;r<n;r++)(l||!(r in s))&&(l||(l=Array.prototype.slice.call(s,0,r)),l[r]=s[r]);return t.concat(l||Array.prototype.slice.call(s))}var Qu="right-scroll-bar-position",Zu="width-before-scroll-bar",GT="with-scroll-bars-hidden",qT="--removed-body-scroll-bar-size";function Pp(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function JT(t,s){var a=m.useState(function(){return{value:t,callback:s,facade:{get current(){return a.value},set current(r){var n=a.value;n!==r&&(a.value=r,a.callback(r,n))}}}})[0];return a.callback=s,a.facade}var KT=typeof window<"u"?m.useLayoutEffect:m.useEffect,By=new WeakMap;function XT(t,s){var a=JT(null,function(r){return t.forEach(function(n){return Pp(n,r)})});return KT(function(){var r=By.get(a);if(r){var n=new Set(r),l=new Set(t),i=a.current;n.forEach(function(o){l.has(o)||Pp(o,null)}),l.forEach(function(o){n.has(o)||Pp(o,i)})}By.set(a,t)},[t]),a}function QT(t){return t}function ZT(t,s){s===void 0&&(s=QT);var a=[],r=!1,n={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:t},useMedium:function(l){var i=s(l,r);return a.push(i),function(){a=a.filter(function(o){return o!==i})}},assignSyncMedium:function(l){for(r=!0;a.length;){var i=a;a=[],i.forEach(l)}a={push:function(o){return l(o)},filter:function(){return a}}},assignMedium:function(l){r=!0;var i=[];if(a.length){var o=a;a=[],o.forEach(l),i=a}var c=function(){var u=i;i=[],u.forEach(l)},d=function(){return Promise.resolve().then(c)};d(),a={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),a}}}};return n}function eF(t){t===void 0&&(t={});var s=ZT(null);return s.options=Yn({async:!0,ssr:!1},t),s}var N4=function(t){var s=t.sideCar,a=j4(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Yn({},a))};N4.isSideCarExport=!0;function tF(t,s){return t.useMedium(s),N4}var b4=eF(),Tp=function(){},kh=m.forwardRef(function(t,s){var a=m.useRef(null),r=m.useState({onScrollCapture:Tp,onWheelCapture:Tp,onTouchMoveCapture:Tp}),n=r[0],l=r[1],i=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,x=t.shards,p=t.sideCar,h=t.noRelative,y=t.noIsolation,f=t.inert,v=t.allowPinchZoom,w=t.as,g=w===void 0?"div":w,j=t.gapMode,N=j4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,C=XT([a,s]),k=Yn(Yn({},N),n);return m.createElement(m.Fragment,null,u&&m.createElement(E,{sideCar:b4,removeScrollBar:d,shards:x,noRelative:h,noIsolation:y,inert:f,setCallbacks:l,allowPinchZoom:!!v,lockRef:a,gapMode:j}),i?m.cloneElement(m.Children.only(o),Yn(Yn({},k),{ref:C})):m.createElement(g,Yn({},k,{className:c,ref:C}),o))});kh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kh.classNames={fullWidth:Zu,zeroRight:Qu};var sF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=sF();return s&&t.setAttribute("nonce",s),t}function rF(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function nF(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var lF=function(){var t=0,s=null;return{add:function(a){t==0&&(s=aF())&&(rF(s,a),nF(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},iF=function(){var t=lF();return function(s,a){m.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&a])}},S4=function(){var t=iF(),s=function(a){var r=a.styles,n=a.dynamic;return t(r,n),null};return s},oF={left:0,top:0,right:0,gap:0},Fp=function(t){return parseInt(t||"",10)||0},cF=function(t){var s=window.getComputedStyle(document.body),a=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],n=s[t==="padding"?"paddingRight":"marginRight"];return[Fp(a),Fp(r),Fp(n)]},dF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return oF;var s=cF(t),a=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-a+s[2]-s[0])}},mF=S4(),hc="data-scroll-locked",uF=function(t,s,a,r){var n=t.left,l=t.top,i=t.right,o=t.gap;return a===void 0&&(a="margin"),`
  .`.concat(GT,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(hc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),a==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),a==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qu,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Zu,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Qu," .").concat(Qu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Zu," .").concat(Zu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hc,`] {
    `).concat(qT,": ").concat(o,`px;
  }
`)},zy=function(){var t=parseInt(document.body.getAttribute(hc)||"0",10);return isFinite(t)?t:0},xF=function(){m.useEffect(function(){return document.body.setAttribute(hc,(zy()+1).toString()),function(){var t=zy()-1;t<=0?document.body.removeAttribute(hc):document.body.setAttribute(hc,t.toString())}},[])},hF=function(t){var s=t.noRelative,a=t.noImportant,r=t.gapMode,n=r===void 0?"margin":r;xF();var l=m.useMemo(function(){return dF(n)},[n]);return m.createElement(mF,{styles:uF(l,!s,n,a?"":"!important")})},l0=!1;if(typeof window<"u")try{var vu=Object.defineProperty({},"passive",{get:function(){return l0=!0,!0}});window.addEventListener("test",vu,vu),window.removeEventListener("test",vu,vu)}catch{l0=!1}var Mo=l0?{passive:!1}:!1,pF=function(t){return t.tagName==="TEXTAREA"},C4=function(t,s){if(!(t instanceof Element))return!1;var a=window.getComputedStyle(t);return a[s]!=="hidden"&&!(a.overflowY===a.overflowX&&!pF(t)&&a[s]==="visible")},fF=function(t){return C4(t,"overflowY")},gF=function(t){return C4(t,"overflowX")},Vy=function(t,s){var a=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=k4(t,r);if(n){var l=E4(t,r),i=l[1],o=l[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==a.body);return!1},vF=function(t){var s=t.scrollTop,a=t.scrollHeight,r=t.clientHeight;return[s,a,r]},wF=function(t){var s=t.scrollLeft,a=t.scrollWidth,r=t.clientWidth;return[s,a,r]},k4=function(t,s){return t==="v"?fF(s):gF(s)},E4=function(t,s){return t==="v"?vF(s):wF(s)},yF=function(t,s){return t==="h"&&s==="rtl"?-1:1},jF=function(t,s,a,r,n){var l=yF(t,window.getComputedStyle(s).direction),i=l*r,o=a.target,c=s.contains(o),d=!1,u=i>0,x=0,p=0;do{if(!o)break;var h=E4(t,o),y=h[0],f=h[1],v=h[2],w=f-v-l*y;(y||w)&&k4(t,o)&&(x+=w,p+=y);var g=o.parentNode;o=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(u&&Math.abs(x)<1||!u&&Math.abs(p)<1)&&(d=!0),d},wu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Yy=function(t){return[t.deltaX,t.deltaY]},Wy=function(t){return t&&"current"in t?t.current:t},NF=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},SF=0,Io=[];function CF(t){var s=m.useRef([]),a=m.useRef([0,0]),r=m.useRef(),n=m.useState(SF++)[0],l=m.useState(S4)[0],i=m.useRef(t);m.useEffect(function(){i.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var f=HT([t.lockRef.current],(t.shards||[]).map(Wy),!0).filter(Boolean);return f.forEach(function(v){return v.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),f.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var o=m.useCallback(function(f,v){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!i.current.allowPinchZoom;var w=wu(f),g=a.current,j="deltaX"in f?f.deltaX:g[0]-w[0],N="deltaY"in f?f.deltaY:g[1]-w[1],E,C=f.target,k=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in f&&k==="h"&&C.type==="range")return!1;var A=Vy(k,C);if(!A)return!0;if(A?E=k:(E=k==="v"?"h":"v",A=Vy(k,C)),!A)return!1;if(!r.current&&"changedTouches"in f&&(j||N)&&(r.current=E),!E)return!0;var T=r.current||E;return jF(T,v,f,T==="h"?j:N)},[]),c=m.useCallback(function(f){var v=f;if(!(!Io.length||Io[Io.length-1]!==l)){var w="deltaY"in v?Yy(v):wu(v),g=s.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&NF(E.delta,w)})[0];if(g&&g.should){v.cancelable&&v.preventDefault();return}if(!g){var j=(i.current.shards||[]).map(Wy).filter(Boolean).filter(function(E){return E.contains(v.target)}),N=j.length>0?o(v,j[0]):!i.current.noIsolation;N&&v.cancelable&&v.preventDefault()}}},[]),d=m.useCallback(function(f,v,w,g){var j={name:f,delta:v,target:w,should:g,shadowParent:kF(w)};s.current.push(j),setTimeout(function(){s.current=s.current.filter(function(N){return N!==j})},1)},[]),u=m.useCallback(function(f){a.current=wu(f),r.current=void 0},[]),x=m.useCallback(function(f){d(f.type,Yy(f),f.target,o(f,t.lockRef.current))},[]),p=m.useCallback(function(f){d(f.type,wu(f),f.target,o(f,t.lockRef.current))},[]);m.useEffect(function(){return Io.push(l),t.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Mo),document.addEventListener("touchmove",c,Mo),document.addEventListener("touchstart",u,Mo),function(){Io=Io.filter(function(f){return f!==l}),document.removeEventListener("wheel",c,Mo),document.removeEventListener("touchmove",c,Mo),document.removeEventListener("touchstart",u,Mo)}},[]);var h=t.removeScrollBar,y=t.inert;return m.createElement(m.Fragment,null,y?m.createElement(l,{styles:bF(n)}):null,h?m.createElement(hF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function kF(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const EF=tF(b4,CF);var Eh=m.forwardRef(function(t,s){return m.createElement(kh,Yn({},t,{ref:s,sideCar:EF}))});Eh.classNames=kh.classNames;var DF=[" ","Enter","ArrowUp","ArrowDown"],AF=[" ","Enter"],ho="Select",[Dh,Ah,_F]=u2(ho),[Kc,jY]=Pl(ho,[_F,Ch]),_h=Ch(),[PF,Fi]=Kc(ho),[TF,FF]=Kc(ho),D4=t=>{const{__scopeSelect:s,children:a,open:r,defaultOpen:n,onOpenChange:l,value:i,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:x,disabled:p,required:h,form:y}=t,f=_h(s),[v,w]=m.useState(null),[g,j]=m.useState(null),[N,E]=m.useState(!1),C=pP(d),[k,A]=Oc({prop:r,defaultProp:n??!1,onChange:l,caller:ho}),[T,M]=Oc({prop:i,defaultProp:o,onChange:c,caller:ho}),X=m.useRef(null),ne=v?y||!!v.closest("form"):!0,[Q,oe]=m.useState(new Set),ge=Array.from(Q).map(me=>me.props.value).join(";");return e.jsx(f4,{...f,children:e.jsxs(PF,{required:h,scope:s,trigger:v,onTriggerChange:w,valueNode:g,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:E,contentId:ao(),value:T,onValueChange:M,open:k,onOpenChange:A,dir:C,triggerPointerDownPosRef:X,disabled:p,children:[e.jsx(Dh.Provider,{scope:s,children:e.jsx(TF,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(me=>{oe(H=>new Set(H).add(me))},[]),onNativeOptionRemove:m.useCallback(me=>{oe(H=>{const L=new Set(H);return L.delete(me),L})},[]),children:a})}),ne?e.jsxs(Q4,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:x,value:T,onChange:me=>M(me.target.value),disabled:p,form:y,children:[T===void 0?e.jsx("option",{value:""}):null,Array.from(Q)]},ge):null]})})};D4.displayName=ho;var A4="SelectTrigger",_4=m.forwardRef((t,s)=>{const{__scopeSelect:a,disabled:r=!1,...n}=t,l=_h(a),i=Fi(A4,a),o=i.disabled||r,c=Gs(s,i.onTriggerChange),d=Ah(a),u=m.useRef("touch"),[x,p,h]=eS(f=>{const v=d().filter(j=>!j.disabled),w=v.find(j=>j.value===i.value),g=tS(v,f,w);g!==void 0&&i.onValueChange(g.value)}),y=f=>{o||(i.onOpenChange(!0),h()),f&&(i.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(Og,{asChild:!0,...l,children:e.jsx(ws.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Z4(i.value)?"":void 0,...n,ref:c,onClick:ps(n.onClick,f=>{f.currentTarget.focus(),u.current!=="mouse"&&y(f)}),onPointerDown:ps(n.onPointerDown,f=>{u.current=f.pointerType;const v=f.target;v.hasPointerCapture(f.pointerId)&&v.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(y(f),f.preventDefault())}),onKeyDown:ps(n.onKeyDown,f=>{const v=x.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&p(f.key),!(v&&f.key===" ")&&DF.includes(f.key)&&(y(),f.preventDefault())})})})});_4.displayName=A4;var P4="SelectValue",T4=m.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:n,children:l,placeholder:i="",...o}=t,c=Fi(P4,a),{onValueNodeHasChildrenChange:d}=c,u=l!==void 0,x=Gs(s,c.onValueNodeChange);return Ca(()=>{d(u)},[d,u]),e.jsx(ws.span,{...o,ref:x,style:{pointerEvents:"none"},children:Z4(c.value)?e.jsx(e.Fragment,{children:i}):l})});T4.displayName=P4;var MF="SelectIcon",F4=m.forwardRef((t,s)=>{const{__scopeSelect:a,children:r,...n}=t;return e.jsx(ws.span,{"aria-hidden":!0,...n,ref:s,children:r||""})});F4.displayName=MF;var IF="SelectPortal",M4=t=>e.jsx(Fm,{asChild:!0,...t});M4.displayName=IF;var po="SelectContent",I4=m.forwardRef((t,s)=>{const a=Fi(po,t.__scopeSelect),[r,n]=m.useState();if(Ca(()=>{n(new DocumentFragment)},[]),!a.open){const l=r;return l?zr.createPortal(e.jsx(R4,{scope:t.__scopeSelect,children:e.jsx(Dh.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(O4,{...t,ref:s})});I4.displayName=po;var gn=10,[R4,Mi]=Kc(po),RF="SelectContentImpl",OF=mo("SelectContent.RemoveScroll"),O4=m.forwardRef((t,s)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:l,onPointerDownOutside:i,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:x,collisionBoundary:p,collisionPadding:h,sticky:y,hideWhenDetached:f,avoidCollisions:v,...w}=t,g=Fi(po,a),[j,N]=m.useState(null),[E,C]=m.useState(null),k=Gs(s,U=>N(U)),[A,T]=m.useState(null),[M,X]=m.useState(null),ne=Ah(a),[Q,oe]=m.useState(!1),ge=m.useRef(!1);m.useEffect(()=>{if(j)return Lg(j)},[j]),Dg();const me=m.useCallback(U=>{const[z,...te]=ne().map(je=>je.ref.current),[se]=te.slice(-1),J=document.activeElement;for(const je of U)if(je===J||(je==null||je.scrollIntoView({block:"nearest"}),je===z&&E&&(E.scrollTop=0),je===se&&E&&(E.scrollTop=E.scrollHeight),je==null||je.focus(),document.activeElement!==J))return},[ne,E]),H=m.useCallback(()=>me([A,j]),[me,A,j]);m.useEffect(()=>{Q&&H()},[Q,H]);const{onOpenChange:L,triggerPointerDownPosRef:he}=g;m.useEffect(()=>{if(j){let U={x:0,y:0};const z=se=>{var J,je;U={x:Math.abs(Math.round(se.pageX)-(((J=he.current)==null?void 0:J.x)??0)),y:Math.abs(Math.round(se.pageY)-(((je=he.current)==null?void 0:je.y)??0))}},te=se=>{U.x<=10&&U.y<=10?se.preventDefault():j.contains(se.target)||L(!1),document.removeEventListener("pointermove",z),he.current=null};return he.current!==null&&(document.addEventListener("pointermove",z),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",te,{capture:!0})}}},[j,L,he]),m.useEffect(()=>{const U=()=>L(!1);return window.addEventListener("blur",U),window.addEventListener("resize",U),()=>{window.removeEventListener("blur",U),window.removeEventListener("resize",U)}},[L]);const[ie,ke]=eS(U=>{const z=ne().filter(J=>!J.disabled),te=z.find(J=>J.ref.current===document.activeElement),se=tS(z,U,te);se&&setTimeout(()=>se.ref.current.focus())}),V=m.useCallback((U,z,te)=>{const se=!ge.current&&!te;(g.value!==void 0&&g.value===z||se)&&(T(U),se&&(ge.current=!0))},[g.value]),O=m.useCallback(()=>j==null?void 0:j.focus(),[j]),Y=m.useCallback((U,z,te)=>{const se=!ge.current&&!te;(g.value!==void 0&&g.value===z||se)&&X(U)},[g.value]),W=r==="popper"?i0:L4,ue=W===i0?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:x,collisionBoundary:p,collisionPadding:h,sticky:y,hideWhenDetached:f,avoidCollisions:v}:{};return e.jsx(R4,{scope:a,content:j,viewport:E,onViewportChange:C,itemRefCallback:V,selectedItem:A,onItemLeave:O,itemTextRefCallback:Y,focusSelectedItem:H,selectedItemText:M,position:r,isPositioned:Q,searchRef:ie,children:e.jsx(Eh,{as:OF,allowPinchZoom:!0,children:e.jsx(yh,{asChild:!0,trapped:g.open,onMountAutoFocus:U=>{U.preventDefault()},onUnmountAutoFocus:ps(n,U=>{var z;(z=g.trigger)==null||z.focus({preventScroll:!0}),U.preventDefault()}),children:e.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:i,onFocusOutside:U=>U.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:e.jsx(W,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:U=>U.preventDefault(),...w,...ue,onPlaced:()=>oe(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ps(w.onKeyDown,U=>{const z=U.ctrlKey||U.altKey||U.metaKey;if(U.key==="Tab"&&U.preventDefault(),!z&&U.key.length===1&&ke(U.key),["ArrowUp","ArrowDown","Home","End"].includes(U.key)){let se=ne().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(U.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(U.key)){const J=U.target,je=se.indexOf(J);se=se.slice(je+1)}setTimeout(()=>me(se)),U.preventDefault()}})})})})})})});O4.displayName=RF;var LF="SelectItemAlignedPosition",L4=m.forwardRef((t,s)=>{const{__scopeSelect:a,onPlaced:r,...n}=t,l=Fi(po,a),i=Mi(po,a),[o,c]=m.useState(null),[d,u]=m.useState(null),x=Gs(s,k=>u(k)),p=Ah(a),h=m.useRef(!1),y=m.useRef(!0),{viewport:f,selectedItem:v,selectedItemText:w,focusSelectedItem:g}=i,j=m.useCallback(()=>{if(l.trigger&&l.valueNode&&o&&d&&f&&v&&w){const k=l.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),T=l.valueNode.getBoundingClientRect(),M=w.getBoundingClientRect();if(l.dir!=="rtl"){const J=M.left-A.left,je=T.left-J,b=k.left-je,S=k.width+b,D=Math.max(S,A.width),R=window.innerWidth-gn,F=Sy(je,[gn,Math.max(gn,R-D)]);o.style.minWidth=S+"px",o.style.left=F+"px"}else{const J=A.right-M.right,je=window.innerWidth-T.right-J,b=window.innerWidth-k.right-je,S=k.width+b,D=Math.max(S,A.width),R=window.innerWidth-gn,F=Sy(je,[gn,Math.max(gn,R-D)]);o.style.minWidth=S+"px",o.style.right=F+"px"}const X=p(),ne=window.innerHeight-gn*2,Q=f.scrollHeight,oe=window.getComputedStyle(d),ge=parseInt(oe.borderTopWidth,10),me=parseInt(oe.paddingTop,10),H=parseInt(oe.borderBottomWidth,10),L=parseInt(oe.paddingBottom,10),he=ge+me+Q+L+H,ie=Math.min(v.offsetHeight*5,he),ke=window.getComputedStyle(f),V=parseInt(ke.paddingTop,10),O=parseInt(ke.paddingBottom,10),Y=k.top+k.height/2-gn,W=ne-Y,ue=v.offsetHeight/2,U=v.offsetTop+ue,z=ge+me+U,te=he-z;if(z<=Y){const J=X.length>0&&v===X[X.length-1].ref.current;o.style.bottom="0px";const je=d.clientHeight-f.offsetTop-f.offsetHeight,b=Math.max(W,ue+(J?O:0)+je+H),S=z+b;o.style.height=S+"px"}else{const J=X.length>0&&v===X[0].ref.current;o.style.top="0px";const b=Math.max(Y,ge+f.offsetTop+(J?V:0)+ue)+te;o.style.height=b+"px",f.scrollTop=z-Y+f.offsetTop}o.style.margin=`${gn}px 0`,o.style.minHeight=ie+"px",o.style.maxHeight=ne+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[p,l.trigger,l.valueNode,o,d,f,v,w,l.dir,r]);Ca(()=>j(),[j]);const[N,E]=m.useState();Ca(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const C=m.useCallback(k=>{k&&y.current===!0&&(j(),g==null||g(),y.current=!1)},[j,g]);return e.jsx(UF,{scope:a,contentWrapper:o,shouldExpandOnScrollRef:h,onScrollButtonChange:C,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:e.jsx(ws.div,{...n,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});L4.displayName=LF;var $F="SelectPopperPosition",i0=m.forwardRef((t,s)=>{const{__scopeSelect:a,align:r="start",collisionPadding:n=gn,...l}=t,i=_h(a);return e.jsx(g4,{...i,...l,ref:s,align:r,collisionPadding:n,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});i0.displayName=$F;var[UF,$g]=Kc(po,{}),o0="SelectViewport",$4=m.forwardRef((t,s)=>{const{__scopeSelect:a,nonce:r,...n}=t,l=Mi(o0,a),i=$g(o0,a),o=Gs(s,l.onViewportChange),c=m.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Dh.Slot,{scope:a,children:e.jsx(ws.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:ps(n.onScroll,d=>{const u=d.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&x){const h=Math.abs(c.current-u.scrollTop);if(h>0){const y=window.innerHeight-gn*2,f=parseFloat(x.style.minHeight),v=parseFloat(x.style.height),w=Math.max(f,v);if(w<y){const g=w+h,j=Math.min(y,g),N=g-j;x.style.height=j+"px",x.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,x.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});$4.displayName=o0;var U4="SelectGroup",[BF,zF]=Kc(U4),VF=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,n=ao();return e.jsx(BF,{scope:a,id:n,children:e.jsx(ws.div,{role:"group","aria-labelledby":n,...r,ref:s})})});VF.displayName=U4;var B4="SelectLabel",z4=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,n=zF(B4,a);return e.jsx(ws.div,{id:n.id,...r,ref:s})});z4.displayName=B4;var Mx="SelectItem",[YF,V4]=Kc(Mx),Y4=m.forwardRef((t,s)=>{const{__scopeSelect:a,value:r,disabled:n=!1,textValue:l,...i}=t,o=Fi(Mx,a),c=Mi(Mx,a),d=o.value===r,[u,x]=m.useState(l??""),[p,h]=m.useState(!1),y=Gs(s,g=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,g,r,n)}),f=ao(),v=m.useRef("touch"),w=()=>{n||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(YF,{scope:a,value:r,disabled:n,textId:f,isSelected:d,onItemTextChange:m.useCallback(g=>{x(j=>j||((g==null?void 0:g.textContent)??"").trim())},[]),children:e.jsx(Dh.ItemSlot,{scope:a,value:r,disabled:n,textValue:u,children:e.jsx(ws.div,{role:"option","aria-labelledby":f,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:y,onFocus:ps(i.onFocus,()=>h(!0)),onBlur:ps(i.onBlur,()=>h(!1)),onClick:ps(i.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:ps(i.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:ps(i.onPointerDown,g=>{v.current=g.pointerType}),onPointerMove:ps(i.onPointerMove,g=>{var j;v.current=g.pointerType,n?(j=c.onItemLeave)==null||j.call(c):v.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ps(i.onPointerLeave,g=>{var j;g.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:ps(i.onKeyDown,g=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&g.key===" "||(AF.includes(g.key)&&w(),g.key===" "&&g.preventDefault())})})})})});Y4.displayName=Mx;var Cd="SelectItemText",W4=m.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:n,...l}=t,i=Fi(Cd,a),o=Mi(Cd,a),c=V4(Cd,a),d=FF(Cd,a),[u,x]=m.useState(null),p=Gs(s,w=>x(w),c.onItemTextChange,w=>{var g;return(g=o.itemTextRefCallback)==null?void 0:g.call(o,w,c.value,c.disabled)}),h=u==null?void 0:u.textContent,y=m.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:f,onNativeOptionRemove:v}=d;return Ca(()=>(f(y),()=>v(y)),[f,v,y]),e.jsxs(e.Fragment,{children:[e.jsx(ws.span,{id:c.textId,...l,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?zr.createPortal(l.children,i.valueNode):null]})});W4.displayName=Cd;var H4="SelectItemIndicator",G4=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return V4(H4,a).isSelected?e.jsx(ws.span,{"aria-hidden":!0,...r,ref:s}):null});G4.displayName=H4;var c0="SelectScrollUpButton",q4=m.forwardRef((t,s)=>{const a=Mi(c0,t.__scopeSelect),r=$g(c0,t.__scopeSelect),[n,l]=m.useState(!1),i=Gs(s,r.onScrollButtonChange);return Ca(()=>{if(a.viewport&&a.isPositioned){let o=function(){const d=c.scrollTop>0;l(d)};const c=a.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[a.viewport,a.isPositioned]),n?e.jsx(K4,{...t,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=a;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});q4.displayName=c0;var d0="SelectScrollDownButton",J4=m.forwardRef((t,s)=>{const a=Mi(d0,t.__scopeSelect),r=$g(d0,t.__scopeSelect),[n,l]=m.useState(!1),i=Gs(s,r.onScrollButtonChange);return Ca(()=>{if(a.viewport&&a.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;l(u)};const c=a.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[a.viewport,a.isPositioned]),n?e.jsx(K4,{...t,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=a;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});J4.displayName=d0;var K4=m.forwardRef((t,s)=>{const{__scopeSelect:a,onAutoScroll:r,...n}=t,l=Mi("SelectScrollButton",a),i=m.useRef(null),o=Ah(a),c=m.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Ca(()=>{var u;const d=o().find(x=>x.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),e.jsx(ws.div,{"aria-hidden":!0,...n,ref:s,style:{flexShrink:0,...n.style},onPointerDown:ps(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:ps(n.onPointerMove,()=>{var d;(d=l.onItemLeave)==null||d.call(l),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:ps(n.onPointerLeave,()=>{c()})})}),WF="SelectSeparator",X4=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return e.jsx(ws.div,{"aria-hidden":!0,...r,ref:s})});X4.displayName=WF;var m0="SelectArrow",HF=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,n=_h(a),l=Fi(m0,a),i=Mi(m0,a);return l.open&&i.position==="popper"?e.jsx(v4,{...n,...r,ref:s}):null});HF.displayName=m0;var GF="SelectBubbleInput",Q4=m.forwardRef(({__scopeSelect:t,value:s,...a},r)=>{const n=m.useRef(null),l=Gs(r,n),i=w4(s);return m.useEffect(()=>{const o=n.current;if(!o)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==s&&u){const x=new Event("change",{bubbles:!0});u.call(o,s),o.dispatchEvent(x)}},[i,s]),e.jsx(ws.select,{...a,style:{...f2,...a.style},ref:l,defaultValue:s})});Q4.displayName=GF;function Z4(t){return t===""||t===void 0}function eS(t){const s=cn(t),a=m.useRef(""),r=m.useRef(0),n=m.useCallback(i=>{const o=a.current+i;s(o),function c(d){a.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[s]),l=m.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,n,l]}function tS(t,s,a){const n=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,l=a?t.indexOf(a):-1;let i=qF(t,Math.max(l,0));n.length===1&&(i=i.filter(d=>d!==a));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function qF(t,s){return t.map((a,r)=>t[(s+r)%t.length])}var JF=D4,sS=_4,KF=T4,XF=F4,QF=M4,aS=I4,ZF=$4,rS=z4,nS=Y4,eM=W4,tM=G4,lS=q4,iS=J4,oS=X4;const At=JF,_t=KF,Et=m.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(sS,{ref:r,className:bt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(XF,{asChild:!0,children:e.jsx(Dx,{className:"h-4 w-4 opacity-50"})})]}));Et.displayName=sS.displayName;const cS=m.forwardRef(({className:t,...s},a)=>e.jsx(lS,{ref:a,className:bt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(wA,{className:"h-4 w-4"})}));cS.displayName=lS.displayName;const dS=m.forwardRef(({className:t,...s},a)=>e.jsx(iS,{ref:a,className:bt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Dx,{className:"h-4 w-4"})}));dS.displayName=iS.displayName;const Dt=m.forwardRef(({className:t,children:s,position:a="popper",...r},n)=>e.jsx(QF,{children:e.jsxs(aS,{ref:n,className:bt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(cS,{}),e.jsx(ZF,{className:bt("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(dS,{})]})}));Dt.displayName=aS.displayName;const sM=m.forwardRef(({className:t,...s},a)=>e.jsx(rS,{ref:a,className:bt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));sM.displayName=rS.displayName;const Pe=m.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(nS,{ref:r,className:bt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(tM,{children:e.jsx(Ex,{className:"h-4 w-4"})})}),e.jsx(eM,{children:s})]}));Pe.displayName=nS.displayName;const aM=m.forwardRef(({className:t,...s},a)=>e.jsx(oS,{ref:a,className:bt("-mx-1 my-1 h-px bg-muted",t),...s}));aM.displayName=oS.displayName;function Fs(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function Vr(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function nr(t,s){const a=Fs(t);return isNaN(s)?Vr(t,NaN):(s&&a.setDate(a.getDate()+s),a)}function Tn(t,s){const a=Fs(t);if(isNaN(s))return Vr(t,NaN);if(!s)return a;const r=a.getDate(),n=Vr(t,a.getTime());n.setMonth(a.getMonth()+s+1,0);const l=n.getDate();return r>=l?n:(a.setFullYear(n.getFullYear(),n.getMonth(),r),a)}const Ug=6048e5,rM=864e5,mS=6e4,uS=36e5;let nM={};function Rm(){return nM}function tl(t,s){var o,c,d,u;const a=Rm(),r=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((u=(d=a.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=Fs(t),l=n.getDay(),i=(l<r?7:0)+l-r;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function fo(t){return tl(t,{weekStartsOn:1})}function xS(t){const s=Fs(t),a=s.getFullYear(),r=Vr(t,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const n=fo(r),l=Vr(t,0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);const i=fo(l);return s.getTime()>=n.getTime()?a+1:s.getTime()>=i.getTime()?a:a-1}function $c(t){const s=Fs(t);return s.setHours(0,0,0,0),s}function Ix(t){const s=Fs(t),a=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return a.setUTCFullYear(s.getFullYear()),+t-+a}function Gn(t,s){const a=$c(t),r=$c(s),n=+a-Ix(a),l=+r-Ix(r);return Math.round((n-l)/rM)}function lM(t){const s=xS(t),a=Vr(t,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),fo(a)}function u0(t,s){const a=s*7;return nr(t,a)}function iM(t,s){return Tn(t,s*12)}function oM(t){let s;return t.forEach(function(a){const r=Fs(a);(s===void 0||s<r||isNaN(Number(r)))&&(s=r)}),s||new Date(NaN)}function cM(t){let s;return t.forEach(a=>{const r=Fs(a);(!s||s>r||isNaN(+r))&&(s=r)}),s||new Date(NaN)}function yr(t,s){const a=$c(t),r=$c(s);return+a==+r}function Bg(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function dM(t){if(!Bg(t)&&typeof t!="number")return!1;const s=Fs(t);return!isNaN(Number(s))}function fm(t,s){const a=Fs(t),r=Fs(s),n=a.getFullYear()-r.getFullYear(),l=a.getMonth()-r.getMonth();return n*12+l}function mM(t,s,a){const r=tl(t,a),n=tl(s,a),l=+r-Ix(r),i=+n-Ix(n);return Math.round((l-i)/Ug)}function zg(t){const s=Fs(t),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(23,59,59,999),s}function Sr(t){const s=Fs(t);return s.setDate(1),s.setHours(0,0,0,0),s}function hS(t){const s=Fs(t),a=Vr(t,0);return a.setFullYear(s.getFullYear(),0,1),a.setHours(0,0,0,0),a}function Vg(t,s){var o,c,d,u;const a=Rm(),r=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((u=(d=a.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=Fs(t),l=n.getDay(),i=(l<r?-7:0)+6-(l-r);return n.setDate(n.getDate()+i),n.setHours(23,59,59,999),n}function pS(t){return Vg(t,{weekStartsOn:1})}const uM={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xM=(t,s,a)=>{let r;const n=uM[t];return typeof n=="string"?r=n:s===1?r=n.one:r=n.other.replace("{{count}}",s.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function Mp(t){return(s={})=>{const a=s.width?String(s.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const hM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gM={date:Mp({formats:hM,defaultWidth:"full"}),time:Mp({formats:pM,defaultWidth:"full"}),dateTime:Mp({formats:fM,defaultWidth:"full"})},vM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wM=(t,s,a,r)=>vM[t];function ud(t){return(s,a)=>{const r=a!=null&&a.context?String(a.context):"standalone";let n;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=a!=null&&a.width?String(a.width):i;n=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=a!=null&&a.width?String(a.width):t.defaultWidth;n=t.values[o]||t.values[i]}const l=t.argumentCallback?t.argumentCallback(s):s;return n[l]}}const yM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},NM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},CM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kM=(t,s)=>{const a=Number(t),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},EM={ordinalNumber:kM,era:ud({values:yM,defaultWidth:"wide"}),quarter:ud({values:jM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ud({values:NM,defaultWidth:"wide"}),day:ud({values:bM,defaultWidth:"wide"}),dayPeriod:ud({values:SM,defaultWidth:"wide",formattingValues:CM,defaultFormattingWidth:"wide"})};function xd(t){return(s,a={})=>{const r=a.width,n=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],l=s.match(n);if(!l)return null;const i=l[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?AM(o,x=>x.test(i)):DM(o,x=>x.test(i));let d;d=t.valueCallback?t.valueCallback(c):c,d=a.valueCallback?a.valueCallback(d):d;const u=s.slice(i.length);return{value:d,rest:u}}}function DM(t,s){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&s(t[a]))return a}function AM(t,s){for(let a=0;a<t.length;a++)if(s(t[a]))return a}function _M(t){return(s,a={})=>{const r=s.match(t.matchPattern);if(!r)return null;const n=r[0],l=s.match(t.parsePattern);if(!l)return null;let i=t.valueCallback?t.valueCallback(l[0]):l[0];i=a.valueCallback?a.valueCallback(i):i;const o=s.slice(n.length);return{value:i,rest:o}}}const PM=/^(\d+)(th|st|nd|rd)?/i,TM=/\d+/i,FM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MM={any:[/^b/i,/^(a|c)/i]},IM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RM={any:[/1/i,/2/i,/3/i,/4/i]},OM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},LM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$M={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},UM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},VM={ordinalNumber:_M({matchPattern:PM,parsePattern:TM,valueCallback:t=>parseInt(t,10)}),era:xd({matchPatterns:FM,defaultMatchWidth:"wide",parsePatterns:MM,defaultParseWidth:"any"}),quarter:xd({matchPatterns:IM,defaultMatchWidth:"wide",parsePatterns:RM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xd({matchPatterns:OM,defaultMatchWidth:"wide",parsePatterns:LM,defaultParseWidth:"any"}),day:xd({matchPatterns:$M,defaultMatchWidth:"wide",parsePatterns:UM,defaultParseWidth:"any"}),dayPeriod:xd({matchPatterns:BM,defaultMatchWidth:"any",parsePatterns:zM,defaultParseWidth:"any"})},fS={code:"en-US",formatDistance:xM,formatLong:gM,formatRelative:wM,localize:EM,match:VM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function YM(t){const s=Fs(t);return Gn(s,hS(s))+1}function gS(t){const s=Fs(t),a=+fo(s)-+lM(s);return Math.round(a/Ug)+1}function vS(t,s){var u,x,p,h;const a=Fs(t),r=a.getFullYear(),n=Rm(),l=(s==null?void 0:s.firstWeekContainsDate)??((x=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:x.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(p=n.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,i=Vr(t,0);i.setFullYear(r+1,0,l),i.setHours(0,0,0,0);const o=tl(i,s),c=Vr(t,0);c.setFullYear(r,0,l),c.setHours(0,0,0,0);const d=tl(c,s);return a.getTime()>=o.getTime()?r+1:a.getTime()>=d.getTime()?r:r-1}function WM(t,s){var o,c,d,u;const a=Rm(),r=(s==null?void 0:s.firstWeekContainsDate)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??a.firstWeekContainsDate??((u=(d=a.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,n=vS(t,s),l=Vr(t,0);return l.setFullYear(n,0,r),l.setHours(0,0,0,0),tl(l,s)}function wS(t,s){const a=Fs(t),r=+tl(a,s)-+WM(a,s);return Math.round(r/Ug)+1}function zs(t,s){const a=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return a+r}const Ll={y(t,s){const a=t.getFullYear(),r=a>0?a:1-a;return zs(s==="yy"?r%100:r,s.length)},M(t,s){const a=t.getMonth();return s==="M"?String(a+1):zs(a+1,2)},d(t,s){return zs(t.getDate(),s.length)},a(t,s){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,s){return zs(t.getHours()%12||12,s.length)},H(t,s){return zs(t.getHours(),s.length)},m(t,s){return zs(t.getMinutes(),s.length)},s(t,s){return zs(t.getSeconds(),s.length)},S(t,s){const a=s.length,r=t.getMilliseconds(),n=Math.trunc(r*Math.pow(10,a-3));return zs(n,s.length)}},Ro={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hy={G:function(t,s,a){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(t,s,a){if(s==="yo"){const r=t.getFullYear(),n=r>0?r:1-r;return a.ordinalNumber(n,{unit:"year"})}return Ll.y(t,s)},Y:function(t,s,a,r){const n=vS(t,r),l=n>0?n:1-n;if(s==="YY"){const i=l%100;return zs(i,2)}return s==="Yo"?a.ordinalNumber(l,{unit:"year"}):zs(l,s.length)},R:function(t,s){const a=xS(t);return zs(a,s.length)},u:function(t,s){const a=t.getFullYear();return zs(a,s.length)},Q:function(t,s,a){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return zs(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,a){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return zs(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,a){const r=t.getMonth();switch(s){case"M":case"MM":return Ll.M(t,s);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,a){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return zs(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,a,r){const n=wS(t,r);return s==="wo"?a.ordinalNumber(n,{unit:"week"}):zs(n,s.length)},I:function(t,s,a){const r=gS(t);return s==="Io"?a.ordinalNumber(r,{unit:"week"}):zs(r,s.length)},d:function(t,s,a){return s==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):Ll.d(t,s)},D:function(t,s,a){const r=YM(t);return s==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):zs(r,s.length)},E:function(t,s,a){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,a,r){const n=t.getDay(),l=(n-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(l);case"ee":return zs(l,2);case"eo":return a.ordinalNumber(l,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(t,s,a,r){const n=t.getDay(),l=(n-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(l);case"cc":return zs(l,s.length);case"co":return a.ordinalNumber(l,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(t,s,a){const r=t.getDay(),n=r===0?7:r;switch(s){case"i":return String(n);case"ii":return zs(n,s.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,a){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,s,a){const r=t.getHours();let n;switch(r===12?n=Ro.noon:r===0?n=Ro.midnight:n=r/12>=1?"pm":"am",s){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,s,a){const r=t.getHours();let n;switch(r>=17?n=Ro.evening:r>=12?n=Ro.afternoon:r>=4?n=Ro.morning:n=Ro.night,s){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,s,a){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return Ll.h(t,s)},H:function(t,s,a){return s==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):Ll.H(t,s)},K:function(t,s,a){const r=t.getHours()%12;return s==="Ko"?a.ordinalNumber(r,{unit:"hour"}):zs(r,s.length)},k:function(t,s,a){let r=t.getHours();return r===0&&(r=24),s==="ko"?a.ordinalNumber(r,{unit:"hour"}):zs(r,s.length)},m:function(t,s,a){return s==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ll.m(t,s)},s:function(t,s,a){return s==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):Ll.s(t,s)},S:function(t,s){return Ll.S(t,s)},X:function(t,s,a){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return qy(r);case"XXXX":case"XX":return Vi(r);case"XXXXX":case"XXX":default:return Vi(r,":")}},x:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"x":return qy(r);case"xxxx":case"xx":return Vi(r);case"xxxxx":case"xxx":default:return Vi(r,":")}},O:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Gy(r,":");case"OOOO":default:return"GMT"+Vi(r,":")}},z:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Gy(r,":");case"zzzz":default:return"GMT"+Vi(r,":")}},t:function(t,s,a){const r=Math.trunc(t.getTime()/1e3);return zs(r,s.length)},T:function(t,s,a){const r=t.getTime();return zs(r,s.length)}};function Gy(t,s=""){const a=t>0?"-":"+",r=Math.abs(t),n=Math.trunc(r/60),l=r%60;return l===0?a+String(n):a+String(n)+s+zs(l,2)}function qy(t,s){return t%60===0?(t>0?"-":"+")+zs(Math.abs(t)/60,2):Vi(t,s)}function Vi(t,s=""){const a=t>0?"-":"+",r=Math.abs(t),n=zs(Math.trunc(r/60),2),l=zs(r%60,2);return a+n+s+l}const Jy=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},yS=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},HM=(t,s)=>{const a=t.match(/(P+)(p+)?/)||[],r=a[1],n=a[2];if(!n)return Jy(t,s);let l;switch(r){case"P":l=s.dateTime({width:"short"});break;case"PP":l=s.dateTime({width:"medium"});break;case"PPP":l=s.dateTime({width:"long"});break;case"PPPP":default:l=s.dateTime({width:"full"});break}return l.replace("{{date}}",Jy(r,s)).replace("{{time}}",yS(n,s))},GM={p:yS,P:HM},qM=/^D+$/,JM=/^Y+$/,KM=["D","DD","YY","YYYY"];function XM(t){return qM.test(t)}function QM(t){return JM.test(t)}function ZM(t,s,a){const r=e8(t,s,a);if(console.warn(r),KM.includes(t))throw new RangeError(r)}function e8(t,s,a){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const t8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,s8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a8=/^'([^]*?)'?$/,r8=/''/g,n8=/[a-zA-Z]/;function wt(t,s,a){var u,x,p,h,y,f,v,w;const r=Rm(),n=(a==null?void 0:a.locale)??r.locale??fS,l=(a==null?void 0:a.firstWeekContainsDate)??((x=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:x.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(p=r.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,i=(a==null?void 0:a.weekStartsOn)??((f=(y=a==null?void 0:a.locale)==null?void 0:y.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((w=(v=r.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??0,o=Fs(t);if(!dM(o))throw new RangeError("Invalid time value");let c=s.match(s8).map(g=>{const j=g[0];if(j==="p"||j==="P"){const N=GM[j];return N(g,n.formatLong)}return g}).join("").match(t8).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const j=g[0];if(j==="'")return{isToken:!1,value:l8(g)};if(Hy[j])return{isToken:!0,value:g};if(j.match(n8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:g}});n.localize.preprocessor&&(c=n.localize.preprocessor(o,c));const d={firstWeekContainsDate:l,weekStartsOn:i,locale:n};return c.map(g=>{if(!g.isToken)return g.value;const j=g.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&QM(j)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&XM(j))&&ZM(j,s,String(t));const N=Hy[j[0]];return N(o,j,n.localize,d)}).join("")}function l8(t){const s=t.match(a8);return s?s[1].replace(r8,"'"):t}function i8(t){const s=Fs(t),a=s.getFullYear(),r=s.getMonth(),n=Vr(t,0);return n.setFullYear(a,r+1,0),n.setHours(0,0,0,0),n.getDate()}function o8(t){return Math.trunc(+Fs(t)/1e3)}function c8(t){const s=Fs(t),a=s.getMonth();return s.setFullYear(s.getFullYear(),a+1,0),s.setHours(0,0,0,0),s}function d8(t,s){return mM(c8(t),Sr(t),s)+1}function x0(t,s){const a=Fs(t),r=Fs(s);return a.getTime()>r.getTime()}function jS(t,s){const a=Fs(t),r=Fs(s);return+a<+r}function Yg(t,s){const a=Fs(t),r=Fs(s);return a.getFullYear()===r.getFullYear()&&a.getMonth()===r.getMonth()}function m8(t,s){const a=Fs(t),r=Fs(s);return a.getFullYear()===r.getFullYear()}function Ip(t,s){return nr(t,-s)}function u8(t,s){const r=f8(t);let n;if(r.date){const c=g8(r.date,2);n=v8(c.restDateString,c.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const l=n.getTime();let i=0,o;if(r.time&&(i=w8(r.time),isNaN(i)))return new Date(NaN);if(r.timezone){if(o=y8(r.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(l+i),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(l+i+o)}const yu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},x8=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h8=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,p8=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f8(t){const s={},a=t.split(yu.dateTimeDelimiter);let r;if(a.length>2)return s;if(/:/.test(a[0])?r=a[0]:(s.date=a[0],r=a[1],yu.timeZoneDelimiter.test(s.date)&&(s.date=t.split(yu.timeZoneDelimiter)[0],r=t.substr(s.date.length,t.length))),r){const n=yu.timezone.exec(r);n?(s.time=r.replace(n[1],""),s.timezone=n[1]):s.time=r}return s}function g8(t,s){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),r=t.match(a);if(!r)return{year:NaN,restDateString:""};const n=r[1]?parseInt(r[1]):null,l=r[2]?parseInt(r[2]):null;return{year:l===null?n:l*100,restDateString:t.slice((r[1]||r[2]).length)}}function v8(t,s){if(s===null)return new Date(NaN);const a=t.match(x8);if(!a)return new Date(NaN);const r=!!a[4],n=hd(a[1]),l=hd(a[2])-1,i=hd(a[3]),o=hd(a[4]),c=hd(a[5])-1;if(r)return C8(s,o,c)?j8(s,o,c):new Date(NaN);{const d=new Date(0);return!b8(s,l,i)||!S8(s,n)?new Date(NaN):(d.setUTCFullYear(s,l,Math.max(n,i)),d)}}function hd(t){return t?parseInt(t):1}function w8(t){const s=t.match(h8);if(!s)return NaN;const a=Rp(s[1]),r=Rp(s[2]),n=Rp(s[3]);return k8(a,r,n)?a*uS+r*mS+n*1e3:NaN}function Rp(t){return t&&parseFloat(t.replace(",","."))||0}function y8(t){if(t==="Z")return 0;const s=t.match(p8);if(!s)return 0;const a=s[1]==="+"?-1:1,r=parseInt(s[2]),n=s[3]&&parseInt(s[3])||0;return E8(r,n)?a*(r*uS+n*mS):NaN}function j8(t,s,a){const r=new Date(0);r.setUTCFullYear(t,0,4);const n=r.getUTCDay()||7,l=(s-1)*7+a+1-n;return r.setUTCDate(r.getUTCDate()+l),r}const N8=[31,null,31,30,31,30,31,31,30,31,30,31];function NS(t){return t%400===0||t%4===0&&t%100!==0}function b8(t,s,a){return s>=0&&s<=11&&a>=1&&a<=(N8[s]||(NS(t)?29:28))}function S8(t,s){return s>=1&&s<=(NS(t)?366:365)}function C8(t,s,a){return s>=1&&s<=53&&a>=0&&a<=6}function k8(t,s,a){return t===24?s===0&&a===0:a>=0&&a<60&&s>=0&&s<60&&t>=0&&t<25}function E8(t,s){return s>=0&&s<=59}function Op(t,s){const a=Fs(t),r=a.getFullYear(),n=a.getDate(),l=Vr(t,0);l.setFullYear(r,s,15),l.setHours(0,0,0,0);const i=i8(l);return a.setMonth(s,Math.min(n,i)),a}function Ky(t,s){const a=Fs(t);return isNaN(+a)?Vr(t,NaN):(a.setFullYear(s),a)}var as=function(){return as=Object.assign||function(s){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},as.apply(this,arguments)};function D8(t,s){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)s.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(a[r[n]]=t[r[n]]);return a}function bS(t,s,a){for(var r=0,n=s.length,l;r<n;r++)(l||!(r in s))&&(l||(l=Array.prototype.slice.call(s,0,r)),l[r]=s[r]);return t.concat(l||Array.prototype.slice.call(s))}function Om(t){return t.mode==="multiple"}function Lm(t){return t.mode==="range"}function Ph(t){return t.mode==="single"}var A8={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function _8(t,s){return wt(t,"LLLL y",s)}function P8(t,s){return wt(t,"d",s)}function T8(t,s){return wt(t,"LLLL",s)}function F8(t){return"".concat(t)}function M8(t,s){return wt(t,"cccccc",s)}function I8(t,s){return wt(t,"yyyy",s)}var R8=Object.freeze({__proto__:null,formatCaption:_8,formatDay:P8,formatMonthCaption:T8,formatWeekNumber:F8,formatWeekdayName:M8,formatYearCaption:I8}),O8=function(t,s,a){return wt(t,"do MMMM (EEEE)",a)},L8=function(){return"Month: "},$8=function(){return"Go to next month"},U8=function(){return"Go to previous month"},B8=function(t,s){return wt(t,"cccc",s)},z8=function(t){return"Week n. ".concat(t)},V8=function(){return"Year: "},Y8=Object.freeze({__proto__:null,labelDay:O8,labelMonthDropdown:L8,labelNext:$8,labelPrevious:U8,labelWeekNumber:z8,labelWeekday:B8,labelYearDropdown:V8});function W8(){var t="buttons",s=A8,a=fS,r={},n={},l=1,i={},o=new Date;return{captionLayout:t,classNames:s,formatters:R8,labels:Y8,locale:a,modifiersClassNames:r,modifiers:n,numberOfMonths:l,styles:i,today:o,mode:"default"}}function H8(t){var s=t.fromYear,a=t.toYear,r=t.fromMonth,n=t.toMonth,l=t.fromDate,i=t.toDate;return r?l=Sr(r):s&&(l=new Date(s,0,1)),n?i=zg(n):a&&(i=new Date(a,11,31)),{fromDate:l?$c(l):void 0,toDate:i?$c(i):void 0}}var SS=m.createContext(void 0);function G8(t){var s,a=t.initialProps,r=W8(),n=H8(a),l=n.fromDate,i=n.toDate,o=(s=a.captionLayout)!==null&&s!==void 0?s:r.captionLayout;o!=="buttons"&&(!l||!i)&&(o="buttons");var c;(Ph(a)||Om(a)||Lm(a))&&(c=a.onSelect);var d=as(as(as({},r),a),{captionLayout:o,classNames:as(as({},r.classNames),a.classNames),components:as({},a.components),formatters:as(as({},r.formatters),a.formatters),fromDate:l,labels:as(as({},r.labels),a.labels),mode:a.mode||r.mode,modifiers:as(as({},r.modifiers),a.modifiers),modifiersClassNames:as(as({},r.modifiersClassNames),a.modifiersClassNames),onSelect:c,styles:as(as({},r.styles),a.styles),toDate:i});return e.jsx(SS.Provider,{value:d,children:t.children})}function ea(){var t=m.useContext(SS);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function CS(t){var s=ea(),a=s.locale,r=s.classNames,n=s.styles,l=s.formatters.formatCaption;return e.jsx("div",{className:r.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:l(t.displayMonth,{locale:a})})}function q8(t){return e.jsx("svg",as({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function kS(t){var s,a,r=t.onChange,n=t.value,l=t.children,i=t.caption,o=t.className,c=t.style,d=ea(),u=(a=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&a!==void 0?a:q8;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:n,onChange:r,children:l}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,e.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function J8(t){var s,a=ea(),r=a.fromDate,n=a.toDate,l=a.styles,i=a.locale,o=a.formatters.formatMonthCaption,c=a.classNames,d=a.components,u=a.labels.labelMonthDropdown;if(!r)return e.jsx(e.Fragment,{});if(!n)return e.jsx(e.Fragment,{});var x=[];if(m8(r,n))for(var p=Sr(r),h=r.getMonth();h<=n.getMonth();h++)x.push(Op(p,h));else for(var p=Sr(new Date),h=0;h<=11;h++)x.push(Op(p,h));var y=function(v){var w=Number(v.target.value),g=Op(Sr(t.displayMonth),w);t.onChange(g)},f=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:kS;return e.jsx(f,{name:"months","aria-label":u(),className:c.dropdown_month,style:l.dropdown_month,onChange:y,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:i}),children:x.map(function(v){return e.jsx("option",{value:v.getMonth(),children:o(v,{locale:i})},v.getMonth())})})}function K8(t){var s,a=t.displayMonth,r=ea(),n=r.fromDate,l=r.toDate,i=r.locale,o=r.styles,c=r.classNames,d=r.components,u=r.formatters.formatYearCaption,x=r.labels.labelYearDropdown,p=[];if(!n)return e.jsx(e.Fragment,{});if(!l)return e.jsx(e.Fragment,{});for(var h=n.getFullYear(),y=l.getFullYear(),f=h;f<=y;f++)p.push(Ky(hS(new Date),f));var v=function(g){var j=Ky(Sr(a),Number(g.target.value));t.onChange(j)},w=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:kS;return e.jsx(w,{name:"years","aria-label":x(),className:c.dropdown_year,style:o.dropdown_year,onChange:v,value:a.getFullYear(),caption:u(a,{locale:i}),children:p.map(function(g){return e.jsx("option",{value:g.getFullYear(),children:u(g,{locale:i})},g.getFullYear())})})}function X8(t,s){var a=m.useState(t),r=a[0],n=a[1],l=s===void 0?r:s;return[l,n]}function Q8(t){var s=t.month,a=t.defaultMonth,r=t.today,n=s||a||r||new Date,l=t.toDate,i=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(l&&fm(l,n)<0){var d=-1*(c-1);n=Tn(l,d)}return i&&fm(n,i)<0&&(n=i),Sr(n)}function Z8(){var t=ea(),s=Q8(t),a=X8(s,t.month),r=a[0],n=a[1],l=function(i){var o;if(!t.disableNavigation){var c=Sr(i);n(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[r,l]}function eI(t,s){for(var a=s.reverseMonths,r=s.numberOfMonths,n=Sr(t),l=Sr(Tn(n,r)),i=fm(l,n),o=[],c=0;c<i;c++){var d=Tn(n,c);o.push(d)}return a&&(o=o.reverse()),o}function tI(t,s){if(!s.disableNavigation){var a=s.toDate,r=s.pagedNavigation,n=s.numberOfMonths,l=n===void 0?1:n,i=r?l:1,o=Sr(t);if(!a)return Tn(o,i);var c=fm(a,t);if(!(c<l))return Tn(o,i)}}function sI(t,s){if(!s.disableNavigation){var a=s.fromDate,r=s.pagedNavigation,n=s.numberOfMonths,l=n===void 0?1:n,i=r?l:1,o=Sr(t);if(!a)return Tn(o,-i);var c=fm(o,a);if(!(c<=0))return Tn(o,-i)}}var ES=m.createContext(void 0);function aI(t){var s=ea(),a=Z8(),r=a[0],n=a[1],l=eI(r,s),i=tI(r,s),o=sI(r,s),c=function(x){return l.some(function(p){return Yg(x,p)})},d=function(x,p){c(x)||(p&&jS(x,p)?n(Tn(x,1+s.numberOfMonths*-1)):n(x))},u={currentMonth:r,displayMonths:l,goToMonth:n,goToDate:d,previousMonth:o,nextMonth:i,isDateDisplayed:c};return e.jsx(ES.Provider,{value:u,children:t.children})}function $m(){var t=m.useContext(ES);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Xy(t){var s,a=ea(),r=a.classNames,n=a.styles,l=a.components,i=$m().goToMonth,o=function(u){i(Tn(u,t.displayIndex?-t.displayIndex:0))},c=(s=l==null?void 0:l.CaptionLabel)!==null&&s!==void 0?s:CS,d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:r.caption_dropdowns,style:n.caption_dropdowns,children:[e.jsx("div",{className:r.vhidden,children:d}),e.jsx(J8,{onChange:o,displayMonth:t.displayMonth}),e.jsx(K8,{onChange:o,displayMonth:t.displayMonth})]})}function rI(t){return e.jsx("svg",as({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function nI(t){return e.jsx("svg",as({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Rx=m.forwardRef(function(t,s){var a=ea(),r=a.classNames,n=a.styles,l=[r.button_reset,r.button];t.className&&l.push(t.className);var i=l.join(" "),o=as(as({},n.button_reset),n.button);return t.style&&Object.assign(o,t.style),e.jsx("button",as({},t,{ref:s,type:"button",className:i,style:o}))});function lI(t){var s,a,r=ea(),n=r.dir,l=r.locale,i=r.classNames,o=r.styles,c=r.labels,d=c.labelPrevious,u=c.labelNext,x=r.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var p=d(t.previousMonth,{locale:l}),h=[i.nav_button,i.nav_button_previous].join(" "),y=u(t.nextMonth,{locale:l}),f=[i.nav_button,i.nav_button_next].join(" "),v=(s=x==null?void 0:x.IconRight)!==null&&s!==void 0?s:nI,w=(a=x==null?void 0:x.IconLeft)!==null&&a!==void 0?a:rI;return e.jsxs("div",{className:i.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(Rx,{name:"previous-month","aria-label":p,className:h,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:n==="rtl"?e.jsx(v,{className:i.nav_icon,style:o.nav_icon}):e.jsx(w,{className:i.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(Rx,{name:"next-month","aria-label":y,className:f,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:n==="rtl"?e.jsx(w,{className:i.nav_icon,style:o.nav_icon}):e.jsx(v,{className:i.nav_icon,style:o.nav_icon})})]})}function Qy(t){var s=ea().numberOfMonths,a=$m(),r=a.previousMonth,n=a.nextMonth,l=a.goToMonth,i=a.displayMonths,o=i.findIndex(function(y){return Yg(t.displayMonth,y)}),c=o===0,d=o===i.length-1,u=s>1&&(c||!d),x=s>1&&(d||!c),p=function(){r&&l(r)},h=function(){n&&l(n)};return e.jsx(lI,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:x,nextMonth:n,previousMonth:r,onPreviousClick:p,onNextClick:h})}function iI(t){var s,a=ea(),r=a.classNames,n=a.disableNavigation,l=a.styles,i=a.captionLayout,o=a.components,c=(s=o==null?void 0:o.CaptionLabel)!==null&&s!==void 0?s:CS,d;return n?d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?d=e.jsx(Xy,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx(Xy,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(Qy,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Qy,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:r.caption,style:l.caption,children:d})}function oI(t){var s=ea(),a=s.footer,r=s.styles,n=s.classNames.tfoot;return a?e.jsx("tfoot",{className:n,style:r.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:a})})}):e.jsx(e.Fragment,{})}function cI(t,s,a){for(var r=a?fo(new Date):tl(new Date,{locale:t,weekStartsOn:s}),n=[],l=0;l<7;l++){var i=nr(r,l);n.push(i)}return n}function dI(){var t=ea(),s=t.classNames,a=t.styles,r=t.showWeekNumber,n=t.locale,l=t.weekStartsOn,i=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=cI(n,l,i);return e.jsxs("tr",{style:a.head_row,className:s.head_row,children:[r&&e.jsx("td",{style:a.head_cell,className:s.head_cell}),d.map(function(u,x){return e.jsx("th",{scope:"col",className:s.head_cell,style:a.head_cell,"aria-label":c(u,{locale:n}),children:o(u,{locale:n})},x)})]})}function mI(){var t,s=ea(),a=s.classNames,r=s.styles,n=s.components,l=(t=n==null?void 0:n.HeadRow)!==null&&t!==void 0?t:dI;return e.jsx("thead",{style:r.head,className:a.head,children:e.jsx(l,{})})}function uI(t){var s=ea(),a=s.locale,r=s.formatters.formatDay;return e.jsx(e.Fragment,{children:r(t.date,{locale:a})})}var Wg=m.createContext(void 0);function xI(t){if(!Om(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Wg.Provider,{value:s,children:t.children})}return e.jsx(hI,{initialProps:t.initialProps,children:t.children})}function hI(t){var s=t.initialProps,a=t.children,r=s.selected,n=s.min,l=s.max,i=function(d,u,x){var p,h;(p=s.onDayClick)===null||p===void 0||p.call(s,d,u,x);var y=!!(u.selected&&n&&(r==null?void 0:r.length)===n);if(!y){var f=!!(!u.selected&&l&&(r==null?void 0:r.length)===l);if(!f){var v=r?bS([],r):[];if(u.selected){var w=v.findIndex(function(g){return yr(d,g)});v.splice(w,1)}else v.push(d);(h=s.onSelect)===null||h===void 0||h.call(s,v,d,u,x)}}},o={disabled:[]};r&&o.disabled.push(function(d){var u=l&&r.length>l-1,x=r.some(function(p){return yr(p,d)});return!!(u&&!x)});var c={selected:r,onDayClick:i,modifiers:o};return e.jsx(Wg.Provider,{value:c,children:a})}function Hg(){var t=m.useContext(Wg);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function pI(t,s){var a=s||{},r=a.from,n=a.to;return r&&n?yr(n,t)&&yr(r,t)?void 0:yr(n,t)?{from:n,to:void 0}:yr(r,t)?void 0:x0(r,t)?{from:t,to:n}:{from:r,to:t}:n?x0(t,n)?{from:n,to:t}:{from:t,to:n}:r?jS(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var Gg=m.createContext(void 0);function fI(t){if(!Lm(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Gg.Provider,{value:s,children:t.children})}return e.jsx(gI,{initialProps:t.initialProps,children:t.children})}function gI(t){var s=t.initialProps,a=t.children,r=s.selected,n=r||{},l=n.from,i=n.to,o=s.min,c=s.max,d=function(h,y,f){var v,w;(v=s.onDayClick)===null||v===void 0||v.call(s,h,y,f);var g=pI(h,r);(w=s.onSelect)===null||w===void 0||w.call(s,g,h,y,f)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(u.range_start=[l],i?(u.range_end=[i],yr(l,i)||(u.range_middle=[{after:l,before:i}])):u.range_end=[l]):i&&(u.range_start=[i],u.range_end=[i]),o&&(l&&!i&&u.disabled.push({after:Ip(l,o-1),before:nr(l,o-1)}),l&&i&&u.disabled.push({after:l,before:nr(l,o-1)}),!l&&i&&u.disabled.push({after:Ip(i,o-1),before:nr(i,o-1)})),c){if(l&&!i&&(u.disabled.push({before:nr(l,-c+1)}),u.disabled.push({after:nr(l,c-1)})),l&&i){var x=Gn(i,l)+1,p=c-x;u.disabled.push({before:Ip(l,p)}),u.disabled.push({after:nr(i,p)})}!l&&i&&(u.disabled.push({before:nr(i,-c+1)}),u.disabled.push({after:nr(i,c-1)}))}return e.jsx(Gg.Provider,{value:{selected:r,onDayClick:d,modifiers:u},children:a})}function qg(){var t=m.useContext(Gg);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function ex(t){return Array.isArray(t)?bS([],t):t!==void 0?[t]:[]}function vI(t){var s={};return Object.entries(t).forEach(function(a){var r=a[0],n=a[1];s[r]=ex(n)}),s}var Fn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Fn||(Fn={}));var wI=Fn.Selected,il=Fn.Disabled,yI=Fn.Hidden,jI=Fn.Today,Lp=Fn.RangeEnd,$p=Fn.RangeMiddle,Up=Fn.RangeStart,NI=Fn.Outside;function bI(t,s,a){var r,n=(r={},r[wI]=ex(t.selected),r[il]=ex(t.disabled),r[yI]=ex(t.hidden),r[jI]=[t.today],r[Lp]=[],r[$p]=[],r[Up]=[],r[NI]=[],r);return t.fromDate&&n[il].push({before:t.fromDate}),t.toDate&&n[il].push({after:t.toDate}),Om(t)?n[il]=n[il].concat(s.modifiers[il]):Lm(t)&&(n[il]=n[il].concat(a.modifiers[il]),n[Up]=a.modifiers[Up],n[$p]=a.modifiers[$p],n[Lp]=a.modifiers[Lp]),n}var DS=m.createContext(void 0);function SI(t){var s=ea(),a=Hg(),r=qg(),n=bI(s,a,r),l=vI(s.modifiers),i=as(as({},n),l);return e.jsx(DS.Provider,{value:i,children:t.children})}function AS(){var t=m.useContext(DS);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function CI(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function kI(t){return!!(t&&typeof t=="object"&&"from"in t)}function EI(t){return!!(t&&typeof t=="object"&&"after"in t)}function DI(t){return!!(t&&typeof t=="object"&&"before"in t)}function AI(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function _I(t,s){var a,r=s.from,n=s.to;if(r&&n){var l=Gn(n,r)<0;l&&(a=[n,r],r=a[0],n=a[1]);var i=Gn(t,r)>=0&&Gn(n,t)>=0;return i}return n?yr(n,t):r?yr(r,t):!1}function PI(t){return Bg(t)}function TI(t){return Array.isArray(t)&&t.every(Bg)}function FI(t,s){return s.some(function(a){if(typeof a=="boolean")return a;if(PI(a))return yr(t,a);if(TI(a))return a.includes(t);if(kI(a))return _I(t,a);if(AI(a))return a.dayOfWeek.includes(t.getDay());if(CI(a)){var r=Gn(a.before,t),n=Gn(a.after,t),l=r>0,i=n<0,o=x0(a.before,a.after);return o?i&&l:l||i}return EI(a)?Gn(t,a.after)>0:DI(a)?Gn(a.before,t)>0:typeof a=="function"?a(t):!1})}function Jg(t,s,a){var r=Object.keys(s).reduce(function(l,i){var o=s[i];return FI(t,o)&&l.push(i),l},[]),n={};return r.forEach(function(l){return n[l]=!0}),a&&!Yg(t,a)&&(n.outside=!0),n}function MI(t,s){for(var a=Sr(t[0]),r=zg(t[t.length-1]),n,l,i=a;i<=r;){var o=Jg(i,s),c=!o.disabled&&!o.hidden;if(!c){i=nr(i,1);continue}if(o.selected)return i;o.today&&!l&&(l=i),n||(n=i),i=nr(i,1)}return l||n}var II=365;function _S(t,s){var a=s.moveBy,r=s.direction,n=s.context,l=s.modifiers,i=s.retry,o=i===void 0?{count:0,lastFocused:t}:i,c=n.weekStartsOn,d=n.fromDate,u=n.toDate,x=n.locale,p={day:nr,week:u0,month:Tn,year:iM,startOfWeek:function(v){return n.ISOWeek?fo(v):tl(v,{locale:x,weekStartsOn:c})},endOfWeek:function(v){return n.ISOWeek?pS(v):Vg(v,{locale:x,weekStartsOn:c})}},h=p[a](t,r==="after"?1:-1);r==="before"&&d?h=oM([d,h]):r==="after"&&u&&(h=cM([u,h]));var y=!0;if(l){var f=Jg(h,l);y=!f.disabled&&!f.hidden}return y?h:o.count>II?o.lastFocused:_S(h,{moveBy:a,direction:r,context:n,modifiers:l,retry:as(as({},o),{count:o.count+1})})}var PS=m.createContext(void 0);function RI(t){var s=$m(),a=AS(),r=m.useState(),n=r[0],l=r[1],i=m.useState(),o=i[0],c=i[1],d=MI(s.displayMonths,a),u=n??(o&&s.isDateDisplayed(o))?o:d,x=function(){c(n),l(void 0)},p=function(v){l(v)},h=ea(),y=function(v,w){if(n){var g=_S(n,{moveBy:v,direction:w,context:h,modifiers:a});yr(n,g)||(s.goToDate(g,n),p(g))}},f={focusedDay:n,focusTarget:u,blur:x,focus:p,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return e.jsx(PS.Provider,{value:f,children:t.children})}function Kg(){var t=m.useContext(PS);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function OI(t,s){var a=AS(),r=Jg(t,a,s);return r}var Xg=m.createContext(void 0);function LI(t){if(!Ph(t.initialProps)){var s={selected:void 0};return e.jsx(Xg.Provider,{value:s,children:t.children})}return e.jsx($I,{initialProps:t.initialProps,children:t.children})}function $I(t){var s=t.initialProps,a=t.children,r=function(l,i,o){var c,d,u;if((c=s.onDayClick)===null||c===void 0||c.call(s,l,i,o),i.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,l,i,o);return}(u=s.onSelect)===null||u===void 0||u.call(s,l,l,i,o)},n={selected:s.selected,onDayClick:r};return e.jsx(Xg.Provider,{value:n,children:a})}function TS(){var t=m.useContext(Xg);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function UI(t,s){var a=ea(),r=TS(),n=Hg(),l=qg(),i=Kg(),o=i.focusDayAfter,c=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,x=i.blur,p=i.focus,h=i.focusMonthBefore,y=i.focusMonthAfter,f=i.focusYearBefore,v=i.focusYearAfter,w=i.focusStartOfWeek,g=i.focusEndOfWeek,j=function(H){var L,he,ie,ke;Ph(a)?(L=r.onDayClick)===null||L===void 0||L.call(r,t,s,H):Om(a)?(he=n.onDayClick)===null||he===void 0||he.call(n,t,s,H):Lm(a)?(ie=l.onDayClick)===null||ie===void 0||ie.call(l,t,s,H):(ke=a.onDayClick)===null||ke===void 0||ke.call(a,t,s,H)},N=function(H){var L;p(t),(L=a.onDayFocus)===null||L===void 0||L.call(a,t,s,H)},E=function(H){var L;x(),(L=a.onDayBlur)===null||L===void 0||L.call(a,t,s,H)},C=function(H){var L;(L=a.onDayMouseEnter)===null||L===void 0||L.call(a,t,s,H)},k=function(H){var L;(L=a.onDayMouseLeave)===null||L===void 0||L.call(a,t,s,H)},A=function(H){var L;(L=a.onDayPointerEnter)===null||L===void 0||L.call(a,t,s,H)},T=function(H){var L;(L=a.onDayPointerLeave)===null||L===void 0||L.call(a,t,s,H)},M=function(H){var L;(L=a.onDayTouchCancel)===null||L===void 0||L.call(a,t,s,H)},X=function(H){var L;(L=a.onDayTouchEnd)===null||L===void 0||L.call(a,t,s,H)},ne=function(H){var L;(L=a.onDayTouchMove)===null||L===void 0||L.call(a,t,s,H)},Q=function(H){var L;(L=a.onDayTouchStart)===null||L===void 0||L.call(a,t,s,H)},oe=function(H){var L;(L=a.onDayKeyUp)===null||L===void 0||L.call(a,t,s,H)},ge=function(H){var L;switch(H.key){case"ArrowLeft":H.preventDefault(),H.stopPropagation(),a.dir==="rtl"?o():c();break;case"ArrowRight":H.preventDefault(),H.stopPropagation(),a.dir==="rtl"?c():o();break;case"ArrowDown":H.preventDefault(),H.stopPropagation(),d();break;case"ArrowUp":H.preventDefault(),H.stopPropagation(),u();break;case"PageUp":H.preventDefault(),H.stopPropagation(),H.shiftKey?f():h();break;case"PageDown":H.preventDefault(),H.stopPropagation(),H.shiftKey?v():y();break;case"Home":H.preventDefault(),H.stopPropagation(),w();break;case"End":H.preventDefault(),H.stopPropagation(),g();break}(L=a.onDayKeyDown)===null||L===void 0||L.call(a,t,s,H)},me={onClick:j,onFocus:N,onBlur:E,onKeyDown:ge,onKeyUp:oe,onMouseEnter:C,onMouseLeave:k,onPointerEnter:A,onPointerLeave:T,onTouchCancel:M,onTouchEnd:X,onTouchMove:ne,onTouchStart:Q};return me}function BI(){var t=ea(),s=TS(),a=Hg(),r=qg(),n=Ph(t)?s.selected:Om(t)?a.selected:Lm(t)?r.selected:void 0;return n}function zI(t){return Object.values(Fn).includes(t)}function VI(t,s){var a=[t.classNames.day];return Object.keys(s).forEach(function(r){var n=t.modifiersClassNames[r];if(n)a.push(n);else if(zI(r)){var l=t.classNames["day_".concat(r)];l&&a.push(l)}}),a}function YI(t,s){var a=as({},t.styles.day);return Object.keys(s).forEach(function(r){var n;a=as(as({},a),(n=t.modifiersStyles)===null||n===void 0?void 0:n[r])}),a}function WI(t,s,a){var r,n,l,i=ea(),o=Kg(),c=OI(t,s),d=UI(t,c),u=BI(),x=!!(i.onDayClick||i.mode!=="default");m.useEffect(function(){var C;c.outside||o.focusedDay&&x&&yr(o.focusedDay,t)&&((C=a.current)===null||C===void 0||C.focus())},[o.focusedDay,t,a,x,c.outside]);var p=VI(i,c).join(" "),h=YI(i,c),y=!!(c.outside&&!i.showOutsideDays||c.hidden),f=(l=(n=i.components)===null||n===void 0?void 0:n.DayContent)!==null&&l!==void 0?l:uI,v=e.jsx(f,{date:t,displayMonth:s,activeModifiers:c}),w={style:h,className:p,children:v,role:"gridcell"},g=o.focusTarget&&yr(o.focusTarget,t)&&!c.outside,j=o.focusedDay&&yr(o.focusedDay,t),N=as(as(as({},w),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=j||g?0:-1,r)),d),E={isButton:x,isHidden:y,activeModifiers:c,selectedDays:u,buttonProps:N,divProps:w};return E}function HI(t){var s=m.useRef(null),a=WI(t.date,t.displayMonth,s);return a.isHidden?e.jsx("div",{role:"gridcell"}):a.isButton?e.jsx(Rx,as({name:"day",ref:s},a.buttonProps)):e.jsx("div",as({},a.divProps))}function GI(t){var s=t.number,a=t.dates,r=ea(),n=r.onWeekNumberClick,l=r.styles,i=r.classNames,o=r.locale,c=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,u=d(Number(s),{locale:o});if(!n)return e.jsx("span",{className:i.weeknumber,style:l.weeknumber,children:u});var x=c(Number(s),{locale:o}),p=function(h){n(s,a,h)};return e.jsx(Rx,{name:"week-number","aria-label":x,className:i.weeknumber,style:l.weeknumber,onClick:p,children:u})}function qI(t){var s,a,r=ea(),n=r.styles,l=r.classNames,i=r.showWeekNumber,o=r.components,c=(s=o==null?void 0:o.Day)!==null&&s!==void 0?s:HI,d=(a=o==null?void 0:o.WeekNumber)!==null&&a!==void 0?a:GI,u;return i&&(u=e.jsx("td",{className:l.cell,style:n.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:l.row,style:n.row,children:[u,t.dates.map(function(x){return e.jsx("td",{className:l.cell,style:n.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:x})},o8(x))})]})}function Zy(t,s,a){for(var r=a!=null&&a.ISOWeek?pS(s):Vg(s,a),n=a!=null&&a.ISOWeek?fo(t):tl(t,a),l=Gn(r,n),i=[],o=0;o<=l;o++)i.push(nr(n,o));var c=i.reduce(function(d,u){var x=a!=null&&a.ISOWeek?gS(u):wS(u,a),p=d.find(function(h){return h.weekNumber===x});return p?(p.dates.push(u),d):(d.push({weekNumber:x,dates:[u]}),d)},[]);return c}function JI(t,s){var a=Zy(Sr(t),zg(t),s);if(s!=null&&s.useFixedWeeks){var r=d8(t,s);if(r<6){var n=a[a.length-1],l=n.dates[n.dates.length-1],i=u0(l,6-r),o=Zy(u0(l,1),i,s);a.push.apply(a,o)}}return a}function KI(t){var s,a,r,n=ea(),l=n.locale,i=n.classNames,o=n.styles,c=n.hideHead,d=n.fixedWeeks,u=n.components,x=n.weekStartsOn,p=n.firstWeekContainsDate,h=n.ISOWeek,y=JI(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:h,locale:l,weekStartsOn:x,firstWeekContainsDate:p}),f=(s=u==null?void 0:u.Head)!==null&&s!==void 0?s:mI,v=(a=u==null?void 0:u.Row)!==null&&a!==void 0?a:qI,w=(r=u==null?void 0:u.Footer)!==null&&r!==void 0?r:oI;return e.jsxs("table",{id:t.id,className:i.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(f,{}),e.jsx("tbody",{className:i.tbody,style:o.tbody,children:y.map(function(g){return e.jsx(v,{displayMonth:t.displayMonth,dates:g.dates,weekNumber:g.weekNumber},g.weekNumber)})}),e.jsx(w,{displayMonth:t.displayMonth})]})}function XI(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var QI=XI()?m.useLayoutEffect:m.useEffect,Bp=!1,ZI=0;function ej(){return"react-day-picker-".concat(++ZI)}function eR(t){var s,a=t??(Bp?ej():null),r=m.useState(a),n=r[0],l=r[1];return QI(function(){n===null&&l(ej())},[]),m.useEffect(function(){Bp===!1&&(Bp=!0)},[]),(s=t??n)!==null&&s!==void 0?s:void 0}function tR(t){var s,a,r=ea(),n=r.dir,l=r.classNames,i=r.styles,o=r.components,c=$m().displayMonths,d=eR(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,x=[l.month],p=i.month,h=t.displayIndex===0,y=t.displayIndex===c.length-1,f=!h&&!y;n==="rtl"&&(s=[h,y],y=s[0],h=s[1]),h&&(x.push(l.caption_start),p=as(as({},p),i.caption_start)),y&&(x.push(l.caption_end),p=as(as({},p),i.caption_end)),f&&(x.push(l.caption_between),p=as(as({},p),i.caption_between));var v=(a=o==null?void 0:o.Caption)!==null&&a!==void 0?a:iI;return e.jsxs("div",{className:x.join(" "),style:p,children:[e.jsx(v,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(KI,{id:u,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function sR(t){var s=ea(),a=s.classNames,r=s.styles;return e.jsx("div",{className:a.months,style:r.months,children:t.children})}function aR(t){var s,a,r=t.initialProps,n=ea(),l=Kg(),i=$m(),o=m.useState(!1),c=o[0],d=o[1];m.useEffect(function(){n.initialFocus&&l.focusTarget&&(c||(l.focus(l.focusTarget),d(!0)))},[n.initialFocus,c,l.focus,l.focusTarget,l]);var u=[n.classNames.root,n.className];n.numberOfMonths>1&&u.push(n.classNames.multiple_months),n.showWeekNumber&&u.push(n.classNames.with_weeknumber);var x=as(as({},n.styles.root),n.style),p=Object.keys(r).filter(function(y){return y.startsWith("data-")}).reduce(function(y,f){var v;return as(as({},y),(v={},v[f]=r[f],v))},{}),h=(a=(s=r.components)===null||s===void 0?void 0:s.Months)!==null&&a!==void 0?a:sR;return e.jsx("div",as({className:u.join(" "),style:x,dir:n.dir,id:n.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:e.jsx(h,{children:i.displayMonths.map(function(y,f){return e.jsx(tR,{displayIndex:f,displayMonth:y},f)})})}))}function rR(t){var s=t.children,a=D8(t,["children"]);return e.jsx(G8,{initialProps:a,children:e.jsx(aI,{children:e.jsx(LI,{initialProps:a,children:e.jsx(xI,{initialProps:a,children:e.jsx(fI,{initialProps:a,children:e.jsx(SI,{children:e.jsx(RI,{children:s})})})})})})})}function nR(t){return e.jsx(rR,as({},t,{children:e.jsx(aR,{initialProps:t})}))}function bi({className:t,classNames:s,showOutsideDays:a=!0,...r}){return e.jsx(nR,{showOutsideDays:a,className:bt("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:bt(om({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:bt(om({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...n})=>e.jsx(jg,{className:"h-4 w-4"}),IconRight:({...n})=>e.jsx(Pm,{className:"h-4 w-4"})},...r})}bi.displayName="Calendar";var Th="Popover",[FS,NY]=Pl(Th,[Ch]),Um=Ch(),[lR,Ii]=FS(Th),MS=t=>{const{__scopePopover:s,children:a,open:r,defaultOpen:n,onOpenChange:l,modal:i=!1}=t,o=Um(s),c=m.useRef(null),[d,u]=m.useState(!1),[x,p]=Oc({prop:r,defaultProp:n??!1,onChange:l,caller:Th});return e.jsx(f4,{...o,children:e.jsx(lR,{scope:s,contentId:ao(),triggerRef:c,open:x,onOpenChange:p,onOpenToggle:m.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:d,onCustomAnchorAdd:m.useCallback(()=>u(!0),[]),onCustomAnchorRemove:m.useCallback(()=>u(!1),[]),modal:i,children:a})})};MS.displayName=Th;var IS="PopoverAnchor",iR=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Ii(IS,a),l=Um(a),{onCustomAnchorAdd:i,onCustomAnchorRemove:o}=n;return m.useEffect(()=>(i(),()=>o()),[i,o]),e.jsx(Og,{...l,...r,ref:s})});iR.displayName=IS;var RS="PopoverTrigger",OS=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Ii(RS,a),l=Um(a),i=Gs(s,n.triggerRef),o=e.jsx(ws.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":zS(n.open),...r,ref:i,onClick:ps(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:e.jsx(Og,{asChild:!0,...l,children:o})});OS.displayName=RS;var Qg="PopoverPortal",[oR,cR]=FS(Qg,{forceMount:void 0}),LS=t=>{const{__scopePopover:s,forceMount:a,children:r,container:n}=t,l=Ii(Qg,s);return e.jsx(oR,{scope:s,forceMount:a,children:e.jsx(Ti,{present:a||l.open,children:e.jsx(Fm,{asChild:!0,container:n,children:r})})})};LS.displayName=Qg;var Uc="PopoverContent",$S=m.forwardRef((t,s)=>{const a=cR(Uc,t.__scopePopover),{forceMount:r=a.forceMount,...n}=t,l=Ii(Uc,t.__scopePopover);return e.jsx(Ti,{present:r||l.open,children:l.modal?e.jsx(mR,{...n,ref:s}):e.jsx(uR,{...n,ref:s})})});$S.displayName=Uc;var dR=mo("PopoverContent.RemoveScroll"),mR=m.forwardRef((t,s)=>{const a=Ii(Uc,t.__scopePopover),r=m.useRef(null),n=Gs(s,r),l=m.useRef(!1);return m.useEffect(()=>{const i=r.current;if(i)return Lg(i)},[]),e.jsx(Eh,{as:dR,allowPinchZoom:!0,children:e.jsx(US,{...t,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ps(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),l.current||(o=a.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ps(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;l.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ps(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),uR=m.forwardRef((t,s)=>{const a=Ii(Uc,t.__scopePopover),r=m.useRef(!1),n=m.useRef(!1);return e.jsx(US,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var i,o;(i=t.onCloseAutoFocus)==null||i.call(t,l),l.defaultPrevented||(r.current||(o=a.triggerRef.current)==null||o.focus(),l.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:l=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=l.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&n.current&&l.preventDefault()}})}),US=m.forwardRef((t,s)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:l,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...x}=t,p=Ii(Uc,a),h=Um(a);return Dg(),e.jsx(yh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:l,children:e.jsx(Tm,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:e.jsx(g4,{"data-state":zS(p.open),role:"dialog",id:p.contentId,...h,...x,ref:s,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),BS="PopoverClose",xR=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Ii(BS,a);return e.jsx(ws.button,{type:"button",...r,ref:s,onClick:ps(t.onClick,()=>n.onOpenChange(!1))})});xR.displayName=BS;var hR="PopoverArrow",pR=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Um(a);return e.jsx(v4,{...n,...r,ref:s})});pR.displayName=hR;function zS(t){return t?"open":"closed"}var fR=MS,gR=OS,vR=LS,VS=$S;const go=fR,vo=gR,Si=m.forwardRef(({className:t,align:s="center",sideOffset:a=4,...r},n)=>e.jsx(vR,{children:e.jsx(VS,{ref:n,align:s,sideOffset:a,className:bt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Si.displayName=VS.displayName;const wR=()=>{js(),Fe.useEffect(()=>{const N=document.body.style.overflowX;return document.body.style.overflowX="hidden",()=>{document.body.style.overflowX=N}},[]);const t=al(),[s,a]=m.useState(!1),[r,n]=m.useState(),[l,i]=m.useState(),[o,c]=m.useState(null),[d,u]=m.useState({name:"",age:"",gender:"",phone:"",email:"",address:"",emergencyContact:"",medicalHistory:"",status:"Active",attenderName:"",attenderPhone:"",fees:"",bloodTest:"",pickupCharge:"",otherFees:"",totalAmount:"",payAmount:"",balance:"",paymentType:"",fatherName:"",motherName:"",attenderRelationship:"",marriageStatus:"",employeeStatus:""}),[x,p]=m.useState({patientAadhar:null,patientPan:null,attenderAadhar:null,attenderPan:null}),h=(N,E)=>{if(N==="phone"||N==="emergencyContact"||N==="attenderPhone"){const C=E.replace(/\D/g,"");C.length<=10&&u(k=>({...k,[N]:C}))}else if(N==="fees"||N==="bloodTest"||N==="pickupCharge"||N==="payAmount"){const C={...d,[N]:E};if(N==="fees"||N==="bloodTest"||N==="pickupCharge"){const k=parseFloat(C.fees)||0,A=parseFloat(C.bloodTest)||0,T=parseFloat(C.pickupCharge)||0,M=A+T;C.otherFees=M.toString();const X=k+A+T;C.totalAmount=X.toString();const ne=parseFloat(C.payAmount)||0;C.balance=(X-ne).toString()}else if(N==="payAmount"){const k=parseFloat(C.totalAmount)||0,A=parseFloat(E)||0;C.balance=(k-A).toString()}u(k=>({...k,...C}))}else u(C=>({...C,[N]:E}))},y=N=>{if(!N)return!0;const E=5*1024*1024;return N.size>E?(Te({title:"File Too Large",description:`File size must be less than 5MB. Current file size: ${(N.size/(1024*1024)).toFixed(2)}MB`,variant:"destructive"}),!1):!0},f=N=>{y(N)&&(c(N),N&&Te({title:"Photo Selected",description:`${N.name} (${(N.size/(1024*1024)).toFixed(2)}MB) selected successfully`}))},v=(N,E)=>{y(E)&&(p(C=>({...C,[N]:E})),E&&Te({title:"File Selected",description:`${E.name} (${(E.size/(1024*1024)).toFixed(2)}MB) selected successfully`}))},w=async()=>{if(!o){Te({title:"Test Upload",description:"Please select a photo first to test upload",variant:"destructive"});return}try{console.log(" Testing upload with photo:",o.name),console.log(" Photo details:",{size:o.size,type:o.type,name:o.name});const N=new FormData;N.append("file",o),N.append("patientId","TEST"),N.append("fieldName","photo"),console.log(" Making direct API call to /api/upload-patient-file");const E=await fetch("/api/upload-patient-file",{method:"POST",body:N});console.log(" Response status:",E.status),console.log(" Response headers:",[...E.headers.entries()]);const C=await E.text();if(console.log(" Response text:",C),E.ok){const k=JSON.parse(C);Te({title:"Test Upload Successful",description:`File uploaded: ${k.filename}`})}else Te({title:"Test Upload Failed",description:`Status: ${E.status} - ${C}`,variant:"destructive"})}catch(N){console.error(" Test upload error:",N),Te({title:"Test Upload Error",description:`Error: ${N.message}`,variant:"destructive"})}},g=async N=>{var E,C;N.preventDefault(),a(!0),console.log(" Form submission started"),console.log(" Current form data:",d);try{if(!d.name.trim()){Te({title:"Validation Error",description:"Patient name is required.",variant:"destructive"}),a(!1);return}if(!d.age||parseInt(d.age)<=0){Te({title:"Validation Error",description:"Valid age is required.",variant:"destructive"}),a(!1);return}if(!d.gender){Te({title:"Validation Error",description:"Gender is required.",variant:"destructive"}),a(!1);return}if(!d.phone.trim()){Te({title:"Validation Error",description:"Phone number is required.",variant:"destructive"}),a(!1);return}if(!d.address.trim()){Te({title:"Validation Error",description:"Address is required.",variant:"destructive"}),a(!1);return}if(!d.emergencyContact.trim()){Te({title:"Validation Error",description:"Emergency contact is required.",variant:"destructive"}),a(!1);return}let k="",A="",T="",M="",X="";if(o)try{console.log(" Attempting photo upload with simple method..."),k=await md(o,"temp","photo"),console.log(" Photo uploaded successfully:",k)}catch(ke){console.error(" Photo upload failed:",ke),Te({title:"Photo Upload Warning",description:`Photo upload failed: ${ke.message}. Patient will be created without photo.`,variant:"destructive"}),k=""}if(x.patientAadhar)try{A=await md(x.patientAadhar,"temp","patientAadhar"),console.log(" Patient Aadhar uploaded successfully:",A)}catch(ke){console.error(" Patient Aadhar upload failed:",ke),Te({title:"Document Upload Warning",description:`Patient Aadhar upload failed: ${ke.message}. Patient will be created without this document.`,variant:"destructive"})}if(x.patientPan)try{T=await md(x.patientPan,"temp","patientPan"),console.log(" Patient PAN uploaded successfully:",T)}catch(ke){console.error(" Patient PAN upload failed:",ke),Te({title:"Document Upload Warning",description:`Patient PAN upload failed: ${ke.message}. Patient will be created without this document.`,variant:"destructive"})}if(x.attenderAadhar)try{M=await md(x.attenderAadhar,"temp","attenderAadhar"),console.log(" Attender Aadhar uploaded successfully:",M)}catch(ke){console.error(" Attender Aadhar upload failed:",ke),Te({title:"Document Upload Warning",description:`Attender Aadhar upload failed: ${ke.message}. Patient will be created without this document.`,variant:"destructive"})}if(x.attenderPan)try{X=await md(x.attenderPan,"temp","attenderPan"),console.log(" Attender PAN uploaded successfully:",X)}catch(ke){console.error(" Attender PAN upload failed:",ke),Te({title:"Document Upload Warning",description:`Attender PAN upload failed: ${ke.message}. Patient will be created without this document.`,variant:"destructive"})}const ne={name:d.name.trim(),age:parseInt(d.age),gender:d.gender,phone:d.phone.trim(),email:d.email.trim(),address:d.address.trim(),emergencyContact:d.emergencyContact.trim(),medicalHistory:d.medicalHistory.trim(),admissionDate:wt(r||new Date,"dd-MM-yyyy"),status:d.status,attenderName:d.attenderName.trim(),attenderPhone:d.attenderPhone.trim(),photo:k,patientAadhar:A,patientPan:T,attenderAadhar:M,attenderPan:X,fees:parseFloat(d.fees)||0,bloodTest:parseFloat(d.bloodTest)||0,pickupCharge:parseFloat(d.pickupCharge)||0,otherFees:(parseFloat(d.bloodTest)||0)+(parseFloat(d.pickupCharge)||0),totalAmount:parseFloat(d.totalAmount)||0,payAmount:parseFloat(d.payAmount)||0,balance:parseFloat(d.balance)||0,paymentType:d.paymentType,fatherName:d.fatherName.trim(),motherName:d.motherName.trim(),attenderRelationship:d.attenderRelationship,dateOfBirth:l?wt(l,"dd-MM-yyyy"):"",marriageStatus:d.marriageStatus,employeeStatus:d.employeeStatus};console.log(" Final patient data being submitted:"),console.log("  Name:",ne.name),console.log("  Age:",ne.age),console.log("  Gender:",ne.gender),console.log("  Phone:",ne.phone),console.log("  Email:",ne.email),console.log("  Address:",ne.address),console.log("  Emergency Contact:",ne.emergencyContact),console.log("  Medical History:",ne.medicalHistory),console.log("  Admission Date:",ne.admissionDate),console.log("  Status:",ne.status),console.log("  Photo:",k),console.log("  Patient Aadhar:",A),console.log("  Patient PAN:",T),console.log("  Attender Aadhar:",M),console.log("  Attender PAN:",X),console.log("  Complete patient data object:",JSON.stringify(ne,null,2)),console.log(" API URL being used:","http://localhost:4000/api"),console.log(" About to call DatabaseService.addPatient with data:",ne);const Q=await gt.addPatient(ne);console.log(" Patient creation API response:",Q),console.log(" Full patient creation response:",Q);const oe=Q.id||((E=Q.patient)==null?void 0:E.id),ge=Q.patient_id||((C=Q.patient)==null?void 0:C.patient_id);if(console.log(" Patient created with ID:",oe,"Patient ID:",ge),console.log(" Available files to move:",{photoPath:k,patientAadharPath:A,patientPanPath:T,attenderAadharPath:M,attenderPanPath:X}),ge&&(k||A||T||M||X))try{console.log(" Starting file move process for patient:",ge);const ke={};k&&(ke.photo=k,console.log(" Photo to move:",k)),A&&(ke.patientAadhar=A,console.log(" Patient Aadhar to move:",A)),T&&(ke.patientPan=T,console.log(" Patient PAN to move:",T)),M&&(ke.attenderAadhar=M,console.log(" Attender Aadhar to move:",M)),X&&(ke.attenderPan=X,console.log(" Attender PAN to move:",X)),console.log(" Calling movePatientFiles with:",{patientId:ge,tempPaths:ke});const V=await xP(ge,ke);console.log(" Files moved successfully:",V),Object.keys(V).length>0?(console.log(" Updating patient record with new paths..."),await gt.updatePatient(oe,{photo:V.photo||k,patientAadhar:V.patientAadhar||A,patientPan:V.patientPan||T,attenderAadhar:V.attenderAadhar||M,attenderPan:V.attenderPan||X}),console.log(" Patient record updated with new file paths")):console.log(" No new paths returned from file move operation")}catch(ke){console.error(" Error moving files to patient folder:",ke),Te({title:"File Organization Warning",description:"Patient created successfully, but files could not be organized. They remain in temporary location.",variant:"destructive"})}else console.log(" Skipping file move - missing patient ID or no files to move"),console.log("  patientIdFormatted:",ge),console.log("  hasFiles:",!!(k||A||T||M||X));const me=Number(d.payAmount||0),H=Number(d.fees||0),L=Number(d.bloodTest||0),he=Number(d.pickupCharge||0),ie=H+L+he;if(ie>0||me>0)try{const ke=ie-me,V={patient_id:oe,patient_name:d.name,monthly_fees:H,other_fees:L+he,carry_forward:0,paid_amount:me,total_balance:ke,payment_status:ke<=0?"Paid":me>0?"Partial":"Pending",payment_type:d.paymentType||"Cash",payment_date:new Date().toISOString().split("T")[0],description:`Payment record for ${d.name}`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log(" Payment data to be saved:",V),console.log(" Payment sync temporarily disabled for debugging")}catch(ke){console.warn("Failed to sync payment data for new patient:",ke);const V=JSON.parse(localStorage.getItem("patientPaymentRecords")||"[]"),O={id:`${oe}-${Date.now()}`,patientId:oe,date:new Date().toISOString().split("T")[0],amount:me,comment:`Payment record for ${d.name}`,paymentMode:d.paymentType||"Cash",balanceRemaining:ie-me,createdBy:"System",createdAt:new Date().toISOString()};V.push(O),localStorage.setItem("patientPaymentRecords",JSON.stringify(V))}Te({title:"Patient Added Successfully!",description:`Patient ${d.name} has been registered.`}),setTimeout(()=>{t("/patients/list")},1500)}catch(k){console.error(" Error adding patient:",k),console.error(" Error details:",(k==null?void 0:k.message)||"Unknown error"),console.error(" Full error object:",JSON.stringify(k,null,2)),Te({title:"Error",description:`Failed to add patient: ${(k==null?void 0:k.message)||"Please try again."}`,variant:"destructive"})}finally{a(!1)}},j=({label:N,field:E,accept:C=".pdf,.jpg,.jpeg,.png"})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:N}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(Ve,{type:"file",accept:C,onChange:k=>{var A;return v(E,((A=k.target.files)==null?void 0:A[0])||null)},className:"hidden",id:E}),e.jsxs(ae,{htmlFor:E,className:"flex items-center space-x-2 cursor-pointer bg-muted hover:bg-muted/80 px-4 py-3 rounded-lg border border-input transition-colors w-full sm:w-auto min-h-[2.75rem] justify-center sm:justify-start",children:[e.jsx(rn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-center sm:text-left",children:x[E]?`${x[E].name.length>25?x[E].name.substring(0,25)+"...":x[E].name} (${(x[E].size/(1024*1024)).toFixed(2)}MB)`:"Choose file (Max 5MB)"})]}),x[E]&&e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>v(E,null),className:"w-full sm:w-auto h-11",children:"Remove"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted formats: ",C,". Maximum file size: 5MB"]})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 pl-1 pr-3 sm:pl-2 sm:pr-4 lg:pl-3 lg:pr-6 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-lg border border-white/30 rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 shadow-2xl mb-4 sm:mb-6 lg:mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-indigo-600/5 to-purple-600/5"}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full -mr-12 sm:-mr-16 -mt-12 sm:-mt-16"}),e.jsxs("div",{className:"relative flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl sm:rounded-2xl shadow-lg",children:e.jsx(yi,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Add New Patient"})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-2 bg-blue-50 px-4 py-2 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Ready to submit"})]})]})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4 sm:space-y-6",children:[e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(uo,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Patient Information"]})}),e.jsxs(Re,{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name *"}),e.jsx(Ve,{id:"name",placeholder:"Enter patient's full name",value:d.name,onChange:N=>h("name",N.target.value),required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"age",className:"text-sm font-medium",children:"Age *"}),e.jsx(Ve,{id:"age",type:"number",placeholder:"Enter age",value:d.age,onChange:N=>h("age",N.target.value),required:!0,min:"0",max:"150",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender *"}),e.jsxs(At,{value:d.gender,onValueChange:N=>h("gender",N),required:!0,children:[e.jsx(Et,{className:"h-11",children:e.jsx(_t,{placeholder:"Select gender"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Male",children:"Male"}),e.jsx(Pe,{value:"Female",children:"Female"}),e.jsx(Pe,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Ve,{id:"phone",placeholder:"Enter phone number",value:d.phone,onChange:N=>h("phone",N.target.value),required:!0,className:"pl-10 h-11"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Ve,{id:"email",type:"email",placeholder:"Enter email address",value:d.email,onChange:N=>h("email",N.target.value),className:"pl-10 h-11"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"emergencyContact",className:"text-sm font-medium",children:"Emergency Contact *"}),e.jsx(Ve,{id:"emergencyContact",placeholder:"Emergency contact number",value:d.emergencyContact,onChange:N=>h("emergencyContact",N.target.value),required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsx(ae,{htmlFor:"address",className:"text-sm font-medium",children:"Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(mr,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(As,{id:"address",placeholder:"Enter complete address",value:d.address,onChange:N=>h("address",N.target.value),required:!0,className:"pl-10 min-h-[2.75rem]",rows:3})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Admission Date *"}),e.jsxs(go,{children:[e.jsx(vo,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:bt("w-full justify-start text-left font-normal h-11",!r&&"text-muted-foreground"),children:[e.jsx(Pt,{className:"mr-2 h-4 w-4"}),r?wt(r,"dd-MM-yyyy"):"Pick admission date"]})}),e.jsx(Si,{className:"w-auto p-0",align:"start",children:e.jsx(bi,{mode:"single",selected:r,onSelect:n,initialFocus:!0,className:"pointer-events-auto"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),e.jsxs(At,{value:d.status,onValueChange:N=>h("status",N),children:[e.jsx(Et,{className:"h-11",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"}),e.jsx(Pe,{value:"Critical",children:"Critical"}),e.jsx(Pe,{value:"Discharged",children:"Discharged"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"fatherName",className:"text-sm font-medium",children:"Father Name"}),e.jsx(Ve,{id:"fatherName",placeholder:"Enter father's name",value:d.fatherName,onChange:N=>h("fatherName",N.target.value),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"motherName",className:"text-sm font-medium",children:"Mother Name"}),e.jsx(Ve,{id:"motherName",placeholder:"Enter mother's name",value:d.motherName,onChange:N=>h("motherName",N.target.value),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:"Date of Birth"}),e.jsxs(go,{children:[e.jsx(vo,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:bt("w-full justify-start text-left font-normal h-11",!l&&"text-muted-foreground"),children:[e.jsx(Pt,{className:"mr-2 h-4 w-4"}),l?wt(l,"dd-MM-yyyy"):"Pick date of birth"]})}),e.jsx(Si,{className:"w-auto p-0",align:"start",children:e.jsx(bi,{mode:"single",selected:l,onSelect:i,initialFocus:!0,className:"pointer-events-auto"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"marriageStatus",className:"text-sm font-medium",children:"Marriage Status"}),e.jsxs(At,{value:d.marriageStatus,onValueChange:N=>h("marriageStatus",N),children:[e.jsx(Et,{className:"h-11",children:e.jsx(_t,{placeholder:"Select marriage status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Single",children:"Single"}),e.jsx(Pe,{value:"Married",children:"Married"}),e.jsx(Pe,{value:"Divorced",children:"Divorced"}),e.jsx(Pe,{value:"Widowed",children:"Widowed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"employeeStatus",className:"text-sm font-medium",children:"Employee Status"}),e.jsxs(At,{value:d.employeeStatus,onValueChange:N=>h("employeeStatus",N),children:[e.jsx(Et,{className:"h-11",children:e.jsx(_t,{placeholder:"Select employee status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Employed",children:"Employed"}),e.jsx(Pe,{value:"Unemployed",children:"Unemployed"}),e.jsx(Pe,{value:"Self-Employed",children:"Self-Employed"}),e.jsx(Pe,{value:"Retired",children:"Retired"}),e.jsx(Pe,{value:"Student",children:"Student"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"photo",className:"text-sm font-medium",children:"Patient Photo"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(Ve,{type:"file",accept:"image/*",onChange:N=>{var E;return f(((E=N.target.files)==null?void 0:E[0])||null)},className:"hidden",id:"photo"}),e.jsxs(ae,{htmlFor:"photo",className:"flex items-center space-x-2 cursor-pointer bg-muted hover:bg-muted/80 px-4 py-3 rounded-lg border border-input transition-colors w-full sm:w-auto min-h-[2.75rem] justify-center sm:justify-start",children:[e.jsx(rn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-center sm:text-left",children:o?`${o.name.length>20?o.name.substring(0,20)+"...":o.name} (${(o.size/(1024*1024)).toFixed(2)}MB)`:"Choose photo (Max 5MB)"})]}),o&&e.jsxs("div",{className:"flex space-x-2 w-full sm:w-auto",children:[e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>c(null),className:"flex-1 sm:flex-none h-11",children:"Remove"}),e.jsx(P,{type:"button",variant:"secondary",size:"sm",onClick:w,className:"flex-1 sm:flex-none h-11",children:"Test Upload"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted formats: JPG, JPEG, PNG, GIF. Maximum file size: 5MB"})]}),e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsx(ae,{htmlFor:"medicalHistory",className:"text-sm font-medium",children:"Medical History"}),e.jsx(As,{id:"medicalHistory",placeholder:"Enter patient's medical history and conditions",value:d.medicalHistory,onChange:N=>h("medicalHistory",N.target.value),rows:3,className:"min-h-[5rem]"})]})]})]}),e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(Ns,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Attender Information"]})}),e.jsxs(Re,{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"attenderName",className:"text-sm font-medium",children:"Attender Name"}),e.jsx(Ve,{id:"attenderName",placeholder:"Enter attender's name",value:d.attenderName,onChange:N=>h("attenderName",N.target.value),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"attenderPhone",className:"text-sm font-medium",children:"Attender Phone"}),e.jsx(Ve,{id:"attenderPhone",placeholder:"Enter attender's phone",value:d.attenderPhone,onChange:N=>h("attenderPhone",N.target.value),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"attenderRelationship",className:"text-sm font-medium",children:"Attender Relationship"}),e.jsxs(At,{value:d.attenderRelationship,onValueChange:N=>h("attenderRelationship",N),children:[e.jsx(Et,{className:"h-11",children:e.jsx(_t,{placeholder:"Select relationship"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Father",children:"Father"}),e.jsx(Pe,{value:"Mother",children:"Mother"}),e.jsx(Pe,{value:"Spouse",children:"Spouse"}),e.jsx(Pe,{value:"Child",children:"Child"}),e.jsx(Pe,{value:"Sibling",children:"Sibling"}),e.jsx(Pe,{value:"Guardian",children:"Guardian"}),e.jsx(Pe,{value:"Friend",children:"Friend"}),e.jsx(Pe,{value:"Other",children:"Other"})]})]})]})]})]}),e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(ia,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Payment Information"]})}),e.jsxs(Re,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"fees",className:"text-sm font-medium",children:"Fees"}),e.jsx(Ve,{id:"fees",type:"number",placeholder:"Enter fees amount",value:d.fees,onChange:N=>h("fees",N.target.value),min:"0",step:"0.01",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"bloodTest",className:"text-sm font-medium",children:"Blood Test"}),e.jsx(Ve,{id:"bloodTest",type:"number",placeholder:"Enter blood test cost",value:d.bloodTest,onChange:N=>h("bloodTest",N.target.value),min:"0",step:"0.01",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"pickupCharge",className:"text-sm font-medium",children:"Pickup Charge"}),e.jsx(Ve,{id:"pickupCharge",type:"number",placeholder:"Enter pickup charge",value:d.pickupCharge,onChange:N=>h("pickupCharge",N.target.value),min:"0",step:"0.01",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"otherFees",className:"text-sm font-medium text-blue-600",children:"Other Fees (Auto-calculated)"}),e.jsx(Ve,{id:"otherFees",type:"number",placeholder:"Blood Test + Pickup Charge",value:(()=>{const N=parseFloat(d.bloodTest)||0,E=parseFloat(d.pickupCharge)||0;return(N+E).toString()})(),readOnly:!0,className:"bg-blue-50 border-blue-200 text-blue-800 font-medium h-11",title:"This field is automatically calculated as Blood Test + Pickup Charge"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"totalAmount",className:"text-sm font-medium",children:"Total Amount"}),e.jsx(Ve,{id:"totalAmount",type:"number",placeholder:"Total amount",value:d.totalAmount,readOnly:!0,className:"bg-muted h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"payAmount",className:"text-sm font-medium",children:"Pay Amount"}),e.jsx(Ve,{id:"payAmount",type:"number",placeholder:"Enter pay amount",value:d.payAmount,onChange:N=>h("payAmount",N.target.value),min:"0",step:"0.01",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"balance",className:"text-sm font-medium",children:"Balance"}),e.jsx(Ve,{id:"balance",type:"number",placeholder:"Balance amount",value:d.balance,readOnly:!0,className:"bg-muted h-11"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2 lg:col-span-1",children:[e.jsx(ae,{htmlFor:"paymentType",className:"text-sm font-medium",children:"Payment Type"}),e.jsxs(At,{value:d.paymentType,onValueChange:N=>h("paymentType",N),children:[e.jsx(Et,{className:"h-11",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Cash",children:"Cash"}),e.jsx(Pe,{value:"Card",children:"Card"}),e.jsx(Pe,{value:"UPI",children:"UPI"}),e.jsx(Pe,{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx(Pe,{value:"Insurance",children:"Insurance"})]})]})]})]})]}),e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(It,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Document Upload"]})}),e.jsxs(Re,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-base",children:"Patient Documents"}),e.jsx(j,{label:"Patient Aadhar Card",field:"patientAadhar"}),e.jsx(j,{label:"Patient PAN Card",field:"patientPan"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-base",children:"Attender Documents"}),e.jsx(j,{label:"Attender Aadhar Card",field:"attenderAadhar"}),e.jsx(j,{label:"Attender PAN Card",field:"attenderPan"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-4 sm:pt-6",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>t("/patients/list"),className:"header-action-btn header-action-btn--clear h-11 px-6 w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),e.jsx(P,{type:"submit",disabled:s,className:"header-action-btn header-action-btn--primary h-11 px-8 w-full sm:w-auto order-1 sm:order-2",children:s?"Adding Patient...":"Add Patient"})]})]})]})})},qi=async(t,s,a="document")=>{console.log(` Uploading ${a}:`,t.name,"Size:",t.size);const r=new FormData;r.append("file",t),r.append("patientId",s),r.append("fileType",a);const n=await fetch("/api/upload-medical-history-file",{method:"POST",body:r});if(!n.ok){const i=await n.text();throw new Error(`Upload failed: ${n.status} - ${i}`)}const l=await n.json();return console.log(" Upload successful:",l.filePath),l.filePath},yR=async(t,s,a="document")=>{console.log(` Uploading patient history ${a}:`,t.name,"Size:",t.size);const r=new FormData;r.append("file",t),r.append("patientId",s),r.append("fileType",a);const n=await fetch("/api/upload-patient-history-file",{method:"POST",body:r});if(!n.ok){const i=await n.text();throw new Error(`Patient history upload failed: ${n.status} - ${i}`)}const l=await n.json();return console.log(" Patient history upload successful:",l.filePath),l.filePath},tj=async(t,s)=>{console.log(" Uploading call record audio:",t.name,"Size:",t.size);const a=new FormData;a.append("file",t),a.append("patientId",s);const r=await fetch("/api/upload-call-record-audio",{method:"POST",body:a});if(!r.ok){const l=await r.text();throw new Error(`Call record audio upload failed: ${r.status} - ${l}`)}const n=await r.json();return console.log(" Call record audio upload successful:",n.filePath),n.filePath},pd=async(t,s,a="photo")=>{try{if(console.log(" Starting file upload..."),console.log(" File details:",{name:t.name,size:t.size,type:t.type,lastModified:t.lastModified}),console.log(" Upload params:",{patientId:s,fieldName:a}),!s||s.trim()===""||s==="temp")throw new Error("Invalid patient ID provided. Cannot upload to temp folder.");if(!t)throw new Error("No file provided");if(t.size>10*1024*1024)throw new Error("File size exceeds 10MB limit");const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];if(!r.includes(t.type))throw new Error(`File type ${t.type} not allowed. Allowed types: ${r.join(", ")}`);try{console.log(" Testing backend connectivity through proxy...");const c=await fetch("/api/health",{method:"GET",headers:{Accept:"application/json"}});if(console.log(" Health check response:",c.status,c.statusText),!c.ok){console.log(" Trying direct backend connection...");const u=await fetch("http://localhost:4000/api/health",{method:"GET"});if(!u.ok)throw new Error(`Backend server is not responding. Proxy: ${c.status}, Direct: ${u.status}`);console.log(" Direct backend connection works, but proxy might be misconfigured")}const d=await c.text();console.log(" Backend server is healthy:",d)}catch(c){throw console.error(" Backend health check failed:",c),new Error(`Cannot connect to backend server. Please make sure the backend server is running and the proxy is configured correctly. Error: ${c.message}`)}const n=new FormData;n.append("file",t),n.append("patientId",s),n.append("fieldName",a),console.log(" FormData created with:"),console.log("  - file:",t.name,"(",t.size,"bytes )"),console.log("  - patientId:",s,"(type:",typeof s,")"),console.log("  - fieldName:",a),console.log(" FormData entries:");for(const[c,d]of n.entries())d instanceof File?console.log(`  - ${c}: [File] ${d.name} (${d.size} bytes)`):console.log(`  - ${c}: ${d} (type: ${typeof d})`);const l="/api/upload-patient-file";console.log(" Sending upload request to backend..."),console.log(" Request URL:",l);const i=new AbortController,o=setTimeout(()=>i.abort(),3e4);try{const c=await fetch(l,{method:"POST",body:n,signal:i.signal});if(clearTimeout(o),console.log(" Upload response status:",c.status),console.log(" Upload response statusText:",c.statusText),console.log(" Upload response URL:",c.url),console.log(" Upload response headers:",Object.fromEntries(c.headers.entries())),!c.ok){const u=await c.text();throw console.error(" Upload failed with status:",c.status),console.error(" Error response:",u),c.status===404?new Error("Upload endpoint not found. Please make sure the backend server is running with the correct API endpoints."):c.status>=500?new Error(`Server error: ${c.status} - ${u}`):new Error(`Upload failed: ${c.status} - ${u}`)}const d=await c.json();if(console.log(" Upload successful:",d),!d.filePath)throw new Error("Upload succeeded but no file path returned");return d.filePath}catch(c){throw clearTimeout(o),c.name==="AbortError"?new Error("Upload timeout - please check your connection and try again"):c.message.includes("Failed to fetch")||c.message.includes("fetch")?new Error("Network error - cannot reach server. Please check if both frontend (port 8080) and backend (port 4000) servers are running."):c.message.includes("CORS")?new Error("CORS error - there may be a proxy configuration issue. Please check your Vite configuration."):c}}catch(r){throw console.error(" Upload error:",r),r instanceof Error?new Error(`File upload failed: ${r.message}`):new Error("File upload failed: Unknown error")}},Ja=t=>{if(console.log(" getFileUrl called with:",t),!t||t.trim()==="")return console.log(" Empty filePath, returning empty string"),"";if(t.startsWith("http"))return console.log(" Already full URL, returning as-is:",t),t;if(t.startsWith("data:"))return console.log(" Data URL, returning as-is"),t;let s=t.replace(/\\/g,"/");s=s.replace(/\/+/g,"/");const a="http://localhost:4000/api".replace("/api","")||"http://localhost:4000";let r;return s.startsWith("Photos/")?r=`${a}/${s}`:s.startsWith("/Photos/")?r=`${a}${s}`:s.startsWith("/uploads/")?r=`${a}${s}`:s.startsWith("uploads/")?r=`${a}/${s}`:(s.startsWith("/")||(s=`/${s}`),r=`${a}${s}`),r=r.replace(/\s/g,"%20"),console.log(" Constructed backend URL:",r),r},fd=async t=>{try{const s=await fetch("/api/delete-patient-file",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:t})});if(!s.ok)throw new Error(`Delete failed: ${s.statusText}`)}catch(s){console.error(" Delete error:",s)}},aa=t=>{if(!t||t.trim()===""||t==="null"||t===null||t===void 0)return"";if(t.startsWith("data:")||t.startsWith("http"))return t;let s=t.replace(/\\/g,"/");if(s=s.replace(/\/+/g,"/"),s.includes("Photos/Photos/")&&(console.log(" Detected duplicated Photos/ prefix in path:",s),s=s.replace("Photos/Photos/","Photos/"),console.log(" Fixed duplicated Photos/ prefix to:",s)),!s.startsWith("Photos/")&&!s.startsWith("/Photos/")&&(s.startsWith("/")?s=`Photos${s}`:s=`Photos/${s}`),s.startsWith("Photos/")){const i="http://localhost:4000/api".replace("/api","")||"http://localhost:4000",o=Date.now(),c=Math.random().toString(36).substring(7),d=`?t=${o}&r=${c}`;return`${i}/${s.replace(/\s/g,"%20")}${d}`}if(s.startsWith("/Photos/")){const i="http://localhost:4000/api".replace("/api","")||"http://localhost:4000",o=Date.now(),c=Math.random().toString(36).substring(7),d=`?t=${o}&r=${c}`;return`${i}${s.replace(/\s/g,"%20")}${d}`}if(s.startsWith("/uploads/")){const i="http://localhost:4000/api".replace("/api","")||"http://localhost:4000",o=Date.now(),c=Math.random().toString(36).substring(7),d=`?t=${o}&r=${c}`;return`${i}${s}${d}`}s.startsWith("/")||(s=`/${s}`);const a="http://localhost:4000/api".replace("/api","")||"http://localhost:4000",r=Date.now(),n=Math.random().toString(36).substring(7),l=`?t=${r}&r=${n}`;return`${a}${s}${l}`},El=({photoPath:t,alt:s="Patient Photo",className:a="w-12 h-12 rounded-full object-cover",showPlaceholder:r=!0})=>{const[n,l]=m.useState(!1),[i,o]=m.useState(!1),[c,d]=m.useState(0),[u,x]=m.useState(0);m.useEffect(()=>{l(!1),o(!1),d(h=>h+1),x(0)},[t]);const p=m.useMemo(()=>{if(!t||t.trim()===""||t==="null")return"";const h=aa(t);if(!h)return"";const y=new URL(h);return y.searchParams.set("refresh",c.toString()),y.searchParams.set("path",encodeURIComponent(t)),y.searchParams.set("retry",u.toString()),y.searchParams.set("ts",Date.now().toString()),y.toString()},[t,c,u]);return console.log(" PatientPhoto Debug:",{photoPath:t,photoUrl:p,refreshKey:c,retryCount:u,isEmpty:!t||t.trim()===""||t==="null"||t===null||t===void 0,isNull:t===null,isUndefined:t===void 0,isStringNull:t==="null",isEmptyString:t==="",timestamp:Date.now()}),t&&t.includes("Photos/patient Admission/")?(console.log(" Valid patient photo path detected:",t),console.log(" Final constructed URL:",p)):t&&console.log(" Unexpected photo path format:",t),m.useEffect(()=>{l(!1),o(!1)},[t]),!p||!t||t.trim()===""||t==="null"||t===null||t===void 0?r?e.jsx("div",{className:`${a} bg-gray-200 flex items-center justify-center`,style:{borderRadius:a.includes("rounded-full")?"50%":void 0},children:e.jsx("span",{className:"text-gray-400 text-xs",children:"No Photo"})}):null:n&&u>=3?r?e.jsx("div",{className:`${a} bg-gray-200 flex items-center justify-center`,style:{borderRadius:a.includes("rounded-full")?"50%":void 0},children:e.jsx("span",{className:"text-gray-400 text-xs",children:"No Photo"})}):null:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:s,className:a,style:{display:i?"block":"none",borderRadius:a.includes("rounded-full")?"50%":void 0},onLoad:()=>{console.log(" Image loaded successfully:",p),o(!0),l(!1)},onError:h=>{if(console.error(" Image failed to load:",p),console.error(" Error details:",{photoPath:t,photoUrl:p,refreshKey:c,retryCount:u,naturalWidth:h.target.naturalWidth,naturalHeight:h.target.naturalHeight}),u<3){const y=(u+1)*1e3;setTimeout(()=>{console.log(` Retrying image load (attempt ${u+1}):`,p),x(f=>f+1)},y)}else l(!0)}},`${t}-${c}-${u}`),!i&&!n&&e.jsx("div",{className:`${a} bg-gray-100 flex items-center justify-center animate-pulse`,style:{borderRadius:a.includes("rounded-full")?"50%":void 0},children:e.jsx("span",{className:"text-gray-400 text-xs",children:"..."})})]})},ls=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:bt("w-full caption-bottom text-sm",t),...s})}));ls.displayName="Table";const is=m.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:bt("[&_tr]:border-b",t),...s}));is.displayName="TableHeader";const os=m.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:bt("[&_tr:last-child]:border-0",t),...s}));os.displayName="TableBody";const jR=m.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:bt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));jR.displayName="TableFooter";const nt=m.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:bt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));nt.displayName="TableRow";const re=m.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:bt("h-12 px-4 text-center align-middle font-semibold text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));re.displayName="TableHead";const q=m.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:bt("p-4 align-middle text-center [&:has([role=checkbox])]:pr-0",t),...s}));q.displayName="TableCell";const NR=m.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:bt("mt-4 text-sm text-muted-foreground",t),...s}));NR.displayName="TableCaption";var Fh="Dialog",[YS,WS]=Pl(Fh),[bR,Mn]=YS(Fh),HS=t=>{const{__scopeDialog:s,children:a,open:r,defaultOpen:n,onOpenChange:l,modal:i=!0}=t,o=m.useRef(null),c=m.useRef(null),[d,u]=Oc({prop:r,defaultProp:n??!1,onChange:l,caller:Fh});return e.jsx(bR,{scope:s,triggerRef:o,contentRef:c,contentId:ao(),titleId:ao(),descriptionId:ao(),open:d,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(x=>!x),[u]),modal:i,children:a})};HS.displayName=Fh;var GS="DialogTrigger",qS=m.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,n=Mn(GS,a),l=Gs(s,n.triggerRef);return e.jsx(ws.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":tv(n.open),...r,ref:l,onClick:ps(t.onClick,n.onOpenToggle)})});qS.displayName=GS;var Zg="DialogPortal",[SR,JS]=YS(Zg,{forceMount:void 0}),KS=t=>{const{__scopeDialog:s,forceMount:a,children:r,container:n}=t,l=Mn(Zg,s);return e.jsx(SR,{scope:s,forceMount:a,children:m.Children.map(r,i=>e.jsx(Ti,{present:a||l.open,children:e.jsx(Fm,{asChild:!0,container:n,children:i})}))})};KS.displayName=Zg;var Ox="DialogOverlay",XS=m.forwardRef((t,s)=>{const a=JS(Ox,t.__scopeDialog),{forceMount:r=a.forceMount,...n}=t,l=Mn(Ox,t.__scopeDialog);return l.modal?e.jsx(Ti,{present:r||l.open,children:e.jsx(kR,{...n,ref:s})}):null});XS.displayName=Ox;var CR=mo("DialogOverlay.RemoveScroll"),kR=m.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,n=Mn(Ox,a);return e.jsx(Eh,{as:CR,allowPinchZoom:!0,shards:[n.contentRef],children:e.jsx(ws.div,{"data-state":tv(n.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),wo="DialogContent",QS=m.forwardRef((t,s)=>{const a=JS(wo,t.__scopeDialog),{forceMount:r=a.forceMount,...n}=t,l=Mn(wo,t.__scopeDialog);return e.jsx(Ti,{present:r||l.open,children:l.modal?e.jsx(ER,{...n,ref:s}):e.jsx(DR,{...n,ref:s})})});QS.displayName=wo;var ER=m.forwardRef((t,s)=>{const a=Mn(wo,t.__scopeDialog),r=m.useRef(null),n=Gs(s,a.contentRef,r);return m.useEffect(()=>{const l=r.current;if(l)return Lg(l)},[]),e.jsx(ZS,{...t,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ps(t.onCloseAutoFocus,l=>{var i;l.preventDefault(),(i=a.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ps(t.onPointerDownOutside,l=>{const i=l.detail.originalEvent,o=i.button===0&&i.ctrlKey===!0;(i.button===2||o)&&l.preventDefault()}),onFocusOutside:ps(t.onFocusOutside,l=>l.preventDefault())})}),DR=m.forwardRef((t,s)=>{const a=Mn(wo,t.__scopeDialog),r=m.useRef(!1),n=m.useRef(!1);return e.jsx(ZS,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var i,o;(i=t.onCloseAutoFocus)==null||i.call(t,l),l.defaultPrevented||(r.current||(o=a.triggerRef.current)==null||o.focus(),l.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:l=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=l.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&n.current&&l.preventDefault()}})}),ZS=m.forwardRef((t,s)=>{const{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:l,...i}=t,o=Mn(wo,a),c=m.useRef(null),d=Gs(s,c);return Dg(),e.jsxs(e.Fragment,{children:[e.jsx(yh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:l,children:e.jsx(Tm,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":tv(o.open),...i,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(_R,{titleId:o.titleId}),e.jsx(TR,{contentRef:c,descriptionId:o.descriptionId})]})]})}),ev="DialogTitle",e3=m.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,n=Mn(ev,a);return e.jsx(ws.h2,{id:n.titleId,...r,ref:s})});e3.displayName=ev;var t3="DialogDescription",s3=m.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,n=Mn(t3,a);return e.jsx(ws.p,{id:n.descriptionId,...r,ref:s})});s3.displayName=t3;var a3="DialogClose",r3=m.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,n=Mn(a3,a);return e.jsx(ws.button,{type:"button",...r,ref:s,onClick:ps(t.onClick,()=>n.onOpenChange(!1))})});r3.displayName=a3;function tv(t){return t?"open":"closed"}var n3="DialogTitleWarning",[AR,l3]=zE(n3,{contentName:wo,titleName:ev,docsSlug:"dialog"}),_R=({titleId:t})=>{const s=l3(n3),a=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},PR="DialogDescriptionWarning",TR=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${l3(PR).contentName}}.`;return m.useEffect(()=>{var l;const n=(l=t.current)==null?void 0:l.getAttribute("aria-describedby");s&&n&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},i3=HS,o3=qS,c3=KS,sv=XS,av=QS,rv=e3,nv=s3,lv=r3;const $t=i3,FR=o3,MR=c3,d3=m.forwardRef(({className:t,...s},a)=>e.jsx(sv,{ref:a,className:bt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));d3.displayName=sv.displayName;const Ot=m.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(MR,{children:[e.jsx(d3,{}),e.jsxs(av,{ref:r,className:bt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(lv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(jt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ot.displayName=av.displayName;const Ut=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Ut.displayName="DialogHeader";const zt=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});zt.displayName="DialogFooter";const Bt=m.forwardRef(({className:t,...s},a)=>e.jsx(rv,{ref:a,className:bt("text-lg font-semibold leading-none tracking-tight",t),...s}));Bt.displayName=rv.displayName;const Vt=m.forwardRef(({className:t,...s},a)=>e.jsx(nv,{ref:a,className:bt("text-sm text-muted-foreground",t),...s}));Vt.displayName=nv.displayName;const sj=["January","February","March","April","May","June","July","August","September","October","November","December"],$s=({open:t,onOpenChange:s,selectedMonth:a,selectedYear:r,onMonthChange:n,onYearChange:l,onApply:i,title:o="Select Month & Year",description:c="Filter data by specific month and year",previewText:d="data"})=>{const u=new Date().getFullYear();return e.jsx($t,{open:t,onOpenChange:s,children:e.jsxs(Ot,{className:"sm:max-w-[450px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Pt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(Bt,{className:"text-xl font-bold text-gray-900",children:o}),e.jsx(Vt,{className:"text-gray-600 mt-1",children:c})]})]})}),e.jsxs("div",{className:"space-y-6 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"month",className:"text-sm font-medium text-gray-700",children:"Month"}),e.jsxs(At,{value:a.toString(),onValueChange:x=>{n(Number(x))},children:[e.jsx(Et,{className:"w-full border-primary/30 focus:border-primary",onClick:x=>x.preventDefault(),children:e.jsx(_t,{placeholder:"Select month"})}),e.jsx(Dt,{className:"bg-background border shadow-lg z-50",children:sj.map((x,p)=>e.jsx(Pe,{value:(p+1).toString(),children:x},x))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"year",className:"text-sm font-medium text-gray-700",children:"Year"}),e.jsxs(At,{value:r.toString(),onValueChange:x=>{l(Number(x))},children:[e.jsx(Et,{className:"w-full border-primary/30 focus:border-primary",onClick:x=>x.preventDefault(),children:e.jsx(_t,{placeholder:"Select year"})}),e.jsx(Dt,{className:"bg-background border shadow-lg z-50",children:[...Array(10)].map((x,p)=>{const h=u-5+p;return e.jsx(Pe,{value:h.toString(),children:h},h)})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter Preview"})]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Showing ",d," from ",e.jsxs("span",{className:"font-semibold text-blue-600",children:[sj[a-1]," ",r]})]})]})]}),e.jsxs(zt,{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>s(!1),className:"w-full sm:w-auto modern-btn modern-btn-secondary",children:"Cancel"}),e.jsx(P,{type:"button",onClick:x=>{x.preventDefault(),i()},className:"w-full sm:w-auto global-btn",children:"Apply Filter"})]})]})})},aj=({onClick:t,icon:s,children:a,disabled:r=!1,loading:n=!1,title:l,className:i="",variant:o="blue",size:c="md",iconOnly:d=!1})=>{const u={blue:"border-blue-300 text-blue-600 hover:bg-blue-50",green:"border-green-300 text-green-600 hover:bg-green-50",purple:"border-purple-300 text-purple-600 hover:bg-purple-50",orange:"border-orange-300 text-orange-600 hover:bg-orange-50",red:"border-red-300 text-red-600 hover:bg-red-50",gray:"border-gray-300 text-gray-600 hover:bg-gray-50"},x={sm:"text-xs px-2 py-1",md:"text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",lg:"text-sm sm:text-base px-3 sm:px-5 py-2 sm:py-3"},p={sm:"h-3 w-3",md:"h-3 w-3 sm:h-4 sm:w-4",lg:"h-4 w-4 sm:h-5 sm:w-5"},y=`flex-1 sm:flex-none ${x[c]} ${u[o]} ${i}`;return e.jsxs(P,{onClick:t,disabled:r||n,variant:"outline",className:y,title:l,children:[n?e.jsx(s,{className:`${p[c]} animate-spin ${d?"":"mr-1 sm:mr-2"}`}):e.jsx(s,{className:`${p[c]} ${d?"":"mr-1 sm:mr-2"}`}),!d&&a]})},Ht={Refresh:({onClick:t,loading:s=!1,disabled:a=!1,size:r="md"})=>e.jsx(aj,{onClick:t,icon:es,loading:s,disabled:a,title:"Refresh data",variant:"blue",size:r,iconOnly:!0}),MonthYear:({onClick:t,text:s="Select Month",size:a="md"})=>e.jsxs(aj,{onClick:t,icon:Pt,title:"Select month and year",variant:"blue",size:a,children:[e.jsx("span",{className:"hidden sm:inline",children:s}),e.jsx("span",{className:"sm:hidden",children:s.length>8?s.slice(0,8):s})]})},IR=(t,s,a)=>new Date(t,s-1,a),ju=t=>{if(!t)return"";if(t instanceof Date&&!isNaN(t.getTime())){const s=t.getFullYear();return s<1900||s>2100?"":wt(t,"dd-MM-yyyy")}return""},rj=t=>{if(!t)return"";let s;if(t instanceof Date?s=t:s=new Date(t),isNaN(s.getTime()))return"";const a=s.getFullYear();if(a<1900||a>2100)return"";const r=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");return`${a}-${r}-${n}`},nj=t=>{if(!t||t.trim()==="")return null;try{const[s,a,r]=t.split("-").map(Number);if(isNaN(s)||isNaN(a)||isNaN(r)||s<1900||s>2100||a<1||a>12||r<1||r>31)return null;const n=IR(s,a,r);return isNaN(n.getTime())?null:n}catch(s){return console.warn("Error parsing date from input:",t,s),null}},RR=t=>{if(!t)return 0;const s=new Date,a=new Date(t);let r=s.getFullYear()-a.getFullYear();const n=s.getMonth()-a.getMonth();return(n<0||n===0&&s.getDate()<a.getDate())&&r--,Math.max(0,r)},Nu=({label:t,currentFile:s,uploadedFile:a,onFileChange:r,accept:n="image/*"})=>{const l=`file-${t.toLowerCase().replace(/[^a-z0-9]/g,"-")}`;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:l,children:t}),s&&s.trim()!==""&&!a&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.startsWith("data:")?s:aa(s),alt:t,className:"w-full h-32 object-cover rounded-md border",onError:i=>{console.error(" Failed to load image in FileUploadField:",s),console.error(" Constructed URL:",s.startsWith("data:")?"data URL":aa(s)),i.currentTarget.style.display="none"},onLoad:()=>{console.log(" Image loaded successfully in FileUploadField:",s)}}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Current ",t]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{id:l,type:"file",accept:n,onChange:i=>{var o;return r(((o=i.target.files)==null?void 0:o[0])||null)},className:"hidden"}),e.jsxs(ae,{htmlFor:l,className:"flex items-center space-x-2 cursor-pointer bg-muted hover:bg-muted/80 px-3 py-2 rounded-md border border-input transition-colors",children:[e.jsx(rn,{className:"w-4 h-4"}),e.jsx("span",{children:a?a.name:`Upload ${t}`})]}),a&&e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>r(null),children:"Remove"})]}),a&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(a),alt:`New ${t}`,className:"w-full h-32 object-cover rounded-md border"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["New ",t," (will be saved on update)"]})]})]})},OR=()=>{const t=al();js();const s=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date().getMonth()+1,r=new Date().getFullYear(),[n,l]=m.useState([]),[i,o]=m.useState([]),[c,d]=m.useState(!0),[u,x]=m.useState(""),[p,h]=m.useState("All"),[y,f]=m.useState(a),[v,w]=m.useState(r),[g,j]=m.useState(!1),[N,E]=m.useState(null),[C,k]=m.useState(null),[A,T]=m.useState(null),[M,X]=m.useState(!1),[ne,Q]=m.useState({}),[oe,ge]=m.useState(0);m.useEffect(()=>()=>{Object.values(ne).forEach(b=>{b.startsWith("blob:")&&URL.revokeObjectURL(b)})},[ne]);const me=(b,S)=>{if(ne[S])return ne[S];const D=URL.createObjectURL(b);return Q(R=>({...R,[S]:D})),D},H=b=>{if(!b)return!0;const S=5*1024*1024;return b.size>S?(Te({title:"File Too Large",description:`File size must be less than 5MB. Current file size: ${(b.size/(1024*1024)).toFixed(2)}MB`,variant:"destructive"}),!1):!0},[L,he]=m.useState({photo:null,patientAadhar:null,patientPan:null,attenderAadhar:null,attenderPan:null}),[ie,ke]=m.useState(1),V=10;m.useEffect(()=>{O()},[]),m.useEffect(()=>{const b=()=>{console.log(" Window focused, refreshing patient data..."),O()};return window.addEventListener("focus",b),()=>window.removeEventListener("focus",b)},[]),m.useEffect(()=>{const b=setInterval(()=>{console.log(" Auto-refreshing patient data..."),O()},3e4);return()=>clearInterval(b)},[]),m.useEffect(()=>{Y(),ke(1)},[n,u,p,y,v]);const O=async()=>{d(!0);try{console.log(" Loading patients via unified API...");let b;try{b=await Y2.getAll(),console.log(" Patients loaded via unified API:",b.length,"patients")}catch(D){console.warn(" Unified API failed, falling back to DatabaseService:",D.message),b=await gt.getAllPatients(),console.log(" Patients loaded via DatabaseService:",b.length,"patients")}if(console.log(" Raw patient data from database:",b),!b||!Array.isArray(b)){console.warn(" Invalid patient data received:",b),l([]),Te({title:"Warning",description:"No patient data received from server",variant:"destructive"});return}const S=b.map(D=>{(D.id===102||D.id===103)&&console.log(` DEBUG Patient ${D.id}:`,{name:D.name,admissionDate:D.admissionDate,dateOfBirth:D.dateOfBirth,admissionDateType:typeof D.admissionDate,dateOfBirthType:typeof D.dateOfBirth});const R=Me=>{if(!Me)return null;if(Me instanceof Date){if(isNaN(Me.getTime()))return null;const Je=Me.getFullYear();return Je<1900||Je>2100?null:Me}if(typeof Me=="string"&&Me.match(/^\d{2}-\d{2}-\d{4}$/)){const[Je,vt,Le]=Me.split("-"),Ae=parseInt(Le);return Ae<1900||Ae>2100?null:new Date(Ae,parseInt(vt)-1,parseInt(Je))}if(typeof Me=="string"&&Me.match(/^\d{4}-\d{2}-\d{2}/)){const[Je,vt,Le]=Me.split("-"),Ae=parseInt(Je);return Ae<1900||Ae>2100?(console.warn(` Invalid year detected: ${Ae}, setting to null`),null):new Date(Ae,parseInt(vt)-1,parseInt(Le))}try{const Je=new Date(Me);if(isNaN(Je.getTime()))return null;const vt=Je.getFullYear();return vt<1900||vt>2100?(console.warn(` Invalid year detected in parsed date: ${vt}, using current date instead`),new Date):typeof Me=="string"&&Me.includes("T")?new Date(Je.getFullYear(),Je.getMonth(),Je.getDate()):Je}catch{return null}},F=D.id&&String(D.id).startsWith("P")?D.id:`P${(D.originalId||D.id||1).toString().padStart(4,"0")}`,I=D.originalId||parseInt(String(D.id||F).replace(/\D/g,""))||1;console.log(`Patient ${D.name} payment data:`,{fees:D.fees,bloodTest:D.bloodTest,pickupCharge:D.pickupCharge,totalAmount:D.totalAmount,payAmount:D.payAmount,balance:D.balance,paymentType:D.paymentType});const ce=parseFloat(D.fees)||0,de=parseFloat(D.bloodTest)||0,ve=parseFloat(D.pickupCharge)||0,_e=parseFloat(D.payAmount)||0,ze=ce+de+ve,be=ze-_e;return{id:F,originalId:I,name:D.name,age:parseInt(D.age)||0,gender:D.gender,phone:D.phone,email:D.email||"",address:D.address,emergencyContact:D.emergencyContact||"",medicalHistory:D.medicalHistory||"",admissionDate:R(D.admissionDate),status:D.status||"Active",attenderName:D.attenderName||"",attenderPhone:D.attenderPhone||"",photo:D.photo||"",fees:ce,bloodTest:de,pickupCharge:ve,totalAmount:ze,payAmount:_e,balance:be,paymentType:D.paymentType||"",fatherName:D.fatherName||"",motherName:D.motherName||"",attenderRelationship:D.attenderRelationship||"",dateOfBirth:R(D.dateOfBirth),marriageStatus:D.marriageStatus||"",employeeStatus:D.employeeStatus||"",patientAadhar:D.patientAadhar||"",patientPan:D.patientPan||"",attenderAadhar:D.attenderAadhar||"",attenderPan:D.attenderPan||""}});S.forEach(D=>{D.photo&&(console.log(` Patient ${D.name} (${D.id}) photo:`,D.photo),console.log(" Constructed URL:",aa(D.photo))),(D.patientAadhar||D.patientPan||D.attenderAadhar||D.attenderPan)&&console.log(` Patient ${D.name} documents:`,{patientAadhar:D.patientAadhar,patientPan:D.patientPan,attenderAadhar:D.attenderAadhar,attenderPan:D.attenderPan})}),l(S),ke(1)}catch(b){console.error(" Error loading patients:",b),l([]),Te({title:"Error",description:`Failed to load patients: ${b.message}`,variant:"destructive"})}finally{d(!1)}},Y=()=>{let b=[...n];u&&(b=b.filter(S=>(S.name||"").toLowerCase().includes(u.toLowerCase())||String(S.id||"").toLowerCase().includes(u.toLowerCase())||(S.phone||"").includes(u))),p!=="All"&&(b=b.filter(S=>S.status===p)),b.sort((S,D)=>{const R=String(S.id||""),F=String(D.id||""),I=parseInt(R.substring(1))||0,ce=parseInt(F.substring(1))||0;return I-ce}),o(b),ke(1)},W=(b,S)=>{if(console.log(" handleEditFileUpload called:",{field:b,file:S?{name:S.name,size:S.size}:null}),!H(S)){console.log(" File size validation failed");return}console.log(" File size validation passed, updating editDocuments state"),he(D=>{const R={...D,[b]:S};return console.log(" Updated editDocuments state:",R),R}),S&&(console.log(" File selected successfully:",S.name),Te({title:"File Selected",description:`${S.name} (${(S.size/(1024*1024)).toFixed(2)}MB) selected successfully`}))},ue=b=>{k({...b}),he({photo:null,patientAadhar:null,patientPan:null,attenderAadhar:null,attenderPan:null})},U=async()=>{var b,S,D,R,F,I,ce;if(C)try{if(!((b=C.name)!=null&&b.trim())){Te({title:"Validation Error",description:"Patient name is required.",variant:"destructive"});return}if(!C.age||C.age<=0){Te({title:"Validation Error",description:"Valid age is required.",variant:"destructive"});return}if(!((S=C.gender)!=null&&S.trim())){Te({title:"Validation Error",description:"Gender is required.",variant:"destructive"});return}if(!((D=C.phone)!=null&&D.trim())){Te({title:"Validation Error",description:"Phone number is required.",variant:"destructive"});return}if(C.phone.replace(/\D/g,"").length!==10){Te({title:"Validation Error",description:"Phone number must be exactly 10 digits.",variant:"destructive"});return}if(!((R=C.address)!=null&&R.trim())){Te({title:"Validation Error",description:"Address is required.",variant:"destructive"});return}if(!((F=C.emergencyContact)!=null&&F.trim())){Te({title:"Validation Error",description:"Emergency contact is required.",variant:"destructive"});return}if(C.emergencyContact.replace(/\D/g,"").length!==10){Te({title:"Validation Error",description:"Emergency contact must be exactly 10 digits.",variant:"destructive"});return}if((I=C.attenderPhone)!=null&&I.trim()&&C.attenderPhone.replace(/\D/g,"").length!==10){Te({title:"Validation Error",description:"Attender phone number must be exactly 10 digits.",variant:"destructive"});return}if((ce=C.email)!=null&&ce.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C.email)){Te({title:"Validation Error",description:"Please enter a valid email address.",variant:"destructive"});return}if(!C.admissionDate){Te({title:"Validation Error",description:"Admission date is required.",variant:"destructive"});return}const _e=new Date;if(_e.setHours(23,59,59,999),C.admissionDate>_e){Te({title:"Validation Error",description:"Admission date cannot be in the future.",variant:"destructive"});return}if(C.dateOfBirth&&C.dateOfBirth>_e){Te({title:"Validation Error",description:"Date of birth cannot be in the future.",variant:"destructive"});return}const ze=[{file:L.photo,name:"Photo"},{file:L.patientAadhar,name:"Patient Aadhar"},{file:L.patientPan,name:"Patient PAN"},{file:L.attenderAadhar,name:"Attender Aadhar"},{file:L.attenderPan,name:"Attender PAN"}];for(const{file:Ne,name:rt}of ze)if(!H(Ne)){Te({title:"File Validation Error",description:`${rt} file is too large. Please select a file under 5MB.`,variant:"destructive"});return}console.log(" All validations passed. Proceeding with patient update..."),console.log(" Starting file uploads..."),console.log(" Current editDocuments state:",{photo:L.photo?{name:L.photo.name,size:L.photo.size}:null,patientAadhar:L.patientAadhar?{name:L.patientAadhar.name,size:L.patientAadhar.size}:null,patientPan:L.patientPan?{name:L.patientPan.name,size:L.patientPan.size}:null,attenderAadhar:L.attenderAadhar?{name:L.attenderAadhar.name,size:L.attenderAadhar.size}:null,attenderPan:L.attenderPan?{name:L.attenderPan.name,size:L.attenderPan.size}:null});let be=C.photo,Me=C.patientAadhar,Je=C.patientPan,vt=C.attenderAadhar,Le=C.attenderPan;if(L.photo)try{console.log(" Uploading photo:",L.photo.name),console.log(" Patient ID for upload:",C.id),console.log(" Patient originalId for upload:",C.originalId),console.log(" Patient object keys:",Object.keys(C)),console.log(" Full patient object:",{id:C.id,originalId:C.originalId,name:C.name});const Ne=C.id;if(console.log(" Using patient ID for folder:",Ne),console.log(" Patient ID type:",typeof Ne),console.log(" Patient ID string conversion:",Ne.toString()),!Ne||Ne==="temp"||Ne.toString().trim()==="")throw console.error(" Invalid patient ID detected:",Ne),new Error("Cannot upload photo: Invalid patient ID. Please refresh the page and try again.");if(console.log(" About to call uploadPatientFile with:"),console.log("  - file:",L.photo.name),console.log("  - patientId:",Ne.toString()),console.log("  - fieldName: photo"),be=await pd(L.photo,Ne.toString(),"photo"),console.log(" Photo uploaded successfully:",be),be&&be.includes("/temp/"))throw console.error(" Photo was saved to temp folder - patient ID issue detected!"),console.error(" Patient ID used:",Ne),console.error(" Photo path:",be),new Error("Photo upload failed: saved to temp folder instead of patient folder. Please check patient ID.");be&&!be.startsWith("Photos/")&&(console.warn(" Photo path does not start with Photos/, correcting format..."),console.warn(" Original path:",be),be.startsWith("/")?be=`Photos${be}`:be=`Photos/${be}`,console.log(" Corrected photo path:",be));const rt=aa(be);if(console.log(" Testing photo URL construction:",rt),console.log(" Forcing immediate photo refresh after upload..."),ge(Be=>Be+1),C.photo&&!C.photo.startsWith("data:")&&C.photo!==be)try{console.log(" Attempting to delete old photo:",C.photo),await fd(C.photo),console.log(" Old photo deleted successfully")}catch(Be){console.log("Could not delete old photo:",Be)}}catch(Ne){throw console.error(" Photo upload failed:",Ne),Te({title:"Photo Upload Failed",description:`Failed to upload photo: ${Ne.message}`,variant:"destructive"}),new Error(`Photo upload failed: ${Ne.message}`)}if(L.patientAadhar)try{if(console.log(" Uploading Patient Aadhar:",L.patientAadhar.name),Me=await pd(L.patientAadhar,C.id,"patientAadhar"),console.log(" Patient Aadhar uploaded successfully:",Me),C.patientAadhar&&!C.patientAadhar.startsWith("data:")&&C.patientAadhar!==Me)try{await fd(C.patientAadhar)}catch(Ne){console.log("Could not delete old patientAadhar:",Ne)}}catch(Ne){throw console.error(" Patient Aadhar upload failed:",Ne),new Error(`Patient Aadhar upload failed: ${Ne.message}`)}if(L.patientPan&&(Je=await pd(L.patientPan,C.id,"patientPan"),C.patientPan&&!C.patientPan.startsWith("data:")&&C.patientPan!==Je))try{await fd(C.patientPan)}catch(Ne){console.log("Could not delete old patientPan:",Ne)}if(L.attenderAadhar&&(vt=await pd(L.attenderAadhar,C.id,"attenderAadhar"),C.attenderAadhar&&!C.attenderAadhar.startsWith("data:")&&C.attenderAadhar!==vt))try{await fd(C.attenderAadhar)}catch(Ne){console.log("Could not delete old attenderAadhar:",Ne)}if(L.attenderPan&&(Le=await pd(L.attenderPan,C.id,"attenderPan"),C.attenderPan&&!C.attenderPan.startsWith("data:")&&C.attenderPan!==Le))try{await fd(C.attenderPan)}catch(Ne){console.log("Could not delete old attenderPan:",Ne)}const Ae={name:C.name||"",age:C.age||0,gender:C.gender||"",phone:C.phone||"",email:C.email||"",address:C.address||"",emergencyContact:C.emergencyContact||"",medicalHistory:C.medicalHistory||"",status:C.status||"Active",attenderName:C.attenderName||"",attenderPhone:C.attenderPhone||"",attenderRelationship:C.attenderRelationship||"",photo:be||"",patientAadhar:Me||"",patientPan:Je||"",attenderAadhar:vt||"",attenderPan:Le||"",fees:C.fees||0,bloodTest:C.bloodTest||0,pickupCharge:C.pickupCharge||0,totalAmount:C.totalAmount||0,payAmount:C.payAmount||0,balance:C.balance||0,paymentType:C.paymentType||"",fatherName:C.fatherName||"",motherName:C.motherName||"",dateOfBirth:ju(C.dateOfBirth),marriageStatus:C.marriageStatus||"",employeeStatus:C.employeeStatus||"",admissionDate:ju(C.admissionDate)};if(console.log(" Date values being saved:"),console.log("  - Raw admissionDate:",C.admissionDate),console.log("  - Raw dateOfBirth:",C.dateOfBirth),console.log("  - Formatted admissionDate for backend:",ju(C.admissionDate)),console.log("  - Formatted dateOfBirth for backend:",ju(C.dateOfBirth)),C.admissionDate){const Ne=new Date(C.admissionDate);console.log("  - Admission Date Details:"),console.log("    * Year:",Ne.getFullYear()),console.log("    * Month:",Ne.getMonth()+1),console.log("    * Day:",Ne.getDate()),console.log("    * ISO String:",Ne.toISOString()),console.log("    * Local String:",Ne.toString())}if(console.log("Submitting patient data:",Ae),console.log(" Final file paths being saved:"),console.log("  - Photo:",be),console.log("  - Patient Aadhar:",Me),console.log("  - Patient PAN:",Je),console.log("  - Attender Aadhar:",vt),console.log("  - Attender PAN:",Le),be&&be!==C.photo){console.log(" Photo path changed, verifying new path:",be),console.log(" Previous photo path:",C.photo);const Ne=aa(be);if(console.log(" Verification URL:",Ne),!Ne||Ne==="")throw console.error(" Photo URL construction failed for path:",be),new Error("Photo path validation failed - unable to construct valid URL")}console.log(" Saving patient data to database..."),await gt.updatePatient(C.originalId,Ae),console.log(" Patient data successfully updated in database"),be&&(console.log(" Final verification - photo path saved:",be),console.log(" Final verification - photo URL:",aa(be)));const Ee={...C,photo:be,patientAadhar:Me,patientPan:Je,attenderAadhar:vt,attenderPan:Le};console.log(" Updated patient data for state update:",{id:Ee.id,photo:be,patientAadhar:Me,patientPan:Je,attenderAadhar:vt,attenderPan:Le});const Se=n.map(Ne=>{if(Ne.id===C.id){console.log(` Updating patient ${Ne.id} in local state with new file paths`);const rt={...Ee,photo:be||""};return console.log(` Updated patient photo path: ${rt.photo}`),rt}return Ne});console.log(" Updated patients array length:",Se.length),l(Se),console.log(" Local state updated with new file paths"),console.log(" Triggering additional photo refresh for table..."),ge(Ne=>Ne+1),console.log(" Forcing component re-render...");const B=Se.find(Ne=>Ne.id===C.id);if(B&&console.log(" Verified updated patient in state:",{id:B.id,name:B.name,photo:B.photo,patientAadhar:B.patientAadhar,patientPan:B.patientPan,attenderAadhar:B.attenderAadhar,attenderPan:B.attenderPan}),await z(Ee),console.log(" Setting editPatient to null to close form"),k(null),console.log(" Resetting editDocuments state"),he({photo:null,patientAadhar:null,patientPan:null,attenderAadhar:null,attenderPan:null}),Object.values(ne).forEach(Ne=>{Ne.startsWith("blob:")&&URL.revokeObjectURL(Ne)}),Q({}),console.log(" Triggering photo refresh..."),ge(Ne=>Ne+1),be&&be!==C.photo){console.log(" Photo changed, forcing immediate table refresh..."),console.log(" New photo path in state update:",be);const Ne=aa(be);console.log(" Test photo URL for immediate display:",Ne)}if(console.log(" Forcing image cache refresh..."),document.querySelectorAll("img").forEach(Ne=>{if(Ne.src&&Ne.src.includes("localhost:4000")){const rt=new URL(Ne.src.split("?")[0]);rt.searchParams.set("t",Date.now().toString()),rt.searchParams.set("r",Math.random().toString(36).substring(7)),rt.searchParams.set("updated","true"),rt.searchParams.set("cache_bust",Date.now().toString()),Ne.src=rt.toString();const Be=Ne.src;Ne.src="",setTimeout(()=>{Ne.src=Be},100)}}),"caches"in window)try{const Ne=await caches.keys();await Promise.all(Ne.map(rt=>caches.delete(rt))),console.log(" Browser caches cleared")}catch(Ne){console.log("Could not clear browser cache:",Ne)}console.log(" Reloading patient data from server..."),await O(),setTimeout(async()=>{console.log(" Final refresh to ensure photo appears..."),ge(rt=>rt+1),document.querySelectorAll(`img[alt*="${Ee.name}"]`).forEach(rt=>{const Be=rt;if(Be.src&&Be.src.includes("localhost:4000")){const We=new URL(Be.src.split("?")[0]);We.searchParams.set("final_refresh",Date.now().toString()),We.searchParams.set("patient_updated",Ee.id),Be.src=We.toString()}}),await O()},1e3),setTimeout(()=>{console.log(" Ultimate fallback refresh..."),ge(Ne=>Ne+1)},2e3),console.log(" Edit form closed and state reset"),Te({title:"Patient Updated",description:`Patient information has been successfully updated.${be&&be!==C.photo?" Profile photo updated.":""}`})}catch(de){console.error("Error updating patient:",de),Te({title:"Error",description:"Failed to update patient. Please try again.",variant:"destructive"})}},z=async b=>{try{const S=Number(b.fees||0),D=Number(b.bloodTest||0),R=Number(b.pickupCharge||0),F=S+D+R,I=Number(b.payAmount||0),ce=F-I;try{const ve=(await gt.getAllPatientPayments()).filter(_e=>_e.patient_id==b.id||_e.patientId==b.id);if(ve.length===0&&(F>0||I>0)){const _e={patient_id:b.id,patient_name:b.name,monthly_fees:S,other_fees:D+R,carry_forward:0,paid_amount:I,total_balance:ce,payment_status:ce<=0?"Paid":I>0?"Partial":"Pending",payment_type:b.paymentType||"Cash",payment_date:b.admissionDate||new Date().toISOString().split("T")[0],description:`Payment record for ${b.name}`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await gt.addPatientPayment(_e),console.log("Synced payment data to database for patient:",b.name)}else if(ve.length>0){const _e=ve[0],ze={patient_name:b.name,monthly_fees:S,other_fees:D+R,paid_amount:I,total_balance:ce,payment_status:ce<=0?"Paid":I>0?"Partial":"Pending",payment_type:b.paymentType||"Cash",updated_at:new Date().toISOString()};await gt.updatePatientPayment(_e.id,ze),console.log("Updated payment data in database for patient:",b.name)}}catch(de){console.warn("Failed to sync payment data to database:",de);const ve=JSON.parse(localStorage.getItem("patientPaymentRecords")||"[]"),_e=ve.findIndex(ze=>ze.patientId===b.id);if(_e===-1&&I>0){const ze={id:`${b.id}-${Date.now()}`,patientId:b.id,date:b.admissionDate||new Date().toISOString().split("T")[0],amount:I,comment:`Payment record for ${b.name}`,paymentMode:b.paymentType||"Cash",balanceRemaining:ce,createdBy:"System",createdAt:new Date().toISOString()};ve.push(ze),localStorage.setItem("patientPaymentRecords",JSON.stringify(ve))}else _e>=0&&(ve[_e]={...ve[_e],amount:I,balanceRemaining:ce,paymentMode:b.paymentType||"Cash",createdAt:new Date().toISOString()},localStorage.setItem("patientPaymentRecords",JSON.stringify(ve)))}}catch(S){console.error("Error syncing payment data:",S)}},te=b=>{T(b),X(!0)},se=async()=>{if(A)try{await gt.deletePatient(A.originalId);const b=n.filter(S=>S.id!==A.id);l(b),X(!1),T(null),Te({title:"Patient Deleted",description:`${A.name} and all related records (attendance, history, payments) have been permanently deleted from the database.`})}catch(b){console.error("Error deleting patient:",b),Te({title:"Error",description:"Failed to delete patient and related records. Please try again.",variant:"destructive"})}},J=b=>({Active:"bg-success text-success-foreground",Inactive:"bg-muted text-muted-foreground",Critical:"bg-destructive text-destructive-foreground",Discharged:"bg-warning text-warning-foreground"})[b]||"bg-muted text-muted-foreground",je=()=>{const S=[["S No","Patient ID","Name","Age","Gender","Phone","Email","Address","Emergency Contact","Medical History","Admission Date","Status","Attender Name","Attender Phone","Photo","Fees","Blood Test","Pickup Charge","Total Amount","Pay Amount","Balance","Payment Type","Father's Name","Mother's Name","Attender Relationship","Date of Birth","Marriage Status","Employee Status"].join(","),...i.map((I,ce)=>[ce+1,I.id,I.name,I.age,I.gender,I.phone,I.email,I.address,I.emergencyContact,I.medicalHistory,I.admissionDate&&I.admissionDate.getFullYear()>1900&&!isNaN(I.admissionDate.getTime())?wt(I.admissionDate,"dd/MM/yyyy"):"Not Set",I.status,I.attenderName,I.attenderPhone,I.photo,I.fees,I.bloodTest,I.pickupCharge,I.totalAmount,I.payAmount,I.balance,I.paymentType,I.fatherName,I.motherName,I.attenderRelationship,I.dateOfBirth&&!isNaN(new Date(I.dateOfBirth).getTime())?wt(new Date(I.dateOfBirth),"dd/MM/yyyy"):"",I.marriageStatus,I.employeeStatus].map(de=>typeof de=="string"?'"'+de.replace(/"/g,'""')+'"':de).join(","))].join(`
`),D=new Blob([S],{type:"text/csv"}),R=window.URL.createObjectURL(D),F=document.createElement("a");F.href=R,F.download="patients-list.csv",F.click(),window.URL.revokeObjectURL(R)};return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Patient Management"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`All Patients (${s[(y||1)-1]} ${v})`,onClick:()=>j(!0)}),e.jsxs(P,{onClick:je,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>t("/patients/add"),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Patient"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Patients"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:i.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Patients"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:i.filter(b=>b.status==="Active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In treatment"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Critical Cases"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:i.filter(b=>b.status==="Critical").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Urgent care"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"})}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search patients by name, ID, or phone...",value:u,onChange:b=>x(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:p,onValueChange:h,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"All",children:"All Status"}),e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"}),e.jsx(Pe,{value:"Critical",children:"Critical"}),e.jsx(Pe,{value:"Discharged",children:"Discharged"})]})]})})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Rt,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Patients List (",i.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Patients (",i.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Patient ID"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Age"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Gender"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Phone"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Admission Date"}),e.jsx("span",{className:"sm:hidden",children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:i.slice((ie-1)*V,ie*V).map((b,S)=>{var D;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ie-1)*V+S+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx(El,{photoPath:b.photo,alt:b.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover mx-auto border bg-muted"},`${b.id}-${b.photo}-${oe}`)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("button",{onClick:()=>{try{const R=b.id;console.log(" Button clicked for patient details:",{patientId:b.id,originalId:b.originalId,name:b.name,patientIdForRoute:R,routeWillBe:`/patients/details/${R}`}),console.log(" Attempting navigation to:",`/patients/details/${R}`),t(`/patients/details/${R}`),console.log(" Navigation call completed")}catch(R){console.error(" Navigation error:",R)}},className:"text-primary font-medium hover:underline hover:text-blue-700 hover:bg-blue-50 transition-all duration-200 p-1 h-auto text-xs sm:text-sm cursor-pointer rounded-md inline-flex items-center gap-1",title:`View full details for ${b.name} (Click to open comprehensive patient information)`,children:["",(D=b.id)!=null&&D.startsWith("P")?b.id:`P${String(b.originalId||b.id).padStart(4,"0")}`]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-[100px] sm:max-w-[120px] truncate",children:b.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b.age}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b.gender}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b.phone}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b.admissionDate&&b.admissionDate instanceof Date&&!isNaN(b.admissionDate.getTime())&&b.admissionDate.getFullYear()>=1900&&b.admissionDate.getFullYear()<=2100?wt(b.admissionDate,"dd/MM/yyyy"):e.jsx("span",{className:"text-gray-400 text-xs",children:"Not Set"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsx(kt,{className:`${J(b.status)} text-xs`,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>E(b),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Patient",children:e.jsx(vs,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>ue(b),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Patient",children:e.jsx(Ds,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>te(b),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Patient",children:e.jsx(mt,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},b.id)})})]}),i.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white",children:[e.jsx(Rt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No patients found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No patients match your search criteria. Try adjusting your filters."})]})]}),i.length>V&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Page ",ie," of ",Math.ceil(i.length/V),"(",i.length," total patients)"]}),e.jsxs("span",{className:"sm:hidden",children:[ie," / ",Math.ceil(i.length/V)]})]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>ke(b=>Math.max(1,b-1)),disabled:ie===1,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,Math.ceil(i.length/V))},(b,S)=>{const D=Math.ceil(i.length/V);let R;return D<=5||ie<=3?R=S+1:ie>=D-2?R=D-4+S:R=ie-2+S,e.jsx(P,{variant:ie===R?"default":"outline",size:"sm",onClick:()=>ke(R),className:`w-8 h-8 p-0 text-xs ${ie===R?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-white hover:bg-gray-50 text-gray-600 border-gray-300"}`,children:R},R)})}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>ke(b=>Math.min(Math.ceil(i.length/V),b+1)),disabled:ie===Math.ceil(i.length/V),className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"})]})]})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>E(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(El,{photoPath:N.photo,alt:N.name,className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg"},`view-${N.id}-${N.photo}-${oe}`),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx(kt,{className:`${J(N.status)} border-2 border-white shadow-sm text-xs`,children:N.status.charAt(0).toUpperCase()+N.status.slice(1)})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:N.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Patient ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:N.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>E(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:N.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-bold text-xs sm:text-sm",children:N.age})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Age & Gender"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:[N.age," years  ",N.gender]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Date of Birth"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:N.dateOfBirth&&!isNaN(new Date(N.dateOfBirth).getTime())?wt(new Date(N.dateOfBirth),"dd-MM-yyyy"):"Not provided"})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-green-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-xs sm:text-sm",children:""})}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Phone Number"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:N.phone})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-blue-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Email Address"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:N.email||"Not provided"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-orange-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Emergency Contact"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:N.emergencyContact})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-gray-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Address"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 leading-relaxed",children:N.address})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-red-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(st,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-red-600"})}),"Medical Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-red-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(ae,{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Admission Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:N.admissionDate&&!isNaN(N.admissionDate.getTime())?wt(N.admissionDate,"dd-MM-yyyy"):"Invalid Date"})]})]})}),N.medicalHistory&&e.jsx("div",{className:"sm:col-span-2 bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-purple-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Medical History"}),e.jsx("p",{className:"text-sm text-gray-900 leading-relaxed mt-1",children:N.medicalHistory})]})]})})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 md:mt-8 p-3 sm:p-4 md:p-5 lg:p-6 rounded-lg sm:rounded-xl md:rounded-2xl bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 backdrop-blur-sm border border-amber-200/50 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4 md:mb-6",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-sm sm:text-lg md:text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"Payment Information"}),e.jsx("p",{className:"text-xs sm:text-sm text-amber-600/70 mt-1",children:"Financial details and billing information"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-amber-200/30 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-blue-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Consultation Fees"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 mt-1",children:["",N.fees||0]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-amber-200/30 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-red-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Blood Test"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 mt-1",children:["",N.bloodTest||0]})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-amber-200/30 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Pickup Charge"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 mt-1",children:["",N.pickupCharge||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-indigo-100 backdrop-blur-sm rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-purple-200/50 shadow-md",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Total Amount"}),e.jsxs("p",{className:"text-sm sm:text-lg md:text-xl font-bold text-purple-700 mt-1",children:["",N.totalAmount||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-100 to-emerald-100 backdrop-blur-sm rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-green-200/50 shadow-md",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Amount Paid"}),e.jsxs("p",{className:"text-sm sm:text-lg md:text-xl font-bold text-green-700 mt-1",children:["",N.payAmount||0]})]})]})}),e.jsx("div",{className:`backdrop-blur-sm rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border shadow-md ${(N.balance||0)>0?"bg-gradient-to-br from-red-100 to-rose-100 border-red-200/50":"bg-gradient-to-br from-gray-100 to-slate-100 border-gray-200/50"}`,children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center flex-shrink-0 ${(N.balance||0)>0?"bg-red-500":"bg-gray-500"}`,children:e.jsx("span",{className:"text-white text-xs sm:text-sm md:text-lg",children:(N.balance||0)>0?"":""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:`text-xs font-medium uppercase tracking-wide ${(N.balance||0)>0?"text-red-600":"text-gray-600"}`,children:(N.balance||0)>0?"Outstanding Balance":"Balance"}),e.jsxs("p",{className:`text-sm sm:text-lg md:text-xl font-bold mt-1 ${(N.balance||0)>0?"text-red-700":"text-gray-700"}`,children:["",N.balance||0]})]})]})})]}),N.paymentType&&e.jsx("div",{className:"mt-3 sm:mt-4 md:mt-6 bg-white/70 backdrop-blur-sm rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 border border-amber-200/30",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-indigo-600 text-xs sm:text-sm md:text-lg",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ae,{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Payment Method"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:N.paymentType})]})]})})]}),"              ",N.medicalHistory&&e.jsxs("div",{className:"col-span-1 sm:col-span-2 space-y-2",children:[e.jsx(ae,{className:"font-medium text-foreground text-sm",children:"Medical History"}),e.jsx("div",{className:"p-2 sm:p-3 bg-muted rounded-md border",children:e.jsx("p",{className:"text-sm",children:N.medicalHistory})})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 md:mt-8 p-3 sm:p-4 md:p-5 lg:p-6 rounded-lg sm:rounded-xl md:rounded-2xl bg-gradient-to-br from-slate-50 via-gray-50 to-zinc-50 backdrop-blur-sm border border-slate-200/50 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4 md:mb-6",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-gradient-to-br from-slate-500 to-gray-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-sm sm:text-lg md:text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold bg-gradient-to-r from-slate-600 to-gray-700 bg-clip-text text-transparent",children:"Document Information"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-600/70 mt-1",children:"Identity documents and verification files"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 border border-slate-200/30 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3 md:mb-4",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 text-xs sm:text-sm",children:""})}),e.jsx("h4",{className:"text-sm sm:text-base md:text-lg font-semibold text-blue-700",children:"Patient Documents"})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3 md:space-y-4",children:[N.patientAadhar&&N.patientAadhar.trim()!==""?e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-2 sm:p-3 md:p-4 border border-blue-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-blue-600 text-xs sm:text-sm",children:""}),e.jsx(ae,{className:"text-xs sm:text-sm font-medium text-blue-700",children:"Aadhar Card"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:aa(N.patientAadhar),alt:"Patient Aadhar Card",className:"w-full h-24 sm:h-32 md:h-40 object-cover rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 shadow-md hover:shadow-lg",onClick:()=>window.open(aa(N.patientAadhar),"_blank"),onError:b=>{var D,R;console.error(" Failed to load Patient Aadhar image:",N.patientAadhar),console.error(" Constructed URL:",aa(N.patientAadhar));const S=b.currentTarget;if(S.style.display="none",!((D=S.parentNode)!=null&&D.querySelector(".error-message"))){const F=document.createElement("div");F.className="error-message p-4 bg-red-50 border border-red-200 rounded-lg text-center",F.innerHTML=`<div class="text-red-500 text-sm font-medium mb-2"> Failed to load image</div><div class="text-xs text-red-400 font-mono">${N.patientAadhar}</div>`,(R=S.parentNode)==null||R.appendChild(F)}},onLoad:()=>{console.log(" Patient Aadhar loaded successfully:",N.patientAadhar)}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 rounded-lg transition-all duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 text-sm font-medium bg-black/50 px-3 py-1 rounded-full transition-all duration-200",children:"Click to open"})})]})]}):null,N.patientPan&&N.patientPan.trim()!==""?e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-green-600 text-sm",children:""}),e.jsx(ae,{className:"text-sm font-medium text-green-700",children:"PAN Card"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:aa(N.patientPan),alt:"Patient PAN Card",className:"w-full h-40 object-cover rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 shadow-md hover:shadow-lg",onClick:()=>window.open(aa(N.patientPan),"_blank"),onError:b=>{var D,R;console.error(" Failed to load Patient PAN image:",N.patientPan),console.error(" Constructed URL:",aa(N.patientPan));const S=b.currentTarget;if(S.style.display="none",!((D=S.parentNode)!=null&&D.querySelector(".error-message"))){const F=document.createElement("div");F.className="error-message p-4 bg-red-50 border border-red-200 rounded-lg text-center",F.innerHTML=`<div class="text-red-500 text-sm font-medium mb-2"> Failed to load image</div><div class="text-xs text-red-400 font-mono">${N.patientPan}</div>`,(R=S.parentNode)==null||R.appendChild(F)}},onLoad:()=>{console.log(" Patient PAN loaded successfully:",N.patientPan)}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 rounded-lg transition-all duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 text-sm font-medium bg-black/50 px-3 py-1 rounded-full transition-all duration-200",children:"Click to open"})})]})]}):null,!N.patientAadhar&&!N.patientPan&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:""}),e.jsx("p",{className:"text-sm",children:"No patient documents uploaded"})]})]})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl p-5 border border-slate-200/30 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 text-sm",children:""})}),e.jsx("h4",{className:"text-lg font-semibold text-purple-700",children:"Attender Documents"})]}),e.jsxs("div",{className:"space-y-4",children:[N.attenderAadhar&&N.attenderAadhar.trim()!==""?e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg p-4 border border-purple-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-purple-600 text-sm",children:""}),e.jsx(ae,{className:"text-sm font-medium text-purple-700",children:"Aadhar Card"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:aa(N.attenderAadhar),alt:"Attender Aadhar Card",className:"w-full h-40 object-cover rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 shadow-md hover:shadow-lg",onClick:()=>window.open(aa(N.attenderAadhar),"_blank"),onError:b=>{var D,R;console.error(" Failed to load Attender Aadhar image:",N.attenderAadhar),console.error(" Constructed URL:",aa(N.attenderAadhar));const S=b.currentTarget;if(S.style.display="none",!((D=S.parentNode)!=null&&D.querySelector(".error-message"))){const F=document.createElement("div");F.className="error-message p-4 bg-red-50 border border-red-200 rounded-lg text-center",F.innerHTML=`<div class="text-red-500 text-sm font-medium mb-2"> Failed to load image</div><div class="text-xs text-red-400 font-mono">${N.attenderAadhar}</div>`,(R=S.parentNode)==null||R.appendChild(F)}},onLoad:()=>{console.log(" Attender Aadhar loaded successfully:",N.attenderAadhar)}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 rounded-lg transition-all duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 text-sm font-medium bg-black/50 px-3 py-1 rounded-full transition-all duration-200",children:"Click to open"})})]})]}):null,N.attenderPan&&N.attenderPan.trim()!==""?e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-4 border border-orange-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-orange-600 text-sm",children:""}),e.jsx(ae,{className:"text-sm font-medium text-orange-700",children:"PAN Card"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:aa(N.attenderPan),alt:"Attender PAN Card",className:"w-full h-40 object-cover rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 shadow-md hover:shadow-lg",onClick:()=>window.open(aa(N.attenderPan),"_blank"),onError:b=>{var D,R;console.error(" Failed to load Attender PAN image:",N.attenderPan),console.error(" Constructed URL:",aa(N.attenderPan));const S=b.currentTarget;if(S.style.display="none",!((D=S.parentNode)!=null&&D.querySelector(".error-message"))){const F=document.createElement("div");F.className="error-message p-4 bg-red-50 border border-red-200 rounded-lg text-center",F.innerHTML=`<div class="text-red-500 text-sm font-medium mb-2"> Failed to load image</div><div class="text-xs text-red-400 font-mono">${N.attenderPan}</div>`,(R=S.parentNode)==null||R.appendChild(F)}},onLoad:()=>{console.log(" Attender PAN loaded successfully:",N.attenderPan)}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 rounded-lg transition-all duration-200 flex items-center justify-center",children:e.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 text-sm font-medium bg-black/50 px-3 py-1 rounded-full transition-all duration-200",children:"Click to open"})})]})]}):null,!N.attenderAadhar&&!N.attenderPan&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:""}),e.jsx("p",{className:"text-sm",children:"No attender documents uploaded"})]})]})]})]})]})]})})]})}),C&&e.jsx($t,{open:!!C,onOpenChange:()=>k(null),children:e.jsxs(Ot,{className:"editpopup form dialog-content sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form dialog-header relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"editpopup form dialog-header icon-container p-2 bg-blue-100 rounded-lg",children:e.jsx(Ds,{className:"editpopup form dialog-header icon h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs(Bt,{className:"editpopup form dialog-title text-xl font-bold text-gray-900",children:["Edit Patient - ",C.id]}),e.jsx(Vt,{className:"editpopup form dialog-description text-gray-600 mt-1",children:"Update patient information and medical details"})]})]})}),e.jsxs("form",{onSubmit:b=>{b.preventDefault(),U()},className:"editpopup form form-container space-y-6 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"editpopup form form-section space-y-4",children:[e.jsxs("h3",{className:"editpopup form form-section-title text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"editpopup form form-section-icon personal w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-4 w-4 text-blue-600"})}),"Personal Information"]}),e.jsxs("div",{className:"editpopup form form-grid grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"editpopup form form-field space-y-2",children:[e.jsxs(ae,{htmlFor:"edit-name",className:"editpopup form form-label text-sm font-medium text-gray-700",children:["Patient Name ",e.jsx("span",{className:"editpopup form form-required text-destructive",children:"*"})]}),e.jsx(Ve,{id:"edit-name",value:C.name,onChange:b=>k({...C,name:b.target.value}),placeholder:"Enter patient name",className:"editpopup form form-input mt-1 border-primary/30 focus:border-primary",required:!0})]}),e.jsxs("div",{className:"editpopup form form-field space-y-2",children:[e.jsxs(ae,{htmlFor:"edit-gender",className:"editpopup form form-label text-sm font-medium text-gray-700",children:["Gender ",e.jsx("span",{className:"editpopup form form-required text-destructive",children:"*"})]}),e.jsxs(At,{value:C.gender,onValueChange:b=>k({...C,gender:b}),children:[e.jsx(Et,{className:"editpopup form form-select-trigger mt-1 border-primary/30 focus:border-primary",children:e.jsx(_t,{placeholder:"Select gender"})}),e.jsxs(Dt,{className:"editpopup form form-select-content bg-background border shadow-lg z-50",children:[e.jsx(Pe,{value:"Male",children:"Male"}),e.jsx(Pe,{value:"Female",children:"Female"}),e.jsx(Pe,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-status",className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(At,{value:C.status,onValueChange:b=>k({...C,status:b}),children:[e.jsx(Et,{className:"mt-1 border-primary/30 focus:border-primary",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{className:"bg-background border shadow-lg z-50",children:[e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"}),e.jsx(Pe,{value:"Critical",children:"Critical"}),e.jsx(Pe,{value:"Discharged",children:"Discharged"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-dob",className:"text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx(Ve,{id:"edit-dob",type:"date",value:C&&rj(C.dateOfBirth)||"",onChange:b=>{if(C){const S=b.target.value?nj(b.target.value):null,D=RR(S);k({...C,dateOfBirth:S,age:D})}},className:"mt-1 border-primary/30 focus:border-primary"})]})]})]}),e.jsxs("div",{className:"editpopup form form-section space-y-4",children:[e.jsxs("h3",{className:"editpopup form form-section-title text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"editpopup form form-section-icon contact w-6 h-6 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Ps,{className:"h-4 w-4 text-green-600"})}),"Contact Information"]}),e.jsxs("div",{className:"editpopup form form-grid grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"edit-phone",className:"text-sm font-medium text-gray-700",children:["Phone Number ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(Ve,{id:"edit-phone",value:C.phone,onChange:b=>{const S=b.target.value.replace(/\D/g,"");S.length<=10&&k({...C,phone:S})},placeholder:"10-digit mobile number",className:"mt-1",maxLength:10,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx(Ve,{id:"edit-email",type:"email",value:C.email,onChange:b=>k({...C,email:b.target.value}),placeholder:"Enter email address",className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"edit-emergency",className:"text-sm font-medium text-gray-700",children:["Emergency Contact ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(Ve,{id:"edit-emergency",value:C.emergencyContact,onChange:b=>{const S=b.target.value.replace(/\D/g,"");S.length<=10&&k({...C,emergencyContact:S})},placeholder:"10-digit emergency contact number",className:"mt-1 border-primary/30 focus:border-primary",maxLength:10,required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"edit-address",className:"text-sm font-medium text-gray-700",children:["Address ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(As,{id:"edit-address",value:C.address,onChange:b=>k({...C,address:b.target.value}),placeholder:"Enter complete address",className:"mt-1 border-primary/30 focus:border-primary",rows:3,required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(uo,{className:"h-4 w-4 text-purple-600"})}),"Family Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-father-name",className:"text-sm font-medium text-gray-700",children:"Father's Name"}),e.jsx(Ve,{id:"edit-father-name",value:C.fatherName||"",onChange:b=>k({...C,fatherName:b.target.value}),placeholder:"Enter father's name",className:"mt-1 border-primary/30 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-mother-name",className:"text-sm font-medium text-gray-700",children:"Mother's Name"}),e.jsx(Ve,{id:"edit-mother-name",value:C.motherName||"",onChange:b=>k({...C,motherName:b.target.value}),placeholder:"Enter mother's name",className:"mt-1 border-primary/30 focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-marriage-status",className:"text-sm font-medium text-gray-700",children:"Marriage Status"}),e.jsxs(At,{value:C.marriageStatus||"",onValueChange:b=>k({...C,marriageStatus:b}),children:[e.jsx(Et,{className:"mt-1 border-primary/30 focus:border-primary",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{className:"bg-background border shadow-lg z-50",children:[e.jsx(Pe,{value:"Single",children:"Single"}),e.jsx(Pe,{value:"Married",children:"Married"}),e.jsx(Pe,{value:"Divorced",children:"Divorced"}),e.jsx(Pe,{value:"Widowed",children:"Widowed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-employee-status",className:"text-sm font-medium text-gray-700",children:"Employee Status"}),e.jsxs(At,{value:C.employeeStatus||"",onValueChange:b=>k({...C,employeeStatus:b}),children:[e.jsx(Et,{className:"mt-1 border-primary/30 focus:border-primary",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{className:"bg-background border shadow-lg z-50",children:[e.jsx(Pe,{value:"Employee",children:"Employee"}),e.jsx(Pe,{value:"Non-Employee",children:"Non-Employee"}),e.jsx(Pe,{value:"Retired",children:"Retired"}),e.jsx(Pe,{value:"Student",children:"Student"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Ns,{className:"h-4 w-4 text-orange-600"})}),"Attender Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-attender-name",className:"text-sm font-medium text-gray-700",children:"Attender Name"}),e.jsx(Ve,{id:"edit-attender-name",value:C.attenderName,onChange:b=>k({...C,attenderName:b.target.value}),placeholder:"Enter attender name",className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-attender-phone",className:"text-sm font-medium text-gray-700",children:"Attender Phone"}),e.jsx(Ve,{id:"edit-attender-phone",value:C.attenderPhone,onChange:b=>{const S=b.target.value.replace(/\D/g,"");S.length<=10&&k({...C,attenderPhone:S})},placeholder:"10-digit attender phone number",className:"mt-1",maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-attender-relationship",className:"text-sm font-medium text-gray-700",children:"Attender Relationship"}),e.jsx(Ve,{id:"edit-attender-relationship",value:C.attenderRelationship||"",onChange:b=>k({...C,attenderRelationship:b.target.value}),placeholder:"e.g., Father, Mother, Spouse",className:"mt-1"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-2 col-span-1 sm:col-span-2 flex justify-center",children:e.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full overflow-hidden bg-muted border",children:[(()=>{if(L.photo){const b=me(L.photo,"main-photo-preview");return e.jsx("img",{src:b,alt:`${C.name} - New Photo Preview`,className:"w-full h-full object-cover",onError:S=>{S.currentTarget.style.display="none",S.currentTarget.nextElementSibling.style.display="flex"}})}else if(C.photo&&C.photo.trim()!=="")return e.jsx("img",{src:C.photo.startsWith("data:")?C.photo:aa(C.photo),alt:C.name,className:"w-full h-full object-cover",onError:b=>{b.currentTarget.style.display="none",b.currentTarget.nextElementSibling.style.display="flex"}});return null})(),e.jsx("div",{className:`w-full h-full flex items-center justify-center text-muted-foreground text-2xl font-medium ${L.photo||C.photo&&C.photo.trim()!==""?"hidden":"flex"}`,children:C.name.charAt(0).toUpperCase()})]})}),e.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 sm:p-6 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-2 rounded-lg",children:e.jsx(tc,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile Photo"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update patient profile picture"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{id:"edit-photo-upload",type:"file",accept:"image/*",onChange:b=>{var S;return W("photo",((S=b.target.files)==null?void 0:S[0])||null)},className:"hidden"}),e.jsxs(ae,{htmlFor:"edit-photo-upload",className:`flex items-center space-x-2 cursor-pointer px-4 py-2 rounded-md border transition-colors text-sm shadow-sm ${L.photo?"bg-green-50 hover:bg-green-100 border-green-300 text-green-700":"bg-white hover:bg-gray-50 border-gray-300"}`,children:[e.jsx(rn,{className:"w-4 h-4"}),e.jsx("span",{children:L.photo?` ${L.photo.name}`:"Choose new photo"})]}),L.photo&&e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>W("photo",null),className:"bg-white hover:bg-gray-50",children:"Remove"})]})}),L.photo&&e.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-green-700 flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"New photo selected - will be saved when you update the patient"]})})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-green-50 to-emerald-50 p-4 sm:p-6 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white p-2 rounded-lg",children:e.jsx(Pt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Important Dates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Admission and birth date information"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"edit-admission-date",className:"text-sm font-medium text-gray-700",children:["Admission Date",e.jsx("span",{className:"text-red-500",children:" *"})]}),e.jsx(Ve,{id:"edit-admission-date",type:"date",required:!0,value:C&&rj(C.admissionDate)||"",onChange:b=>{if(C){const S=b.target.value?nj(b.target.value):null;k({...C,admissionDate:S})}},className:"bg-white border-gray-300"})]})})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-purple-50 to-violet-50 p-4 sm:p-6 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white p-2 rounded-lg",children:e.jsx(Rt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Extended Family & Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Parents details and employment status"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-father-name",className:"text-sm font-medium text-gray-700",children:"Father's Name"}),e.jsx(Ve,{id:"edit-father-name",value:C.fatherName||"",onChange:b=>k({...C,fatherName:b.target.value}),className:"bg-white border-gray-300",placeholder:"Enter father's name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-mother-name",className:"text-sm font-medium text-gray-700",children:"Mother's Name"}),e.jsx(Ve,{id:"edit-mother-name",value:C.motherName||"",onChange:b=>k({...C,motherName:b.target.value}),className:"bg-white border-gray-300",placeholder:"Enter mother's name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-marriage-status",className:"text-sm font-medium text-gray-700",children:"Marriage Status"}),e.jsxs(At,{value:C.marriageStatus||"",onValueChange:b=>k({...C,marriageStatus:b}),children:[e.jsx(Et,{className:"bg-white border-gray-300",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Single",children:"Single"}),e.jsx(Pe,{value:"Married",children:"Married"}),e.jsx(Pe,{value:"Divorced",children:"Divorced"}),e.jsx(Pe,{value:"Widowed",children:"Widowed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-employee-status",className:"text-sm font-medium text-gray-700",children:"Employee Status"}),e.jsxs(At,{value:C.employeeStatus||"",onValueChange:b=>k({...C,employeeStatus:b}),children:[e.jsx(Et,{className:"bg-white border-gray-300",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Employee",children:"Employee"}),e.jsx(Pe,{value:"Non-Employee",children:"Non-Employee"}),e.jsx(Pe,{value:"Retired",children:"Retired"}),e.jsx(Pe,{value:"Student",children:"Student"})]})]})]})]})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-amber-50 to-yellow-50 p-4 sm:p-6 rounded-lg border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-yellow-600 text-white p-2 rounded-lg",children:e.jsx(ts,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Fees, charges and payment details"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-fees",className:"text-sm font-medium text-gray-700",children:"Fees"}),e.jsx(Ve,{id:"edit-fees",type:"number",value:C.fees||0,onChange:b=>{const S=parseFloat(b.target.value)||0,D=C.bloodTest||0,R=C.pickupCharge||0,F=S+D+R,I=C.payAmount||0,ce=F-I;k({...C,fees:S,totalAmount:F,balance:ce})},className:"bg-white border-gray-300",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-blood-test",className:"text-sm font-medium text-gray-700",children:"Blood Test"}),e.jsx(Ve,{id:"edit-blood-test",type:"number",value:C.bloodTest||0,onChange:b=>{const S=parseFloat(b.target.value)||0,D=C.fees||0,R=C.pickupCharge||0,F=D+S+R,I=C.payAmount||0,ce=F-I;k({...C,bloodTest:S,totalAmount:F,balance:ce})},className:"bg-white border-gray-300",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-pickup-charge",className:"text-sm font-medium text-gray-700",children:"Pickup Charge"}),e.jsx(Ve,{id:"edit-pickup-charge",type:"number",value:C.pickupCharge||0,onChange:b=>{const S=parseFloat(b.target.value)||0,D=C.fees||0,R=C.bloodTest||0,F=D+R+S,I=C.payAmount||0,ce=F-I;k({...C,pickupCharge:S,totalAmount:F,balance:ce})},className:"bg-white border-gray-300",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-total-amount",className:"text-sm font-medium text-gray-700",children:"Total Amount"}),e.jsx(Ve,{id:"edit-total-amount",type:"number",value:C.totalAmount||0,disabled:!0,className:"bg-gray-100 border-gray-300 text-gray-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-pay-amount",className:"text-sm font-medium text-gray-700",children:"Pay Amount"}),e.jsx(Ve,{id:"edit-pay-amount",type:"number",value:C.payAmount||0,onChange:b=>{const S=parseFloat(b.target.value)||0,R=(C.totalAmount||0)-S;k({...C,payAmount:S,balance:R})},className:"bg-white border-gray-300",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-balance",className:"text-sm font-medium text-gray-700",children:"Balance"}),e.jsx(Ve,{id:"edit-balance",type:"number",value:C.balance||0,disabled:!0,className:"bg-gray-100 border-gray-300 text-gray-600"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2 lg:col-span-1",children:[e.jsx(ae,{htmlFor:"edit-payment-type",className:"text-sm font-medium text-gray-700",children:"Payment Type"}),e.jsxs(At,{value:C.paymentType||"",onValueChange:b=>k({...C,paymentType:b}),children:[e.jsx(Et,{className:"bg-white border-gray-300",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Cash",children:"Cash"}),e.jsx(Pe,{value:"Card",children:"Card"}),e.jsx(Pe,{value:"UPI",children:"UPI"}),e.jsx(Pe,{value:"Net Banking",children:"Net Banking"}),e.jsx(Pe,{value:"Cheque",children:"Cheque"})]})]})]})]})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-rose-50 to-pink-50 p-4 sm:p-6 rounded-lg border border-rose-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-pink-600 text-white p-2 rounded-lg",children:e.jsx(uo,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Medical History"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Patient's medical background and conditions"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"edit-medical-history",className:"text-sm font-medium text-gray-700",children:"Medical History Details"}),e.jsx(As,{id:"edit-medical-history",value:C.medicalHistory,onChange:b=>k({...C,medicalHistory:b.target.value}),className:"bg-white border-gray-300 min-h-[100px]",placeholder:"Enter patient's medical history, allergies, previous treatments, etc."})]})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-indigo-50 to-blue-50 p-4 sm:p-6 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-blue-600 text-white p-2 rounded-lg",children:e.jsx(It,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Patient Documents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload patient identification documents"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Nu,{label:"Patient Aadhar Card",currentFile:C.patientAadhar,uploadedFile:L.patientAadhar,onFileChange:b=>W("patientAadhar",b),accept:"image/*"}),e.jsx(Nu,{label:"Patient PAN Card",currentFile:C.patientPan,uploadedFile:L.patientPan,onFileChange:b=>W("patientPan",b),accept:"image/*"})]})]}),e.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-gradient-to-r from-teal-50 to-cyan-50 p-4 sm:p-6 rounded-lg border border-teal-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white p-2 rounded-lg",children:e.jsx(Ks,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Attender Documents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload attender identification documents"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Nu,{label:"Attender Aadhar Card",currentFile:C.attenderAadhar,uploadedFile:L.attenderAadhar,onFileChange:b=>W("attenderAadhar",b),accept:"image/*"}),e.jsx(Nu,{label:"Attender PAN Card",currentFile:C.attenderPan,uploadedFile:L.attenderPan,onFileChange:b=>W("attenderPan",b),accept:"image/*"})]})]})]})," "]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>k(null),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:U,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(Ns,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx($t,{open:M,onOpenChange:X,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Patient"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this patient? This action cannot be undone."})]})]})}),A&&e.jsxs("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:A.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a2,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["ID: ",A.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:A.phone||"N/A"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded border border-red-200",children:e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("p",{className:"font-medium mb-2",children:" This will also permanently delete:"}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:" All patient attendance records"}),e.jsx("li",{children:" All patient history records"}),e.jsx("li",{children:" All patient payment records"})]})]})})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>X(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:se,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Patient"]})]})]})}),e.jsx($s,{open:g,onOpenChange:j,selectedMonth:y||a,selectedYear:v||r,onMonthChange:f,onYearChange:w,onApply:()=>{j(!1)},title:"Select Month & Year",description:"Filter patients by admission date",previewText:"patients"})]})})},LR=()=>{js();const{patientId:t}=$D(),s=al();console.log(" PatientBiodata component mounted with patientId:",t),console.log(" Current URL:",window.location.href),console.log(" Current pathname:",window.location.pathname);const[a,r]=m.useState(null),[n,l]=m.useState([]),[i,o]=m.useState([]),[c,d]=m.useState([]),[u,x]=m.useState(!0),[p,h]=m.useState("overview"),[y,f]=m.useState(null);m.useEffect(()=>{console.log(" PatientBiodata useEffect triggered with patientId:",t),t?v():console.log(" No patientId provided")},[t]);const v=async()=>{try{console.log(" Starting loadPatientData for patientId:",t),x(!0),f(null),console.log("Loading patient data for patientId:",t);const N=await gt.getAllPatients(),E=N.find(C=>{var k,A;if(((k=C.id)==null?void 0:k.toString())===t||C.patient_id===t)return!0;if(t!=null&&t.startsWith("P")){const T=t.replace("P","").replace(/^0+/,"");if(((A=C.id)==null?void 0:A.toString())===T)return!0}if(!(t!=null&&t.startsWith("P"))&&C.patient_id){const T=`P${String(t).padStart(4,"0")}`;if(C.patient_id===T)return!0}return!1});if(console.log("Patient search result:",{searchedId:t,foundPatient:E?{id:E.id,patient_id:E.patient_id,name:E.name}:null,totalPatients:N.length}),!E){f("Patient not found");return}r(E),l([{id:"1",date:"2025-08-20",doctorName:"Dr. Smith",diagnosis:"Hypertension",prescription:"Amlodipine 5mg daily",symptoms:"High blood pressure, headache",treatment:"Medication and lifestyle changes",nextAppointment:"2025-09-20"}]),o([{id:"1",date:"2025-08-15",amount:3e3,paymentType:"Cash",description:"Consultation and medicines",receiptNumber:"RCP001"}]),d([{id:"1",date:"2025-08-18",testName:"Blood Pressure Check",result:"140/90 mmHg",status:"Completed",doctorName:"Dr. Smith",notes:"Elevated blood pressure"}])}catch(N){console.error("Error loading patient data:",N),f("Failed to load patient data"),Te({title:"Error",description:"Failed to load patient information",variant:"destructive"})}finally{x(!1)}},w=N=>{const E={Active:{color:"bg-green-100 text-green-800",icon:e.jsx(Xs,{className:"h-3 w-3"})},Inactive:{color:"bg-gray-100 text-gray-800",icon:e.jsx(Qs,{className:"h-3 w-3"})},Discharged:{color:"bg-blue-100 text-blue-800",icon:e.jsx(r2,{className:"h-3 w-3"})}},C=E[N]||E.Active;return e.jsxs(kt,{className:`${C.color} flex items-center gap-1`,children:[C.icon,N]})},g=N=>N?`${(typeof N=="string"?parseFloat(N):N).toLocaleString("en-IN")}`:"0",j=N=>{if(!N)return"Not set";try{return wt(new Date(N),"dd MMM yyyy")}catch{return"Invalid date"}};return u?e.jsx("div",{className:"modern-container",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading patient information..."})]})})}):y||!a?e.jsx("div",{className:"modern-container",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Patient Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:y||"The requested patient could not be found."}),e.jsxs(P,{onClick:()=>s("/patients"),className:"global-btn",children:[e.jsx(kx,{className:"h-4 w-4 mr-2"}),"Back to Patients"]})]})}):e.jsxs("div",{className:"modern-container",children:[e.jsx("div",{className:"modern-page-header",children:e.jsxs("div",{className:"modern-page-header-content",children:[e.jsxs("div",{className:"modern-page-title-section",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>s("/patients"),className:"mr-4",children:[e.jsx(kx,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx("div",{className:"modern-page-icon",children:e.jsx(rs,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"modern-page-title",children:a.name}),e.jsxs("p",{className:"modern-page-subtitle",children:["Patient ID: ",t,"  Complete Medical Profile"]})]})]}),e.jsxs("div",{className:"modern-page-actions",children:[e.jsxs(P,{className:"modern-btn modern-btn-secondary",children:[e.jsx(RA,{className:"h-4 w-4 mr-2"}),"Print Profile"]}),e.jsxs(P,{className:"modern-btn modern-btn-secondary",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Export Data"]}),e.jsxs(P,{className:"global-btn",onClick:()=>s(`/patients/edit/${t}`),children:[e.jsx(an,{className:"h-4 w-4 mr-2"}),"Edit Patient"]})]})]})}),e.jsxs("div",{className:"modern-stats-grid",children:[e.jsxs("div",{className:"modern-stat-card",children:[e.jsx("div",{className:"modern-stat-icon modern-stat-icon-blue",children:e.jsx(rs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"modern-stat-content",children:[e.jsx("div",{className:"modern-stat-value",children:a.age}),e.jsx("div",{className:"modern-stat-label",children:"Years Old"})]})]}),e.jsxs("div",{className:"modern-stat-card",children:[e.jsx("div",{className:"modern-stat-icon modern-stat-icon-green",children:e.jsx(st,{className:"h-4 w-4"})}),e.jsxs("div",{className:"modern-stat-content",children:[e.jsx("div",{className:`modern-stat-value ${a.status==="Active"?"status-active":a.status==="Inactive"?"status-inactive":"status-discharged"}`,children:a.status||"Active"}),e.jsx("div",{className:"modern-stat-label",children:"Current Status"})]})]}),e.jsxs("div",{className:"modern-stat-card",children:[e.jsx("div",{className:"modern-stat-icon modern-stat-icon-purple",children:e.jsx(ts,{className:"h-4 w-4"})}),e.jsxs("div",{className:"modern-stat-content",children:[e.jsx("div",{className:"modern-stat-value",children:g(a.balance)}),e.jsx("div",{className:"modern-stat-label",children:"Outstanding Balance"})]})]}),e.jsxs("div",{className:"modern-stat-card",children:[e.jsx("div",{className:"modern-stat-icon modern-stat-icon-orange",children:e.jsx(Pt,{className:"h-4 w-4"})}),e.jsxs("div",{className:"modern-stat-content",children:[e.jsx("div",{className:"modern-stat-value",children:j(a.admissionDate)}),e.jsx("div",{className:"modern-stat-label",children:"Admission Date"})]})]})]}),e.jsx("div",{className:"modern-tabs",children:e.jsxs("div",{className:"modern-tabs-list",children:[e.jsxs("button",{className:`modern-tab ${p==="overview"?"modern-tab-active":""}`,onClick:()=>h("overview"),"data-label":"Overview",children:[e.jsx(rs,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Overview"})]}),e.jsxs("button",{className:`modern-tab ${p==="medical"?"modern-tab-active":""}`,onClick:()=>h("medical"),"data-label":"Medical",children:[e.jsx(fa,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Medical History"})]}),e.jsxs("button",{className:`modern-tab ${p==="financial"?"modern-tab-active":""}`,onClick:()=>h("financial"),"data-label":"Financial",children:[e.jsx(ts,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Financial Records"})]}),e.jsxs("button",{className:`modern-tab ${p==="documents"?"modern-tab-active":""}`,onClick:()=>h("documents"),"data-label":"Documents",children:[e.jsx(It,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:"Documents"})]})]})}),e.jsxs("div",{className:"modern-tab-content",children:[p==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(Ie,{className:"modern-setting-card h-full",children:[e.jsx(Zt,{className:"text-center pb-4",children:e.jsxs(Es,{className:"flex items-center justify-center gap-2 text-lg",children:[e.jsx(tc,{className:"h-5 w-5"}),"Patient Photo"]})}),e.jsxs(Re,{className:"text-center",children:[e.jsx(El,{photoPath:a.photo,alt:a.name,className:"w-28 h-28 rounded-full object-cover mx-auto mb-3 border-3 border-gray-200 shadow-md"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:a.patient_id||t}),e.jsx("div",{className:"flex justify-center",children:w(a.status)})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(Ie,{className:"modern-setting-card h-full",children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"flex items-center gap-2 text-xl",children:[e.jsx(rs,{className:"h-5 w-5"}),"Personal Information"]})}),e.jsx(Re,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(rs,{className:"h-4 w-4"}),"Full Name"]}),e.jsx("div",{className:"modern-setting-value",children:a.name})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Age / DOB"]}),e.jsxs("div",{className:"modern-setting-value",children:[a.age," years  ",j(a.dateOfBirth)]})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Gender"]}),e.jsx("div",{className:"modern-setting-value",children:a.gender})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(uo,{className:"h-4 w-4"}),"Marital Status"]}),e.jsx("div",{className:"modern-setting-value",children:a.marital_status||a.marriageStatus||"Not specified"})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(dc,{className:"h-4 w-4"}),"Occupation"]}),e.jsx("div",{className:"modern-setting-value",children:a.occupation||a.employeeStatus||"Not specified"})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Admission Date"]}),e.jsx("div",{className:"modern-setting-value",children:j(a.admissionDate)})]})]})})]})})]}),e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Ps,{className:"h-5 w-5"}),"Contact Information"]})}),e.jsx(Re,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Primary Phone"]}),e.jsx("div",{className:"modern-setting-value",children:a.phone})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(ia,{className:"h-4 w-4"}),"Email Address"]}),e.jsx("div",{className:"modern-setting-value",children:a.email||"Not provided"})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Emergency Contact"]}),e.jsx("div",{className:"modern-setting-value",children:a.emergencyContact||"Not provided"})]}),e.jsxs("div",{className:"modern-setting-item lg:col-span-3",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(mr,{className:"h-4 w-4"}),"Address"]}),e.jsx("div",{className:"modern-setting-value",children:a.address||"Not provided"})]})]})})]}),(a.guardian_name||a.attenderName)&&e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5"}),"Guardian / Attender Information"]})}),e.jsx(Re,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(rs,{className:"h-4 w-4"}),"Guardian Name"]}),e.jsx("div",{className:"modern-setting-value",children:a.guardian_name||a.attenderName||"Not specified"})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Guardian Phone"]}),e.jsx("div",{className:"modern-setting-value",children:a.guardian_phone||a.attenderPhone||"Not provided"})]}),e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(uo,{className:"h-4 w-4"}),"Relationship"]}),e.jsx("div",{className:"modern-setting-value",children:a.guardian_relation||a.attenderRelationship||"Not specified"})]}),a.fatherName&&e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(rs,{className:"h-4 w-4"}),"Father's Name"]}),e.jsx("div",{className:"modern-setting-value",children:a.fatherName})]}),a.motherName&&e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(rs,{className:"h-4 w-4"}),"Mother's Name"]}),e.jsx("div",{className:"modern-setting-value",children:a.motherName})]})]})})]})}),a.medicalHistory&&e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-5 w-5"}),"Medical History Summary"]})}),e.jsx(Re,{children:e.jsx("div",{className:"modern-setting-item",children:e.jsx("div",{className:"modern-setting-value text-sm",children:a.medicalHistory})})})]})})]}),p==="medical"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{className:"pb-4",children:e.jsxs(Es,{className:"flex items-center gap-2 text-xl font-bold text-gray-800",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(fa,{className:"h-5 w-5 text-green-600"})}),"Medical Records & Consultations"]})}),e.jsx(Re,{children:n.length>0?e.jsx("div",{className:"space-y-6",children:n.map(N=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-xl text-gray-800 mb-2",children:N.diagnosis}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(rs,{className:"h-4 w-4"}),"Dr. ",N.doctorName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pt,{className:"h-4 w-4"}),j(N.date)]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(kt,{className:"bg-blue-100 text-blue-800 font-medium px-3 py-1",children:"Consultation"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("strong",{className:"text-gray-700 font-semibold",children:"Symptoms:"})]}),e.jsx("p",{className:"text-gray-600 bg-red-50 p-3 rounded-lg border border-red-100",children:N.symptoms})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("strong",{className:"text-gray-700 font-semibold",children:"Treatment:"})]}),e.jsx("p",{className:"text-gray-600 bg-green-50 p-3 rounded-lg border border-green-100",children:N.treatment})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("strong",{className:"text-gray-700 font-semibold",children:"Prescription:"})]}),e.jsx("p",{className:"text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100",children:N.prescription})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("strong",{className:"text-gray-700 font-semibold",children:"Next Appointment:"})]}),e.jsx("p",{className:"text-gray-600 bg-purple-50 p-3 rounded-lg border border-purple-100",children:j(N.nextAppointment)})]})]})]},N.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fa,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Medical Records"}),e.jsx("p",{className:"text-gray-600",children:"No medical consultation records found for this patient"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Medical records will appear here once consultations are recorded"})]})})]}),e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{className:"pb-4",children:e.jsxs(Es,{className:"flex items-center gap-2 text-xl font-bold text-gray-800",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Pv,{className:"h-5 w-5 text-orange-600"})}),"Test Results & Lab Reports"]})}),e.jsx(Re,{children:c.length>0?e.jsx("div",{className:"space-y-6",children:c.map(N=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-xl text-gray-800 mb-2",children:N.testName}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pt,{className:"h-4 w-4"}),j(N.date)]})})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(kt,{className:N.status==="Completed"?"bg-green-100 text-green-800 font-medium px-3 py-1":"bg-yellow-100 text-yellow-800 font-medium px-3 py-1",children:N.status})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("strong",{className:"text-gray-700 font-semibold",children:"Result:"})]}),e.jsx("p",{className:"text-gray-600 bg-blue-50 p-3 rounded-lg border border-blue-100 font-mono text-sm",children:N.result})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("strong",{className:"text-gray-700 font-semibold",children:"Doctor:"})]}),e.jsx("p",{className:"text-gray-600 bg-green-50 p-3 rounded-lg border border-green-100",children:N.doctorName})]}),N.notes&&e.jsxs("div",{className:"space-y-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("strong",{className:"text-gray-700 font-semibold",children:"Notes:"})]}),e.jsx("p",{className:"text-gray-600 bg-purple-50 p-3 rounded-lg border border-purple-100",children:N.notes})]})]})]},N.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Pv,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Test Results"}),e.jsx("p",{className:"text-gray-600",children:"No lab test results found for this patient"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Test results will appear here once lab reports are available"})]})})]})]}),p==="financial"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Ie,{className:"modern-setting-card border-l-4 border-l-blue-500 shadow-lg hover:shadow-xl transition-shadow",children:e.jsx(Re,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-md",children:e.jsx(ns,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:g(a.totalAmount)}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Amount"})]})]})})})}),e.jsx(Ie,{className:"modern-setting-card border-l-4 border-l-green-500 shadow-lg hover:shadow-xl transition-shadow",children:e.jsx(Re,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-md",children:e.jsx(Xs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:g(a.payAmount)}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Amount Paid"})]})]})})})}),e.jsx(Ie,{className:"modern-setting-card border-l-4 border-l-red-500 shadow-lg hover:shadow-xl transition-shadow",children:e.jsx(Re,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-md",children:e.jsx(Qs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:g(a.balance)}),e.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Outstanding Balance"})]})]})})})})]}),e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{className:"pb-4",children:e.jsxs(Es,{className:"flex items-center gap-2 text-xl font-bold text-gray-800",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(jA,{className:"h-5 w-5 text-blue-600"})}),"Fee Breakdown"]})}),e.jsx(Re,{className:"p-6",children:e.jsxs("div",{className:"space-y-0 bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-gray-200 hover:bg-blue-50 rounded-lg px-4 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Base Fees:"}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:g(a.fees)})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-gray-200 hover:bg-blue-50 rounded-lg px-4 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Blood Test:"}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:g(a.bloodTest)})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-gray-200 hover:bg-blue-50 rounded-lg px-4 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Pickup Charge:"}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:g(a.pickupCharge)})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-gray-200 hover:bg-blue-50 rounded-lg px-4 transition-colors",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Other Fees:"}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:g(a.otherFees)})]}),e.jsx("div",{className:"mt-4 pt-4 border-t-2 border-blue-200",children:e.jsxs("div",{className:"flex justify-between items-center py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg px-6 shadow-md",children:[e.jsx("span",{className:"font-bold text-lg",children:"Total Amount:"}),e.jsx("span",{className:"font-bold text-xl",children:g(a.totalAmount)})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex justify-between items-center py-3 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg px-4",children:[e.jsxs("span",{className:"text-green-700 font-medium flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Payment Method:"]}),e.jsx("span",{className:"font-bold text-green-800 bg-green-100 px-3 py-1 rounded-full text-sm",children:a.paymentType||"Cash"})]})})]})})]}),e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{className:"pb-4",children:e.jsxs(Es,{className:"flex items-center gap-2 text-xl font-bold text-gray-800",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ts,{className:"h-5 w-5 text-purple-600"})}),"Payment History"]})}),e.jsx(Re,{children:i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(N=>e.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("h4",{className:"font-bold text-xl text-gray-800",children:g(N.amount)})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pt,{className:"h-4 w-4"}),j(N.date)]})}),e.jsx("p",{className:"text-gray-600 bg-gray-50 p-3 rounded-lg border border-gray-100",children:N.description})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx(kt,{className:"bg-green-100 text-green-800 font-medium px-3 py-1",children:N.paymentType}),N.receiptNumber&&e.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 px-2 py-1 rounded border border-blue-200",children:["Receipt: ",N.receiptNumber]})]})]})},N.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ts,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Payment History"}),e.jsx("p",{className:"text-gray-600",children:"No payment records found for this patient"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Payment history will appear here once payments are made"})]})})]})]}),p==="documents"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(Ie,{className:"modern-setting-card",children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-5 w-5"}),"Identity Documents"]})}),e.jsxs(Re,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.patientAadhar&&e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Patient Aadhar Card"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:aa(a.patientAadhar),alt:"Patient Aadhar",className:"w-full h-40 object-cover rounded-lg border"}),e.jsxs(P,{size:"sm",variant:"outline",className:"mt-2",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"View Full"]})]})]}),a.patientPan&&e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Patient PAN Card"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:aa(a.patientPan),alt:"Patient PAN",className:"w-full h-40 object-cover rounded-lg border"}),e.jsxs(P,{size:"sm",variant:"outline",className:"mt-2",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"View Full"]})]})]}),a.attenderAadhar&&e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Attender Aadhar Card"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:aa(a.attenderAadhar),alt:"Attender Aadhar",className:"w-full h-40 object-cover rounded-lg border"}),e.jsxs(P,{size:"sm",variant:"outline",className:"mt-2",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"View Full"]})]})]}),a.attenderPan&&e.jsxs("div",{className:"modern-setting-item",children:[e.jsxs("div",{className:"modern-setting-label",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Attender PAN Card"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:aa(a.attenderPan),alt:"Attender PAN",className:"w-full h-40 object-cover rounded-lg border"}),e.jsxs(P,{size:"sm",variant:"outline",className:"mt-2",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"View Full"]})]})]})]}),!a.patientAadhar&&!a.patientPan&&!a.attenderAadhar&&!a.attenderPan&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(It,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No documents uploaded"})]})]})]})})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Lx={};Lx.version="0.18.5";var m3=1252,$R=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],u3=function(t){$R.indexOf(t)!=-1&&(m3=t)};function UR(){u3(1252)}var gm=function(t){u3(t)};function BR(){gm(1200),UR()}var bu=function(s){return String.fromCharCode(s)},lj=function(s){return String.fromCharCode(s)},$x,li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function vm(t){for(var s="",a=0,r=0,n=0,l=0,i=0,o=0,c=0,d=0;d<t.length;)a=t.charCodeAt(d++),l=a>>2,r=t.charCodeAt(d++),i=(a&3)<<4|r>>4,n=t.charCodeAt(d++),o=(r&15)<<2|n>>6,c=n&63,isNaN(r)?o=c=64:isNaN(n)&&(c=64),s+=li.charAt(l)+li.charAt(i)+li.charAt(o)+li.charAt(c);return s}function Dl(t){var s="",a=0,r=0,n=0,l=0,i=0,o=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)l=li.indexOf(t.charAt(d++)),i=li.indexOf(t.charAt(d++)),a=l<<2|i>>4,s+=String.fromCharCode(a),o=li.indexOf(t.charAt(d++)),r=(i&15)<<4|o>>2,o!==64&&(s+=String.fromCharCode(r)),c=li.indexOf(t.charAt(d++)),n=(o&3)<<6|c,c!==64&&(s+=String.fromCharCode(n));return s}var Rs=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Fl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,a){return a?new Buffer(s,a):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function yo(t){return Rs?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function ij(t){return Rs?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Sn=function(s){return Rs?Fl(s,"binary"):s.split("").map(function(a){return a.charCodeAt(0)&255})};function Mh(t){if(typeof ArrayBuffer>"u")return Sn(t);for(var s=new ArrayBuffer(t.length),a=new Uint8Array(s),r=0;r!=t.length;++r)a[r]=t.charCodeAt(r)&255;return s}function Bm(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var s=[],a=0;a<t.length;++a)s[a]=String.fromCharCode(t[a]);return s.join("")}function zR(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Ua=Rs?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:Fl(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,a=0;for(s=0;s<t.length;++s)a+=t[s].length;var r=new Uint8Array(a),n=0;for(s=0,a=0;s<t.length;a+=n,++s)if(n=t[s].length,t[s]instanceof Uint8Array)r.set(t[s],a);else{if(typeof t[s]=="string")throw"wtf";r.set(new Uint8Array(t[s]),a)}return r}return[].concat.apply([],t.map(function(l){return Array.isArray(l)?l:[].slice.call(l)}))};function VR(t){for(var s=[],a=0,r=t.length+250,n=yo(t.length+255),l=0;l<t.length;++l){var i=t.charCodeAt(l);if(i<128)n[a++]=i;else if(i<2048)n[a++]=192|i>>6&31,n[a++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++l)&1023;n[a++]=240|i>>8&7,n[a++]=128|i>>2&63,n[a++]=128|o>>6&15|(i&3)<<4,n[a++]=128|o&63}else n[a++]=224|i>>12&15,n[a++]=128|i>>6&63,n[a++]=128|i&63;a>r&&(s.push(n.slice(0,a)),a=0,n=yo(65535),r=65530)}return s.push(n.slice(0,a)),Ua(s)}var $d=/\u0000/g,Su=/[\u0001-\u0006]/g;function pc(t){for(var s="",a=t.length-1;a>=0;)s+=t.charAt(a--);return s}function Cn(t,s){var a=""+t;return a.length>=s?a:xa("0",s-a.length)+a}function iv(t,s){var a=""+t;return a.length>=s?a:xa(" ",s-a.length)+a}function Ux(t,s){var a=""+t;return a.length>=s?a:a+xa(" ",s-a.length)}function YR(t,s){var a=""+Math.round(t);return a.length>=s?a:xa("0",s-a.length)+a}function WR(t,s){var a=""+t;return a.length>=s?a:xa("0",s-a.length)+a}var oj=Math.pow(2,32);function Oo(t,s){if(t>oj||t<-oj)return YR(t,s);var a=Math.round(t);return WR(a,s)}function Bx(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var cj=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],zp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function HR(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var pa={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},dj={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},GR={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function zx(t,s,a){for(var r=t<0?-1:1,n=t*r,l=0,i=1,o=0,c=1,d=0,u=0,x=Math.floor(n);d<s&&(x=Math.floor(n),o=x*i+l,u=x*d+c,!(n-x<5e-8));)n=1/(n-x),l=i,i=o,c=d,d=u;if(u>s&&(d>s?(u=c,o=l):(u=d,o=i)),!a)return[0,r*o,u];var p=Math.floor(r*o/u);return[p,r*o-p*u,u]}function Cu(t,s,a){if(t>2958465||t<0)return null;var r=t|0,n=Math.floor(86400*(t-r)),l=0,i=[],o={D:r,T:n,u:86400*(t-r)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),s&&s.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++r,++o.D)),r===60)i=a?[1317,10,29]:[1900,2,29],l=3;else if(r===0)i=a?[1317,8,29]:[1900,1,0],l=6;else{r>60&&--r;var c=new Date(1900,0,1);c.setDate(c.getDate()+r-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],l=c.getDay(),r<60&&(l=(l+6)%7),a&&(l=eO(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=l,o}var x3=new Date(1899,11,31,0,0,0),qR=x3.getTime(),JR=new Date(1900,2,1,0,0,0);function h3(t,s){var a=t.getTime();return s?a-=1461*24*60*60*1e3:t>=JR&&(a+=24*60*60*1e3),(a-(qR+(t.getTimezoneOffset()-x3.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function ov(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function KR(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function XR(t){var s=t<0?12:11,a=ov(t.toFixed(12));return a.length<=s||(a=t.toPrecision(10),a.length<=s)?a:t.toExponential(5)}function QR(t){var s=ov(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function ZR(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),a;return s>=-4&&s<=-1?a=t.toPrecision(10+s):Math.abs(s)<=9?a=XR(t):s===10?a=t.toFixed(10).substr(0,12):a=QR(t),ov(KR(a.toUpperCase()))}function h0(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ZR(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ci(14,h3(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function eO(t,s){s[0]-=581;var a=t.getDay();return t<60&&(a=(a+6)%7),a}function tO(t,s,a,r){var n="",l=0,i=0,o=a.y,c,d=0;switch(t){case 98:o=a.y+543;case 121:switch(s.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(s.length){case 1:case 2:c=a.m,d=s.length;break;case 3:return zp[a.m-1][1];case 5:return zp[a.m-1][0];default:return zp[a.m-1][2]}break;case 100:switch(s.length){case 1:case 2:c=a.d,d=s.length;break;case 3:return cj[a.q][0];default:return cj[a.q][1]}break;case 104:switch(s.length){case 1:case 2:c=1+(a.H+11)%12,d=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:c=a.H,d=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:c=a.M,d=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return a.u===0&&(s=="s"||s=="ss")?Cn(a.S,s.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,l=Math.round(i*(a.S+a.u)),l>=60*i&&(l=0),s==="s"?l===0?"0":""+l/i:(n=Cn(l,2+r),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":c=a.D*24+a.H;break;case"[m]":case"[mm]":c=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":c=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+s}d=s.length===3?1:2;break;case 101:c=o,d=1;break}var u=d>0?Cn(c,d):"";return u}function ii(t){var s=3;if(t.length<=s)return t;for(var a=t.length%s,r=t.substr(0,a);a!=t.length;a+=s)r+=(r.length>0?",":"")+t.substr(a,s);return r}var p3=/%/g;function sO(t,s,a){var r=s.replace(p3,""),n=s.length-r.length;return pl(t,r,a*Math.pow(10,2*n))+xa("%",n)}function aO(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return pl(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function f3(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+f3(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var l=Math.floor(Math.log(s)*Math.LOG10E)%n;if(l<0&&(l+=n),a=(s/Math.pow(10,l)).toPrecision(r+1+(n+l)%n),a.indexOf("e")===-1){var i=Math.floor(Math.log(s)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(i-a.length+l):a+="E+"+(i-l);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,n)+"."+a.substr(2+n),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+l)%n)+"."+u.substr(l)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var g3=/# (\?+)( ?)\/( ?)(\d+)/;function rO(t,s,a){var r=parseInt(t[4],10),n=Math.round(s*r),l=Math.floor(n/r),i=n-l*r,o=r;return a+(l===0?"":""+l)+" "+(i===0?xa(" ",t[1].length+1+t[4].length):iv(i,t[1].length)+t[2]+"/"+t[3]+Cn(o,t[4].length))}function nO(t,s,a){return a+(s===0?"":""+s)+xa(" ",t[1].length+2+t[4].length)}var v3=/^#*0*\.([0#]+)/,w3=/\).*[0#]/,y3=/\(###\) ###\\?-####/;function lr(t){for(var s="",a,r=0;r!=t.length;++r)switch(a=t.charCodeAt(r)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(a)}return s}function mj(t,s){var a=Math.pow(10,s);return""+Math.round(t*a)/a}function uj(t,s){var a=t-Math.floor(t),r=Math.pow(10,s);return s<(""+Math.round(a*r)).length?0:Math.round(a*r)}function lO(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function iO(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function qr(t,s,a){if(t.charCodeAt(0)===40&&!s.match(w3)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?qr("n",r,a):"("+qr("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return aO(t,s,a);if(s.indexOf("%")!==-1)return sO(t,s,a);if(s.indexOf("E")!==-1)return f3(s,a);if(s.charCodeAt(0)===36)return"$"+qr(t,s.substr(s.charAt(1)==" "?2:1),a);var n,l,i,o,c=Math.abs(a),d=a<0?"-":"";if(s.match(/^00+$/))return d+Oo(c,s.length);if(s.match(/^[#?]+$/))return n=Oo(a,0),n==="0"&&(n=""),n.length>s.length?n:lr(s.substr(0,s.length-n.length))+n;if(l=s.match(g3))return rO(l,c,d);if(s.match(/^#+0+$/))return d+Oo(c,s.length-s.indexOf("0"));if(l=s.match(v3))return n=mj(a,l[1].length).replace(/^([^\.]+)$/,"$1."+lr(l[1])).replace(/\.$/,"."+lr(l[1])).replace(/\.(\d*)$/,function(y,f){return"."+f+xa("0",lr(l[1]).length-f.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),l=s.match(/^(0*)\.(#*)$/))return d+mj(c,l[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=s.match(/^#{1,3},##0(\.?)$/))return d+ii(Oo(c,0));if(l=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+qr(t,s,-a):ii(""+(Math.floor(a)+lO(a,l[1].length)))+"."+Cn(uj(a,l[1].length),l[1].length);if(l=s.match(/^#,#*,#0/))return qr(t,s.replace(/^#,#*,/,""),a);if(l=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=pc(qr(t,s.replace(/[\\-]/g,""),a)),i=0,pc(pc(s.replace(/\\/g,"")).replace(/[0#]/g,function(y){return i<n.length?n.charAt(i++):y==="0"?"0":""}));if(s.match(y3))return n=qr(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(l=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(l[4].length,7),o=zx(c,Math.pow(10,i)-1,!1),n=""+d,u=pl("n",l[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+l[2]+"/"+l[3],u=Ux(o[2],i),u.length<l[4].length&&(u=lr(l[4].substr(l[4].length-u.length))+u),n+=u,n;if(l=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(l[1].length,l[4].length),7),o=zx(c,Math.pow(10,i)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?iv(o[1],i)+l[2]+"/"+l[3]+Ux(o[2],i):xa(" ",2*i+1+l[2].length+l[3].length));if(l=s.match(/^[#0?]+$/))return n=Oo(a,0),s.length<=n.length?n:lr(s.substr(0,s.length-n.length))+n;if(l=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),i=n.indexOf(".");var x=s.indexOf(".")-i,p=s.length-n.length-x;return lr(s.substr(0,x)+n+s.substr(s.length-p))}if(l=s.match(/^00,000\.([#0]*0)$/))return i=uj(a,l[1].length),a<0?"-"+qr(t,s,-a):ii(iO(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Cn(0,3-y.length):"")+y})+"."+Cn(i,l[1].length);switch(s){case"###,##0.00":return qr(t,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var h=ii(Oo(c,0));return h!=="0"?d+h:"";case"###,###.00":return qr(t,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return qr(t,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function oO(t,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return pl(t,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function cO(t,s,a){var r=s.replace(p3,""),n=s.length-r.length;return pl(t,r,a*Math.pow(10,2*n))+xa("%",n)}function j3(t,s){var a,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+j3(t,-s);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var l=Math.floor(Math.log(s)*Math.LOG10E)%n;if(l<0&&(l+=n),a=(s/Math.pow(10,l)).toPrecision(r+1+(n+l)%n),!a.match(/[Ee]/)){var i=Math.floor(Math.log(s)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(i-a.length+l):a+="E+"+(i-l),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,u){return c+d+u.substr(0,(n+l)%n)+"."+u.substr(l)+"E"})}else a=s.toExponential(r);return t.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),t.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function Rn(t,s,a){if(t.charCodeAt(0)===40&&!s.match(w3)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?Rn("n",r,a):"("+Rn("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return oO(t,s,a);if(s.indexOf("%")!==-1)return cO(t,s,a);if(s.indexOf("E")!==-1)return j3(s,a);if(s.charCodeAt(0)===36)return"$"+Rn(t,s.substr(s.charAt(1)==" "?2:1),a);var n,l,i,o,c=Math.abs(a),d=a<0?"-":"";if(s.match(/^00+$/))return d+Cn(c,s.length);if(s.match(/^[#?]+$/))return n=""+a,a===0&&(n=""),n.length>s.length?n:lr(s.substr(0,s.length-n.length))+n;if(l=s.match(g3))return nO(l,c,d);if(s.match(/^#+0+$/))return d+Cn(c,s.length-s.indexOf("0"));if(l=s.match(v3))return n=(""+a).replace(/^([^\.]+)$/,"$1."+lr(l[1])).replace(/\.$/,"."+lr(l[1])),n=n.replace(/\.(\d*)$/,function(y,f){return"."+f+xa("0",lr(l[1]).length-f.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),l=s.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=s.match(/^#{1,3},##0(\.?)$/))return d+ii(""+c);if(l=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+Rn(t,s,-a):ii(""+a)+"."+xa("0",l[1].length);if(l=s.match(/^#,#*,#0/))return Rn(t,s.replace(/^#,#*,/,""),a);if(l=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=pc(Rn(t,s.replace(/[\\-]/g,""),a)),i=0,pc(pc(s.replace(/\\/g,"")).replace(/[0#]/g,function(y){return i<n.length?n.charAt(i++):y==="0"?"0":""}));if(s.match(y3))return n=Rn(t,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(l=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(l[4].length,7),o=zx(c,Math.pow(10,i)-1,!1),n=""+d,u=pl("n",l[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+l[2]+"/"+l[3],u=Ux(o[2],i),u.length<l[4].length&&(u=lr(l[4].substr(l[4].length-u.length))+u),n+=u,n;if(l=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(l[1].length,l[4].length),7),o=zx(c,Math.pow(10,i)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?iv(o[1],i)+l[2]+"/"+l[3]+Ux(o[2],i):xa(" ",2*i+1+l[2].length+l[3].length));if(l=s.match(/^[#0?]+$/))return n=""+a,s.length<=n.length?n:lr(s.substr(0,s.length-n.length))+n;if(l=s.match(/^([#0]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),i=n.indexOf(".");var x=s.indexOf(".")-i,p=s.length-n.length-x;return lr(s.substr(0,x)+n+s.substr(s.length-p))}if(l=s.match(/^00,000\.([#0]*0)$/))return a<0?"-"+Rn(t,s,-a):ii(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Cn(0,3-y.length):"")+y})+"."+Cn(0,l[1].length);switch(s){case"###,###":case"##,###":case"#,###":var h=ii(""+c);return h!=="0"?d+h:"";default:if(s.match(/\.[0#?]*$/))return Rn(t,s.slice(0,s.lastIndexOf(".")),a)+lr(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function pl(t,s,a){return(a|0)===a?Rn(t,s,a):qr(t,s,a)}function dO(t){for(var s=[],a=!1,r=0,n=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:a=!a;break;case 95:case 42:case 92:++r;break;case 59:s[s.length]=t.substr(n,r-n),n=r+1}if(s[s.length]=t.substr(n),a===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var N3=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function b3(t){for(var s=0,a="",r="";s<t.length;)switch(a=t.charAt(s)){case"G":Bx(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(r=a;t.charAt(s++)!=="]"&&s<t.length;)r+=t.charAt(s);if(r.match(N3))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(a=t.charAt(++s))>-1||a=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===a;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function mO(t,s,a,r){for(var n=[],l="",i=0,o="",c="t",d,u,x,p="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!Bx(t,i))throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"G",v:"General"},i+=7;break;case'"':for(l="";(x=t.charCodeAt(++i))!==34&&i<t.length;)l+=String.fromCharCode(x);n[n.length]={t:"t",v:l},++i;break;case"\\":var h=t.charAt(++i),y=h==="("||h===")"?h:"t";n[n.length]={t:y,v:h},++i;break;case"_":n[n.length]={t:"t",v:" "},i+=2;break;case"@":n[n.length]={t:"T",v:s},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(d==null&&(d=Cu(s,a,t.charAt(i+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||d==null&&(d=Cu(s,a),d==null))return"";for(l=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)l+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),n[n.length]={t:o,v:l},c=o;break;case"A":case"a":case"":var f={t:o,v:o};if(d==null&&(d=Cu(s,a)),t.substr(i,3).toUpperCase()==="A/P"?(d!=null&&(f.v=d.H>=12?"P":"A"),f.t="T",p="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(d!=null&&(f.v=d.H>=12?"PM":"AM"),f.t="T",i+=5,p="h"):t.substr(i,5).toUpperCase()==="/"?(d!=null&&(f.v=d.H>=12?"":""),f.t="T",i+=5,p="h"):(f.t="t",++i),d==null&&f.t==="T")return"";n[n.length]=f,c=o;break;case"[":for(l=o;t.charAt(i++)!=="]"&&i<t.length;)l+=t.charAt(i);if(l.slice(-1)!=="]")throw'unterminated "[" block: |'+l+"|";if(l.match(N3)){if(d==null&&(d=Cu(s,a),d==null))return"";n[n.length]={t:"Z",v:l.toLowerCase()},c=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",b3(t)||(n[n.length]={t:"t",v:l}));break;case".":if(d!=null){for(l=o;++i<t.length&&(o=t.charAt(i))==="0";)l+=o;n[n.length]={t:"s",v:l};break}case"0":case"#":for(l=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)l+=o;n[n.length]={t:"n",v:l};break;case"?":for(l=o;t.charAt(++i)===o;)l+=o;n[n.length]={t:o,v:l},c=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":n[n.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)l+=t.charAt(i);n[n.length]={t:"D",v:l};break;case" ":n[n.length]={t:o,v:o},++i;break;case"$":n[n.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);n[n.length]={t:"t",v:o},++i;break}var v=0,w=0,g;for(i=n.length-1,c="t";i>=0;--i)switch(n[i].t){case"h":case"H":n[i].t=p,c="h",v<1&&(v=1);break;case"s":(g=n[i].v.match(/\.0+$/))&&(w=Math.max(w,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=n[i].t;break;case"m":c==="s"&&(n[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&n[i].v.match(/[Hh]/)&&(v=1),v<2&&n[i].v.match(/[Mm]/)&&(v=2),v<3&&n[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",N;for(i=0;i<n.length;++i)switch(n[i].t){case"t":case"T":case" ":case"D":break;case"X":n[i].v="",n[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[i].v=tO(n[i].t.charCodeAt(0),n[i].v,d,w),n[i].t="t";break;case"n":case"?":for(N=i+1;n[N]!=null&&((o=n[N].t)==="?"||o==="D"||(o===" "||o==="t")&&n[N+1]!=null&&(n[N+1].t==="?"||n[N+1].t==="t"&&n[N+1].v==="/")||n[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[N].v==="/"||n[N].v===" "&&n[N+1]!=null&&n[N+1].t=="?"));)n[i].v+=n[N].v,n[N]={v:"",t:";"},++N;j+=n[i].v,i=N-1;break;case"G":n[i].t="t",n[i].v=h0(s,a);break}var E="",C,k;if(j.length>0){j.charCodeAt(0)==40?(C=s<0&&j.charCodeAt(0)===45?-s:s,k=pl("n",j,C)):(C=s<0&&r>1?-s:s,k=pl("n",j,C),C<0&&n[0]&&n[0].t=="t"&&(k=k.substr(1),n[0].v="-"+n[0].v)),N=k.length-1;var A=n.length;for(i=0;i<n.length;++i)if(n[i]!=null&&n[i].t!="t"&&n[i].v.indexOf(".")>-1){A=i;break}var T=n.length;if(A===n.length&&k.indexOf("E")===-1){for(i=n.length-1;i>=0;--i)n[i]==null||"n?".indexOf(n[i].t)===-1||(N>=n[i].v.length-1?(N-=n[i].v.length,n[i].v=k.substr(N+1,n[i].v.length)):N<0?n[i].v="":(n[i].v=k.substr(0,N+1),N=-1),n[i].t="t",T=i);N>=0&&T<n.length&&(n[T].v=k.substr(0,N+1)+n[T].v)}else if(A!==n.length&&k.indexOf("E")===-1){for(N=k.indexOf(".")-1,i=A;i>=0;--i)if(!(n[i]==null||"n?".indexOf(n[i].t)===-1)){for(u=n[i].v.indexOf(".")>-1&&i===A?n[i].v.indexOf(".")-1:n[i].v.length-1,E=n[i].v.substr(u+1);u>=0;--u)N>=0&&(n[i].v.charAt(u)==="0"||n[i].v.charAt(u)==="#")&&(E=k.charAt(N--)+E);n[i].v=E,n[i].t="t",T=i}for(N>=0&&T<n.length&&(n[T].v=k.substr(0,N+1)+n[T].v),N=k.indexOf(".")+1,i=A;i<n.length;++i)if(!(n[i]==null||"n?(".indexOf(n[i].t)===-1&&i!==A)){for(u=n[i].v.indexOf(".")>-1&&i===A?n[i].v.indexOf(".")+1:0,E=n[i].v.substr(0,u);u<n[i].v.length;++u)N<k.length&&(E+=k.charAt(N++));n[i].v=E,n[i].t="t",T=i}}}for(i=0;i<n.length;++i)n[i]!=null&&"n?".indexOf(n[i].t)>-1&&(C=r>1&&s<0&&i>0&&n[i-1].v==="-"?-s:s,n[i].v=pl(n[i].t,n[i].v,C),n[i].t="t");var M="";for(i=0;i!==n.length;++i)n[i]!=null&&(M+=n[i].v);return M}var xj=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function hj(t,s){if(s==null)return!1;var a=parseFloat(s[2]);switch(s[1]){case"=":if(t==a)return!0;break;case">":if(t>a)return!0;break;case"<":if(t<a)return!0;break;case"<>":if(t!=a)return!0;break;case">=":if(t>=a)return!0;break;case"<=":if(t<=a)return!0;break}return!1}function uO(t,s){var a=dO(t),r=a.length,n=a[r-1].indexOf("@");if(r<4&&n>-1&&--r,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof s!="number")return[4,a.length===4||n>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=n>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=n>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=n>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var l=s>0?a[0]:s<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[r,l];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var i=a[0].match(xj),o=a[1].match(xj);return hj(s,i)?[r,a[0]]:hj(s,o)?[r,a[1]]:[r,a[i!=null&&o!=null?2:1]]}return[r,l]}function Ci(t,s,a){a==null&&(a={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&a.dateNF?r=a.dateNF:r=t;break;case"number":t==14&&a.dateNF?r=a.dateNF:r=(a.table!=null?a.table:pa)[t],r==null&&(r=a.table&&a.table[dj[t]]||pa[dj[t]]),r==null&&(r=GR[t]||"General");break}if(Bx(r,0))return h0(s,a);s instanceof Date&&(s=h3(s,a.date1904));var n=uO(r,s);if(Bx(n[1]))return h0(s,a);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return mO(n[1],s,a,n[0])}function S3(t,s){if(typeof s!="number"){s=+s||-1;for(var a=0;a<392;++a){if(pa[a]==null){s<0&&(s=a);continue}if(pa[a]==t){s=a;break}}s<0&&(s=391)}return pa[s]=t,s}function Ih(t){for(var s=0;s!=392;++s)t[s]!==void 0&&S3(t[s],s)}function Rh(){pa=HR()}var C3=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function xO(t){var s=typeof t=="number"?pa[t]:t;return s=s.replace(C3,"(\\d+)"),new RegExp("^"+s+"$")}function hO(t,s,a){var r=-1,n=-1,l=-1,i=-1,o=-1,c=-1;(s.match(C3)||[]).forEach(function(x,p){var h=parseInt(a[p+1],10);switch(x.toLowerCase().charAt(0)){case"y":r=h;break;case"d":l=h;break;case"h":i=h;break;case"s":c=h;break;case"m":i>=0?o=h:n=h;break}}),c>=0&&o==-1&&n>=0&&(o=n,n=-1);var d=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(l>=1?l:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?d:r==-1&&n==-1&&l==-1?u:d+"T"+u}var pO=function(){var t={};t.version="1.2.0";function s(){for(var k=0,A=new Array(256),T=0;T!=256;++T)k=T,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,A[T]=k;return typeof Int32Array<"u"?new Int32Array(A):A}var a=s();function r(k){var A=0,T=0,M=0,X=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)X[M]=k[M];for(M=0;M!=256;++M)for(T=k[M],A=256+M;A<4096;A+=256)T=X[A]=T>>>8^k[T&255];var ne=[];for(M=1;M!=16;++M)ne[M-1]=typeof Int32Array<"u"?X.subarray(M*256,M*256+256):X.slice(M*256,M*256+256);return ne}var n=r(a),l=n[0],i=n[1],o=n[2],c=n[3],d=n[4],u=n[5],x=n[6],p=n[7],h=n[8],y=n[9],f=n[10],v=n[11],w=n[12],g=n[13],j=n[14];function N(k,A){for(var T=A^-1,M=0,X=k.length;M<X;)T=T>>>8^a[(T^k.charCodeAt(M++))&255];return~T}function E(k,A){for(var T=A^-1,M=k.length-15,X=0;X<M;)T=j[k[X++]^T&255]^g[k[X++]^T>>8&255]^w[k[X++]^T>>16&255]^v[k[X++]^T>>>24]^f[k[X++]]^y[k[X++]]^h[k[X++]]^p[k[X++]]^x[k[X++]]^u[k[X++]]^d[k[X++]]^c[k[X++]]^o[k[X++]]^i[k[X++]]^l[k[X++]]^a[k[X++]];for(M+=15;X<M;)T=T>>>8^a[(T^k[X++])&255];return~T}function C(k,A){for(var T=A^-1,M=0,X=k.length,ne=0,Q=0;M<X;)ne=k.charCodeAt(M++),ne<128?T=T>>>8^a[(T^ne)&255]:ne<2048?(T=T>>>8^a[(T^(192|ne>>6&31))&255],T=T>>>8^a[(T^(128|ne&63))&255]):ne>=55296&&ne<57344?(ne=(ne&1023)+64,Q=k.charCodeAt(M++)&1023,T=T>>>8^a[(T^(240|ne>>8&7))&255],T=T>>>8^a[(T^(128|ne>>2&63))&255],T=T>>>8^a[(T^(128|Q>>6&15|(ne&3)<<4))&255],T=T>>>8^a[(T^(128|Q&63))&255]):(T=T>>>8^a[(T^(224|ne>>12&15))&255],T=T>>>8^a[(T^(128|ne>>6&63))&255],T=T>>>8^a[(T^(128|ne&63))&255]);return~T}return t.table=a,t.bstr=N,t.buf=E,t.str=C,t}(),Js=function(){var s={};s.version="1.2.1";function a(_,ee){for(var G=_.split("/"),le=ee.split("/"),fe=0,ye=0,Ue=Math.min(G.length,le.length);fe<Ue;++fe){if(ye=G[fe].length-le[fe].length)return ye;if(G[fe]!=le[fe])return G[fe]<le[fe]?-1:1}return G.length-le.length}function r(_){if(_.charAt(_.length-1)=="/")return _.slice(0,-1).indexOf("/")===-1?_:r(_.slice(0,-1));var ee=_.lastIndexOf("/");return ee===-1?_:_.slice(0,ee+1)}function n(_){if(_.charAt(_.length-1)=="/")return n(_.slice(0,-1));var ee=_.lastIndexOf("/");return ee===-1?_:_.slice(ee+1)}function l(_,ee){typeof ee=="string"&&(ee=new Date(ee));var G=ee.getHours();G=G<<6|ee.getMinutes(),G=G<<5|ee.getSeconds()>>>1,_.write_shift(2,G);var le=ee.getFullYear()-1980;le=le<<4|ee.getMonth()+1,le=le<<5|ee.getDate(),_.write_shift(2,le)}function i(_){var ee=_.read_shift(2)&65535,G=_.read_shift(2)&65535,le=new Date,fe=G&31;G>>>=5;var ye=G&15;G>>>=4,le.setMilliseconds(0),le.setFullYear(G+1980),le.setMonth(ye-1),le.setDate(fe);var Ue=ee&31;ee>>>=5;var at=ee&63;return ee>>>=6,le.setHours(ee),le.setMinutes(at),le.setSeconds(Ue<<1),le}function o(_){Pr(_,0);for(var ee={},G=0;_.l<=_.length-4;){var le=_.read_shift(2),fe=_.read_shift(2),ye=_.l+fe,Ue={};switch(le){case 21589:G=_.read_shift(1),G&1&&(Ue.mtime=_.read_shift(4)),fe>5&&(G&2&&(Ue.atime=_.read_shift(4)),G&4&&(Ue.ctime=_.read_shift(4))),Ue.mtime&&(Ue.mt=new Date(Ue.mtime*1e3));break}_.l=ye,ee[le]=Ue}return ee}var c;function d(){return c||(c={})}function u(_,ee){if(_[0]==80&&_[1]==75)return Ke(_,ee);if((_[0]|32)==109&&(_[1]|32)==105)return Us(_,ee);if(_.length<512)throw new Error("CFB file size "+_.length+" < 512");var G=3,le=512,fe=0,ye=0,Ue=0,at=0,Ge=0,Xe=[],tt=_.slice(0,512);Pr(tt,0);var yt=x(tt);switch(G=yt[0],G){case 3:le=512;break;case 4:le=4096;break;case 0:if(yt[1]==0)return Ke(_,ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+G)}le!==512&&(tt=_.slice(0,le),Pr(tt,28));var Mt=_.slice(0,le);p(tt,G);var Yt=tt.read_shift(4,"i");if(G===3&&Yt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Yt);tt.l+=4,Ue=tt.read_shift(4,"i"),tt.l+=4,tt.chk("00100000","Mini Stream Cutoff Size: "),at=tt.read_shift(4,"i"),fe=tt.read_shift(4,"i"),Ge=tt.read_shift(4,"i"),ye=tt.read_shift(4,"i");for(var Ct=-1,Lt=0;Lt<109&&(Ct=tt.read_shift(4,"i"),!(Ct<0));++Lt)Xe[Lt]=Ct;var ss=h(_,le);v(Ge,ye,ss,le,Xe);var qs=g(ss,Ue,Xe,le);qs[Ue].name="!Directory",fe>0&&at!==Q&&(qs[at].name="!MiniFAT"),qs[Xe[0]].name="!FAT",qs.fat_addrs=Xe,qs.ssz=le;var pe={},qe=[],Z=[],xe=[];j(Ue,qs,ss,qe,fe,pe,Z,at),y(Z,xe,qe),qe.shift();var Ce={FileIndex:Z,FullPaths:xe};return ee&&ee.raw&&(Ce.raw={header:Mt,sectors:ss}),Ce}function x(_){if(_[_.l]==80&&_[_.l+1]==75)return[0,0];_.chk(oe,"Header Signature: "),_.l+=16;var ee=_.read_shift(2,"u");return[_.read_shift(2,"u"),ee]}function p(_,ee){var G=9;switch(_.l+=2,G=_.read_shift(2)){case 9:if(ee!=3)throw new Error("Sector Shift: Expected 9 saw "+G);break;case 12:if(ee!=4)throw new Error("Sector Shift: Expected 12 saw "+G);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+G)}_.chk("0600","Mini Sector Shift: "),_.chk("000000000000","Reserved: ")}function h(_,ee){for(var G=Math.ceil(_.length/ee)-1,le=[],fe=1;fe<G;++fe)le[fe-1]=_.slice(fe*ee,(fe+1)*ee);return le[G-1]=_.slice(G*ee),le}function y(_,ee,G){for(var le=0,fe=0,ye=0,Ue=0,at=0,Ge=G.length,Xe=[],tt=[];le<Ge;++le)Xe[le]=tt[le]=le,ee[le]=G[le];for(;at<tt.length;++at)le=tt[at],fe=_[le].L,ye=_[le].R,Ue=_[le].C,Xe[le]===le&&(fe!==-1&&Xe[fe]!==fe&&(Xe[le]=Xe[fe]),ye!==-1&&Xe[ye]!==ye&&(Xe[le]=Xe[ye])),Ue!==-1&&(Xe[Ue]=le),fe!==-1&&le!=Xe[le]&&(Xe[fe]=Xe[le],tt.lastIndexOf(fe)<at&&tt.push(fe)),ye!==-1&&le!=Xe[le]&&(Xe[ye]=Xe[le],tt.lastIndexOf(ye)<at&&tt.push(ye));for(le=1;le<Ge;++le)Xe[le]===le&&(ye!==-1&&Xe[ye]!==ye?Xe[le]=Xe[ye]:fe!==-1&&Xe[fe]!==fe&&(Xe[le]=Xe[fe]));for(le=1;le<Ge;++le)if(_[le].type!==0){if(at=le,at!=Xe[at])do at=Xe[at],ee[le]=ee[at]+"/"+ee[le];while(at!==0&&Xe[at]!==-1&&at!=Xe[at]);Xe[le]=-1}for(ee[0]+="/",le=1;le<Ge;++le)_[le].type!==2&&(ee[le]+="/")}function f(_,ee,G){for(var le=_.start,fe=_.size,ye=[],Ue=le;G&&fe>0&&Ue>=0;)ye.push(ee.slice(Ue*ne,Ue*ne+ne)),fe-=ne,Ue=Yi(G,Ue*4);return ye.length===0?lt(0):Ua(ye).slice(0,_.size)}function v(_,ee,G,le,fe){var ye=Q;if(_===Q){if(ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(_!==-1){var Ue=G[_],at=(le>>>2)-1;if(!Ue)return;for(var Ge=0;Ge<at&&(ye=Yi(Ue,Ge*4))!==Q;++Ge)fe.push(ye);v(Yi(Ue,le-4),ee-1,G,le,fe)}}function w(_,ee,G,le,fe){var ye=[],Ue=[];fe||(fe=[]);var at=le-1,Ge=0,Xe=0;for(Ge=ee;Ge>=0;){fe[Ge]=!0,ye[ye.length]=Ge,Ue.push(_[Ge]);var tt=G[Math.floor(Ge*4/le)];if(Xe=Ge*4&at,le<4+Xe)throw new Error("FAT boundary crossed: "+Ge+" 4 "+le);if(!_[tt])break;Ge=Yi(_[tt],Xe)}return{nodes:ye,data:Nj([Ue])}}function g(_,ee,G,le){var fe=_.length,ye=[],Ue=[],at=[],Ge=[],Xe=le-1,tt=0,yt=0,Mt=0,Yt=0;for(tt=0;tt<fe;++tt)if(at=[],Mt=tt+ee,Mt>=fe&&(Mt-=fe),!Ue[Mt]){Ge=[];var Ct=[];for(yt=Mt;yt>=0;){Ct[yt]=!0,Ue[yt]=!0,at[at.length]=yt,Ge.push(_[yt]);var Lt=G[Math.floor(yt*4/le)];if(Yt=yt*4&Xe,le<4+Yt)throw new Error("FAT boundary crossed: "+yt+" 4 "+le);if(!_[Lt]||(yt=Yi(_[Lt],Yt),Ct[yt]))break}ye[Mt]={nodes:at,data:Nj([Ge])}}return ye}function j(_,ee,G,le,fe,ye,Ue,at){for(var Ge=0,Xe=le.length?2:0,tt=ee[_].data,yt=0,Mt=0,Yt;yt<tt.length;yt+=128){var Ct=tt.slice(yt,yt+128);Pr(Ct,64),Mt=Ct.read_shift(2),Yt=xv(Ct,0,Mt-Xe),le.push(Yt);var Lt={name:Yt,type:Ct.read_shift(1),color:Ct.read_shift(1),L:Ct.read_shift(4,"i"),R:Ct.read_shift(4,"i"),C:Ct.read_shift(4,"i"),clsid:Ct.read_shift(16),state:Ct.read_shift(4,"i"),start:0,size:0},ss=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);ss!==0&&(Lt.ct=N(Ct,Ct.l-8));var qs=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);qs!==0&&(Lt.mt=N(Ct,Ct.l-8)),Lt.start=Ct.read_shift(4,"i"),Lt.size=Ct.read_shift(4,"i"),Lt.size<0&&Lt.start<0&&(Lt.size=Lt.type=0,Lt.start=Q,Lt.name=""),Lt.type===5?(Ge=Lt.start,fe>0&&Ge!==Q&&(ee[Ge].name="!StreamData")):Lt.size>=4096?(Lt.storage="fat",ee[Lt.start]===void 0&&(ee[Lt.start]=w(G,Lt.start,ee.fat_addrs,ee.ssz)),ee[Lt.start].name=Lt.name,Lt.content=ee[Lt.start].data.slice(0,Lt.size)):(Lt.storage="minifat",Lt.size<0?Lt.size=0:Ge!==Q&&Lt.start!==Q&&ee[Ge]&&(Lt.content=f(Lt,ee[Ge].data,(ee[at]||{}).data))),Lt.content&&Pr(Lt.content,0),ye[Yt]=Lt,Ue.push(Lt)}}function N(_,ee){return new Date((Mr(_,ee+4)/1e7*Math.pow(2,32)+Mr(_,ee)/1e7-11644473600)*1e3)}function E(_,ee){return d(),u(c.readFileSync(_),ee)}function C(_,ee){var G=ee&&ee.type;switch(G||Rs&&Buffer.isBuffer(_)&&(G="buffer"),G||"base64"){case"file":return E(_,ee);case"base64":return u(Sn(Dl(_)),ee);case"binary":return u(Sn(_),ee)}return u(_,ee)}function k(_,ee){var G=ee||{},le=G.root||"Root Entry";if(_.FullPaths||(_.FullPaths=[]),_.FileIndex||(_.FileIndex=[]),_.FullPaths.length!==_.FileIndex.length)throw new Error("inconsistent CFB structure");_.FullPaths.length===0&&(_.FullPaths[0]=le+"/",_.FileIndex[0]={name:le,type:5}),G.CLSID&&(_.FileIndex[0].clsid=G.CLSID),A(_)}function A(_){var ee="Sh33tJ5";if(!Js.find(_,"/"+ee)){var G=lt(4);G[0]=55,G[1]=G[3]=50,G[2]=54,_.FileIndex.push({name:ee,type:2,content:G,size:4,L:69,R:69,C:69}),_.FullPaths.push(_.FullPaths[0]+ee),T(_)}}function T(_,ee){k(_);for(var G=!1,le=!1,fe=_.FullPaths.length-1;fe>=0;--fe){var ye=_.FileIndex[fe];switch(ye.type){case 0:le?G=!0:(_.FileIndex.pop(),_.FullPaths.pop());break;case 1:case 2:case 5:le=!0,isNaN(ye.R*ye.L*ye.C)&&(G=!0),ye.R>-1&&ye.L>-1&&ye.R==ye.L&&(G=!0);break;default:G=!0;break}}if(!(!G&&!ee)){var Ue=new Date(1987,1,19),at=0,Ge=Object.create?Object.create(null):{},Xe=[];for(fe=0;fe<_.FullPaths.length;++fe)Ge[_.FullPaths[fe]]=!0,_.FileIndex[fe].type!==0&&Xe.push([_.FullPaths[fe],_.FileIndex[fe]]);for(fe=0;fe<Xe.length;++fe){var tt=r(Xe[fe][0]);le=Ge[tt],le||(Xe.push([tt,{name:n(tt).replace("/",""),type:1,clsid:me,ct:Ue,mt:Ue,content:null}]),Ge[tt]=!0)}for(Xe.sort(function(Yt,Ct){return a(Yt[0],Ct[0])}),_.FullPaths=[],_.FileIndex=[],fe=0;fe<Xe.length;++fe)_.FullPaths[fe]=Xe[fe][0],_.FileIndex[fe]=Xe[fe][1];for(fe=0;fe<Xe.length;++fe){var yt=_.FileIndex[fe],Mt=_.FullPaths[fe];if(yt.name=n(Mt).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||me,fe===0)yt.C=Xe.length>1?1:-1,yt.size=0,yt.type=5;else if(Mt.slice(-1)=="/"){for(at=fe+1;at<Xe.length&&r(_.FullPaths[at])!=Mt;++at);for(yt.C=at>=Xe.length?-1:at,at=fe+1;at<Xe.length&&r(_.FullPaths[at])!=r(Mt);++at);yt.R=at>=Xe.length?-1:at,yt.type=1}else r(_.FullPaths[fe+1]||"")==r(Mt)&&(yt.R=fe+1),yt.type=2}}}function M(_,ee){var G=ee||{};if(G.fileType=="mad")return Ss(_,G);switch(T(_),G.fileType){case"zip":return Ze(_,G)}var le=function(Yt){for(var Ct=0,Lt=0,ss=0;ss<Yt.FileIndex.length;++ss){var qs=Yt.FileIndex[ss];if(qs.content){var pe=qs.content.length;pe>0&&(pe<4096?Ct+=pe+63>>6:Lt+=pe+511>>9)}}for(var qe=Yt.FullPaths.length+3>>2,Z=Ct+7>>3,xe=Ct+127>>7,Ce=Z+Lt+qe+xe,Qe=Ce+127>>7,ot=Qe<=109?0:Math.ceil((Qe-109)/127);Ce+Qe+ot+127>>7>Qe;)ot=++Qe<=109?0:Math.ceil((Qe-109)/127);var et=[1,ot,Qe,xe,qe,Lt,Ct,0];return Yt.FileIndex[0].size=Ct<<6,et[7]=(Yt.FileIndex[0].start=et[0]+et[1]+et[2]+et[3]+et[4]+et[5])+(et[6]+7>>3),et}(_),fe=lt(le[7]<<9),ye=0,Ue=0;{for(ye=0;ye<8;++ye)fe.write_shift(1,ge[ye]);for(ye=0;ye<8;++ye)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),ye=0;ye<3;++ye)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,le[2]),fe.write_shift(4,le[0]+le[1]+le[2]+le[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,le[3]?le[0]+le[1]+le[2]-1:Q),fe.write_shift(4,le[3]),fe.write_shift(-4,le[1]?le[0]-1:Q),fe.write_shift(4,le[1]),ye=0;ye<109;++ye)fe.write_shift(-4,ye<le[2]?le[1]+ye:-1)}if(le[1])for(Ue=0;Ue<le[1];++Ue){for(;ye<236+Ue*127;++ye)fe.write_shift(-4,ye<le[2]?le[1]+ye:-1);fe.write_shift(-4,Ue===le[1]-1?Q:Ue+1)}var at=function(Yt){for(Ue+=Yt;ye<Ue-1;++ye)fe.write_shift(-4,ye+1);Yt&&(++ye,fe.write_shift(-4,Q))};for(Ue=ye=0,Ue+=le[1];ye<Ue;++ye)fe.write_shift(-4,H.DIFSECT);for(Ue+=le[2];ye<Ue;++ye)fe.write_shift(-4,H.FATSECT);at(le[3]),at(le[4]);for(var Ge=0,Xe=0,tt=_.FileIndex[0];Ge<_.FileIndex.length;++Ge)tt=_.FileIndex[Ge],tt.content&&(Xe=tt.content.length,!(Xe<4096)&&(tt.start=Ue,at(Xe+511>>9)));for(at(le[6]+7>>3);fe.l&511;)fe.write_shift(-4,H.ENDOFCHAIN);for(Ue=ye=0,Ge=0;Ge<_.FileIndex.length;++Ge)tt=_.FileIndex[Ge],tt.content&&(Xe=tt.content.length,!(!Xe||Xe>=4096)&&(tt.start=Ue,at(Xe+63>>6)));for(;fe.l&511;)fe.write_shift(-4,H.ENDOFCHAIN);for(ye=0;ye<le[4]<<2;++ye){var yt=_.FullPaths[ye];if(!yt||yt.length===0){for(Ge=0;Ge<17;++Ge)fe.write_shift(4,0);for(Ge=0;Ge<3;++Ge)fe.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)fe.write_shift(4,0);continue}tt=_.FileIndex[ye],ye===0&&(tt.start=tt.size?tt.start-1:Q);var Mt=ye===0&&G.root||tt.name;if(Xe=2*(Mt.length+1),fe.write_shift(64,Mt,"utf16le"),fe.write_shift(2,Xe),fe.write_shift(1,tt.type),fe.write_shift(1,tt.color),fe.write_shift(-4,tt.L),fe.write_shift(-4,tt.R),fe.write_shift(-4,tt.C),tt.clsid)fe.write_shift(16,tt.clsid,"hex");else for(Ge=0;Ge<4;++Ge)fe.write_shift(4,0);fe.write_shift(4,tt.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,tt.start),fe.write_shift(4,tt.size),fe.write_shift(4,0)}for(ye=1;ye<_.FileIndex.length;++ye)if(tt=_.FileIndex[ye],tt.size>=4096)if(fe.l=tt.start+1<<9,Rs&&Buffer.isBuffer(tt.content))tt.content.copy(fe,fe.l,0,tt.size),fe.l+=tt.size+511&-512;else{for(Ge=0;Ge<tt.size;++Ge)fe.write_shift(1,tt.content[Ge]);for(;Ge&511;++Ge)fe.write_shift(1,0)}for(ye=1;ye<_.FileIndex.length;++ye)if(tt=_.FileIndex[ye],tt.size>0&&tt.size<4096)if(Rs&&Buffer.isBuffer(tt.content))tt.content.copy(fe,fe.l,0,tt.size),fe.l+=tt.size+63&-64;else{for(Ge=0;Ge<tt.size;++Ge)fe.write_shift(1,tt.content[Ge]);for(;Ge&63;++Ge)fe.write_shift(1,0)}if(Rs)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function X(_,ee){var G=_.FullPaths.map(function(Ge){return Ge.toUpperCase()}),le=G.map(function(Ge){var Xe=Ge.split("/");return Xe[Xe.length-(Ge.slice(-1)=="/"?2:1)]}),fe=!1;ee.charCodeAt(0)===47?(fe=!0,ee=G[0].slice(0,-1)+ee):fe=ee.indexOf("/")!==-1;var ye=ee.toUpperCase(),Ue=fe===!0?G.indexOf(ye):le.indexOf(ye);if(Ue!==-1)return _.FileIndex[Ue];var at=!ye.match(Su);for(ye=ye.replace($d,""),at&&(ye=ye.replace(Su,"!")),Ue=0;Ue<G.length;++Ue)if((at?G[Ue].replace(Su,"!"):G[Ue]).replace($d,"")==ye||(at?le[Ue].replace(Su,"!"):le[Ue]).replace($d,"")==ye)return _.FileIndex[Ue];return null}var ne=64,Q=-2,oe="d0cf11e0a1b11ae1",ge=[208,207,17,224,161,177,26,225],me="00000000000000000000000000000000",H={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:oe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:me,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function L(_,ee,G){d();var le=M(_,G);c.writeFileSync(ee,le)}function he(_){for(var ee=new Array(_.length),G=0;G<_.length;++G)ee[G]=String.fromCharCode(_[G]);return ee.join("")}function ie(_,ee){var G=M(_,ee);switch(ee&&ee.type||"buffer"){case"file":return d(),c.writeFileSync(ee.filename,G),G;case"binary":return typeof G=="string"?G:he(G);case"base64":return vm(typeof G=="string"?G:he(G));case"buffer":if(Rs)return Buffer.isBuffer(G)?G:Fl(G);case"array":return typeof G=="string"?Sn(G):G}return G}var ke;function V(_){try{var ee=_.InflateRaw,G=new ee;if(G._processChunk(new Uint8Array([3,0]),G._finishFlushFlag),G.bytesRead)ke=_;else throw new Error("zlib does not expose bytesRead")}catch(le){console.error("cannot use native zlib: "+(le.message||le))}}function O(_,ee){if(!ke)return ft(_,ee);var G=ke.InflateRaw,le=new G,fe=le._processChunk(_.slice(_.l),le._finishFlushFlag);return _.l+=le.bytesRead,fe}function Y(_){return ke?ke.deflateRawSync(_):Ee(_)}var W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function z(_){var ee=(_<<1|_<<11)&139536|(_<<5|_<<15)&558144;return(ee>>16|ee>>8|ee)&255}for(var te=typeof Uint8Array<"u",se=te?new Uint8Array(256):[],J=0;J<256;++J)se[J]=z(J);function je(_,ee){var G=se[_&255];return ee<=8?G>>>8-ee:(G=G<<8|se[_>>8&255],ee<=16?G>>>16-ee:(G=G<<8|se[_>>16&255],G>>>24-ee))}function b(_,ee){var G=ee&7,le=ee>>>3;return(_[le]|(G<=6?0:_[le+1]<<8))>>>G&3}function S(_,ee){var G=ee&7,le=ee>>>3;return(_[le]|(G<=5?0:_[le+1]<<8))>>>G&7}function D(_,ee){var G=ee&7,le=ee>>>3;return(_[le]|(G<=4?0:_[le+1]<<8))>>>G&15}function R(_,ee){var G=ee&7,le=ee>>>3;return(_[le]|(G<=3?0:_[le+1]<<8))>>>G&31}function F(_,ee){var G=ee&7,le=ee>>>3;return(_[le]|(G<=1?0:_[le+1]<<8))>>>G&127}function I(_,ee,G){var le=ee&7,fe=ee>>>3,ye=(1<<G)-1,Ue=_[fe]>>>le;return G<8-le||(Ue|=_[fe+1]<<8-le,G<16-le)||(Ue|=_[fe+2]<<16-le,G<24-le)||(Ue|=_[fe+3]<<24-le),Ue&ye}function ce(_,ee,G){var le=ee&7,fe=ee>>>3;return le<=5?_[fe]|=(G&7)<<le:(_[fe]|=G<<le&255,_[fe+1]=(G&7)>>8-le),ee+3}function de(_,ee,G){var le=ee&7,fe=ee>>>3;return G=(G&1)<<le,_[fe]|=G,ee+1}function ve(_,ee,G){var le=ee&7,fe=ee>>>3;return G<<=le,_[fe]|=G&255,G>>>=8,_[fe+1]=G,ee+8}function _e(_,ee,G){var le=ee&7,fe=ee>>>3;return G<<=le,_[fe]|=G&255,G>>>=8,_[fe+1]=G&255,_[fe+2]=G>>>8,ee+16}function ze(_,ee){var G=_.length,le=2*G>ee?2*G:ee+5,fe=0;if(G>=ee)return _;if(Rs){var ye=ij(le);if(_.copy)_.copy(ye);else for(;fe<_.length;++fe)ye[fe]=_[fe];return ye}else if(te){var Ue=new Uint8Array(le);if(Ue.set)Ue.set(_);else for(;fe<G;++fe)Ue[fe]=_[fe];return Ue}return _.length=le,_}function be(_){for(var ee=new Array(_),G=0;G<_;++G)ee[G]=0;return ee}function Me(_,ee,G){var le=1,fe=0,ye=0,Ue=0,at=0,Ge=_.length,Xe=te?new Uint16Array(32):be(32);for(ye=0;ye<32;++ye)Xe[ye]=0;for(ye=Ge;ye<G;++ye)_[ye]=0;Ge=_.length;var tt=te?new Uint16Array(Ge):be(Ge);for(ye=0;ye<Ge;++ye)Xe[fe=_[ye]]++,le<fe&&(le=fe),tt[ye]=0;for(Xe[0]=0,ye=1;ye<=le;++ye)Xe[ye+16]=at=at+Xe[ye-1]<<1;for(ye=0;ye<Ge;++ye)at=_[ye],at!=0&&(tt[ye]=Xe[at+16]++);var yt=0;for(ye=0;ye<Ge;++ye)if(yt=_[ye],yt!=0)for(at=je(tt[ye],le)>>le-yt,Ue=(1<<le+4-yt)-1;Ue>=0;--Ue)ee[at|Ue<<yt]=yt&15|ye<<4;return le}var Je=te?new Uint16Array(512):be(512),vt=te?new Uint16Array(32):be(32);if(!te){for(var Le=0;Le<512;++Le)Je[Le]=0;for(Le=0;Le<32;++Le)vt[Le]=0}(function(){for(var _=[],ee=0;ee<32;ee++)_.push(5);Me(_,vt,32);var G=[];for(ee=0;ee<=143;ee++)G.push(8);for(;ee<=255;ee++)G.push(9);for(;ee<=279;ee++)G.push(7);for(;ee<=287;ee++)G.push(8);Me(G,Je,288)})();var Ae=function(){for(var ee=te?new Uint8Array(32768):[],G=0,le=0;G<U.length-1;++G)for(;le<U[G+1];++le)ee[le]=G;for(;le<32768;++le)ee[le]=29;var fe=te?new Uint8Array(259):[];for(G=0,le=0;G<ue.length-1;++G)for(;le<ue[G+1];++le)fe[le]=G;function ye(at,Ge){for(var Xe=0;Xe<at.length;){var tt=Math.min(65535,at.length-Xe),yt=Xe+tt==at.length;for(Ge.write_shift(1,+yt),Ge.write_shift(2,tt),Ge.write_shift(2,~tt&65535);tt-- >0;)Ge[Ge.l++]=at[Xe++]}return Ge.l}function Ue(at,Ge){for(var Xe=0,tt=0,yt=te?new Uint16Array(32768):[];tt<at.length;){var Mt=Math.min(65535,at.length-tt);if(Mt<10){for(Xe=ce(Ge,Xe,+(tt+Mt==at.length)),Xe&7&&(Xe+=8-(Xe&7)),Ge.l=Xe/8|0,Ge.write_shift(2,Mt),Ge.write_shift(2,~Mt&65535);Mt-- >0;)Ge[Ge.l++]=at[tt++];Xe=Ge.l*8;continue}Xe=ce(Ge,Xe,+(tt+Mt==at.length)+2);for(var Yt=0;Mt-- >0;){var Ct=at[tt];Yt=(Yt<<5^Ct)&32767;var Lt=-1,ss=0;if((Lt=yt[Yt])&&(Lt|=tt&-32768,Lt>tt&&(Lt-=32768),Lt<tt))for(;at[Lt+ss]==at[tt+ss]&&ss<250;)++ss;if(ss>2){Ct=fe[ss],Ct<=22?Xe=ve(Ge,Xe,se[Ct+1]>>1)-1:(ve(Ge,Xe,3),Xe+=5,ve(Ge,Xe,se[Ct-23]>>5),Xe+=3);var qs=Ct<8?0:Ct-4>>2;qs>0&&(_e(Ge,Xe,ss-ue[Ct]),Xe+=qs),Ct=ee[tt-Lt],Xe=ve(Ge,Xe,se[Ct]>>3),Xe-=3;var pe=Ct<4?0:Ct-2>>1;pe>0&&(_e(Ge,Xe,tt-Lt-U[Ct]),Xe+=pe);for(var qe=0;qe<ss;++qe)yt[Yt]=tt&32767,Yt=(Yt<<5^at[tt])&32767,++tt;Mt-=ss-1}else Ct<=143?Ct=Ct+48:Xe=de(Ge,Xe,1),Xe=ve(Ge,Xe,se[Ct]),yt[Yt]=tt&32767,++tt}Xe=ve(Ge,Xe,0)-1}return Ge.l=(Xe+7)/8|0,Ge.l}return function(Ge,Xe){return Ge.length<8?ye(Ge,Xe):Ue(Ge,Xe)}}();function Ee(_){var ee=lt(50+Math.floor(_.length*1.1)),G=Ae(_,ee);return ee.slice(0,G)}var Se=te?new Uint16Array(32768):be(32768),B=te?new Uint16Array(32768):be(32768),Ye=te?new Uint16Array(128):be(128),Ne=1,rt=1;function Be(_,ee){var G=R(_,ee)+257;ee+=5;var le=R(_,ee)+1;ee+=5;var fe=D(_,ee)+4;ee+=4;for(var ye=0,Ue=te?new Uint8Array(19):be(19),at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,Xe=te?new Uint8Array(8):be(8),tt=te?new Uint8Array(8):be(8),yt=Ue.length,Mt=0;Mt<fe;++Mt)Ue[W[Mt]]=ye=S(_,ee),Ge<ye&&(Ge=ye),Xe[ye]++,ee+=3;var Yt=0;for(Xe[0]=0,Mt=1;Mt<=Ge;++Mt)tt[Mt]=Yt=Yt+Xe[Mt-1]<<1;for(Mt=0;Mt<yt;++Mt)(Yt=Ue[Mt])!=0&&(at[Mt]=tt[Yt]++);var Ct=0;for(Mt=0;Mt<yt;++Mt)if(Ct=Ue[Mt],Ct!=0){Yt=se[at[Mt]]>>8-Ct;for(var Lt=(1<<7-Ct)-1;Lt>=0;--Lt)Ye[Yt|Lt<<Ct]=Ct&7|Mt<<3}var ss=[];for(Ge=1;ss.length<G+le;)switch(Yt=Ye[F(_,ee)],ee+=Yt&7,Yt>>>=3){case 16:for(ye=3+b(_,ee),ee+=2,Yt=ss[ss.length-1];ye-- >0;)ss.push(Yt);break;case 17:for(ye=3+S(_,ee),ee+=3;ye-- >0;)ss.push(0);break;case 18:for(ye=11+F(_,ee),ee+=7;ye-- >0;)ss.push(0);break;default:ss.push(Yt),Ge<Yt&&(Ge=Yt);break}var qs=ss.slice(0,G),pe=ss.slice(G);for(Mt=G;Mt<286;++Mt)qs[Mt]=0;for(Mt=le;Mt<30;++Mt)pe[Mt]=0;return Ne=Me(qs,Se,286),rt=Me(pe,B,30),ee}function We(_,ee){if(_[0]==3&&!(_[1]&3))return[yo(ee),2];for(var G=0,le=0,fe=ij(ee||1<<18),ye=0,Ue=fe.length>>>0,at=0,Ge=0;!(le&1);){if(le=S(_,G),G+=3,le>>>1)le>>1==1?(at=9,Ge=5):(G=Be(_,G),at=Ne,Ge=rt);else{G&7&&(G+=8-(G&7));var Xe=_[G>>>3]|_[(G>>>3)+1]<<8;if(G+=32,Xe>0)for(!ee&&Ue<ye+Xe&&(fe=ze(fe,ye+Xe),Ue=fe.length);Xe-- >0;)fe[ye++]=_[G>>>3],G+=8;continue}for(;;){!ee&&Ue<ye+32767&&(fe=ze(fe,ye+32767),Ue=fe.length);var tt=I(_,G,at),yt=le>>>1==1?Je[tt]:Se[tt];if(G+=yt&15,yt>>>=4,!(yt>>>8&255))fe[ye++]=yt;else{if(yt==256)break;yt-=257;var Mt=yt<8?0:yt-4>>2;Mt>5&&(Mt=0);var Yt=ye+ue[yt];Mt>0&&(Yt+=I(_,G,Mt),G+=Mt),tt=I(_,G,Ge),yt=le>>>1==1?vt[tt]:B[tt],G+=yt&15,yt>>>=4;var Ct=yt<4?0:yt-2>>1,Lt=U[yt];for(Ct>0&&(Lt+=I(_,G,Ct),G+=Ct),!ee&&Ue<Yt&&(fe=ze(fe,Yt+100),Ue=fe.length);ye<Yt;)fe[ye]=fe[ye-Lt],++ye}}}return ee?[fe,G+7>>>3]:[fe.slice(0,ye),G+7>>>3]}function ft(_,ee){var G=_.slice(_.l||0),le=We(G,ee);return _.l+=le[1],le[0]}function He(_,ee){if(_)typeof console<"u"&&console.error(ee);else throw new Error(ee)}function Ke(_,ee){var G=_;Pr(G,0);var le=[],fe=[],ye={FileIndex:le,FullPaths:fe};k(ye,{root:ee.root});for(var Ue=G.length-4;(G[Ue]!=80||G[Ue+1]!=75||G[Ue+2]!=5||G[Ue+3]!=6)&&Ue>=0;)--Ue;G.l=Ue+4,G.l+=4;var at=G.read_shift(2);G.l+=6;var Ge=G.read_shift(4);for(G.l=Ge,Ue=0;Ue<at;++Ue){G.l+=20;var Xe=G.read_shift(4),tt=G.read_shift(4),yt=G.read_shift(2),Mt=G.read_shift(2),Yt=G.read_shift(2);G.l+=8;var Ct=G.read_shift(4),Lt=o(G.slice(G.l+yt,G.l+yt+Mt));G.l+=yt+Mt+Yt;var ss=G.l;G.l=Ct+4,Oe(G,Xe,tt,ye,Lt),G.l=ss}return ye}function Oe(_,ee,G,le,fe){_.l+=2;var ye=_.read_shift(2),Ue=_.read_shift(2),at=i(_);if(ye&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=_.read_shift(4),Xe=_.read_shift(4),tt=_.read_shift(4),yt=_.read_shift(2),Mt=_.read_shift(2),Yt="",Ct=0;Ct<yt;++Ct)Yt+=String.fromCharCode(_[_.l++]);if(Mt){var Lt=o(_.slice(_.l,_.l+Mt));(Lt[21589]||{}).mt&&(at=Lt[21589].mt),((fe||{})[21589]||{}).mt&&(at=fe[21589].mt)}_.l+=Mt;var ss=_.slice(_.l,_.l+Xe);switch(Ue){case 8:ss=O(_,tt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ue)}var qs=!1;ye&8&&(Ge=_.read_shift(4),Ge==134695760&&(Ge=_.read_shift(4),qs=!0),Xe=_.read_shift(4),tt=_.read_shift(4)),Xe!=ee&&He(qs,"Bad compressed size: "+ee+" != "+Xe),tt!=G&&He(qs,"Bad uncompressed size: "+G+" != "+tt),$e(le,Yt,ss,{unsafe:!0,mt:at})}function Ze(_,ee){var G=ee||{},le=[],fe=[],ye=lt(1),Ue=G.compression?8:0,at=0,Ge=0,Xe=0,tt=0,yt=0,Mt=_.FullPaths[0],Yt=Mt,Ct=_.FileIndex[0],Lt=[],ss=0;for(Ge=1;Ge<_.FullPaths.length;++Ge)if(Yt=_.FullPaths[Ge].slice(Mt.length),Ct=_.FileIndex[Ge],!(!Ct.size||!Ct.content||Yt=="Sh33tJ5")){var qs=tt,pe=lt(Yt.length);for(Xe=0;Xe<Yt.length;++Xe)pe.write_shift(1,Yt.charCodeAt(Xe)&127);pe=pe.slice(0,pe.l),Lt[yt]=pO.buf(Ct.content,0);var qe=Ct.content;Ue==8&&(qe=Y(qe)),ye=lt(30),ye.write_shift(4,67324752),ye.write_shift(2,20),ye.write_shift(2,at),ye.write_shift(2,Ue),Ct.mt?l(ye,Ct.mt):ye.write_shift(4,0),ye.write_shift(-4,Lt[yt]),ye.write_shift(4,qe.length),ye.write_shift(4,Ct.content.length),ye.write_shift(2,pe.length),ye.write_shift(2,0),tt+=ye.length,le.push(ye),tt+=pe.length,le.push(pe),tt+=qe.length,le.push(qe),ye=lt(46),ye.write_shift(4,33639248),ye.write_shift(2,0),ye.write_shift(2,20),ye.write_shift(2,at),ye.write_shift(2,Ue),ye.write_shift(4,0),ye.write_shift(-4,Lt[yt]),ye.write_shift(4,qe.length),ye.write_shift(4,Ct.content.length),ye.write_shift(2,pe.length),ye.write_shift(2,0),ye.write_shift(2,0),ye.write_shift(2,0),ye.write_shift(2,0),ye.write_shift(4,0),ye.write_shift(4,qs),ss+=ye.l,fe.push(ye),ss+=pe.length,fe.push(pe),++yt}return ye=lt(22),ye.write_shift(4,101010256),ye.write_shift(2,0),ye.write_shift(2,0),ye.write_shift(2,yt),ye.write_shift(2,yt),ye.write_shift(4,ss),ye.write_shift(4,tt),ye.write_shift(2,0),Ua([Ua(le),Ua(fe),ye])}var it={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function dt(_,ee){if(_.ctype)return _.ctype;var G=_.name||"",le=G.match(/\.([^\.]+)$/);return le&&it[le[1]]||ee&&(le=(G=ee).match(/[\.\\]([^\.\\])+$/),le&&it[le[1]])?it[le[1]]:"application/octet-stream"}function xt(_){for(var ee=vm(_),G=[],le=0;le<ee.length;le+=76)G.push(ee.slice(le,le+76));return G.join(`\r
`)+`\r
`}function Wt(_){var ee=_.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var tt=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(tt.length==1?"0"+tt:tt)});ee=ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ee.charAt(0)==`
`&&(ee="=0D"+ee.slice(1)),ee=ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var G=[],le=ee.split(`\r
`),fe=0;fe<le.length;++fe){var ye=le[fe];if(ye.length==0){G.push("");continue}for(var Ue=0;Ue<ye.length;){var at=76,Ge=ye.slice(Ue,Ue+at);Ge.charAt(at-1)=="="?at--:Ge.charAt(at-2)=="="?at-=2:Ge.charAt(at-3)=="="&&(at-=3),Ge=ye.slice(Ue,Ue+at),Ue+=at,Ue<ye.length&&(Ge+="="),G.push(Ge)}}return G.join(`\r
`)}function qt(_){for(var ee=[],G=0;G<_.length;++G){for(var le=_[G];G<=_.length&&le.charAt(le.length-1)=="=";)le=le.slice(0,le.length-1)+_[++G];ee.push(le)}for(var fe=0;fe<ee.length;++fe)ee[fe]=ee[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(ye){return String.fromCharCode(parseInt(ye.slice(1),16))});return Sn(ee.join(`\r
`))}function bs(_,ee,G){for(var le="",fe="",ye="",Ue,at=0;at<10;++at){var Ge=ee[at];if(!Ge||Ge.match(/^\s*$/))break;var Xe=Ge.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":le=Xe[2].trim();break;case"content-type":ye=Xe[2].trim();break;case"content-transfer-encoding":fe=Xe[2].trim();break}}switch(++at,fe.toLowerCase()){case"base64":Ue=Sn(Dl(ee.slice(at).join("")));break;case"quoted-printable":Ue=qt(ee.slice(at));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var tt=$e(_,le.slice(G.length),Ue,{unsafe:!0});ye&&(tt.ctype=ye)}function Us(_,ee){if(he(_.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var G=ee&&ee.root||"",le=(Rs&&Buffer.isBuffer(_)?_.toString("binary"):he(_)).split(`\r
`),fe=0,ye="";for(fe=0;fe<le.length;++fe)if(ye=le[fe],!!/^Content-Location:/i.test(ye)&&(ye=ye.slice(ye.indexOf("file")),G||(G=ye.slice(0,ye.lastIndexOf("/")+1)),ye.slice(0,G.length)!=G))for(;G.length>0&&(G=G.slice(0,G.length-1),G=G.slice(0,G.lastIndexOf("/")+1),ye.slice(0,G.length)!=G););var Ue=(le[1]||"").match(/boundary="(.*?)"/);if(!Ue)throw new Error("MAD cannot find boundary");var at="--"+(Ue[1]||""),Ge=[],Xe=[],tt={FileIndex:Ge,FullPaths:Xe};k(tt);var yt,Mt=0;for(fe=0;fe<le.length;++fe){var Yt=le[fe];Yt!==at&&Yt!==at+"--"||(Mt++&&bs(tt,le.slice(yt,fe),G),yt=fe)}return tt}function Ss(_,ee){var G=ee||{},le=G.boundary||"SheetJS";le="------="+le;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+le.slice(2)+'"',"","",""],ye=_.FullPaths[0],Ue=ye,at=_.FileIndex[0],Ge=1;Ge<_.FullPaths.length;++Ge)if(Ue=_.FullPaths[Ge].slice(ye.length),at=_.FileIndex[Ge],!(!at.size||!at.content||Ue=="Sh33tJ5")){Ue=Ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ss){return"_x"+ss.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ss){return"_u"+ss.charCodeAt(0).toString(16)+"_"});for(var Xe=at.content,tt=Rs&&Buffer.isBuffer(Xe)?Xe.toString("binary"):he(Xe),yt=0,Mt=Math.min(1024,tt.length),Yt=0,Ct=0;Ct<=Mt;++Ct)(Yt=tt.charCodeAt(Ct))>=32&&Yt<128&&++yt;var Lt=yt>=Mt*4/5;fe.push(le),fe.push("Content-Location: "+(G.root||"file:///C:/SheetJS/")+Ue),fe.push("Content-Transfer-Encoding: "+(Lt?"quoted-printable":"base64")),fe.push("Content-Type: "+dt(at,Ue)),fe.push(""),fe.push(Lt?Wt(tt):xt(tt))}return fe.push(le+`--\r
`),fe.join(`\r
`)}function Ls(_){var ee={};return k(ee,_),ee}function $e(_,ee,G,le){var fe=le&&le.unsafe;fe||k(_);var ye=!fe&&Js.find(_,ee);if(!ye){var Ue=_.FullPaths[0];ee.slice(0,Ue.length)==Ue?Ue=ee:(Ue.slice(-1)!="/"&&(Ue+="/"),Ue=(Ue+ee).replace("//","/")),ye={name:n(ee),type:2},_.FileIndex.push(ye),_.FullPaths.push(Ue),fe||Js.utils.cfb_gc(_)}return ye.content=G,ye.size=G?G.length:0,le&&(le.CLSID&&(ye.clsid=le.CLSID),le.mt&&(ye.mt=le.mt),le.ct&&(ye.ct=le.ct)),ye}function we(_,ee){k(_);var G=Js.find(_,ee);if(G){for(var le=0;le<_.FileIndex.length;++le)if(_.FileIndex[le]==G)return _.FileIndex.splice(le,1),_.FullPaths.splice(le,1),!0}return!1}function K(_,ee,G){k(_);var le=Js.find(_,ee);if(le){for(var fe=0;fe<_.FileIndex.length;++fe)if(_.FileIndex[fe]==le)return _.FileIndex[fe].name=n(G),_.FullPaths[fe]=G,!0}return!1}function De(_){T(_,!0)}return s.find=X,s.read=C,s.parse=u,s.write=ie,s.writeFile=L,s.utils={cfb_new:Ls,cfb_add:$e,cfb_del:we,cfb_mov:K,cfb_gc:De,ReadShift:Bd,CheckField:V3,prep_blob:Pr,bconcat:Ua,use_zlib:V,_deflateRaw:Ee,_inflateRaw:ft,consts:H},s}();function fO(t){return typeof t=="string"?Mh(t):Array.isArray(t)?zR(t):t}function zm(t,s,a){if(typeof Deno<"u"){if(a&&typeof s=="string")switch(a){case"utf8":s=new TextEncoder(a).encode(s);break;case"binary":s=Mh(s);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(t,s)}var r=a=="utf8"?ym(s):s;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var n=new Blob([fO(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,t);if(typeof saveAs<"u")return saveAs(n,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var l=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),chrome.downloads.download({url:l,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=l,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),l}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(s)&&(s=Bm(s)),o.write(s),o.close(),s}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function Wa(t){for(var s=Object.keys(t),a=[],r=0;r<s.length;++r)Object.prototype.hasOwnProperty.call(t,s[r])&&a.push(s[r]);return a}function pj(t,s){for(var a=[],r=Wa(t),n=0;n!==r.length;++n)a[t[r[n]][s]]==null&&(a[t[r[n]][s]]=r[n]);return a}function cv(t){for(var s=[],a=Wa(t),r=0;r!==a.length;++r)s[t[a[r]]]=a[r];return s}function Oh(t){for(var s=[],a=Wa(t),r=0;r!==a.length;++r)s[t[a[r]]]=parseInt(a[r],10);return s}function gO(t){for(var s=[],a=Wa(t),r=0;r!==a.length;++r)s[t[a[r]]]==null&&(s[t[a[r]]]=[]),s[t[a[r]]].push(a[r]);return s}var Vx=new Date(1899,11,30,0,0,0);function kr(t,s){var a=t.getTime(),r=Vx.getTime()+(t.getTimezoneOffset()-Vx.getTimezoneOffset())*6e4;return(a-r)/(24*60*60*1e3)}var k3=new Date,vO=Vx.getTime()+(k3.getTimezoneOffset()-Vx.getTimezoneOffset())*6e4,fj=k3.getTimezoneOffset();function E3(t){var s=new Date;return s.setTime(t*24*60*60*1e3+vO),s.getTimezoneOffset()!==fj&&s.setTime(s.getTime()+(s.getTimezoneOffset()-fj)*6e4),s}var gj=new Date("2017-02-19T19:06:09.000Z"),D3=isNaN(gj.getFullYear())?new Date("2/19/17"):gj,wO=D3.getFullYear()==2017;function ur(t,s){var a=new Date(t);if(wO)return s>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):s<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(t instanceof Date)return t;if(D3.getFullYear()==1917&&!isNaN(a.getFullYear())){var r=a.getFullYear();return t.indexOf(""+r)>-1||a.setFullYear(a.getFullYear()+100),a}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],l=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(l=new Date(l.getTime()-l.getTimezoneOffset()*60*1e3)),l}function Lh(t,s){if(Rs&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var a={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(l){return a[l]||l})}catch{}for(var r=[],n=0;n!=t.length;++n)r.push(String.fromCharCode(t[n]));return r.join("")}function Er(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=Er(t[a]));return s}function xa(t,s){for(var a="";a.length<s;)a+=t;return a}function fl(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var a=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(s=Number(r))||(r=r.replace(/[(](.*)[)]/,function(n,l){return a=-a,l}),!isNaN(s=Number(r)))?s/a:s}var yO=["january","february","march","april","may","june","july","august","september","october","november","december"];function wm(t){var s=new Date(t),a=new Date(NaN),r=s.getYear(),n=s.getMonth(),l=s.getDate();if(isNaN(l))return a;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&yO.indexOf(i)==-1)return a}else if(i.match(/[a-z]/))return a;return r<0||r>8099?a:(n>0||l>1)&&r!=101?s:t.match(/[^-0-9:,\/\\]/)?a:s}function ys(t,s,a){if(t.FullPaths){if(typeof a=="string"){var r;return Rs?r=Fl(a):r=VR(a),Js.utils.cfb_add(t,s,r)}Js.utils.cfb_add(t,s,a)}else t.file(s,a)}function dv(){return Js.utils.cfb_new()}var ka=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,jO={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},mv=cv(jO),uv=/[&<>'"]/g,NO=/[\u0000-\u0008\u000b-\u001f]/g;function Ys(t){var s=t+"";return s.replace(uv,function(a){return mv[a]}).replace(NO,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function vj(t){return Ys(t).replace(/ /g,"_x0020_")}var A3=/[\u0000-\u001f]/g;function bO(t){var s=t+"";return s.replace(uv,function(a){return mv[a]}).replace(/\n/g,"<br/>").replace(A3,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function SO(t){var s=t+"";return s.replace(uv,function(a){return mv[a]}).replace(A3,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}function CO(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function kO(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Vp(t){for(var s="",a=0,r=0,n=0,l=0,i=0,o=0;a<t.length;){if(r=t.charCodeAt(a++),r<128){s+=String.fromCharCode(r);continue}if(n=t.charCodeAt(a++),r>191&&r<224){i=(r&31)<<6,i|=n&63,s+=String.fromCharCode(i);continue}if(l=t.charCodeAt(a++),r<240){s+=String.fromCharCode((r&15)<<12|(n&63)<<6|l&63);continue}i=t.charCodeAt(a++),o=((r&7)<<18|(n&63)<<12|(l&63)<<6|i&63)-65536,s+=String.fromCharCode(55296+(o>>>10&1023)),s+=String.fromCharCode(56320+(o&1023))}return s}function wj(t){var s=yo(2*t.length),a,r,n=1,l=0,i=0,o;for(r=0;r<t.length;r+=n)n=1,(o=t.charCodeAt(r))<128?a=o:o<224?(a=(o&31)*64+(t.charCodeAt(r+1)&63),n=2):o<240?(a=(o&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),n=3):(n=4,a=(o&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),a-=65536,i=55296+(a>>>10&1023),a=56320+(a&1023)),i!==0&&(s[l++]=i&255,s[l++]=i>>>8,i=0),s[l++]=a%256,s[l++]=a>>>8;return s.slice(0,l).toString("ucs2")}function yj(t){return Fl(t,"binary").toString("utf8")}var ku="foo bar baz",Ud=Rs&&(yj(ku)==Vp(ku)&&yj||wj(ku)==Vp(ku)&&wj)||Vp,ym=Rs?function(t){return Fl(t,"utf8").toString("binary")}:function(t){for(var s=[],a=0,r=0,n=0;a<t.length;)switch(r=t.charCodeAt(a++),!0){case r<128:s.push(String.fromCharCode(r));break;case r<2048:s.push(String.fromCharCode(192+(r>>6))),s.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,n=t.charCodeAt(a++)-56320+(r<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(r>>12))),s.push(String.fromCharCode(128+(r>>6&63))),s.push(String.fromCharCode(128+(r&63)))}return s.join("")},EO=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(a){for(var r=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)r=r.replace(t[n][0],t[n][1]);return r}}(),_3=/(^\s|\s$|\n)/;function Ba(t,s){return"<"+t+(s.match(_3)?' xml:space="preserve"':"")+">"+s+"</"+t+">"}function jm(t){return Wa(t).map(function(s){return" "+s+'="'+t[s]+'"'}).join("")}function Tt(t,s,a){return"<"+t+(a!=null?jm(a):"")+(s!=null?(s.match(_3)?' xml:space="preserve"':"")+">"+s+"</"+t:"/")+">"}function p0(t,s){try{return t.toISOString().replace(/\.\d*/,"")}catch(a){if(s)throw a}return""}function DO(t,s){switch(typeof t){case"string":var a=Tt("vt:lpwstr",Ys(t));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return Tt((t|0)==t?"vt:i4":"vt:r8",Ys(String(t)));case"boolean":return Tt("vt:bool",t?"true":"false")}if(t instanceof Date)return Tt("vt:filetime",p0(t));throw new Error("Unable to serialize "+t)}var Fa={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Xc=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Fr={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function AO(t,s){for(var a=1-2*(t[s+7]>>>7),r=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),n=t[s+6]&15,l=5;l>=0;--l)n=n*256+t[s+l];return r==2047?n==0?a*(1/0):NaN:(r==0?r=-1022:(r-=1023,n+=Math.pow(2,52)),a*Math.pow(2,r-52)*n)}function _O(t,s,a){var r=(s<0||1/s==-1/0?1:0)<<7,n=0,l=0,i=r?-s:s;isFinite(i)?i==0?n=l=0:(n=Math.floor(Math.log(i)/Math.LN2),l=i*Math.pow(2,52-n),n<=-1023&&(!isFinite(l)||l<Math.pow(2,52))?n=-1022:(l-=Math.pow(2,52),n+=1023)):(n=2047,l=isNaN(s)?26985:0);for(var o=0;o<=5;++o,l/=256)t[a+o]=l&255;t[a+6]=(n&15)<<4|l&15,t[a+7]=n>>4|r}var jj=function(t){for(var s=[],a=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var n=0,l=t[0][r].length;n<l;n+=a)s.push.apply(s,t[0][r].slice(n,n+a));return s},Nj=Rs?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:Fl(s)})):jj(t)}:jj,bj=function(t,s,a){for(var r=[],n=s;n<a;n+=2)r.push(String.fromCharCode(kd(t,n)));return r.join("").replace($d,"")},xv=Rs?function(t,s,a){return Buffer.isBuffer(t)?t.toString("utf16le",s,a).replace($d,""):bj(t,s,a)}:bj,Sj=function(t,s,a){for(var r=[],n=s;n<s+a;++n)r.push(("0"+t[n].toString(16)).slice(-2));return r.join("")},P3=Rs?function(t,s,a){return Buffer.isBuffer(t)?t.toString("hex",s,s+a):Sj(t,s,a)}:Sj,Cj=function(t,s,a){for(var r=[],n=s;n<a;n++)r.push(String.fromCharCode(Bo(t,n)));return r.join("")},Vm=Rs?function(s,a,r){return Buffer.isBuffer(s)?s.toString("utf8",a,r):Cj(s,a,r)}:Cj,T3=function(t,s){var a=Mr(t,s);return a>0?Vm(t,s+4,s+4+a-1):""},F3=T3,M3=function(t,s){var a=Mr(t,s);return a>0?Vm(t,s+4,s+4+a-1):""},I3=M3,R3=function(t,s){var a=2*Mr(t,s);return a>0?Vm(t,s+4,s+4+a-1):""},O3=R3,L3=function(s,a){var r=Mr(s,a);return r>0?xv(s,a+4,a+4+r):""},$3=L3,U3=function(t,s){var a=Mr(t,s);return a>0?Vm(t,s+4,s+4+a):""},B3=U3,z3=function(t,s){return AO(t,s)},Yx=z3,hv=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};Rs&&(F3=function(s,a){if(!Buffer.isBuffer(s))return T3(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},I3=function(s,a){if(!Buffer.isBuffer(s))return M3(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},O3=function(s,a){if(!Buffer.isBuffer(s))return R3(s,a);var r=2*s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r-1)},$3=function(s,a){if(!Buffer.isBuffer(s))return L3(s,a);var r=s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r)},B3=function(s,a){if(!Buffer.isBuffer(s))return U3(s,a);var r=s.readUInt32LE(a);return s.toString("utf8",a+4,a+4+r)},Yx=function(s,a){return Buffer.isBuffer(s)?s.readDoubleLE(a):z3(s,a)},hv=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var Bo=function(t,s){return t[s]},kd=function(t,s){return t[s+1]*256+t[s]},PO=function(t,s){var a=t[s+1]*256+t[s];return a<32768?a:(65535-a+1)*-1},Mr=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},Yi=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},TO=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function Bd(t,s){var a="",r,n,l=[],i,o,c,d;switch(s){case"dbcs":if(d=this.l,Rs&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)a+=String.fromCharCode(kd(this,d)),d+=2;t*=2;break;case"utf8":a=Vm(this,this.l,this.l+t);break;case"utf16le":t*=2,a=xv(this,this.l,this.l+t);break;case"wstr":return Bd.call(this,t,"dbcs");case"lpstr-ansi":a=F3(this,this.l),t=4+Mr(this,this.l);break;case"lpstr-cp":a=I3(this,this.l),t=4+Mr(this,this.l);break;case"lpwstr":a=O3(this,this.l),t=4+2*Mr(this,this.l);break;case"lpp4":t=4+Mr(this,this.l),a=$3(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Mr(this,this.l),a=B3(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,a="";(i=Bo(this,this.l+t++))!==0;)l.push(bu(i));a=l.join("");break;case"_wstr":for(t=0,a="";(i=kd(this,this.l+t))!==0;)l.push(bu(i)),t+=2;t+=2,a=l.join("");break;case"dbcs-cont":for(a="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=Bo(this,d),this.l=d+1,o=Bd.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),l.join("")+o;l.push(bu(kd(this,d))),d+=2}a=l.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(a="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=Bo(this,d),this.l=d+1,o=Bd.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),l.join("")+o;l.push(bu(Bo(this,d))),d+=1}a=l.join("");break;default:switch(t){case 1:return r=Bo(this,this.l),this.l++,r;case 2:return r=(s==="i"?PO:kd)(this,this.l),this.l+=2,r;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(r=(t>0?Yi:TO)(this,this.l),this.l+=4,r):(n=Mr(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return t==8?n=Yx(this,this.l):n=Yx([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:a=P3(this,this.l,t);break}}return this.l+=t,a}var FO=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255,t[a+2]=s>>>16&255,t[a+3]=s>>>24&255},MO=function(t,s,a){t[a]=s&255,t[a+1]=s>>8&255,t[a+2]=s>>16&255,t[a+3]=s>>24&255},IO=function(t,s,a){t[a]=s&255,t[a+1]=s>>>8&255};function RO(t,s,a){var r=0,n=0;if(a==="dbcs"){for(n=0;n!=s.length;++n)IO(this,s.charCodeAt(n),this.l+2*n);r=2*s.length}else if(a==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;r=s.length}else if(a==="hex"){for(;n<t;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(a==="utf16le"){var l=Math.min(this.l+t,this.length);for(n=0;n<Math.min(s.length,t);++n){var i=s.charCodeAt(n);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=s&255;break;case 2:r=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:r=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:r=4,FO(this,s,this.l);break;case 8:if(r=8,a==="f"){_O(this,s,this.l);break}case 16:break;case-4:r=4,MO(this,s,this.l);break}return this.l+=r,this}function V3(t,s){var a=P3(this,this.l,t.length>>1);if(a!==t)throw new Error(s+"Expected "+t+" saw "+a);this.l+=t.length>>1}function Pr(t,s){t.l=s,t.read_shift=Bd,t.chk=V3,t.write_shift=RO}function sl(t,s){t.l+=s}function lt(t){var s=yo(t);return Pr(s,0),s}function Cr(){var t=[],s=Rs?256:2048,a=function(d){var u=lt(d);return Pr(u,0),u},r=a(s),n=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},l=function(d){return r&&d<r.length-r.l?r:(n(),r=a(Math.max(d+1,s)))},i=function(){return n(),Ua(t)},o=function(d){n(),r=d,r.l==null&&(r.l=r.length),l(s)};return{next:l,push:o,end:i,_bufs:t}}function pt(t,s,a,r){var n=+s,l;if(!isNaN(n)){r||(r=AB[n].p||(a||[]).length||0),l=1+(n>=128?1:0)+1,r>=128&&++l,r>=16384&&++l,r>=2097152&&++l;var i=t.next(l);n<=127?i.write_shift(1,n):(i.write_shift(1,(n&127)+128),i.write_shift(1,n>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&hv(a)&&t.push(a)}}function zd(t,s,a){var r=Er(t);if(s.s?(r.cRel&&(r.c+=s.s.c),r.rRel&&(r.r+=s.s.r)):(r.cRel&&(r.c+=s.c),r.rRel&&(r.r+=s.r)),!a||a.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function kj(t,s,a){var r=Er(t);return r.s=zd(r.s,s.s,a),r.e=zd(r.e,s.s,a),r}function Vd(t,s){if(t.cRel&&t.c<0)for(t=Er(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=Er(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var a=Hs(t);return!t.cRel&&t.cRel!=null&&(a=$O(a)),!t.rRel&&t.rRel!=null&&(a=OO(a)),a}function Yp(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Za(t.s.c)+":"+(t.e.cRel?"":"$")+Za(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Va(t.s.r)+":"+(t.e.rRel?"":"$")+Va(t.e.r):Vd(t.s,s.biff)+":"+Vd(t.e,s.biff)}function pv(t){return parseInt(LO(t),10)-1}function Va(t){return""+(t+1)}function OO(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function LO(t){return t.replace(/\$(\d+)$/,"$1")}function fv(t){for(var s=UO(t),a=0,r=0;r!==s.length;++r)a=26*a+s.charCodeAt(r)-64;return a-1}function Za(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function $O(t){return t.replace(/^([A-Z])/,"$$$1")}function UO(t){return t.replace(/^\$([A-Z])/,"$1")}function BO(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ma(t){for(var s=0,a=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(a=26*a+(n-64))}return{c:a-1,r:s-1}}function Hs(t){for(var s=t.c+1,a="";s;s=(s-1)/26|0)a=String.fromCharCode((s-1)%26+65)+a;return a+(t.r+1)}function Yr(t){var s=t.indexOf(":");return s==-1?{s:Ma(t),e:Ma(t)}:{s:Ma(t.slice(0,s)),e:Ma(t.slice(s+1))}}function Sa(t,s){return typeof s>"u"||typeof s=="number"?Sa(t.s,t.e):(typeof t!="string"&&(t=Hs(t)),typeof s!="string"&&(s=Hs(s)),t==s?t:t+":"+s)}function na(t){var s={s:{c:0,r:0},e:{c:0,r:0}},a=0,r=0,n=0,l=t.length;for(a=0;r<l&&!((n=t.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.s.c=--a,a=0;r<l&&!((n=t.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;if(s.s.r=--a,r===l||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++r,a=0;r!=l&&!((n=t.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.e.c=--a,a=0;r!=l&&!((n=t.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;return s.e.r=--a,s}function Ej(t,s){var a=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=Ci(t.z,a?kr(s):s)}catch{}try{return t.w=Ci((t.XF||{}).numFmtId||(a?14:0),a?kr(s):s)}catch{return""+s}}function Al(t,s,a){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&a&&a.dateNF&&(t.z=a.dateNF),t.t=="e"?Ym[t.v]||t.v:s==null?Ej(t,t.v):Ej(t,s))}function ko(t,s){var a=s&&s.sheet?s.sheet:"Sheet1",r={};return r[a]=t,{SheetNames:[a],Sheets:r}}function Y3(t,s,a){var r=a||{},n=t?Array.isArray(t):r.dense,l=t||(n?[]:{}),i=0,o=0;if(l&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var c=typeof r.origin=="string"?Ma(r.origin):r.origin;i=c.r,o=c.c}l["!ref"]||(l["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(l["!ref"]){var u=na(l["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),i==-1&&(d.e.r=i=u.e.r+1)}for(var x=0;x!=s.length;++x)if(s[x]){if(!Array.isArray(s[x]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=s[x].length;++p)if(!(typeof s[x][p]>"u")){var h={v:s[x][p]},y=i+x,f=o+p;if(d.s.r>y&&(d.s.r=y),d.s.c>f&&(d.s.c=f),d.e.r<y&&(d.e.r=y),d.e.c<f&&(d.e.c=f),s[x][p]&&typeof s[x][p]=="object"&&!Array.isArray(s[x][p])&&!(s[x][p]instanceof Date))h=s[x][p];else if(Array.isArray(h.v)&&(h.f=s[x][p][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(r.nullError)h.t="e",h.v=0;else if(r.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=r.dateNF||pa[14],r.cellDates?(h.t="d",h.w=Ci(h.z,kr(h.v))):(h.t="n",h.v=kr(h.v),h.w=Ci(h.z,h.v))):h.t="s";if(n)l[y]||(l[y]=[]),l[y][f]&&l[y][f].z&&(h.z=l[y][f].z),l[y][f]=h;else{var v=Hs({c:f,r:y});l[v]&&l[v].z&&(h.z=l[v].z),l[v]=h}}}return d.s.c<1e7&&(l["!ref"]=Sa(d)),l}function Qc(t,s){return Y3(null,t,s)}function zO(t){return t.read_shift(4,"i")}function Dn(t,s){return s||(s=lt(4)),s.write_shift(4,t),s}function er(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function Ia(t,s){var a=!1;return s==null&&(a=!0,s=lt(4+2*t.length)),s.write_shift(4,t.length),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}function VO(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function YO(t,s){return s||(s=lt(4)),s.write_shift(2,0),s.write_shift(2,0),s}function gv(t,s){var a=t.l,r=t.read_shift(1),n=er(t),l=[],i={t:n,h:n};if(r&1){for(var o=t.read_shift(4),c=0;c!=o;++c)l.push(VO(t));i.r=l}else i.r=[{ich:0,ifnt:0}];return t.l=a+s,i}function WO(t,s){var a=!1;return s==null&&(a=!0,s=lt(15+4*t.t.length)),s.write_shift(1,0),Ia(t.t,s),a?s.slice(0,s.l):s}var HO=gv;function GO(t,s){var a=!1;return s==null&&(a=!0,s=lt(23+4*t.t.length)),s.write_shift(1,1),Ia(t.t,s),s.write_shift(4,1),YO({},s),a?s.slice(0,s.l):s}function dn(t){var s=t.read_shift(4),a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:a}}function Eo(t,s){return s==null&&(s=lt(8)),s.write_shift(-4,t.c),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}function Do(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}function Ao(t,s){return s==null&&(s=lt(4)),s.write_shift(3,t.iStyleRef||t.s),s.write_shift(1,0),s}var qO=er,W3=Ia;function vv(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}function Wx(t,s){var a=!1;return s==null&&(a=!0,s=lt(127)),s.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&s.write_shift(0,t,"dbcs"),a?s.slice(0,s.l):s}var JO=er,f0=vv,wv=Wx;function H3(t){var s=t.slice(t.l,t.l+4),a=s[0]&1,r=s[0]&2;t.l+=4;var n=r===0?Yx([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):Yi(s,0)>>2;return a?n/100:n}function G3(t,s){s==null&&(s=lt(4));var a=0,r=0,n=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(r=1,a=1),r)s.write_shift(-4,((a?n:t)<<2)+(a+2));else throw new Error("unsupported RkNumber "+t)}function q3(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}function KO(t,s){return s||(s=lt(16)),s.write_shift(4,t.s.r),s.write_shift(4,t.e.r),s.write_shift(4,t.s.c),s.write_shift(4,t.e.c),s}var _o=q3,Zc=KO;function ed(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function jo(t,s){return(s||lt(8)).write_shift(8,t,"f")}function XO(t){var s={},a=t.read_shift(1),r=a>>>1,n=t.read_shift(1),l=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),c=t.read_shift(1);switch(t.l++,r){case 0:s.auto=1;break;case 1:s.index=n;var d=lL[n];d&&(s.rgb=Lj(d));break;case 2:s.rgb=Lj([i,o,c]);break;case 3:s.theme=n;break}return l!=0&&(s.tint=l>0?l/32767:l/32768),s}function Hx(t,s){if(s||(s=lt(8)),!t||t.auto)return s.write_shift(4,0),s.write_shift(4,0),s;t.index!=null?(s.write_shift(1,2),s.write_shift(1,t.index)):t.theme!=null?(s.write_shift(1,6),s.write_shift(1,t.theme)):(s.write_shift(1,5),s.write_shift(1,0));var a=t.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),s.write_shift(2,a),!t.rgb||t.theme!=null)s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),s.write_shift(1,parseInt(r.slice(0,2),16)),s.write_shift(1,parseInt(r.slice(2,4),16)),s.write_shift(1,parseInt(r.slice(4,6),16)),s.write_shift(1,255)}return s}function QO(t){var s=t.read_shift(1);t.l++;var a={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return a}function ZO(t,s){s||(s=lt(2));var a=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return s.write_shift(1,a),s.write_shift(1,0),s}var J3=2,Ar=3,Eu=11,Gx=19,Du=64,eL=65,tL=71,sL=4108,aL=4126,$a=80,Dj={1:{n:"CodePage",t:J3},2:{n:"Category",t:$a},3:{n:"PresentationFormat",t:$a},4:{n:"ByteCount",t:Ar},5:{n:"LineCount",t:Ar},6:{n:"ParagraphCount",t:Ar},7:{n:"SlideCount",t:Ar},8:{n:"NoteCount",t:Ar},9:{n:"HiddenCount",t:Ar},10:{n:"MultimediaClipCount",t:Ar},11:{n:"ScaleCrop",t:Eu},12:{n:"HeadingPairs",t:sL},13:{n:"TitlesOfParts",t:aL},14:{n:"Manager",t:$a},15:{n:"Company",t:$a},16:{n:"LinksUpToDate",t:Eu},17:{n:"CharacterCount",t:Ar},19:{n:"SharedDoc",t:Eu},22:{n:"HyperlinksChanged",t:Eu},23:{n:"AppVersion",t:Ar,p:"version"},24:{n:"DigSig",t:eL},26:{n:"ContentType",t:$a},27:{n:"ContentStatus",t:$a},28:{n:"Language",t:$a},29:{n:"Version",t:$a},255:{},2147483648:{n:"Locale",t:Gx},2147483651:{n:"Behavior",t:Gx},1919054434:{}},Aj={1:{n:"CodePage",t:J3},2:{n:"Title",t:$a},3:{n:"Subject",t:$a},4:{n:"Author",t:$a},5:{n:"Keywords",t:$a},6:{n:"Comments",t:$a},7:{n:"Template",t:$a},8:{n:"LastAuthor",t:$a},9:{n:"RevNumber",t:$a},10:{n:"EditTime",t:Du},11:{n:"LastPrinted",t:Du},12:{n:"CreatedDate",t:Du},13:{n:"ModifiedDate",t:Du},14:{n:"PageCount",t:Ar},15:{n:"WordCount",t:Ar},16:{n:"CharCount",t:Ar},17:{n:"Thumbnail",t:tL},18:{n:"Application",t:$a},19:{n:"DocSecurity",t:Ar},255:{},2147483648:{n:"Locale",t:Gx},2147483651:{n:"Behavior",t:Gx},1919054434:{}};function rL(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var nL=rL([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lL=Er(nL),Ym={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},iL={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Au={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function K3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function X3(t,s){var a=gO(iL),r=[],n;r[r.length]=ka,r[r.length]=Tt("Types",null,{xmlns:Fa.CT,"xmlns:xsd":Fa.xsd,"xmlns:xsi":Fa.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Tt("Default",null,{Extension:c[0],ContentType:c[1]})}));var l=function(c){t[c]&&t[c].length>0&&(n=t[c][0],r[r.length]=Tt("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:Au[c][s.bookType]||Au[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(d){r[r.length]=Tt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Au[c][s.bookType]||Au[c].xlsx})})},o=function(c){(t[c]||[]).forEach(function(d){r[r.length]=Tt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:a[c][0]})})};return l("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(l),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Is={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Q3(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function fc(t){var s=[ka,Tt("Relationships",null,{xmlns:Fa.RELS})];return Wa(t["!id"]).forEach(function(a){s[s.length]=Tt("Relationship",null,t["!id"][a])}),s.length>2&&(s[s.length]="</Relationships>",s[1]=s[1].replace("/>",">")),s.join("")}function Vs(t,s,a,r,n,l){if(n||(n={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),s<0)for(s=t["!idx"];t["!id"]["rId"+s];++s);if(t["!idx"]=s+1,n.Id="rId"+s,n.Type=r,n.Target=a,[Is.HLINK,Is.XPATH,Is.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),t["!id"][n.Id])throw new Error("Cannot rewrite rId "+s);return t["!id"][n.Id]=n,t[("/"+n.Target).replace("//","/")]=n,s}function oL(t){var s=[ka];s.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),s.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<t.length;++a)s.push('  <manifest:file-entry manifest:full-path="'+t[a][0]+'" manifest:media-type="'+t[a][1]+`"/>
`);return s.push("</manifest:manifest>"),s.join("")}function _j(t,s,a){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+s+`"/>
`,`  </rdf:Description>
`].join("")}function cL(t,s){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+s+`"/>
`,`  </rdf:Description>
`].join("")}function dL(t){var s=[ka];s.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=t.length;++a)s.push(_j(t[a][0],t[a][1])),s.push(cL("",t[a][0]));return s.push(_j("","Document","pkg")),s.push("</rdf:RDF>"),s.join("")}function Z3(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Lx.version+"</meta:generator></office:meta></office:document-meta>"}var ro=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Wp(t,s,a,r,n){n[t]!=null||s==null||s===""||(n[t]=s,s=Ys(s),r[r.length]=a?Tt(t,s,a):Ba(t,s))}function eC(t,s){var a=s||{},r=[ka,Tt("cp:coreProperties",null,{"xmlns:cp":Fa.CORE_PROPS,"xmlns:dc":Fa.dc,"xmlns:dcterms":Fa.dcterms,"xmlns:dcmitype":Fa.dcmitype,"xmlns:xsi":Fa.xsi})],n={};if(!t&&!a.Props)return r.join("");t&&(t.CreatedDate!=null&&Wp("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:p0(t.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,n),t.ModifiedDate!=null&&Wp("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:p0(t.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,n));for(var l=0;l!=ro.length;++l){var i=ro[l],o=a.Props&&a.Props[i[1]]!=null?a.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Wp(i[0],o,null,r,n)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var gc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],tC=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function sC(t){var s=[],a=Tt;return t||(t={}),t.Application="SheetJS",s[s.length]=ka,s[s.length]=Tt("Properties",null,{xmlns:Fa.EXT_PROPS,"xmlns:vt":Fa.vt}),gc.forEach(function(r){if(t[r[1]]!==void 0){var n;switch(r[2]){case"string":n=Ys(String(t[r[1]]));break;case"bool":n=t[r[1]]?"true":"false";break}n!==void 0&&(s[s.length]=a(r[0],n))}}),s[s.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),s[s.length]=a("TitlesOfParts",a("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Ys(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}function aC(t){var s=[ka,Tt("Properties",null,{xmlns:Fa.CUST_PROPS,"xmlns:vt":Fa.vt})];if(!t)return s.join("");var a=1;return Wa(t).forEach(function(n){++a,s[s.length]=Tt("property",DO(t[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:Ys(n)})}),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var Pj={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function mL(t,s){var a=[];return Wa(Pj).map(function(r){for(var n=0;n<ro.length;++n)if(ro[n][1]==r)return ro[n];for(n=0;n<gc.length;++n)if(gc[n][1]==r)return gc[n];throw r}).forEach(function(r){if(t[r[1]]!=null){var n=s&&s.Props&&s.Props[r[1]]!=null?s.Props[r[1]]:t[r[1]];switch(r[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),a.push(Ba(Pj[r[1]]||r[1],n))}}),Tt("DocumentProperties",a.join(""),{xmlns:Fr.o})}function uL(t,s){var a=["Worksheets","SheetNames"],r="CustomDocumentProperties",n=[];return t&&Wa(t).forEach(function(l){if(Object.prototype.hasOwnProperty.call(t,l)){for(var i=0;i<ro.length;++i)if(l==ro[i][1])return;for(i=0;i<gc.length;++i)if(l==gc[i][1])return;for(i=0;i<a.length;++i)if(l==a[i])return;var o=t[l],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),n.push(Tt(vj(l),o,{"dt:dt":c}))}}),s&&Wa(s).forEach(function(l){if(Object.prototype.hasOwnProperty.call(s,l)&&!(t&&Object.prototype.hasOwnProperty.call(t,l))){var i=s[l],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),n.push(Tt(vj(l),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Fr.o+'">'+n.join("")+"</"+r+">"}function xL(t){var s=typeof t=="string"?new Date(Date.parse(t)):t,a=s.getTime()/1e3+11644473600,r=a%Math.pow(2,32),n=(a-r)/Math.pow(2,32);r*=1e7,n*=1e7;var l=r/Math.pow(2,32)|0;l>0&&(r=r%Math.pow(2,32),n+=l);var i=lt(8);return i.write_shift(4,r),i.write_shift(4,n),i}function Tj(t,s){var a=lt(4),r=lt(4);switch(a.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,s);break;case 5:r=lt(8),r.write_shift(8,s,"f");break;case 11:r.write_shift(4,s?1:0);break;case 64:r=xL(s);break;case 31:case 80:for(r=lt(4+2*(s.length+1)+(s.length%2?0:2)),r.write_shift(4,s.length+1),r.write_shift(0,s,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}return Ua([a,r])}var rC=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function hL(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Fj(t,s,a){var r=lt(8),n=[],l=[],i=8,o=0,c=lt(8),d=lt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),l.push(c),n.push(d),i+=8+c.length,!s){d=lt(8),d.write_shift(4,0),n.unshift(d);var u=[lt(4)];for(u[0].write_shift(4,t.length),o=0;o<t.length;++o){var x=t[o][0];for(c=lt(8+2*(x.length+1)+(x.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,x.length+1),c.write_shift(0,x,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Ua(u),l.unshift(c),i+=8+c.length}for(o=0;o<t.length;++o)if(!(s&&!s[t[o][0]])&&!(rC.indexOf(t[o][0])>-1||tC.indexOf(t[o][0])>-1)&&t[o][1]!=null){var p=t[o][1],h=0;if(s){h=+s[t[o][0]];var y=a[h];if(y.p=="version"&&typeof p=="string"){var f=p.split(".");p=(+f[0]<<16)+(+f[1]||0)}c=Tj(y.t,p)}else{var v=hL(p);v==-1&&(v=31,p=String(p)),c=Tj(v,p)}l.push(c),d=lt(8),d.write_shift(4,s?h:2+o),n.push(d),i+=8+c.length}var w=8*(l.length+1);for(o=0;o<l.length;++o)n[o].write_shift(4,w),w+=l[o].length;return r.write_shift(4,i),r.write_shift(4,l.length),Ua([r].concat(n).concat(l))}function Mj(t,s,a,r,n,l){var i=lt(n?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Js.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,n?2:1),i.write_shift(16,s,"hex"),i.write_shift(4,n?68:48);var c=Fj(t,a,r);if(o.push(c),n){var d=Fj(n,null,null);i.write_shift(16,l,"hex"),i.write_shift(4,68+c.length),o.push(d)}return Ua(o)}function pL(t,s){s||(s=lt(t));for(var a=0;a<t;++a)s.write_shift(1,0);return s}function fL(t,s){return t.read_shift(s)===1}function ir(t,s){return s||(s=lt(2)),s.write_shift(2,+!!t),s}function nC(t){return t.read_shift(2,"u")}function Xr(t,s){return s||(s=lt(2)),s.write_shift(2,t),s}function lC(t,s,a){return a||(a=lt(2)),a.write_shift(1,s=="e"?+t:+!!t),a.write_shift(1,s=="e"?1:0),a}function iC(t,s,a){var r=t.read_shift(a&&a.biff>=12?2:1),n="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var l=t.read_shift(1);l&&(n="dbcs-cont")}else a.biff==12&&(n="wstr");a.biff>=2&&a.biff<=5&&(n="cpstr");var i=r?t.read_shift(r,n):"";return i}function gL(t){var s=t.t||"",a=lt(3);a.write_shift(2,s.length),a.write_shift(1,1);var r=lt(2*s.length);r.write_shift(2*s.length,s,"utf16le");var n=[a,r];return Ua(n)}function vL(t,s,a){var r;if(a){if(a.biff>=2&&a.biff<=5)return t.read_shift(s,"cpstr");if(a.biff>=12)return t.read_shift(s,"dbcs-cont")}var n=t.read_shift(1);return n===0?r=t.read_shift(s,"sbcs-cont"):r=t.read_shift(s,"dbcs-cont"),r}function wL(t,s,a){var r=t.read_shift(a&&a.biff==2?1:2);return r===0?(t.l++,""):vL(t,r,a)}function yL(t,s,a){if(a.biff>5)return wL(t,s,a);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,a.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function oC(t,s,a){return a||(a=lt(3+2*t.length)),a.write_shift(2,t.length),a.write_shift(1,1),a.write_shift(31,t,"utf16le"),a}function Ij(t,s){s||(s=lt(6+t.length*2)),s.write_shift(4,1+t.length);for(var a=0;a<t.length;++a)s.write_shift(2,t.charCodeAt(a));return s.write_shift(2,0),s}function jL(t){var s=lt(512),a=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var n=r.indexOf("#"),l=n>-1?31:23;switch(r.charAt(0)){case"#":l=28;break;case".":l&=-3;break}s.write_shift(4,2),s.write_shift(4,l);var i=[8,6815827,6619237,4849780,83];for(a=0;a<i.length;++a)s.write_shift(4,i[a]);if(l==28)r=r.slice(1),Ij(r,s);else if(l&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<i.length;++a)s.write_shift(1,parseInt(i[a],16));var o=n>-1?r.slice(0,n):r;for(s.write_shift(4,2*(o.length+1)),a=0;a<o.length;++a)s.write_shift(2,o.charCodeAt(a));s.write_shift(2,0),l&8&&Ij(n>-1?r.slice(n+1):"",s)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<i.length;++a)s.write_shift(1,parseInt(i[a],16));for(var c=0;r.slice(c*3,c*3+3)=="../"||r.slice(c*3,c*3+3)=="..\\";)++c;for(s.write_shift(2,c),s.write_shift(4,r.length-3*c+1),a=0;a<r.length-3*c;++a)s.write_shift(1,r.charCodeAt(a+3*c)&255);for(s.write_shift(1,0),s.write_shift(2,65535),s.write_shift(2,57005),a=0;a<6;++a)s.write_shift(4,0)}return s.slice(0,s.l)}function No(t,s,a,r){return r||(r=lt(6)),r.write_shift(2,t),r.write_shift(2,s),r.write_shift(2,a||0),r}function NL(t,s,a){var r=a.biff>8?4:2,n=t.read_shift(r),l=t.read_shift(r,"i"),i=t.read_shift(r,"i");return[n,l,i]}function bL(t){var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{s:{c:r,r:s},e:{c:n,r:a}}}function cC(t,s){return s||(s=lt(8)),s.write_shift(2,t.s.r),s.write_shift(2,t.e.r),s.write_shift(2,t.s.c),s.write_shift(2,t.e.c),s}function yv(t,s,a){var r=1536,n=16;switch(a.bookType){case"biff8":break;case"biff5":r=1280,n=8;break;case"biff4":r=4,n=6;break;case"biff3":r=3,n=6;break;case"biff2":r=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var l=lt(n);return l.write_shift(2,r),l.write_shift(2,s),n>4&&l.write_shift(2,29282),n>6&&l.write_shift(2,1997),n>8&&(l.write_shift(2,49161),l.write_shift(2,1),l.write_shift(2,1798),l.write_shift(2,0)),l}function SL(t,s){var a=!s||s.biff==8,r=lt(a?112:54);for(r.write_shift(s.biff==8?2:1,7),a&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(a?0:536870912));r.l<r.length;)r.write_shift(1,a?0:32);return r}function CL(t,s){var a=!s||s.biff>=8?2:1,r=lt(8+a*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),s.biff>=8&&r.write_shift(1,1),r.write_shift(a*t.name.length,t.name,s.biff<8?"sbcs":"utf16le");var n=r.slice(0,r.l);return n.l=r.l,n}function kL(t,s){var a=lt(8);a.write_shift(4,t.Count),a.write_shift(4,t.Unique);for(var r=[],n=0;n<t.length;++n)r[n]=gL(t[n]);var l=Ua([a].concat(r));return l.parts=[a.length].concat(r.map(function(i){return i.length})),l}function EL(){var t=lt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function DL(t){var s=lt(18),a=1718;return t&&t.RTL&&(a|=64),s.write_shift(2,a),s.write_shift(4,0),s.write_shift(4,64),s.write_shift(4,0),s.write_shift(4,0),s}function AL(t,s){var a=t.name||"Arial",r=s&&s.biff==5,n=r?15+a.length:16+2*a.length,l=lt(n);return l.write_shift(2,t.sz*20),l.write_shift(4,0),l.write_shift(2,400),l.write_shift(4,0),l.write_shift(2,0),l.write_shift(1,a.length),r||l.write_shift(1,1),l.write_shift((r?1:2)*a.length,a,r?"sbcs":"utf16le"),l}function _L(t,s,a,r){var n=lt(10);return No(t,s,r,n),n.write_shift(4,a),n}function PL(t,s,a,r,n){var l=!n||n.biff==8,i=lt(8+ +l+(1+l)*a.length);return No(t,s,r,i),i.write_shift(2,a.length),l&&i.write_shift(1,1),i.write_shift((1+l)*a.length,a,l?"utf16le":"sbcs"),i}function TL(t,s,a,r){var n=a&&a.biff==5;r||(r=lt(n?3+s.length:5+2*s.length)),r.write_shift(2,t),r.write_shift(n?1:2,s.length),n||r.write_shift(1,1),r.write_shift((n?1:2)*s.length,s,n?"sbcs":"utf16le");var l=r.length>r.l?r.slice(0,r.l):r;return l.l==null&&(l.l=l.length),l}function FL(t,s){var a=s.biff==8||!s.biff?4:2,r=lt(2*a+6);return r.write_shift(a,t.s.r),r.write_shift(a,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Rj(t,s,a,r){var n=a&&a.biff==5;r||(r=lt(n?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,s<<4));var l=0;return t.numFmtId>0&&n&&(l|=1024),r.write_shift(4,l),r.write_shift(4,0),n||r.write_shift(4,0),r.write_shift(2,0),r}function ML(t){var s=lt(8);return s.write_shift(4,0),s.write_shift(2,0),s.write_shift(2,0),s}function IL(t,s,a,r,n,l){var i=lt(8);return No(t,s,r,i),lC(a,l,i),i}function RL(t,s,a,r){var n=lt(14);return No(t,s,r,n),jo(a,n),n}function OL(t,s,a){if(a.biff<8)return LL(t,s,a);for(var r=[],n=t.l+s,l=t.read_shift(a.biff>8?4:2);l--!==0;)r.push(NL(t,a.biff>8?12:6,a));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return r}function LL(t,s,a){t[t.l+1]==3&&t[t.l]++;var r=iC(t,s,a);return r.charCodeAt(0)==3?r.slice(1):r}function $L(t){var s=lt(2+t.length*8);s.write_shift(2,t.length);for(var a=0;a<t.length;++a)cC(t[a],s);return s}function UL(t){var s=lt(24),a=Ma(t[0]);s.write_shift(2,a.r),s.write_shift(2,a.r),s.write_shift(2,a.c),s.write_shift(2,a.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)s.write_shift(1,parseInt(r[n],16));return Ua([s,jL(t[1])])}function BL(t){var s=t[1].Tooltip,a=lt(10+2*(s.length+1));a.write_shift(2,2048);var r=Ma(t[0]);a.write_shift(2,r.r),a.write_shift(2,r.r),a.write_shift(2,r.c),a.write_shift(2,r.c);for(var n=0;n<s.length;++n)a.write_shift(2,s.charCodeAt(n));return a.write_shift(2,0),a}function zL(t){return t||(t=lt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function VL(t,s,a){if(!a.cellStyles)return sl(t,s);var r=a&&a.biff>=12?4:2,n=t.read_shift(r),l=t.read_shift(r),i=t.read_shift(r),o=t.read_shift(r),c=t.read_shift(2);r==2&&(t.l+=2);var d={s:n,e:l,w:i,ixfe:o,flags:c};return(a.biff>=5||!a.biff)&&(d.level=c>>8&7),d}function YL(t,s){var a=lt(12);a.write_shift(2,s),a.write_shift(2,s),a.write_shift(2,t.width*256),a.write_shift(2,0);var r=0;return t.hidden&&(r|=1),a.write_shift(1,r),r=t.level||0,a.write_shift(1,r),a.write_shift(2,0),a}function WL(t){for(var s=lt(2*t),a=0;a<t;++a)s.write_shift(2,a+1);return s}function HL(t,s,a){var r=lt(15);return Hm(r,t,s),r.write_shift(8,a,"f"),r}function GL(t,s,a){var r=lt(9);return Hm(r,t,s),r.write_shift(2,a),r}var qL=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=cv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(o,c){var d=[],u=yo(1);switch(c.type){case"base64":u=Sn(Dl(o));break;case"binary":u=Sn(o);break;case"buffer":case"array":u=o;break}Pr(u,0);var x=u.read_shift(1),p=!!(x&136),h=!1,y=!1;switch(x){case 2:break;case 3:break;case 48:h=!0,p=!0;break;case 49:h=!0,p=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+x.toString(16))}var f=0,v=521;x==2&&(f=u.read_shift(2)),u.l+=3,x!=2&&(f=u.read_shift(4)),f>1048576&&(f=1e6),x!=2&&(v=u.read_shift(2));var w=u.read_shift(2),g=c.codepage||1252;x!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(g=t[u[u.l]]),u.l+=1,u.l+=2),y&&(u.l+=36);for(var j=[],N={},E=Math.min(u.length,x==2?521:v-10-(h?264:0)),C=y?32:11;u.l<E&&u[u.l]!=13;)switch(N={},N.name=$x.utils.decode(g,u.slice(u.l,u.l+C)).replace(/[\u0000\r\n].*$/g,""),u.l+=C,N.type=String.fromCharCode(u.read_shift(1)),x!=2&&!y&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),x==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&j.push(N),x!=2&&(u.l+=y?13:14),N.type){case"B":(!h||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var k=0,A=0;for(d[0]=[],A=0;A!=j.length;++A)d[0][A]=j[A].name;for(;f-- >0;){if(u[u.l]===42){u.l+=w;continue}for(++u.l,d[++k]=[],A=0,A=0;A!=j.length;++A){var T=u.slice(u.l,u.l+j[A].len);u.l+=j[A].len,Pr(T,0);var M=$x.utils.decode(g,T);switch(j[A].type){case"C":M.trim().length&&(d[k][A]=M.replace(/\s+$/,""));break;case"D":M.length===8?d[k][A]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):d[k][A]=M;break;case"F":d[k][A]=parseFloat(M.trim());break;case"+":case"I":d[k][A]=y?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":d[k][A]=!0;break;case"N":case"F":d[k][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+x.toString(16));d[k][A]="##MEMO##"+(y?parseInt(M.trim(),10):T.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(d[k][A]=+M||0);break;case"@":d[k][A]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":d[k][A]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":d[k][A]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[k][A]=-T.read_shift(-8,"f");break;case"B":if(h&&j[A].len==8){d[k][A]=T.read_shift(8,"f");break}case"G":case"P":T.l+=j[A].len;break;case"0":if(j[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[A].type)}}}if(x!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=j,d}function r(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=Qc(a(o,d),d);return u["!cols"]=d.DBF.map(function(x){return{wch:x.len,DBF:x}}),delete d.DBF,u}function n(o,c){try{return ko(r(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var l={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var d=c||{};if(+d.codepage>=0&&gm(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Cr(),x=Qx(o,{header:1,raw:!0,cellDates:!0}),p=x[0],h=x.slice(1),y=o["!cols"]||[],f=0,v=0,w=0,g=1;for(f=0;f<p.length;++f){if(((y[f]||{}).DBF||{}).name){p[f]=y[f].DBF.name,++w;continue}if(p[f]!=null){if(++w,typeof p[f]=="number"&&(p[f]=p[f].toString(10)),typeof p[f]!="string")throw new Error("DBF Invalid column name "+p[f]+" |"+typeof p[f]+"|");if(p.indexOf(p[f])!==f){for(v=0;v<1024;++v)if(p.indexOf(p[f]+"_"+v)==-1){p[f]+="_"+v;break}}}}var j=na(o["!ref"]),N=[],E=[],C=[];for(f=0;f<=j.e.c-j.s.c;++f){var k="",A="",T=0,M=[];for(v=0;v<h.length;++v)h[v][f]!=null&&M.push(h[v][f]);if(M.length==0||p[f]==null){N[f]="?";continue}for(v=0;v<M.length;++v){switch(typeof M[v]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=M[v]instanceof Date?"D":"C";break;default:A="C"}T=Math.max(T,String(M[v]).length),k=k&&k!=A?"C":A}T>250&&(T=250),A=((y[f]||{}).DBF||{}).type,A=="C"&&y[f].DBF.len>T&&(T=y[f].DBF.len),k=="B"&&A=="N"&&(k="N",C[f]=y[f].DBF.dec,T=y[f].DBF.len),E[f]=k=="C"||A=="N"?T:l[k]||0,g+=E[f],N[f]=k}var X=u.next(32);for(X.write_shift(4,318902576),X.write_shift(4,h.length),X.write_shift(2,296+32*w),X.write_shift(2,g),f=0;f<4;++f)X.write_shift(4,0);for(X.write_shift(4,0|(+s[m3]||3)<<8),f=0,v=0;f<p.length;++f)if(p[f]!=null){var ne=u.next(32),Q=(p[f].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);ne.write_shift(1,Q,"sbcs"),ne.write_shift(1,N[f]=="?"?"C":N[f],"sbcs"),ne.write_shift(4,v),ne.write_shift(1,E[f]||l[N[f]]||0),ne.write_shift(1,C[f]||0),ne.write_shift(1,2),ne.write_shift(4,0),ne.write_shift(1,0),ne.write_shift(4,0),ne.write_shift(4,0),v+=E[f]||l[N[f]]||0}var oe=u.next(264);for(oe.write_shift(4,13),f=0;f<65;++f)oe.write_shift(4,0);for(f=0;f<h.length;++f){var ge=u.next(g);for(ge.write_shift(1,0),v=0;v<p.length;++v)if(p[v]!=null)switch(N[v]){case"L":ge.write_shift(1,h[f][v]==null?63:h[f][v]?84:70);break;case"B":ge.write_shift(8,h[f][v]||0,"f");break;case"N":var me="0";for(typeof h[f][v]=="number"&&(me=h[f][v].toFixed(C[v]||0)),w=0;w<E[v]-me.length;++w)ge.write_shift(1,32);ge.write_shift(1,me,"sbcs");break;case"D":h[f][v]?(ge.write_shift(4,("0000"+h[f][v].getFullYear()).slice(-4),"sbcs"),ge.write_shift(2,("00"+(h[f][v].getMonth()+1)).slice(-2),"sbcs"),ge.write_shift(2,("00"+h[f][v].getDate()).slice(-2),"sbcs")):ge.write_shift(8,"00000000","sbcs");break;case"C":var H=String(h[f][v]!=null?h[f][v]:"").slice(0,E[v]);for(ge.write_shift(1,H,"sbcs"),w=0;w<E[v]-H.length;++w)ge.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:r,from_sheet:i}}(),JL=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+Wa(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(p,h){var y=t[h];return typeof y=="number"?lj(y):y},r=function(p,h,y){var f=h.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return f==59?p:lj(f)};t["|"]=254;function n(p,h){switch(h.type){case"base64":return l(Dl(p),h);case"binary":return l(p,h);case"buffer":return l(Rs&&Buffer.isBuffer(p)?p.toString("binary"):Bm(p),h);case"array":return l(Lh(p),h)}throw new Error("Unrecognized type "+h.type)}function l(p,h){var y=p.split(/[\n\r]+/),f=-1,v=-1,w=0,g=0,j=[],N=[],E=null,C={},k=[],A=[],T=[],M=0,X;for(+h.codepage>=0&&gm(+h.codepage);w!==y.length;++w){M=0;var ne=y[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(s,a),Q=ne.replace(/;;/g,"\0").split(";").map(function(W){return W.replace(/\u0000/g,";")}),oe=Q[0],ge;if(ne.length>0)switch(oe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&N.push(ne.slice(3).replace(/;;/g,";"));break;case"C":var me=!1,H=!1,L=!1,he=!1,ie=-1,ke=-1;for(g=1;g<Q.length;++g)switch(Q[g].charAt(0)){case"A":break;case"X":v=parseInt(Q[g].slice(1))-1,H=!0;break;case"Y":for(f=parseInt(Q[g].slice(1))-1,H||(v=0),X=j.length;X<=f;++X)j[X]=[];break;case"K":ge=Q[g].slice(1),ge.charAt(0)==='"'?ge=ge.slice(1,ge.length-1):ge==="TRUE"?ge=!0:ge==="FALSE"?ge=!1:isNaN(fl(ge))?isNaN(wm(ge).getDate())||(ge=ur(ge)):(ge=fl(ge),E!==null&&b3(E)&&(ge=E3(ge))),me=!0;break;case"E":he=!0;var V=G9(Q[g].slice(1),{r:f,c:v});j[f][v]=[j[f][v],V];break;case"S":L=!0,j[f][v]=[j[f][v],"S5S"];break;case"G":break;case"R":ie=parseInt(Q[g].slice(1))-1;break;case"C":ke=parseInt(Q[g].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+ne)}if(me&&(j[f][v]&&j[f][v].length==2?j[f][v][0]=ge:j[f][v]=ge,E=null),L){if(he)throw new Error("SYLK shared formula cannot have own formula");var O=ie>-1&&j[ie][ke];if(!O||!O[1])throw new Error("SYLK shared formula cannot find base");j[f][v][1]=q9(O[1],{r:f-ie,c:v-ke})}break;case"F":var Y=0;for(g=1;g<Q.length;++g)switch(Q[g].charAt(0)){case"X":v=parseInt(Q[g].slice(1))-1,++Y;break;case"Y":for(f=parseInt(Q[g].slice(1))-1,X=j.length;X<=f;++X)j[X]=[];break;case"M":M=parseInt(Q[g].slice(1))/20;break;case"F":break;case"G":break;case"P":E=N[parseInt(Q[g].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=Q[g].slice(1).split(" "),X=parseInt(T[0],10);X<=parseInt(T[1],10);++X)M=parseInt(T[2],10),A[X-1]=M===0?{hidden:!0}:{wch:M},jv(A[X-1]);break;case"C":v=parseInt(Q[g].slice(1))-1,A[v]||(A[v]={});break;case"R":f=parseInt(Q[g].slice(1))-1,k[f]||(k[f]={}),M>0?(k[f].hpt=M,k[f].hpx=hC(M)):M===0&&(k[f].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+ne)}Y<1&&(E=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+ne)}}return k.length>0&&(C["!rows"]=k),A.length>0&&(C["!cols"]=A),h&&h.sheetRows&&(j=j.slice(0,h.sheetRows)),[j,C]}function i(p,h){var y=n(p,h),f=y[0],v=y[1],w=Qc(f,h);return Wa(v).forEach(function(g){w[g]=v[g]}),w}function o(p,h){return ko(i(p,h),h)}function c(p,h,y,f){var v="C;Y"+(y+1)+";X"+(f+1)+";K";switch(p.t){case"n":v+=p.v||0,p.f&&!p.F&&(v+=";E"+bv(p.f,{r:y,c:f}));break;case"b":v+=p.v?"TRUE":"FALSE";break;case"e":v+=p.w||p.v;break;case"d":v+='"'+(p.w||p.v)+'"';break;case"s":v+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function d(p,h){h.forEach(function(y,f){var v="F;W"+(f+1)+" "+(f+1)+" ";y.hidden?v+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=qx(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=Jx(y.wpx)),typeof y.wch=="number"&&(v+=Math.round(y.wch))),v.charAt(v.length-1)!=" "&&p.push(v)})}function u(p,h){h.forEach(function(y,f){var v="F;";y.hidden?v+="M0;":y.hpt?v+="M"+20*y.hpt+";":y.hpx&&(v+="M"+20*Kx(y.hpx)+";"),v.length>2&&p.push(v+"R"+(f+1))})}function x(p,h){var y=["ID;PWXL;N;E"],f=[],v=na(p["!ref"]),w,g=Array.isArray(p),j=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),p["!cols"]&&d(y,p["!cols"]),p["!rows"]&&u(y,p["!rows"]),y.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var N=v.s.r;N<=v.e.r;++N)for(var E=v.s.c;E<=v.e.c;++E){var C=Hs({r:N,c:E});w=g?(p[N]||[])[E]:p[C],!(!w||w.v==null&&(!w.f||w.F))&&f.push(c(w,p,N,E))}return y.join(j)+j+f.join(j)+j+"E"+j}return{to_workbook:o,to_sheet:i,from_sheet:x}}(),KL=function(){function t(l,i){switch(i.type){case"base64":return s(Dl(l),i);case"binary":return s(l,i);case"buffer":return s(Rs&&Buffer.isBuffer(l)?l.toString("binary"):Bm(l),i);case"array":return s(Lh(l),i)}throw new Error("Unrecognized type "+i.type)}function s(l,i){for(var o=l.split(`
`),c=-1,d=-1,u=0,x=[];u!==o.length;++u){if(o[u].trim()==="BOT"){x[++c]=[],d=0;continue}if(!(c<0)){var p=o[u].trim().split(","),h=p[0],y=p[1];++u;for(var f=o[u]||"";(f.match(/["]/g)||[]).length&1&&u<o.length-1;)f+=`
`+o[++u];switch(f=f.trim(),+h){case-1:if(f==="BOT"){x[++c]=[],d=0;continue}else if(f!=="EOD")throw new Error("Unrecognized DIF special command "+f);break;case 0:f==="TRUE"?x[c][d]=!0:f==="FALSE"?x[c][d]=!1:isNaN(fl(y))?isNaN(wm(y).getDate())?x[c][d]=y:x[c][d]=ur(y):x[c][d]=fl(y),++d;break;case 1:f=f.slice(1,f.length-1),f=f.replace(/""/g,'"'),f&&f.match(/^=".*"$/)&&(f=f.slice(2,-1)),x[c][d++]=f!==""?f:null;break}if(f==="EOD")break}}return i&&i.sheetRows&&(x=x.slice(0,i.sheetRows)),x}function a(l,i){return Qc(t(l,i),i)}function r(l,i){return ko(a(l,i),i)}var n=function(){var l=function(c,d,u,x,p){c.push(d),c.push(u+","+x),c.push('"'+p.replace(/"/g,'""')+'"')},i=function(c,d,u,x){c.push(d+","+u),c.push(d==1?'"'+x.replace(/"/g,'""')+'"':x)};return function(c){var d=[],u=na(c["!ref"]),x,p=Array.isArray(c);l(d,"TABLE",0,1,"sheetjs"),l(d,"VECTORS",0,u.e.r-u.s.r+1,""),l(d,"TUPLES",0,u.e.c-u.s.c+1,""),l(d,"DATA",0,0,"");for(var h=u.s.r;h<=u.e.r;++h){i(d,-1,0,"BOT");for(var y=u.s.c;y<=u.e.c;++y){var f=Hs({r:h,c:y});if(x=p?(c[h]||[])[y]:c[f],!x){i(d,1,0,"");continue}switch(x.t){case"n":var v=x.w;!v&&x.v!=null&&(v=x.v),v==null?x.f&&!x.F?i(d,1,0,"="+x.f):i(d,1,0,""):i(d,0,v,"V");break;case"b":i(d,0,x.v?1:0,x.v?"TRUE":"FALSE");break;case"s":i(d,1,0,isNaN(x.v)?x.v:'="'+x.v+'"');break;case"d":x.w||(x.w=Ci(x.z||pa[14],kr(ur(x.v)))),i(d,0,x.w,"V");break;default:i(d,1,0,"")}}}i(d,-1,0,"EOD");var w=`\r
`,g=d.join(w);return g}}();return{to_workbook:r,to_sheet:a,from_sheet:n}}(),dC=function(){function t(x){return x.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(x){return x.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(x,p){for(var h=x.split(`
`),y=-1,f=-1,v=0,w=[];v!==h.length;++v){var g=h[v].trim().split(":");if(g[0]==="cell"){var j=Ma(g[1]);if(w.length<=j.r)for(y=w.length;y<=j.r;++y)w[y]||(w[y]=[]);switch(y=j.r,f=j.c,g[2]){case"t":w[y][f]=t(g[3]);break;case"v":w[y][f]=+g[3];break;case"vtf":var N=g[g.length-1];case"vtc":switch(g[3]){case"nl":w[y][f]=!!+g[4];break;default:w[y][f]=+g[4];break}g[2]=="vtf"&&(w[y][f]=[w[y][f],N])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function r(x,p){return Qc(a(x,p),p)}function n(x,p){return ko(r(x,p),p)}var l=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(x){if(!x||!x["!ref"])return"";for(var p=[],h=[],y,f="",v=Yr(x["!ref"]),w=Array.isArray(x),g=v.s.r;g<=v.e.r;++g)for(var j=v.s.c;j<=v.e.c;++j)if(f=Hs({r:g,c:j}),y=w?(x[g]||[])[j]:x[f],!(!y||y.v==null||y.t==="z")){switch(h=["cell",f,"t"],y.t){case"s":case"str":h.push(s(y.v));break;case"n":y.f?(h[2]="vtf",h[3]="n",h[4]=y.v,h[5]=s(y.f)):(h[2]="v",h[3]=y.v);break;case"b":h[2]="vt"+(y.f?"f":"c"),h[3]="nl",h[4]=y.v?"1":"0",h[5]=s(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var N=kr(ur(y.v));h[2]="vtc",h[3]="nd",h[4]=""+N,h[5]=y.w||Ci(y.z||pa[14],N);break;case"e":continue}p.push(h.join(":"))}return p.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function u(x){return[l,i,o,i,d(x),c].join(`
`)}return{to_workbook:n,to_sheet:r,from_sheet:u}}(),XL=function(){function t(u,x,p,h,y){y.raw?x[p][h]=u:u===""||(u==="TRUE"?x[p][h]=!0:u==="FALSE"?x[p][h]=!1:isNaN(fl(u))?isNaN(wm(u).getDate())?x[p][h]=u:x[p][h]=ur(u):x[p][h]=fl(u))}function s(u,x){var p=x||{},h=[];if(!u||u.length===0)return h;for(var y=u.split(/[\r\n]/),f=y.length-1;f>=0&&y[f].length===0;)--f;for(var v=10,w=0,g=0;g<=f;++g)w=y[g].indexOf(" "),w==-1?w=y[g].length:w++,v=Math.max(v,w);for(g=0;g<=f;++g){h[g]=[];var j=0;for(t(y[g].slice(0,v).trim(),h,g,j,p),j=1;j<=(y[g].length-v)/10+1;++j)t(y[g].slice(v+(j-1)*10,v+j*10).trim(),h,g,j,p)}return p.sheetRows&&(h=h.slice(0,p.sheetRows)),h}var a={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(u){for(var x={},p=!1,h=0,y=0;h<u.length;++h)(y=u.charCodeAt(h))==34?p=!p:!p&&y in a&&(x[y]=(x[y]||0)+1);y=[];for(h in x)Object.prototype.hasOwnProperty.call(x,h)&&y.push([x[h],h]);if(!y.length){x=r;for(h in x)Object.prototype.hasOwnProperty.call(x,h)&&y.push([x[h],h])}return y.sort(function(f,v){return f[0]-v[0]||r[f[1]]-r[v[1]]}),a[y.pop()[1]]||44}function l(u,x){var p=x||{},h="",y=p.dense?[]:{},f={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(h=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(h=u.charAt(4),u=u.slice(6)):h=n(u.slice(0,1024)):p&&p.FS?h=p.FS:h=n(u.slice(0,1024));var v=0,w=0,g=0,j=0,N=0,E=h.charCodeAt(0),C=!1,k=0,A=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var T=p.dateNF!=null?xO(p.dateNF):null;function M(){var X=u.slice(j,N),ne={};if(X.charAt(0)=='"'&&X.charAt(X.length-1)=='"'&&(X=X.slice(1,-1).replace(/""/g,'"')),X.length===0)ne.t="z";else if(p.raw)ne.t="s",ne.v=X;else if(X.trim().length===0)ne.t="s",ne.v=X;else if(X.charCodeAt(0)==61)X.charCodeAt(1)==34&&X.charCodeAt(X.length-1)==34?(ne.t="s",ne.v=X.slice(2,-1).replace(/""/g,'"')):J9(X)?(ne.t="n",ne.f=X.slice(1)):(ne.t="s",ne.v=X);else if(X=="TRUE")ne.t="b",ne.v=!0;else if(X=="FALSE")ne.t="b",ne.v=!1;else if(!isNaN(g=fl(X)))ne.t="n",p.cellText!==!1&&(ne.w=X),ne.v=g;else if(!isNaN(wm(X).getDate())||T&&X.match(T)){ne.z=p.dateNF||pa[14];var Q=0;T&&X.match(T)&&(X=hO(X,p.dateNF,X.match(T)||[]),Q=1),p.cellDates?(ne.t="d",ne.v=ur(X,Q)):(ne.t="n",ne.v=kr(ur(X,Q))),p.cellText!==!1&&(ne.w=Ci(ne.z,ne.v instanceof Date?kr(ne.v):ne.v)),p.cellNF||delete ne.z}else ne.t="s",ne.v=X;if(ne.t=="z"||(p.dense?(y[v]||(y[v]=[]),y[v][w]=ne):y[Hs({c:w,r:v})]=ne),j=N+1,A=u.charCodeAt(j),f.e.c<w&&(f.e.c=w),f.e.r<v&&(f.e.r=v),k==E)++w;else if(w=0,++v,p.sheetRows&&p.sheetRows<=v)return!0}e:for(;N<u.length;++N)switch(k=u.charCodeAt(N)){case 34:A===34&&(C=!C);break;case E:case 10:case 13:if(!C&&M())break e;break}return N-j>0&&M(),y["!ref"]=Sa(f),y}function i(u,x){return!(x&&x.PRN)||x.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?l(u,x):Qc(s(u,x),x)}function o(u,x){var p="",h=x.type=="string"?[0,0,0,0]:cz(u,x);switch(x.type){case"base64":p=Dl(u);break;case"binary":p=u;break;case"buffer":x.codepage==65001?p=u.toString("utf8"):x.codepage&&typeof $x<"u"||(p=Rs&&Buffer.isBuffer(u)?u.toString("binary"):Bm(u));break;case"array":p=Lh(u);break;case"string":p=u;break;default:throw new Error("Unrecognized type "+x.type)}return h[0]==239&&h[1]==187&&h[2]==191?p=Ud(p.slice(3)):x.type!="string"&&x.type!="buffer"&&x.codepage==65001?p=Ud(p):x.type=="binary"&&typeof $x<"u",p.slice(0,19)=="socialcalc:version:"?dC.to_sheet(x.type=="string"?p:Ud(p),x):i(p,x)}function c(u,x){return ko(o(u,x),x)}function d(u){for(var x=[],p=na(u["!ref"]),h,y=Array.isArray(u),f=p.s.r;f<=p.e.r;++f){for(var v=[],w=p.s.c;w<=p.e.c;++w){var g=Hs({r:f,c:w});if(h=y?(u[f]||[])[w]:u[g],!h||h.v==null){v.push("          ");continue}for(var j=(h.w||(Al(h),h.w)||"").slice(0,10);j.length<10;)j+=" ";v.push(j+(w===0?" ":""))}x.push(v.join(""))}return x.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}}(),Oj=function(){function t(V,O,Y){if(V){Pr(V,V.l||0);for(var W=Y.Enum||ie;V.l<V.length;){var ue=V.read_shift(2),U=W[ue]||W[65535],z=V.read_shift(2),te=V.l+z,se=U.f&&U.f(V,z,Y);if(V.l=te,O(se,U,ue))return}}}function s(V,O){switch(O.type){case"base64":return a(Sn(Dl(V)),O);case"binary":return a(Sn(V),O);case"buffer":case"array":return a(V,O)}throw"Unsupported type "+O.type}function a(V,O){if(!V)return V;var Y=O||{},W=Y.dense?[]:{},ue="Sheet1",U="",z=0,te={},se=[],J=[],je={s:{r:0,c:0},e:{r:0,c:0}},b=Y.sheetRows||0;if(V[2]==0&&(V[3]==8||V[3]==9)&&V.length>=16&&V[14]==5&&V[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(V[2]==2)Y.Enum=ie,t(V,function(F,I,ce){switch(ce){case 0:Y.vers=F,F>=4096&&(Y.qpro=!0);break;case 6:je=F;break;case 204:F&&(U=F);break;case 222:U=F;break;case 15:case 51:Y.qpro||(F[1].v=F[1].v.slice(1));case 13:case 14:case 16:ce==14&&(F[2]&112)==112&&(F[2]&15)>1&&(F[2]&15)<15&&(F[1].z=Y.dateNF||pa[14],Y.cellDates&&(F[1].t="d",F[1].v=E3(F[1].v))),Y.qpro&&F[3]>z&&(W["!ref"]=Sa(je),te[ue]=W,se.push(ue),W=Y.dense?[]:{},je={s:{r:0,c:0},e:{r:0,c:0}},z=F[3],ue=U||"Sheet"+(z+1),U="");var de=Y.dense?(W[F[0].r]||[])[F[0].c]:W[Hs(F[0])];if(de){de.t=F[1].t,de.v=F[1].v,F[1].z!=null&&(de.z=F[1].z),F[1].f!=null&&(de.f=F[1].f);break}Y.dense?(W[F[0].r]||(W[F[0].r]=[]),W[F[0].r][F[0].c]=F[1]):W[Hs(F[0])]=F[1];break}},Y);else if(V[2]==26||V[2]==14)Y.Enum=ke,V[2]==14&&(Y.qpro=!0,V.l=0),t(V,function(F,I,ce){switch(ce){case 204:ue=F;break;case 22:F[1].v=F[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(F[3]>z&&(W["!ref"]=Sa(je),te[ue]=W,se.push(ue),W=Y.dense?[]:{},je={s:{r:0,c:0},e:{r:0,c:0}},z=F[3],ue="Sheet"+(z+1)),b>0&&F[0].r>=b)break;Y.dense?(W[F[0].r]||(W[F[0].r]=[]),W[F[0].r][F[0].c]=F[1]):W[Hs(F[0])]=F[1],je.e.c<F[0].c&&(je.e.c=F[0].c),je.e.r<F[0].r&&(je.e.r=F[0].r);break;case 27:F[14e3]&&(J[F[14e3][0]]=F[14e3][1]);break;case 1537:J[F[0]]=F[1],F[0]==z&&(ue=F[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+V[2]);if(W["!ref"]=Sa(je),te[U||ue]=W,se.push(U||ue),!J.length)return{SheetNames:se,Sheets:te};for(var S={},D=[],R=0;R<J.length;++R)te[se[R]]?(D.push(J[R]||se[R]),S[J[R]]=te[J[R]]||te[se[R]]):(D.push(J[R]),S[J[R]]={"!ref":"A1"});return{SheetNames:D,Sheets:S}}function r(V,O){var Y=O||{};if(+Y.codepage>=0&&gm(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var W=Cr(),ue=na(V["!ref"]),U=Array.isArray(V),z=[];Ft(W,0,l(1030)),Ft(W,6,c(ue));for(var te=Math.min(ue.e.r,8191),se=ue.s.r;se<=te;++se)for(var J=Va(se),je=ue.s.c;je<=ue.e.c;++je){se===ue.s.r&&(z[je]=Za(je));var b=z[je]+J,S=U?(V[se]||[])[je]:V[b];if(!(!S||S.t=="z"))if(S.t=="n")(S.v|0)==S.v&&S.v>=-32768&&S.v<=32767?Ft(W,13,h(se,je,S.v)):Ft(W,14,f(se,je,S.v));else{var D=Al(S);Ft(W,15,x(se,je,D.slice(0,239)))}}return Ft(W,1),W.end()}function n(V,O){var Y=O||{};if(+Y.codepage>=0&&gm(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var W=Cr();Ft(W,0,i(V));for(var ue=0,U=0;ue<V.SheetNames.length;++ue)(V.Sheets[V.SheetNames[ue]]||{})["!ref"]&&Ft(W,27,he(V.SheetNames[ue],U++));var z=0;for(ue=0;ue<V.SheetNames.length;++ue){var te=V.Sheets[V.SheetNames[ue]];if(!(!te||!te["!ref"])){for(var se=na(te["!ref"]),J=Array.isArray(te),je=[],b=Math.min(se.e.r,8191),S=se.s.r;S<=b;++S)for(var D=Va(S),R=se.s.c;R<=se.e.c;++R){S===se.s.r&&(je[R]=Za(R));var F=je[R]+D,I=J?(te[S]||[])[R]:te[F];if(!(!I||I.t=="z"))if(I.t=="n")Ft(W,23,M(S,R,z,I.v));else{var ce=Al(I);Ft(W,22,k(S,R,z,ce.slice(0,239)))}}++z}}return Ft(W,1),W.end()}function l(V){var O=lt(2);return O.write_shift(2,V),O}function i(V){var O=lt(26);O.write_shift(2,4096),O.write_shift(2,4),O.write_shift(4,0);for(var Y=0,W=0,ue=0,U=0;U<V.SheetNames.length;++U){var z=V.SheetNames[U],te=V.Sheets[z];if(!(!te||!te["!ref"])){++ue;var se=Yr(te["!ref"]);Y<se.e.r&&(Y=se.e.r),W<se.e.c&&(W=se.e.c)}}return Y>8191&&(Y=8191),O.write_shift(2,Y),O.write_shift(1,ue),O.write_shift(1,W),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(1,1),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(4,0),O}function o(V,O,Y){var W={s:{c:0,r:0},e:{c:0,r:0}};return O==8&&Y.qpro?(W.s.c=V.read_shift(1),V.l++,W.s.r=V.read_shift(2),W.e.c=V.read_shift(1),V.l++,W.e.r=V.read_shift(2),W):(W.s.c=V.read_shift(2),W.s.r=V.read_shift(2),O==12&&Y.qpro&&(V.l+=2),W.e.c=V.read_shift(2),W.e.r=V.read_shift(2),O==12&&Y.qpro&&(V.l+=2),W.s.c==65535&&(W.s.c=W.e.c=W.s.r=W.e.r=0),W)}function c(V){var O=lt(8);return O.write_shift(2,V.s.c),O.write_shift(2,V.s.r),O.write_shift(2,V.e.c),O.write_shift(2,V.e.r),O}function d(V,O,Y){var W=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(W[0].c=V.read_shift(1),W[3]=V.read_shift(1),W[0].r=V.read_shift(2),V.l+=2):(W[2]=V.read_shift(1),W[0].c=V.read_shift(2),W[0].r=V.read_shift(2)),W}function u(V,O,Y){var W=V.l+O,ue=d(V,O,Y);if(ue[1].t="s",Y.vers==20768){V.l++;var U=V.read_shift(1);return ue[1].v=V.read_shift(U,"utf8"),ue}return Y.qpro&&V.l++,ue[1].v=V.read_shift(W-V.l,"cstr"),ue}function x(V,O,Y){var W=lt(7+Y.length);W.write_shift(1,255),W.write_shift(2,O),W.write_shift(2,V),W.write_shift(1,39);for(var ue=0;ue<W.length;++ue){var U=Y.charCodeAt(ue);W.write_shift(1,U>=128?95:U)}return W.write_shift(1,0),W}function p(V,O,Y){var W=d(V,O,Y);return W[1].v=V.read_shift(2,"i"),W}function h(V,O,Y){var W=lt(7);return W.write_shift(1,255),W.write_shift(2,O),W.write_shift(2,V),W.write_shift(2,Y,"i"),W}function y(V,O,Y){var W=d(V,O,Y);return W[1].v=V.read_shift(8,"f"),W}function f(V,O,Y){var W=lt(13);return W.write_shift(1,255),W.write_shift(2,O),W.write_shift(2,V),W.write_shift(8,Y,"f"),W}function v(V,O,Y){var W=V.l+O,ue=d(V,O,Y);if(ue[1].v=V.read_shift(8,"f"),Y.qpro)V.l=W;else{var U=V.read_shift(2);N(V.slice(V.l,V.l+U),ue),V.l+=U}return ue}function w(V,O,Y){var W=O&32768;return O&=-32769,O=(W?V:0)+(O>=8192?O-16384:O),(W?"":"$")+(Y?Za(O):Va(O))}var g={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(V,O){Pr(V,0);for(var Y=[],W=0,ue="",U="",z="",te="";V.l<V.length;){var se=V[V.l++];switch(se){case 0:Y.push(V.read_shift(8,"f"));break;case 1:U=w(O[0].c,V.read_shift(2),!0),ue=w(O[0].r,V.read_shift(2),!1),Y.push(U+ue);break;case 2:{var J=w(O[0].c,V.read_shift(2),!0),je=w(O[0].r,V.read_shift(2),!1);U=w(O[0].c,V.read_shift(2),!0),ue=w(O[0].r,V.read_shift(2),!1),Y.push(J+je+":"+U+ue)}break;case 3:if(V.l<V.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(V.read_shift(2));break;case 6:{for(var b="";se=V[V.l++];)b+=String.fromCharCode(se);Y.push('"'+b.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:te=Y.pop(),z=Y.pop(),Y.push(["AND","OR"][se-20]+"("+z+","+te+")");break;default:if(se<32&&j[se])te=Y.pop(),z=Y.pop(),Y.push(z+j[se]+te);else if(g[se]){if(W=g[se][1],W==69&&(W=V[V.l++]),W>Y.length){console.error("WK1 bad formula parse 0x"+se.toString(16)+":|"+Y.join("|")+"|");return}var S=Y.slice(-W);Y.length-=W,Y.push(g[se][0]+"("+S.join(",")+")")}else return se<=7?console.error("WK1 invalid opcode "+se.toString(16)):se<=24?console.error("WK1 unsupported op "+se.toString(16)):se<=30?console.error("WK1 invalid opcode "+se.toString(16)):se<=115?console.error("WK1 unsupported function opcode "+se.toString(16)):console.error("WK1 unrecognized opcode "+se.toString(16))}}Y.length==1?O[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function E(V){var O=[{c:0,r:0},{t:"n",v:0},0];return O[0].r=V.read_shift(2),O[3]=V[V.l++],O[0].c=V[V.l++],O}function C(V,O){var Y=E(V);return Y[1].t="s",Y[1].v=V.read_shift(O-4,"cstr"),Y}function k(V,O,Y,W){var ue=lt(6+W.length);ue.write_shift(2,V),ue.write_shift(1,Y),ue.write_shift(1,O),ue.write_shift(1,39);for(var U=0;U<W.length;++U){var z=W.charCodeAt(U);ue.write_shift(1,z>=128?95:z)}return ue.write_shift(1,0),ue}function A(V,O){var Y=E(V);Y[1].v=V.read_shift(2);var W=Y[1].v>>1;if(Y[1].v&1)switch(W&7){case 0:W=(W>>3)*5e3;break;case 1:W=(W>>3)*500;break;case 2:W=(W>>3)/20;break;case 3:W=(W>>3)/200;break;case 4:W=(W>>3)/2e3;break;case 5:W=(W>>3)/2e4;break;case 6:W=(W>>3)/16;break;case 7:W=(W>>3)/64;break}return Y[1].v=W,Y}function T(V,O){var Y=E(V),W=V.read_shift(4),ue=V.read_shift(4),U=V.read_shift(2);if(U==65535)return W===0&&ue===3221225472?(Y[1].t="e",Y[1].v=15):W===0&&ue===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var z=U&32768;return U=(U&32767)-16446,Y[1].v=(1-z*2)*(ue*Math.pow(2,U+32)+W*Math.pow(2,U)),Y}function M(V,O,Y,W){var ue=lt(14);if(ue.write_shift(2,V),ue.write_shift(1,Y),ue.write_shift(1,O),W==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var U=0,z=0,te=0,se=0;return W<0&&(U=1,W=-W),z=Math.log2(W)|0,W/=Math.pow(2,z-31),se=W>>>0,se&2147483648||(W/=2,++z,se=W>>>0),W-=se,se|=2147483648,se>>>=0,W*=Math.pow(2,32),te=W>>>0,ue.write_shift(4,te),ue.write_shift(4,se),z+=16383+(U?32768:0),ue.write_shift(2,z),ue}function X(V,O){var Y=T(V);return V.l+=O-14,Y}function ne(V,O){var Y=E(V),W=V.read_shift(4);return Y[1].v=W>>6,Y}function Q(V,O){var Y=E(V),W=V.read_shift(8,"f");return Y[1].v=W,Y}function oe(V,O){var Y=Q(V);return V.l+=O-10,Y}function ge(V,O){return V[V.l+O-1]==0?V.read_shift(O,"cstr"):""}function me(V,O){var Y=V[V.l++];Y>O-1&&(Y=O-1);for(var W="";W.length<Y;)W+=String.fromCharCode(V[V.l++]);return W}function H(V,O,Y){if(!(!Y.qpro||O<21)){var W=V.read_shift(1);V.l+=17,V.l+=1,V.l+=2;var ue=V.read_shift(O-21,"cstr");return[W,ue]}}function L(V,O){for(var Y={},W=V.l+O;V.l<W;){var ue=V.read_shift(2);if(ue==14e3){for(Y[ue]=[0,""],Y[ue][0]=V.read_shift(2);V[V.l];)Y[ue][1]+=String.fromCharCode(V[V.l]),V.l++;V.l++}}return Y}function he(V,O){var Y=lt(5+V.length);Y.write_shift(2,14e3),Y.write_shift(2,O);for(var W=0;W<V.length;++W){var ue=V.charCodeAt(W);Y[Y.l++]=ue>127?95:ue}return Y[Y.l++]=0,Y}var ie={0:{n:"BOF",f:nC},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ge},222:{n:"SHEETNAMELP",f:me},65535:{n:""}},ke={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:C},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:X},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:L},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:ne},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:oe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ge},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:H},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:n,to_workbook:s}}(),QL=/^\s|\s$|[\t\n\r]/;function mC(t,s){if(!s.bookSST)return"";var a=[ka];a[a.length]=Tt("sst",null,{xmlns:Xc[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var n=t[r],l="<si>";n.r?l+=n.r:(l+="<t",n.t||(n.t=""),n.t.match(QL)&&(l+=' xml:space="preserve"'),l+=">"+Ys(n.t)+"</t>"),l+="</si>",a[a.length]=l}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function ZL(t){return[t.read_shift(4),t.read_shift(4)]}function e9(t,s){return s||(s=lt(8)),s.write_shift(4,t.Count),s.write_shift(4,t.Unique),s}var t9=WO;function s9(t){var s=Cr();pt(s,159,e9(t));for(var a=0;a<t.length;++a)pt(s,19,t9(t[a]));return pt(s,160),s.end()}function a9(t){for(var s=[],a=t.split(""),r=0;r<a.length;++r)s[r]=a[r].charCodeAt(0);return s}function uC(t){var s=0,a,r=a9(t),n=r.length+1,l,i,o,c,d;for(a=yo(n),a[0]=r.length,l=1;l!=n;++l)a[l]=r[l-1];for(l=n-1;l>=0;--l)i=a[l],o=s&16384?1:0,c=s<<1&32767,d=o|c,s=d^i;return s^52811}var r9=function(){function t(n,l){switch(l.type){case"base64":return s(Dl(n),l);case"binary":return s(n,l);case"buffer":return s(Rs&&Buffer.isBuffer(n)?n.toString("binary"):Bm(n),l);case"array":return s(Lh(n),l)}throw new Error("Unrecognized type "+l.type)}function s(n,l){var i=l||{},o=i.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,x){Array.isArray(o)&&(o[x]=[]);for(var p=/\\\w+\b/g,h=0,y,f=-1;y=p.exec(u);){switch(y[0]){case"\\cell":var v=u.slice(h,p.lastIndex-y[0].length);if(v[0]==" "&&(v=v.slice(1)),++f,v.length){var w={v,t:"s"};Array.isArray(o)?o[x][f]=w:o[Hs({r:x,c:f})]=w}break}h=p.lastIndex}f>d.e.c&&(d.e.c=f)}),o["!ref"]=Sa(d),o}function a(n,l){return ko(t(n,l),l)}function r(n){for(var l=["{\\rtf1\\ansi"],i=na(n["!ref"]),o,c=Array.isArray(n),d=i.s.r;d<=i.e.r;++d){l.push("\\trowd\\trautofit1");for(var u=i.s.c;u<=i.e.c;++u)l.push("\\cellx"+(u+1));for(l.push("\\pard\\intbl"),u=i.s.c;u<=i.e.c;++u){var x=Hs({r:d,c:u});o=c?(n[d]||[])[u]:n[x],!(!o||o.v==null&&(!o.f||o.F))&&(l.push(" "+(o.w||(Al(o),o.w))),l.push("\\cell"))}l.push("\\pard\\intbl\\row")}return l.join("")+"}"}return{to_workbook:a,to_sheet:t,from_sheet:r}}();function Lj(t){for(var s=0,a=1;s!=3;++s)a=a*256+(t[s]>255?255:t[s]<0?0:t[s]);return a.toString(16).toUpperCase().slice(1)}var n9=6,gl=n9;function qx(t){return Math.floor((t+Math.round(128/gl)/256)*gl)}function Jx(t){return Math.floor((t-5)/gl*100+.5)/100}function g0(t){return Math.round((t*gl+5)/gl*256)/256}function jv(t){t.width?(t.wpx=qx(t.width),t.wch=Jx(t.wpx),t.MDW=gl):t.wpx?(t.wch=Jx(t.wpx),t.width=g0(t.wch),t.MDW=gl):typeof t.wch=="number"&&(t.width=g0(t.wch),t.wpx=qx(t.width),t.MDW=gl),t.customWidth&&delete t.customWidth}var l9=96,xC=l9;function Kx(t){return t*96/xC}function hC(t){return t*xC/96}function i9(t){var s=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var r=a[0];r<=a[1];++r)t[r]!=null&&(s[s.length]=Tt("numFmt",null,{numFmtId:r,formatCode:Ys(t[r])}))}),s.length===1?"":(s[s.length]="</numFmts>",s[0]=Tt("numFmts",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function o9(t){var s=[];return s[s.length]=Tt("cellXfs",null),t.forEach(function(a){s[s.length]=Tt("xf",null,a)}),s[s.length]="</cellXfs>",s.length===2?"":(s[0]=Tt("cellXfs",null,{count:s.length-2}).replace("/>",">"),s.join(""))}function pC(t,s){var a=[ka,Tt("styleSheet",null,{xmlns:Xc[0],"xmlns:vt":Fa.vt})],r;return t.SSF&&(r=i9(t.SSF))!=null&&(a[a.length]=r),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=o9(s.cellXfs))&&(a[a.length]=r),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function c9(t,s){var a=t.read_shift(2),r=er(t);return[a,r]}function d9(t,s,a){a||(a=lt(6+4*s.length)),a.write_shift(2,t),Ia(s,a);var r=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),r}function m9(t,s,a){var r={};r.sz=t.read_shift(2)/20;var n=QO(t);n.fItalic&&(r.italic=1),n.fCondense&&(r.condense=1),n.fExtend&&(r.extend=1),n.fShadow&&(r.shadow=1),n.fOutline&&(r.outline=1),n.fStrikeout&&(r.strike=1);var l=t.read_shift(2);switch(l===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(r.underline=i);var o=t.read_shift(1);o>0&&(r.family=o);var c=t.read_shift(1);switch(c>0&&(r.charset=c),t.l++,r.color=XO(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=er(t),r}function u9(t,s){s||(s=lt(25+4*32)),s.write_shift(2,t.sz*20),ZO(t,s),s.write_shift(2,t.bold?700:400);var a=0;t.vertAlign=="superscript"?a=1:t.vertAlign=="subscript"&&(a=2),s.write_shift(2,a),s.write_shift(1,t.underline||0),s.write_shift(1,t.family||0),s.write_shift(1,t.charset||0),s.write_shift(1,0),Hx(t.color,s);var r=0;return r=2,s.write_shift(1,r),Ia(t.name,s),s.length>s.l?s.slice(0,s.l):s}var x9=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Hp,h9=sl;function $j(t,s){s||(s=lt(4*3+8*7+16*1)),Hp||(Hp=cv(x9));var a=Hp[t.patternType];a==null&&(a=40),s.write_shift(4,a);var r=0;if(a!=40)for(Hx({auto:1},s),Hx({auto:1},s);r<12;++r)s.write_shift(4,0);else{for(;r<4;++r)s.write_shift(4,0);for(;r<12;++r)s.write_shift(4,0)}return s.length>s.l?s.slice(0,s.l):s}function p9(t,s){var a=t.l+s,r=t.read_shift(2),n=t.read_shift(2);return t.l=a,{ixfe:r,numFmtId:n}}function fC(t,s,a){a||(a=lt(16)),a.write_shift(2,s||0),a.write_shift(2,t.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var r=0;return a.write_shift(1,r),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function gd(t,s){return s||(s=lt(10)),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(4,0),s}var f9=sl;function g9(t,s){return s||(s=lt(51)),s.write_shift(1,0),gd(null,s),gd(null,s),gd(null,s),gd(null,s),gd(null,s),s.length>s.l?s.slice(0,s.l):s}function v9(t,s){return s||(s=lt(12+4*10)),s.write_shift(4,t.xfId),s.write_shift(2,1),s.write_shift(1,0),s.write_shift(1,0),Wx(t.name||"",s),s.length>s.l?s.slice(0,s.l):s}function w9(t,s,a){var r=lt(2052);return r.write_shift(4,t),Wx(s,r),Wx(a,r),r.length>r.l?r.slice(0,r.l):r}function y9(t,s){if(s){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&++a}),a!=0&&(pt(t,615,Dn(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&pt(t,44,d9(n,s[n]))}),pt(t,616))}}function j9(t){var s=1;pt(t,611,Dn(s)),pt(t,43,u9({sz:12,color:{theme:1},name:"Calibri",family:2})),pt(t,612)}function N9(t){var s=2;pt(t,603,Dn(s)),pt(t,45,$j({patternType:"none"})),pt(t,45,$j({patternType:"gray125"})),pt(t,604)}function b9(t){var s=1;pt(t,613,Dn(s)),pt(t,46,g9()),pt(t,614)}function S9(t){var s=1;pt(t,626,Dn(s)),pt(t,47,fC({numFmtId:0},65535)),pt(t,627)}function C9(t,s){pt(t,617,Dn(s.length)),s.forEach(function(a){pt(t,47,fC(a,0))}),pt(t,618)}function k9(t){var s=1;pt(t,619,Dn(s)),pt(t,48,v9({xfId:0,name:"Normal"})),pt(t,620)}function E9(t){var s=0;pt(t,505,Dn(s)),pt(t,506)}function D9(t){var s=0;pt(t,508,w9(s,"TableStyleMedium9","PivotStyleMedium4")),pt(t,509)}function A9(t,s){var a=Cr();return pt(a,278),y9(a,t.SSF),j9(a),N9(a),b9(a),S9(a),C9(a,s.cellXfs),k9(a),E9(a),D9(a),pt(a,279),a.end()}function gC(t,s){if(s&&s.themeXLSX)return s.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var a=[ka];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function _9(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:er(t)}}function P9(t){var s=lt(12+2*t.name.length);return s.write_shift(4,t.flags),s.write_shift(4,t.version),Ia(t.name,s),s.slice(0,s.l)}function T9(t){for(var s=[],a=t.read_shift(4);a-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function F9(t){var s=lt(4+8*t.length);s.write_shift(4,t.length);for(var a=0;a<t.length;++a)s.write_shift(4,t[a][0]),s.write_shift(4,t[a][1]);return s}function M9(t,s){var a=lt(8+2*s.length);return a.write_shift(4,t),Ia(s,a),a.slice(0,a.l)}function I9(t){return t.l+=4,t.read_shift(4)!=0}function R9(t,s){var a=lt(8);return a.write_shift(4,t),a.write_shift(4,1),a}function O9(){var t=Cr();return pt(t,332),pt(t,334,Dn(1)),pt(t,335,P9({name:"XLDAPR",version:12e4,flags:3496657072})),pt(t,336),pt(t,339,M9(1,"XLDAPR")),pt(t,52),pt(t,35,Dn(514)),pt(t,4096,Dn(0)),pt(t,4097,Xr(1)),pt(t,36),pt(t,53),pt(t,340),pt(t,337,R9(1)),pt(t,51,F9([[1,0]])),pt(t,338),pt(t,333),t.end()}function vC(){var t=[ka];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function L9(t){var s={};s.i=t.read_shift(4);var a={};a.r=t.read_shift(4),a.c=t.read_shift(4),s.r=Hs(a);var r=t.read_shift(1);return r&2&&(s.l="1"),r&8&&(s.a="1"),s}var sc=1024;function wC(t,s){for(var a=[21600,21600],r=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),n=[Tt("xml",null,{"xmlns:v":Fr.v,"xmlns:o":Fr.o,"xmlns:x":Fr.x,"xmlns:mv":Fr.mv}).replace(/\/>/,">"),Tt("o:shapelayout",Tt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Tt("v:shapetype",[Tt("v:stroke",null,{joinstyle:"miter"}),Tt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:r})];sc<t*1e3;)sc+=1e3;return s.forEach(function(l){var i=Ma(l[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Tt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Tt("v:fill",c,o),u={on:"t",obscured:"t"};++sc,n=n.concat(["<v:shape"+jm({id:"_x0000_s"+sc,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(l[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Tt("v:shadow",null,u),Tt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ba("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Ba("x:AutoFill","False"),Ba("x:Row",String(i.r)),Ba("x:Column",String(i.c)),l[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function yC(t){var s=[ka,Tt("comments",null,{xmlns:Xc[0]})],a=[];return s.push("<authors>"),t.forEach(function(r){r[1].forEach(function(n){var l=Ys(n.a);a.indexOf(l)==-1&&(a.push(l),s.push("<author>"+l+"</author>")),n.T&&n.ID&&a.indexOf("tc="+n.ID)==-1&&(a.push("tc="+n.ID),s.push("<author>tc="+n.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),s.push("<author>SheetJ5</author>")),s.push("</authors>"),s.push("<commentList>"),t.forEach(function(r){var n=0,l=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?n=a.indexOf("tc="+r[1][0].ID):r[1].forEach(function(c){c.a&&(n=a.indexOf(Ys(c.a))),l.push(c.t||"")}),s.push('<comment ref="'+r[0]+'" authorId="'+n+'"><text>'),l.length<=1)s.push(Ba("t",Ys(l[0]||"")));else{for(var i=`Comment:
    `+l[0]+`
`,o=1;o<l.length;++o)i+=`Reply:
    `+l[o]+`
`;s.push(Ba("t",Ys(i)))}s.push("</text></comment>")}),s.push("</commentList>"),s.length>2&&(s[s.length]="</comments>",s[1]=s[1].replace("/>",">")),s.join("")}function $9(t,s,a){var r=[ka,Tt("ThreadedComments",null,{xmlns:Fa.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(n){var l="";(n[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&s.indexOf(i.a)==-1&&s.push(i.a);var c={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};o==0?l=c.id:c.parentId=l,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+s.indexOf(i.a)).slice(-12)+"}"),r.push(Tt("threadedComment",Ba("text",i.t||""),c))})}),r.push("</ThreadedComments>"),r.join("")}function U9(t){var s=[ka,Tt("personList",null,{xmlns:Fa.TCMNT,"xmlns:x":Xc[0]}).replace(/[\/]>/,">")];return t.forEach(function(a,r){s.push(Tt("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:a,providerId:"None"}))}),s.push("</personList>"),s.join("")}function B9(t){var s={};s.iauthor=t.read_shift(4);var a=_o(t);return s.rfx=a.s,s.ref=Hs(a.s),t.l+=16,s}function z9(t,s){return s==null&&(s=lt(36)),s.write_shift(4,t[1].iauthor),Zc(t[0],s),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s}var V9=er;function Y9(t){return Ia(t.slice(0,54))}function W9(t){var s=Cr(),a=[];return pt(s,628),pt(s,630),t.forEach(function(r){r[1].forEach(function(n){a.indexOf(n.a)>-1||(a.push(n.a.slice(0,54)),pt(s,632,Y9(n.a)))})}),pt(s,631),pt(s,633),t.forEach(function(r){r[1].forEach(function(n){n.iauthor=a.indexOf(n.a);var l={s:Ma(r[0]),e:Ma(r[0])};pt(s,635,z9([l,n])),n.t&&n.t.length>0&&pt(s,637,GO(n)),pt(s,636),delete n.iauthor})}),pt(s,634),pt(s,629),s.end()}function H9(t,s){s.FullPaths.forEach(function(a,r){if(r!=0){var n=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&Js.utils.cfb_add(t,n,s.FileIndex[r].content)}})}var jC=["xlsb","xlsm","xlam","biff8","xla"],G9=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function a(r,n,l,i){var o=!1,c=!1;l.length==0?c=!0:l.charAt(0)=="["&&(c=!0,l=l.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var d=l.length>0?parseInt(l,10)|0:0,u=i.length>0?parseInt(i,10)|0:0;return o?u+=s.c:--u,c?d+=s.r:--d,n+(o?"":"$")+Za(u)+(c?"":"$")+Va(d)}return function(n,l){return s=l,n.replace(t,a)}}(),Nv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,bv=function(){return function(s,a){return s.replace(Nv,function(r,n,l,i,o,c){var d=fv(i)-(l?0:a.c),u=pv(c)-(o?0:a.r),x=u==0?"":o?u+1:"["+u+"]",p=d==0?"":l?d+1:"["+d+"]";return n+"R"+x+"C"+p})}}();function q9(t,s){return t.replace(Nv,function(a,r,n,l,i,o){return r+(n=="$"?n+l:Za(fv(l)+s.c))+(i=="$"?i+o:Va(pv(o)+s.r))})}function J9(t){return t.length!=1}function ja(t){t.l+=1}function ki(t,s){var a=t.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function NC(t,s,a){var r=2;if(a){if(a.biff>=2&&a.biff<=5)return bC(t);a.biff==12&&(r=4)}var n=t.read_shift(r),l=t.read_shift(r),i=ki(t),o=ki(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:l,c:o[0],cRel:o[1],rRel:o[2]}}}function bC(t){var s=ki(t),a=ki(t),r=t.read_shift(1),n=t.read_shift(1);return{s:{r:s[0],c:r,cRel:s[1],rRel:s[2]},e:{r:a[0],c:n,cRel:a[1],rRel:a[2]}}}function K9(t,s,a){if(a.biff<8)return bC(t);var r=t.read_shift(a.biff==12?4:2),n=t.read_shift(a.biff==12?4:2),l=ki(t),i=ki(t);return{s:{r,c:l[0],cRel:l[1],rRel:l[2]},e:{r:n,c:i[0],cRel:i[1],rRel:i[2]}}}function SC(t,s,a){if(a&&a.biff>=2&&a.biff<=5)return X9(t);var r=t.read_shift(a&&a.biff==12?4:2),n=ki(t);return{r,c:n[0],cRel:n[1],rRel:n[2]}}function X9(t){var s=ki(t),a=t.read_shift(1);return{r:s[0],c:a,cRel:s[1],rRel:s[2]}}function Q9(t){var s=t.read_shift(2),a=t.read_shift(2);return{r:s,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function Z9(t,s,a){var r=a&&a.biff?a.biff:8;if(r>=2&&r<=5)return e7(t);var n=t.read_shift(r>=12?4:2),l=t.read_shift(2),i=(l&16384)>>14,o=(l&32768)>>15;if(l&=16383,o==1)for(;n>524287;)n-=1048576;if(i==1)for(;l>8191;)l=l-16384;return{r:n,c:l,cRel:i,rRel:o}}function e7(t){var s=t.read_shift(2),a=t.read_shift(1),r=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,r==1&&s>=8192&&(s=s-16384),n==1&&a>=128&&(a=a-256),{r:s,c:a,cRel:n,rRel:r}}function t7(t,s,a){var r=(t[t.l++]&96)>>5,n=NC(t,a.biff>=2&&a.biff<=5?6:8,a);return[r,n]}function s7(t,s,a){var r=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),l=8;if(a)switch(a.biff){case 5:t.l+=12,l=6;break;case 12:l=12;break}var i=NC(t,l,a);return[r,n,i]}function a7(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a&&a.biff>8?12:a.biff<8?6:8,[r]}function r7(t,s,a){var r=(t[t.l++]&96)>>5,n=t.read_shift(2),l=8;if(a)switch(a.biff){case 5:t.l+=12,l=6;break;case 12:l=12;break}return t.l+=l,[r,n]}function n7(t,s,a){var r=(t[t.l++]&96)>>5,n=K9(t,s-1,a);return[r,n]}function l7(t,s,a){var r=(t[t.l++]&96)>>5;return t.l+=a.biff==2?6:a.biff==12?14:7,[r]}function Uj(t){var s=t[t.l+1]&1,a=1;return t.l+=4,[s,a]}function i7(t,s,a){t.l+=2;for(var r=t.read_shift(a&&a.biff==2?1:2),n=[],l=0;l<=r;++l)n.push(t.read_shift(a&&a.biff==2?1:2));return n}function o7(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function c7(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(a&&a.biff==2?1:2)]}function d7(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function m7(t,s,a){var r=t[t.l+1]&255?1:0;return t.l+=a&&a.biff==2?3:4,[r]}function CC(t){var s=t.read_shift(1),a=t.read_shift(1);return[s,a]}function u7(t){return t.read_shift(2),CC(t)}function x7(t){return t.read_shift(2),CC(t)}function h7(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=SC(t,0,a);return[r,n]}function p7(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=Z9(t,0,a);return[r,n]}function f7(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);a&&a.biff==5&&(t.l+=12);var l=SC(t,0,a);return[r,n,l]}function g7(t,s,a){var r=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(a&&a.biff<=3?1:2);return[g$[n],DC[n],r]}function v7(t,s,a){var r=t[t.l++],n=t.read_shift(1),l=a&&a.biff<=3?[r==88?-1:0,t.read_shift(1)]:w7(t);return[n,(l[0]===0?DC:f$)[l[1]]]}function w7(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function y7(t,s,a){t.l+=a&&a.biff==2?3:4}function j7(t,s,a){if(t.l++,a&&a.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),n=t.read_shift(a&&a.biff==2?1:2);return[r,n]}function N7(t){return t.l++,Ym[t.read_shift(1)]}function b7(t){return t.l++,t.read_shift(2)}function S7(t){return t.l++,t.read_shift(1)!==0}function C7(t){return t.l++,ed(t)}function k7(t,s,a){return t.l++,iC(t,s-1,a)}function E7(t,s){var a=[t.read_shift(1)];if(s==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=fL(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:a[1]=Ym[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:a[1]=ed(t);break;case 2:a[1]=yL(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function D7(t,s,a){for(var r=t.read_shift(a.biff==12?4:2),n=[],l=0;l!=r;++l)n.push((a.biff==12?_o:bL)(t));return n}function A7(t,s,a){var r=0,n=0;a.biff==12?(r=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),r=1+t.read_shift(2)),a.biff>=2&&a.biff<8&&(--r,--n==0&&(n=256));for(var l=0,i=[];l!=r&&(i[l]=[]);++l)for(var o=0;o!=n;++o)i[l][o]=E7(t,a.biff);return i}function _7(t,s,a){var r=t.read_shift(1)>>>5&3,n=!a||a.biff>=8?4:2,l=t.read_shift(n);switch(a.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,l]}function P7(t,s,a){if(a.biff==5)return T7(t);var r=t.read_shift(1)>>>5&3,n=t.read_shift(2),l=t.read_shift(4);return[r,n,l]}function T7(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[s,a,r]}function F7(t,s,a){var r=t.read_shift(1)>>>5&3;t.l+=a&&a.biff==2?3:4;var n=t.read_shift(a&&a.biff==2?1:2);return[r,n]}function M7(t,s,a){var r=t.read_shift(1)>>>5&3,n=t.read_shift(a&&a.biff==2?1:2);return[r,n]}function I7(t,s,a){var r=t.read_shift(1)>>>5&3;return t.l+=4,a.biff<8&&t.l--,a.biff==12&&(t.l+=2),[r]}function R7(t,s,a){var r=(t[t.l++]&96)>>5,n=t.read_shift(2),l=4;if(a)switch(a.biff){case 5:l=15;break;case 12:l=6;break}return t.l+=l,[r,n]}var O7=sl,L7=sl,$7=sl;function Wm(t,s,a){return t.l+=2,[Q9(t)]}function Sv(t){return t.l+=6,[]}var U7=Wm,B7=Sv,z7=Sv,V7=Wm;function kC(t){return t.l+=2,[nC(t),t.read_shift(2)&1]}var Y7=Wm,W7=kC,H7=Sv,G7=Wm,q7=Wm,J7=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function K7(t){t.l+=2;var s=t.read_shift(2),a=t.read_shift(2),r=t.read_shift(4),n=t.read_shift(2),l=t.read_shift(2),i=J7[a>>2&31];return{ixti:s,coltype:a&3,rt:i,idx:r,c:n,C:l}}function X7(t){return t.l+=2,[t.read_shift(4)]}function Q7(t,s,a){return t.l+=5,t.l+=2,t.l+=a.biff==2?1:4,["PTGSHEET"]}function Z7(t,s,a){return t.l+=a.biff==2?4:5,["PTGENDSHEET"]}function e$(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function t$(t){var s=t.read_shift(1)>>>5&3,a=t.read_shift(2);return[s,a]}function s$(t){return t.l+=4,[0,0]}var Bj={1:{n:"PtgExp",f:j7},2:{n:"PtgTbl",f:$7},3:{n:"PtgAdd",f:ja},4:{n:"PtgSub",f:ja},5:{n:"PtgMul",f:ja},6:{n:"PtgDiv",f:ja},7:{n:"PtgPower",f:ja},8:{n:"PtgConcat",f:ja},9:{n:"PtgLt",f:ja},10:{n:"PtgLe",f:ja},11:{n:"PtgEq",f:ja},12:{n:"PtgGe",f:ja},13:{n:"PtgGt",f:ja},14:{n:"PtgNe",f:ja},15:{n:"PtgIsect",f:ja},16:{n:"PtgUnion",f:ja},17:{n:"PtgRange",f:ja},18:{n:"PtgUplus",f:ja},19:{n:"PtgUminus",f:ja},20:{n:"PtgPercent",f:ja},21:{n:"PtgParen",f:ja},22:{n:"PtgMissArg",f:ja},23:{n:"PtgStr",f:k7},26:{n:"PtgSheet",f:Q7},27:{n:"PtgEndSheet",f:Z7},28:{n:"PtgErr",f:N7},29:{n:"PtgBool",f:S7},30:{n:"PtgInt",f:b7},31:{n:"PtgNum",f:C7},32:{n:"PtgArray",f:l7},33:{n:"PtgFunc",f:g7},34:{n:"PtgFuncVar",f:v7},35:{n:"PtgName",f:_7},36:{n:"PtgRef",f:h7},37:{n:"PtgArea",f:t7},38:{n:"PtgMemArea",f:F7},39:{n:"PtgMemErr",f:O7},40:{n:"PtgMemNoMem",f:L7},41:{n:"PtgMemFunc",f:M7},42:{n:"PtgRefErr",f:I7},43:{n:"PtgAreaErr",f:a7},44:{n:"PtgRefN",f:p7},45:{n:"PtgAreaN",f:n7},46:{n:"PtgMemAreaN",f:e$},47:{n:"PtgMemNoMemN",f:t$},57:{n:"PtgNameX",f:P7},58:{n:"PtgRef3d",f:f7},59:{n:"PtgArea3d",f:s7},60:{n:"PtgRefErr3d",f:R7},61:{n:"PtgAreaErr3d",f:r7},255:{}},a$={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},r$={1:{n:"PtgElfLel",f:kC},2:{n:"PtgElfRw",f:G7},3:{n:"PtgElfCol",f:U7},6:{n:"PtgElfRwV",f:q7},7:{n:"PtgElfColV",f:V7},10:{n:"PtgElfRadical",f:Y7},11:{n:"PtgElfRadicalS",f:H7},13:{n:"PtgElfColS",f:B7},15:{n:"PtgElfColSV",f:z7},16:{n:"PtgElfRadicalLel",f:W7},25:{n:"PtgList",f:K7},29:{n:"PtgSxName",f:X7},255:{}},n$={0:{n:"PtgAttrNoop",f:s$},1:{n:"PtgAttrSemi",f:m7},2:{n:"PtgAttrIf",f:c7},4:{n:"PtgAttrChoose",f:i7},8:{n:"PtgAttrGoto",f:o7},16:{n:"PtgAttrSum",f:y7},32:{n:"PtgAttrBaxcel",f:Uj},33:{n:"PtgAttrBaxcel",f:Uj},64:{n:"PtgAttrSpace",f:u7},65:{n:"PtgAttrSpaceSemi",f:x7},128:{n:"PtgAttrIfError",f:d7},255:{}};function l$(t,s,a,r){if(r.biff<8)return sl(t,s);for(var n=t.l+s,l=[],i=0;i!==a.length;++i)switch(a[i][0]){case"PtgArray":a[i][1]=A7(t,0,r),l.push(a[i][1]);break;case"PtgMemArea":a[i][2]=D7(t,a[i][1],r),l.push(a[i][2]);break;case"PtgExp":r&&r.biff==12&&(a[i][1][1]=t.read_shift(4),l.push(a[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[i][0]}return s=n-t.l,s!==0&&l.push(sl(t,s)),l}function i$(t,s,a){for(var r=t.l+s,n,l,i=[];r!=t.l;)s=r-t.l,l=t[t.l],n=Bj[l]||Bj[a$[l]],(l===24||l===25)&&(n=(l===24?r$:n$)[t[t.l+1]]),!n||!n.f?sl(t,s):i.push([n.n,n.f(t,s,a)]);return i}function o$(t){for(var s=[],a=0;a<t.length;++a){for(var r=t[a],n=[],l=0;l<r.length;++l){var i=r[l];if(i)switch(i[0]){case 2:n.push('"'+i[1].replace(/"/g,'""')+'"');break;default:n.push(i[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var c$={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function d$(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function EC(t,s,a){if(!t)return"SH33TJSERR0";if(a.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[s];if(a.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!r)return"SH33TJSERR1";var n="";if(a.biff>8)switch(t[r[0]][0]){case 357:return n=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?n:n+":"+t.SheetNames[r[2]];case 358:return a.SID!=null?t.SheetNames[a.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return n=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?n:n+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(l){return l.Name}).join(";;");default:return t[r[0]][0][3]?(n=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?n:n+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function zj(t,s,a){var r=EC(t,s,a);return r=="#REF"?r:d$(r,a)}function Bc(t,s,a,r,n){var l=n&&n.biff||8,i={s:{c:0,r:0}},o=[],c,d,u,x=0,p=0,h,y="";if(!t[0]||!t[0][0])return"";for(var f=-1,v="",w=0,g=t[0].length;w<g;++w){var j=t[0][w];switch(j[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),f>=0){switch(t[0][f][1][0]){case 0:v=xa(" ",t[0][f][1][1]);break;case 1:v=xa("\r",t[0][f][1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}d=d+v,f=-1}o.push(d+c$[j[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=zd(j[1][1],i,n),o.push(Vd(u,l));break;case"PtgRefN":u=a?zd(j[1][1],a,n):j[1][1],o.push(Vd(u,l));break;case"PtgRef3d":x=j[1][1],u=zd(j[1][2],i,n),y=zj(r,x,n),o.push(y+"!"+Vd(u,l));break;case"PtgFunc":case"PtgFuncVar":var N=j[1][0],E=j[1][1];N||(N=0),N&=127;var C=N==0?[]:o.slice(-N);o.length-=N,E==="User"&&(E=C.shift()),o.push(E+"("+C.join(",")+")");break;case"PtgBool":o.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(j[1]);break;case"PtgNum":o.push(String(j[1]));break;case"PtgStr":o.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(j[1]);break;case"PtgAreaN":h=kj(j[1][1],a?{s:a}:i,n),o.push(Yp(h,n));break;case"PtgArea":h=kj(j[1][1],i,n),o.push(Yp(h,n));break;case"PtgArea3d":x=j[1][1],h=j[1][2],y=zj(r,x,n),o.push(y+"!"+Yp(h,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=j[1][2];var k=(r.names||[])[p-1]||(r[0]||[])[p],A=k?k.Name:"SH33TJSNAME"+String(p);A&&A.slice(0,6)=="_xlfn."&&!n.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var T=j[1][1];p=j[1][2];var M;if(n.biff<=5)T<0&&(T=-T),r[T]&&(M=r[T][p]);else{var X="";if(((r[T]||[])[0]||[])[0]==14849||(((r[T]||[])[0]||[])[0]==1025?r[T][p]&&r[T][p].itab>0&&(X=r.SheetNames[r[T][p].itab-1]+"!"):X=r.SheetNames[p-1]+"!"),r[T]&&r[T][p])X+=r[T][p].Name;else if(r[0]&&r[0][p])X+=r[0][p].Name;else{var ne=(EC(r,T,n)||"").split(";;");ne[p-1]?X=ne[p-1]:X+="SH33TJSERRX"}o.push(X);break}M||(M={Name:"SH33TJSERRY"}),o.push(M.Name);break;case"PtgParen":var Q="(",oe=")";if(f>=0){switch(v="",t[0][f][1][0]){case 2:Q=xa(" ",t[0][f][1][1])+Q;break;case 3:Q=xa("\r",t[0][f][1][1])+Q;break;case 4:oe=xa(" ",t[0][f][1][1])+oe;break;case 5:oe=xa("\r",t[0][f][1][1])+oe;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][f][1][0])}f=-1}o.push(Q+o.pop()+oe);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:j[1][1],r:j[1][0]};var ge={c:a.c,r:a.r};if(r.sharedf[Hs(u)]){var me=r.sharedf[Hs(u)];o.push(Bc(me,i,ge,r,n))}else{var H=!1;for(c=0;c!=r.arrayf.length;++c)if(d=r.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){o.push(Bc(d[1],i,ge,r,n)),H=!0;break}H||o.push(j[1])}break;case"PtgArray":o.push("{"+o$(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":f=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var L=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&f>=0&&L.indexOf(t[0][w][0])==-1){j=t[0][f];var he=!0;switch(j[1][0]){case 4:he=!1;case 0:v=xa(" ",j[1][1]);break;case 5:he=!1;case 1:v=xa("\r",j[1][1]);break;default:if(v="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}o.push((he?v:"")+o.pop()+(he?"":v)),f=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function m$(t){if(t==null){var s=lt(8);return s.write_shift(1,3),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,65535),s}else if(typeof t=="number")return jo(t);return jo(0)}function u$(t,s,a,r,n){var l=No(s,a,n),i=m$(t.v),o=lt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var d=lt(t.bf.length),u=0;u<t.bf.length;++u)d[u]=t.bf[u];var x=Ua([l,i,o,d]);return x}function $h(t,s,a){var r=t.read_shift(4),n=i$(t,r,a),l=t.read_shift(4),i=l>0?l$(t,l,n,a):null;return[n,i]}var x$=$h,Uh=$h,h$=$h,p$=$h,f$={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},DC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},g$={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function v$(t){var s="of:="+t.replace(Nv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return s.replace(/;/g,"|").replace(/,/g,";")}function w$(t){return t.replace(/\./,"!")}var Yd=typeof Map<"u";function Cv(t,s,a){var r=0,n=t.length;if(a){if(Yd?a.has(s):Object.prototype.hasOwnProperty.call(a,s)){for(var l=Yd?a.get(s):a[s];r<l.length;++r)if(t[l[r]].t===s)return t.Count++,l[r]}}else for(;r<n;++r)if(t[r].t===s)return t.Count++,r;return t[n]={t:s},t.Count++,t.Unique++,a&&(Yd?(a.has(s)||a.set(s,[]),a.get(s).push(n)):(Object.prototype.hasOwnProperty.call(a,s)||(a[s]=[]),a[s].push(n))),n}function Bh(t,s){var a={min:t+1,max:t+1},r=-1;return s.MDW&&(gl=s.MDW),s.width!=null?a.customWidth=1:s.wpx!=null?r=Jx(s.wpx):s.wch!=null&&(r=s.wch),r>-1?(a.width=g0(r),a.customWidth=1):s.width!=null&&(a.width=s.width),s.hidden&&(a.hidden=!0),s.level!=null&&(a.outlineLevel=a.level=s.level),a}function AC(t,s){if(t){var a=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=a[0]),t.right==null&&(t.right=a[1]),t.top==null&&(t.top=a[2]),t.bottom==null&&(t.bottom=a[3]),t.header==null&&(t.header=a[4]),t.footer==null&&(t.footer=a[5])}}function Ri(t,s,a){var r=a.revssf[s.z!=null?s.z:"General"],n=60,l=t.length;if(r==null&&a.ssf){for(;n<392;++n)if(a.ssf[n]==null){S3(s.z,n),a.ssf[n]=s.z,a.revssf[s.z]=r=n;break}}for(n=0;n!=l;++n)if(t[n].numFmtId===r)return n;return t[l]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},l}function y$(t,s,a){if(t&&t["!ref"]){var r=na(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+a+"): "+t["!ref"])}}function j$(t){if(t.length===0)return"";for(var s='<mergeCells count="'+t.length+'">',a=0;a!=t.length;++a)s+='<mergeCell ref="'+Sa(t[a])+'"/>';return s+"</mergeCells>"}function N$(t,s,a,r,n){var l=!1,i={},o=null;if(r.bookType!=="xlsx"&&s.vbaraw){var c=s.SheetNames[a];try{s.Workbook&&(c=s.Workbook.Sheets[a].CodeName||c)}catch{}l=!0,i.codeName=ym(Ys(c))}if(t&&t["!outline"]){var d={summaryBelow:1,summaryRight:1};t["!outline"].above&&(d.summaryBelow=0),t["!outline"].left&&(d.summaryRight=0),o=(o||"")+Tt("outlinePr",null,d)}!l&&!o||(n[n.length]=Tt("sheetPr",o,i))}var b$=["objects","scenarios","selectLockedCells","selectUnlockedCells"],S$=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function C$(t){var s={sheet:1};return b$.forEach(function(a){t[a]!=null&&t[a]&&(s[a]="1")}),S$.forEach(function(a){t[a]!=null&&!t[a]&&(s[a]="0")}),t.password&&(s.password=uC(t.password).toString(16).toUpperCase()),Tt("sheetProtection",null,s)}function k$(t){return AC(t),Tt("pageMargins",null,t)}function E$(t,s){for(var a=["<cols>"],r,n=0;n!=s.length;++n)(r=s[n])&&(a[a.length]=Tt("col",null,Bh(n,r)));return a[a.length]="</cols>",a.join("")}function D$(t,s,a,r){var n=typeof t.ref=="string"?t.ref:Sa(t.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var l=a.Workbook.Names,i=Yr(n);i.s.r==i.e.r&&(i.e.r=Yr(s["!ref"]).e.r,n=Sa(i));for(var o=0;o<l.length;++o){var c=l[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+a.SheetNames[r]+"'!"+n;break}}return o==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+n}),Tt("autoFilter",null,{ref:n})}function A$(t,s,a,r){var n={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Tt("sheetViews",Tt("sheetView",null,n),{})}function _$(t,s,a,r){if(t.c&&a["!comments"].push([s,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var n="",l=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":n=t.v?"1":"0";break;case"n":n=""+t.v;break;case"e":n=Ym[t.v];break;case"d":r&&r.cellDates?n=ur(t.v,-1).toISOString():(t=Er(t),t.t="n",n=""+(t.v=kr(ur(t.v)))),typeof t.z>"u"&&(t.z=pa[14]);break;default:n=t.v;break}var o=Ba("v",Ys(n)),c={r:s},d=Ri(r.cellXfs,t,r);switch(d!==0&&(c.s=d),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Ba("v",""+Cv(r.Strings,t.v,r.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=l&&(t.t=l,t.v=i),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,s.length)==s?{t:"array",ref:t.F}:null;o=Tt("f",Ys(t.f),u)+(t.v!=null?o:"")}return t.l&&a["!links"].push([s,t.l]),t.D&&(c.cm=1),Tt("c",o,c)}function P$(t,s,a,r){var n=[],l=[],i=na(t["!ref"]),o="",c,d="",u=[],x=0,p=0,h=t["!rows"],y=Array.isArray(t),f={r:d},v,w=-1;for(p=i.s.c;p<=i.e.c;++p)u[p]=Za(p);for(x=i.s.r;x<=i.e.r;++x){for(l=[],d=Va(x),p=i.s.c;p<=i.e.c;++p){c=u[p]+d;var g=y?(t[x]||[])[p]:t[c];g!==void 0&&(o=_$(g,c,t,s))!=null&&l.push(o)}(l.length>0||h&&h[x])&&(f={r:d},h&&h[x]&&(v=h[x],v.hidden&&(f.hidden=1),w=-1,v.hpx?w=Kx(v.hpx):v.hpt&&(w=v.hpt),w>-1&&(f.ht=w,f.customHeight=1),v.level&&(f.outlineLevel=v.level)),n[n.length]=Tt("row",l.join(""),f))}if(h)for(;x<h.length;++x)h&&h[x]&&(f={r:x+1},v=h[x],v.hidden&&(f.hidden=1),w=-1,v.hpx?w=Kx(v.hpx):v.hpt&&(w=v.hpt),w>-1&&(f.ht=w,f.customHeight=1),v.level&&(f.outlineLevel=v.level),n[n.length]=Tt("row","",f));return n.join("")}function _C(t,s,a,r){var n=[ka,Tt("worksheet",null,{xmlns:Xc[0],"xmlns:r":Fa.r})],l=a.SheetNames[t],i=0,o="",c=a.Sheets[l];c==null&&(c={});var d=c["!ref"]||"A1",u=na(d);if(u.e.c>16383||u.e.r>1048575){if(s.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=Sa(u)}r||(r={}),c["!comments"]=[];var x=[];N$(c,a,t,s,n),n[n.length]=Tt("dimension",null,{ref:d}),n[n.length]=A$(c,s,t,a),s.sheetFormat&&(n[n.length]=Tt("sheetFormatPr",null,{defaultRowHeight:s.sheetFormat.defaultRowHeight||"16",baseColWidth:s.sheetFormat.baseColWidth||"10",outlineLevelRow:s.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(n[n.length]=E$(c,c["!cols"])),n[i=n.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=P$(c,s),o.length>0&&(n[n.length]=o)),n.length>i+1&&(n[n.length]="</sheetData>",n[i]=n[i].replace("/>",">")),c["!protect"]&&(n[n.length]=C$(c["!protect"])),c["!autofilter"]!=null&&(n[n.length]=D$(c["!autofilter"],c,a,t)),c["!merges"]!=null&&c["!merges"].length>0&&(n[n.length]=j$(c["!merges"]));var p=-1,h,y=-1;return c["!links"].length>0&&(n[n.length]="<hyperlinks>",c["!links"].forEach(function(f){f[1].Target&&(h={ref:f[0]},f[1].Target.charAt(0)!="#"&&(y=Vs(r,-1,Ys(f[1].Target).replace(/#.*$/,""),Is.HLINK),h["r:id"]="rId"+y),(p=f[1].Target.indexOf("#"))>-1&&(h.location=Ys(f[1].Target.slice(p+1))),f[1].Tooltip&&(h.tooltip=Ys(f[1].Tooltip)),n[n.length]=Tt("hyperlink",null,h))}),n[n.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(n[n.length]=k$(c["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&(n[n.length]=Ba("ignoredErrors",Tt("ignoredError",null,{numberStoredAsText:1,sqref:d}))),x.length>0&&(y=Vs(r,-1,"../drawings/drawing"+(t+1)+".xml",Is.DRAW),n[n.length]=Tt("drawing",null,{"r:id":"rId"+y}),c["!drawing"]=x),c["!comments"].length>0&&(y=Vs(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Is.VML),n[n.length]=Tt("legacyDrawing",null,{"r:id":"rId"+y}),c["!legacy"]=y),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function T$(t,s){var a={},r=t.l+s;a.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var l=t.read_shift(1);return t.l=r,l&7&&(a.level=l&7),l&16&&(a.hidden=!0),l&32&&(a.hpt=n/20),a}function F$(t,s,a){var r=lt(145),n=(a["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var l=320;n.hpx?l=Kx(n.hpx)*20:n.hpt&&(l=n.hpt*20),r.write_shift(2,l),r.write_shift(1,0);var i=0;n.level&&(i|=n.level),n.hidden&&(i|=16),(n.hpx||n.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,c=r.l;r.l+=4;for(var d={r:t,c:0},u=0;u<16;++u)if(!(s.s.c>u+1<<10||s.e.c<u<<10)){for(var x=-1,p=-1,h=u<<10;h<u+1<<10;++h){d.c=h;var y=Array.isArray(a)?(a[d.r]||[])[d.c]:a[Hs(d)];y&&(x<0&&(x=h),p=h)}x<0||(++o,r.write_shift(4,x),r.write_shift(4,p))}var f=r.l;return r.l=c,r.write_shift(4,o),r.l=f,r.length>r.l?r.slice(0,r.l):r}function M$(t,s,a,r){var n=F$(r,a,s);(n.length>17||(s["!rows"]||[])[r])&&pt(t,0,n)}var I$=_o,R$=Zc;function O$(){}function L$(t,s){var a={},r=t[t.l];return++t.l,a.above=!(r&64),a.left=!(r&128),t.l+=18,a.name=qO(t),a}function $$(t,s,a){a==null&&(a=lt(84+4*t.length));var r=192;s&&(s.above&&(r&=-65),s.left&&(r&=-129)),a.write_shift(1,r);for(var n=1;n<3;++n)a.write_shift(1,0);return Hx({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),W3(t,a),a.slice(0,a.l)}function U$(t){var s=dn(t);return[s]}function B$(t,s,a){return a==null&&(a=lt(8)),Eo(s,a)}function z$(t){var s=Do(t);return[s]}function V$(t,s,a){return a==null&&(a=lt(4)),Ao(s,a)}function Y$(t){var s=dn(t),a=t.read_shift(1);return[s,a,"b"]}function W$(t,s,a){return a==null&&(a=lt(9)),Eo(s,a),a.write_shift(1,t.v?1:0),a}function H$(t){var s=Do(t),a=t.read_shift(1);return[s,a,"b"]}function G$(t,s,a){return a==null&&(a=lt(5)),Ao(s,a),a.write_shift(1,t.v?1:0),a}function q$(t){var s=dn(t),a=t.read_shift(1);return[s,a,"e"]}function J$(t,s,a){return a==null&&(a=lt(9)),Eo(s,a),a.write_shift(1,t.v),a}function K$(t){var s=Do(t),a=t.read_shift(1);return[s,a,"e"]}function X$(t,s,a){return a==null&&(a=lt(8)),Ao(s,a),a.write_shift(1,t.v),a.write_shift(2,0),a.write_shift(1,0),a}function Q$(t){var s=dn(t),a=t.read_shift(4);return[s,a,"s"]}function Z$(t,s,a){return a==null&&(a=lt(12)),Eo(s,a),a.write_shift(4,s.v),a}function eU(t){var s=Do(t),a=t.read_shift(4);return[s,a,"s"]}function tU(t,s,a){return a==null&&(a=lt(8)),Ao(s,a),a.write_shift(4,s.v),a}function sU(t){var s=dn(t),a=ed(t);return[s,a,"n"]}function aU(t,s,a){return a==null&&(a=lt(16)),Eo(s,a),jo(t.v,a),a}function rU(t){var s=Do(t),a=ed(t);return[s,a,"n"]}function nU(t,s,a){return a==null&&(a=lt(12)),Ao(s,a),jo(t.v,a),a}function lU(t){var s=dn(t),a=H3(t);return[s,a,"n"]}function iU(t,s,a){return a==null&&(a=lt(12)),Eo(s,a),G3(t.v,a),a}function oU(t){var s=Do(t),a=H3(t);return[s,a,"n"]}function cU(t,s,a){return a==null&&(a=lt(8)),Ao(s,a),G3(t.v,a),a}function dU(t){var s=dn(t),a=gv(t);return[s,a,"is"]}function mU(t){var s=dn(t),a=er(t);return[s,a,"str"]}function uU(t,s,a){return a==null&&(a=lt(12+4*t.v.length)),Eo(s,a),Ia(t.v,a),a.length>a.l?a.slice(0,a.l):a}function xU(t){var s=Do(t),a=er(t);return[s,a,"str"]}function hU(t,s,a){return a==null&&(a=lt(8+4*t.v.length)),Ao(s,a),Ia(t.v,a),a.length>a.l?a.slice(0,a.l):a}function pU(t,s,a){var r=t.l+s,n=dn(t);n.r=a["!row"];var l=t.read_shift(1),i=[n,l,"b"];if(a.cellFormula){t.l+=2;var o=Uh(t,r-t.l,a);i[3]=Bc(o,null,n,a.supbooks,a)}else t.l=r;return i}function fU(t,s,a){var r=t.l+s,n=dn(t);n.r=a["!row"];var l=t.read_shift(1),i=[n,l,"e"];if(a.cellFormula){t.l+=2;var o=Uh(t,r-t.l,a);i[3]=Bc(o,null,n,a.supbooks,a)}else t.l=r;return i}function gU(t,s,a){var r=t.l+s,n=dn(t);n.r=a["!row"];var l=ed(t),i=[n,l,"n"];if(a.cellFormula){t.l+=2;var o=Uh(t,r-t.l,a);i[3]=Bc(o,null,n,a.supbooks,a)}else t.l=r;return i}function vU(t,s,a){var r=t.l+s,n=dn(t);n.r=a["!row"];var l=er(t),i=[n,l,"str"];if(a.cellFormula){t.l+=2;var o=Uh(t,r-t.l,a);i[3]=Bc(o,null,n,a.supbooks,a)}else t.l=r;return i}var wU=_o,yU=Zc;function jU(t,s){return s==null&&(s=lt(4)),s.write_shift(4,t),s}function NU(t,s){var a=t.l+s,r=_o(t),n=vv(t),l=er(t),i=er(t),o=er(t);t.l=a;var c={rfx:r,relId:n,loc:l,display:o};return i&&(c.Tooltip=i),c}function bU(t,s){var a=lt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Zc({s:Ma(t[0]),e:Ma(t[0])},a),wv("rId"+s,a);var r=t[1].Target.indexOf("#"),n=r==-1?"":t[1].Target.slice(r+1);return Ia(n||"",a),Ia(t[1].Tooltip||"",a),Ia("",a),a.slice(0,a.l)}function SU(){}function CU(t,s,a){var r=t.l+s,n=q3(t),l=t.read_shift(1),i=[n];if(i[2]=l,a.cellFormula){var o=x$(t,r-t.l,a);i[1]=o}else t.l=r;return i}function kU(t,s,a){var r=t.l+s,n=_o(t),l=[n];if(a.cellFormula){var i=p$(t,r-t.l,a);l[1]=i,t.l=r}else t.l=r;return l}function EU(t,s,a){a==null&&(a=lt(18));var r=Bh(t,s);a.write_shift(-4,t),a.write_shift(-4,t),a.write_shift(4,(r.width||10)*256),a.write_shift(4,0);var n=0;return s.hidden&&(n|=1),typeof r.width=="number"&&(n|=2),s.level&&(n|=s.level<<8),a.write_shift(2,n),a}var PC=["left","right","top","bottom","header","footer"];function DU(t){var s={};return PC.forEach(function(a){s[a]=ed(t)}),s}function AU(t,s){return s==null&&(s=lt(6*8)),AC(t),PC.forEach(function(a){jo(t[a],s)}),s}function _U(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function PU(t,s,a){a==null&&(a=lt(30));var r=924;return(((s||{}).Views||[])[0]||{}).RTL&&(r|=32),a.write_shift(2,r),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function TU(t){var s=lt(24);return s.write_shift(4,4),s.write_shift(4,1),Zc(t,s),s}function FU(t,s){return s==null&&(s=lt(16*4+2)),s.write_shift(2,t.password?uC(t.password):0),s.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?s.write_shift(4,t[a[0]]!=null&&!t[a[0]]?1:0):s.write_shift(4,t[a[0]]!=null&&t[a[0]]?0:1)}),s}function MU(){}function IU(){}function RU(t,s,a,r,n,l,i){if(s.v===void 0)return!1;var o="";switch(s.t){case"b":o=s.v?"1":"0";break;case"d":s=Er(s),s.z=s.z||pa[14],s.v=kr(ur(s.v)),s.t="n";break;case"n":case"e":o=""+s.v;break;default:o=s.v;break}var c={r:a,c:r};switch(c.s=Ri(n.cellXfs,s,n),s.l&&l["!links"].push([Hs(c),s.l]),s.c&&l["!comments"].push([Hs(c),s.c]),s.t){case"s":case"str":return n.bookSST?(o=Cv(n.Strings,s.v,n.revStrings),c.t="s",c.v=o,i?pt(t,18,tU(s,c)):pt(t,7,Z$(s,c))):(c.t="str",i?pt(t,17,hU(s,c)):pt(t,6,uU(s,c))),!0;case"n":return s.v==(s.v|0)&&s.v>-1e3&&s.v<1e3?i?pt(t,13,cU(s,c)):pt(t,2,iU(s,c)):i?pt(t,16,nU(s,c)):pt(t,5,aU(s,c)),!0;case"b":return c.t="b",i?pt(t,15,G$(s,c)):pt(t,4,W$(s,c)),!0;case"e":return c.t="e",i?pt(t,14,X$(s,c)):pt(t,3,J$(s,c)),!0}return i?pt(t,12,V$(s,c)):pt(t,1,B$(s,c)),!0}function OU(t,s,a,r){var n=na(s["!ref"]||"A1"),l,i="",o=[];pt(t,145);var c=Array.isArray(s),d=n.e.r;s["!rows"]&&(d=Math.max(n.e.r,s["!rows"].length-1));for(var u=n.s.r;u<=d;++u){i=Va(u),M$(t,s,n,u);var x=!1;if(u<=n.e.r)for(var p=n.s.c;p<=n.e.c;++p){u===n.s.r&&(o[p]=Za(p)),l=o[p]+i;var h=c?(s[u]||[])[p]:s[l];if(!h){x=!1;continue}x=RU(t,h,u,p,r,s,x)}}pt(t,146)}function LU(t,s){!s||!s["!merges"]||(pt(t,177,jU(s["!merges"].length)),s["!merges"].forEach(function(a){pt(t,176,yU(a))}),pt(t,178))}function $U(t,s){!s||!s["!cols"]||(pt(t,390),s["!cols"].forEach(function(a,r){a&&pt(t,60,EU(r,a))}),pt(t,391))}function UU(t,s){!s||!s["!ref"]||(pt(t,648),pt(t,649,TU(na(s["!ref"]))),pt(t,650))}function BU(t,s,a){s["!links"].forEach(function(r){if(r[1].Target){var n=Vs(a,-1,r[1].Target.replace(/#.*$/,""),Is.HLINK);pt(t,494,bU(r,n))}}),delete s["!links"]}function zU(t,s,a,r){if(s["!comments"].length>0){var n=Vs(r,-1,"../drawings/vmlDrawing"+(a+1)+".vml",Is.VML);pt(t,551,wv("rId"+n)),s["!legacy"]=n}}function VU(t,s,a,r){if(s["!autofilter"]){var n=s["!autofilter"],l=typeof n.ref=="string"?n.ref:Sa(n.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var i=a.Workbook.Names,o=Yr(l);o.s.r==o.e.r&&(o.e.r=Yr(s["!ref"]).e.r,l=Sa(o));for(var c=0;c<i.length;++c){var d=i[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==r){d.Ref="'"+a.SheetNames[r]+"'!"+l;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+l}),pt(t,161,Zc(na(l))),pt(t,162)}}function YU(t,s,a){pt(t,133),pt(t,137,PU(s,a)),pt(t,138),pt(t,134)}function WU(t,s){s["!protect"]&&pt(t,535,FU(s["!protect"]))}function HU(t,s,a,r){var n=Cr(),l=a.SheetNames[t],i=a.Sheets[l]||{},o=l;try{a&&a.Workbook&&(o=a.Workbook.Sheets[t].CodeName||o)}catch{}var c=na(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(s.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],pt(n,129),(a.vbaraw||i["!outline"])&&pt(n,147,$$(o,i["!outline"])),pt(n,148,R$(c)),YU(n,i,a.Workbook),$U(n,i),OU(n,i,t,s),WU(n,i),VU(n,i,a,t),LU(n,i),BU(n,i,r),i["!margins"]&&pt(n,476,AU(i["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&UU(n,i),zU(n,i,t,r),pt(n,130),n.end()}function GU(t,s){t.l+=10;var a=er(t);return{name:a}}var qU=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function JU(t){return!t.Workbook||!t.Workbook.WBProps?"false":kO(t.Workbook.WBProps.date1904)?"true":"false"}var KU="][*?/\\".split("");function TC(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return KU.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function XU(t,s,a){t.forEach(function(r,n){TC(r);for(var l=0;l<n;++l)if(r==t[l])throw new Error("Duplicate Sheet Name: "+r);if(a){var i=s&&s[n]&&s[n].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function QU(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var s=t.Workbook&&t.Workbook.Sheets||[];XU(t.SheetNames,s,!!t.vbaraw);for(var a=0;a<t.SheetNames.length;++a)y$(t.Sheets[t.SheetNames[a]],t.SheetNames[a],a)}function FC(t){var s=[ka];s[s.length]=Tt("workbook",null,{xmlns:Xc[0],"xmlns:r":Fa.r});var a=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(qU.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),s[s.length]=Tt("workbookPr",null,r);var n=t.Workbook&&t.Workbook.Sheets||[],l=0;if(n&&n[0]&&n[0].Hidden){for(s[s.length]="<bookViews>",l=0;l!=t.SheetNames.length&&!(!n[l]||!n[l].Hidden);++l);l==t.SheetNames.length&&(l=0),s[s.length]='<workbookView firstSheet="'+l+'" activeTab="'+l+'"/>',s[s.length]="</bookViews>"}for(s[s.length]="<sheets>",l=0;l!=t.SheetNames.length;++l){var i={name:Ys(t.SheetNames[l].slice(0,31))};if(i.sheetId=""+(l+1),i["r:id"]="rId"+(l+1),n[l])switch(n[l].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}s[s.length]=Tt("sheet",null,i)}return s[s.length]="</sheets>",a&&(s[s.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(s[s.length]=Tt("definedName",Ys(o.Ref),c))}),s[s.length]="</definedNames>"),s.length>2&&(s[s.length]="</workbook>",s[1]=s[1].replace("/>",">")),s.join("")}function ZU(t,s){var a={};return a.Hidden=t.read_shift(4),a.iTabID=t.read_shift(4),a.strRelID=f0(t),a.name=er(t),a}function eB(t,s){return s||(s=lt(127)),s.write_shift(4,t.Hidden),s.write_shift(4,t.iTabID),wv(t.strRelID,s),Ia(t.name.slice(0,31),s),s.length>s.l?s.slice(0,s.l):s}function tB(t,s){var a={},r=t.read_shift(4);a.defaultThemeVersion=t.read_shift(4);var n=s>8?er(t):"";return n.length>0&&(a.CodeName=n),a.autoCompressPictures=!!(r&65536),a.backupFile=!!(r&64),a.checkCompatibility=!!(r&4096),a.date1904=!!(r&1),a.filterPrivacy=!!(r&8),a.hidePivotFieldList=!!(r&1024),a.promptedSolutions=!!(r&16),a.publishItems=!!(r&2048),a.refreshAllConnections=!!(r&262144),a.saveExternalLinkValues=!!(r&128),a.showBorderUnselectedTables=!!(r&4),a.showInkAnnotation=!!(r&32),a.showObjects=["all","placeholders","none"][r>>13&3],a.showPivotChartFilter=!!(r&32768),a.updateLinks=["userSet","never","always"][r>>8&3],a}function sB(t,s){s||(s=lt(72));var a=0;return t&&t.filterPrivacy&&(a|=8),s.write_shift(4,a),s.write_shift(4,0),W3(t&&t.CodeName||"ThisWorkbook",s),s.slice(0,s.l)}function aB(t,s,a){var r=t.l+s;t.l+=4,t.l+=1;var n=t.read_shift(4),l=JO(t),i=h$(t,0,a),o=vv(t);t.l=r;var c={Name:l,Ptg:i};return n<268435455&&(c.Sheet=n),o&&(c.Comment=o),c}function rB(t,s){pt(t,143);for(var a=0;a!=s.SheetNames.length;++a){var r=s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a]&&s.Workbook.Sheets[a].Hidden||0,n={Hidden:r,iTabID:a+1,strRelID:"rId"+(a+1),name:s.SheetNames[a]};pt(t,156,eB(n))}pt(t,144)}function nB(t,s){s||(s=lt(127));for(var a=0;a!=4;++a)s.write_shift(4,0);return Ia("SheetJS",s),Ia(Lx.version,s),Ia(Lx.version,s),Ia("7262",s),s.length>s.l?s.slice(0,s.l):s}function lB(t,s){s||(s=lt(29)),s.write_shift(-4,0),s.write_shift(-4,460),s.write_shift(4,28800),s.write_shift(4,17600),s.write_shift(4,500),s.write_shift(4,t),s.write_shift(4,t);var a=120;return s.write_shift(1,a),s.length>s.l?s.slice(0,s.l):s}function iB(t,s){if(!(!s.Workbook||!s.Workbook.Sheets)){for(var a=s.Workbook.Sheets,r=0,n=-1,l=-1;r<a.length;++r)!a[r]||!a[r].Hidden&&n==-1?n=r:a[r].Hidden==1&&l==-1&&(l=r);l>n||(pt(t,135),pt(t,158,lB(n)),pt(t,136))}}function oB(t,s){var a=Cr();return pt(a,131),pt(a,128,nB()),pt(a,153,sB(t.Workbook&&t.Workbook.WBProps||null)),iB(a,t),rB(a,t),pt(a,132),a.end()}function cB(t,s,a){return(s.slice(-4)===".bin"?oB:FC)(t)}function dB(t,s,a,r,n){return(s.slice(-4)===".bin"?HU:_C)(t,a,r,n)}function mB(t,s,a){return(s.slice(-4)===".bin"?A9:pC)(t,a)}function uB(t,s,a){return(s.slice(-4)===".bin"?s9:mC)(t,a)}function xB(t,s,a){return(s.slice(-4)===".bin"?W9:yC)(t)}function hB(t){return(t.slice(-4)===".bin"?O9:vC)()}function pB(t,s){var a=[];return t.Props&&a.push(mL(t.Props,s)),t.Custprops&&a.push(uL(t.Props,t.Custprops)),a.join("")}function fB(){return""}function gB(t,s){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return s.cellXfs.forEach(function(r,n){var l=[];l.push(Tt("NumberFormat",null,{"ss:Format":Ys(pa[r.numFmtId])}));var i={"ss:ID":"s"+(21+n)};a.push(Tt("Style",l.join(""),i))}),Tt("Styles",a.join(""))}function MC(t){return Tt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+bv(t.Ref,{r:0,c:0})})}function vB(t){if(!((t||{}).Workbook||{}).Names)return"";for(var s=t.Workbook.Names,a=[],r=0;r<s.length;++r){var n=s[r];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||a.push(MC(n)))}return Tt("Names",a.join(""))}function wB(t,s,a,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var n=r.Workbook.Names,l=[],i=0;i<n.length;++i){var o=n[i];o.Sheet==a&&(o.Name.match(/^_xlfn\./)||l.push(MC(o)))}return l.join("")}function yB(t,s,a,r){if(!t)return"";var n=[];if(t["!margins"]&&(n.push("<PageSetup>"),t["!margins"].header&&n.push(Tt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&n.push(Tt("Footer",null,{"x:Margin":t["!margins"].footer})),n.push(Tt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),n.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[a])if(r.Workbook.Sheets[a].Hidden)n.push(Tt("Visible",r.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var l=0;l<a&&!(r.Workbook.Sheets[l]&&!r.Workbook.Sheets[l].Hidden);++l);l==a&&n.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),t["!protect"]&&(n.push(Ba("ProtectContents","True")),t["!protect"].objects&&n.push(Ba("ProtectObjects","True")),t["!protect"].scenarios&&n.push(Ba("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?n.push(Ba("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&n.push(Ba("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&n.push("<"+i[1]+"/>")})),n.length==0?"":Tt("WorksheetOptions",n.join(""),{xmlns:Fr.x})}function jB(t){return t.map(function(s){var a=CO(s.t||""),r=Tt("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return Tt("Comment",r,{"ss:Author":s.a})}).join("")}function NB(t,s,a,r,n,l,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Ys(bv(t.f,i))),t.F&&t.F.slice(0,s.length)==s){var c=Ma(t.F.slice(s.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Ys(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Ys(t.l.Tooltip))),a["!merges"])for(var d=a["!merges"],u=0;u!=d.length;++u)d[u].s.c!=i.c||d[u].s.r!=i.r||(d[u].e.c>d[u].s.c&&(o["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(o["ss:MergeDown"]=d[u].e.r-d[u].s.r));var x="",p="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":x="Number",p=String(t.v);break;case"b":x="Boolean",p=t.v?"1":"0";break;case"e":x="Error",p=Ym[t.v];break;case"d":x="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||pa[14]);break;case"s":x="String",p=SO(t.v||"");break}var h=Ri(r.cellXfs,t,r);o["ss:StyleID"]="s"+(21+h),o["ss:Index"]=i.c+1;var y=t.v!=null?p:"",f=t.t=="z"?"":'<Data ss:Type="'+x+'">'+y+"</Data>";return(t.c||[]).length>0&&(f+=jB(t.c)),Tt("Cell",f,o)}function bB(t,s){var a='<Row ss:Index="'+(t+1)+'"';return s&&(s.hpt&&!s.hpx&&(s.hpx=hC(s.hpt)),s.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+s.hpx+'"'),s.hidden&&(a+=' ss:Hidden="1"')),a+">"}function SB(t,s,a,r){if(!t["!ref"])return"";var n=na(t["!ref"]),l=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(v,w){jv(v);var g=!!v.width,j=Bh(w,v),N={"ss:Index":w+1};g&&(N["ss:Width"]=qx(j.width)),v.hidden&&(N["ss:Hidden"]="1"),o.push(Tt("Column",null,N))});for(var c=Array.isArray(t),d=n.s.r;d<=n.e.r;++d){for(var u=[bB(d,(t["!rows"]||[])[d])],x=n.s.c;x<=n.e.c;++x){var p=!1;for(i=0;i!=l.length;++i)if(!(l[i].s.c>x)&&!(l[i].s.r>d)&&!(l[i].e.c<x)&&!(l[i].e.r<d)){(l[i].s.c!=x||l[i].s.r!=d)&&(p=!0);break}if(!p){var h={r:d,c:x},y=Hs(h),f=c?(t[d]||[])[x]:t[y];u.push(NB(f,y,t,s,a,r,h))}}u.push("</Row>"),u.length>2&&o.push(u.join(""))}return o.join("")}function CB(t,s,a){var r=[],n=a.SheetNames[t],l=a.Sheets[n],i=l?wB(l,s,t,a):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=l?SB(l,s,t,a):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(yB(l,s,t,a)),r.join("")}function kB(t,s){s||(s={}),t.SSF||(t.SSF=Er(pa)),t.SSF&&(Rh(),Ih(t.SSF),s.revssf=Oh(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF,s.cellXfs=[],Ri(s.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(pB(t,s)),a.push(fB()),a.push(""),a.push("");for(var r=0;r<t.SheetNames.length;++r)a.push(Tt("Worksheet",CB(r,s,t),{"ss:Name":Ys(t.SheetNames[r])}));return a[2]=gB(t,s),a[3]=vB(t),ka+Tt("Workbook",a.join(""),{xmlns:Fr.ss,"xmlns:o":Fr.o,"xmlns:x":Fr.x,"xmlns:ss":Fr.ss,"xmlns:dt":Fr.dt,"xmlns:html":Fr.html})}var Gp={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function EB(t,s){var a=[],r=[],n=[],l=0,i,o=pj(Dj,"n"),c=pj(Aj,"n");if(t.Props)for(i=Wa(t.Props),l=0;l<i.length;++l)(Object.prototype.hasOwnProperty.call(o,i[l])?a:Object.prototype.hasOwnProperty.call(c,i[l])?r:n).push([i[l],t.Props[i[l]]]);if(t.Custprops)for(i=Wa(t.Custprops),l=0;l<i.length;++l)Object.prototype.hasOwnProperty.call(t.Props||{},i[l])||(Object.prototype.hasOwnProperty.call(o,i[l])?a:Object.prototype.hasOwnProperty.call(c,i[l])?r:n).push([i[l],t.Custprops[i[l]]]);var d=[];for(l=0;l<n.length;++l)rC.indexOf(n[l][0])>-1||tC.indexOf(n[l][0])>-1||n[l][1]!=null&&d.push(n[l]);r.length&&Js.utils.cfb_add(s,"/SummaryInformation",Mj(r,Gp.SI,c,Aj)),(a.length||d.length)&&Js.utils.cfb_add(s,"/DocumentSummaryInformation",Mj(a,Gp.DSI,o,Dj,d.length?d:null,Gp.UDI))}function DB(t,s){var a=s||{},r=Js.utils.cfb_new({root:"R"}),n="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":n="/Workbook",a.biff=8;break;case"biff5":n="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return Js.utils.cfb_add(r,n,IC(t,a)),a.biff==8&&(t.Props||t.Custprops)&&EB(t,r),a.biff==8&&t.vbaraw&&H9(r,Js.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var AB={0:{f:T$},1:{f:U$},2:{f:lU},3:{f:q$},4:{f:Y$},5:{f:sU},6:{f:mU},7:{f:Q$},8:{f:vU},9:{f:gU},10:{f:pU},11:{f:fU},12:{f:z$},13:{f:oU},14:{f:K$},15:{f:H$},16:{f:rU},17:{f:xU},18:{f:eU},19:{f:gv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:aB},40:{},42:{},43:{f:m9},44:{f:c9},45:{f:h9},46:{f:f9},47:{f:p9},48:{},49:{f:zO},50:{},51:{f:T9},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:VL},62:{f:dU},63:{f:L9},64:{f:MU},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:sl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_U},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:L$},148:{f:I$,p:16},151:{f:SU},152:{},153:{f:tB},154:{},155:{},156:{f:ZU},157:{},158:{},159:{T:1,f:ZL},160:{T:-1},161:{T:1,f:_o},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:wU},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:_9},336:{T:-1},337:{f:I9,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:f0},357:{},358:{},359:{},360:{T:1},361:{},362:{f:OL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:CU},427:{f:kU},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:DU},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:O$},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:NU},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:f0},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:V9},633:{T:1},634:{T:-1},635:{T:1,f:B9},636:{T:-1},637:{f:HO},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:GU},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:IU},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ft(t,s,a,r){var n=s;if(!isNaN(n)){var l=r||(a||[]).length||0,i=t.next(4);i.write_shift(2,n),i.write_shift(2,l),l>0&&hv(a)&&t.push(a)}}function _B(t,s,a,r){var n=(a||[]).length||0;if(n<=8224)return Ft(t,s,a,n);var l=s;if(!isNaN(l)){for(var i=a.parts||[],o=0,c=0,d=0;d+(i[o]||8224)<=8224;)d+=i[o]||8224,o++;var u=t.next(4);for(u.write_shift(2,l),u.write_shift(2,d),t.push(a.slice(c,c+d)),c+=d;c<n;){for(u=t.next(4),u.write_shift(2,60),d=0;d+(i[o]||8224)<=8224;)d+=i[o]||8224,o++;u.write_shift(2,d),t.push(a.slice(c,c+d)),c+=d}}}function Hm(t,s,a){return t||(t=lt(7)),t.write_shift(2,s),t.write_shift(2,a),t.write_shift(2,0),t.write_shift(1,0),t}function PB(t,s,a,r){var n=lt(9);return Hm(n,t,s),lC(a,r||"b",n),n}function TB(t,s,a){var r=lt(8+2*a.length);return Hm(r,t,s),r.write_shift(1,a.length),r.write_shift(a.length,a,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function FB(t,s,a,r){if(s.v!=null)switch(s.t){case"d":case"n":var n=s.t=="d"?kr(ur(s.v)):s.v;n==(n|0)&&n>=0&&n<65536?Ft(t,2,GL(a,r,n)):Ft(t,3,HL(a,r,n));return;case"b":case"e":Ft(t,5,PB(a,r,s.v,s.t));return;case"s":case"str":Ft(t,4,TB(a,r,(s.v||"").slice(0,255)));return}Ft(t,1,Hm(null,a,r))}function MB(t,s,a,r){var n=Array.isArray(s),l=na(s["!ref"]||"A1"),i,o="",c=[];if(l.e.c>255||l.e.r>16383){if(r.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");l.e.c=Math.min(l.e.c,255),l.e.r=Math.min(l.e.c,16383),i=Sa(l)}for(var d=l.s.r;d<=l.e.r;++d){o=Va(d);for(var u=l.s.c;u<=l.e.c;++u){d===l.s.r&&(c[u]=Za(u)),i=c[u]+o;var x=n?(s[d]||[])[u]:s[i];x&&FB(t,x,d,u)}}}function IB(t,s){for(var a=s||{},r=Cr(),n=0,l=0;l<t.SheetNames.length;++l)t.SheetNames[l]==a.sheet&&(n=l);if(n==0&&a.sheet&&t.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return Ft(r,a.biff==4?1033:a.biff==3?521:9,yv(t,16,a)),MB(r,t.Sheets[t.SheetNames[n]],n,a),Ft(r,10),r.end()}function RB(t,s,a){Ft(t,49,AL({sz:12,name:"Arial"},a))}function OB(t,s,a){s&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&Ft(t,1054,TL(n,s[n],a))})}function LB(t,s){var a=lt(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),Ft(t,2151,a),a=lt(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),cC(na(s["!ref"]||"A1"),a),a.write_shift(4,4),Ft(t,2152,a)}function $B(t,s){for(var a=0;a<16;++a)Ft(t,224,Rj({numFmtId:0,style:!0},0,s));s.cellXfs.forEach(function(r){Ft(t,224,Rj(r,0,s))})}function UB(t,s){for(var a=0;a<s["!links"].length;++a){var r=s["!links"][a];Ft(t,440,UL(r)),r[1].Tooltip&&Ft(t,2048,BL(r))}delete s["!links"]}function BB(t,s){if(s){var a=0;s.forEach(function(r,n){++a<=256&&r&&Ft(t,125,YL(Bh(n,r),n))})}}function zB(t,s,a,r,n){var l=16+Ri(n.cellXfs,s,n);if(s.v==null&&!s.bf){Ft(t,513,No(a,r,l));return}if(s.bf)Ft(t,6,u$(s,a,r,n,l));else switch(s.t){case"d":case"n":var i=s.t=="d"?kr(ur(s.v)):s.v;Ft(t,515,RL(a,r,i,l));break;case"b":case"e":Ft(t,517,IL(a,r,s.v,l,n,s.t));break;case"s":case"str":if(n.bookSST){var o=Cv(n.Strings,s.v,n.revStrings);Ft(t,253,_L(a,r,o,l))}else Ft(t,516,PL(a,r,(s.v||"").slice(0,255),l,n));break;default:Ft(t,513,No(a,r,l))}}function VB(t,s,a){var r=Cr(),n=a.SheetNames[t],l=a.Sheets[n]||{},i=(a||{}).Workbook||{},o=(i.Sheets||[])[t]||{},c=Array.isArray(l),d=s.biff==8,u,x="",p=[],h=na(l["!ref"]||"A1"),y=d?65536:16384;if(h.e.c>255||h.e.r>=y){if(s.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,y-1)}Ft(r,2057,yv(a,16,s)),Ft(r,13,Xr(1)),Ft(r,12,Xr(100)),Ft(r,15,ir(!0)),Ft(r,17,ir(!1)),Ft(r,16,jo(.001)),Ft(r,95,ir(!0)),Ft(r,42,ir(!1)),Ft(r,43,ir(!1)),Ft(r,130,Xr(1)),Ft(r,128,ML()),Ft(r,131,ir(!1)),Ft(r,132,ir(!1)),d&&BB(r,l["!cols"]),Ft(r,512,FL(h,s)),d&&(l["!links"]=[]);for(var f=h.s.r;f<=h.e.r;++f){x=Va(f);for(var v=h.s.c;v<=h.e.c;++v){f===h.s.r&&(p[v]=Za(v)),u=p[v]+x;var w=c?(l[f]||[])[v]:l[u];w&&(zB(r,w,f,v,s),d&&w.l&&l["!links"].push([u,w.l]))}}var g=o.CodeName||o.name||n;return d&&Ft(r,574,DL((i.Views||[])[0])),d&&(l["!merges"]||[]).length&&Ft(r,229,$L(l["!merges"])),d&&UB(r,l),Ft(r,442,oC(g)),d&&LB(r,l),Ft(r,10),r.end()}function YB(t,s,a){var r=Cr(),n=(t||{}).Workbook||{},l=n.Sheets||[],i=n.WBProps||{},o=a.biff==8,c=a.biff==5;if(Ft(r,2057,yv(t,5,a)),a.bookType=="xla"&&Ft(r,135),Ft(r,225,o?Xr(1200):null),Ft(r,193,pL(2)),c&&Ft(r,191),c&&Ft(r,192),Ft(r,226),Ft(r,92,SL("SheetJS",a)),Ft(r,66,Xr(o?1200:1252)),o&&Ft(r,353,Xr(0)),o&&Ft(r,448),Ft(r,317,WL(t.SheetNames.length)),o&&t.vbaraw&&Ft(r,211),o&&t.vbaraw){var d=i.CodeName||"ThisWorkbook";Ft(r,442,oC(d))}Ft(r,156,Xr(17)),Ft(r,25,ir(!1)),Ft(r,18,ir(!1)),Ft(r,19,Xr(0)),o&&Ft(r,431,ir(!1)),o&&Ft(r,444,Xr(0)),Ft(r,61,EL()),Ft(r,64,ir(!1)),Ft(r,141,Xr(0)),Ft(r,34,ir(JU(t)=="true")),Ft(r,14,ir(!0)),o&&Ft(r,439,ir(!1)),Ft(r,218,Xr(0)),RB(r,t,a),OB(r,t.SSF,a),$B(r,a),o&&Ft(r,352,ir(!1));var u=r.end(),x=Cr();o&&Ft(x,140,zL()),o&&a.Strings&&_B(x,252,kL(a.Strings)),Ft(x,10);var p=x.end(),h=Cr(),y=0,f=0;for(f=0;f<t.SheetNames.length;++f)y+=(o?12:11)+(o?2:1)*t.SheetNames[f].length;var v=u.length+y+p.length;for(f=0;f<t.SheetNames.length;++f){var w=l[f]||{};Ft(h,133,CL({pos:v,hs:w.Hidden||0,dt:0,name:t.SheetNames[f]},a)),v+=s[f].length}var g=h.end();if(y!=g.length)throw new Error("BS8 "+y+" != "+g.length);var j=[];return u.length&&j.push(u),g.length&&j.push(g),p.length&&j.push(p),Ua(j)}function WB(t,s){var a=s||{},r=[];t&&!t.SSF&&(t.SSF=Er(pa)),t&&t.SSF&&(Rh(),Ih(t.SSF),a.revssf=Oh(t.SSF),a.revssf[t.SSF[65535]]=0,a.ssf=t.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,kv(a),a.cellXfs=[],Ri(a.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var n=0;n<t.SheetNames.length;++n)r[r.length]=VB(n,a,t);return r.unshift(YB(t,r,a)),Ua(r)}function IC(t,s){for(var a=0;a<=t.SheetNames.length;++a){var r=t.Sheets[t.SheetNames[a]];if(!(!r||!r["!ref"])){var n=Yr(r["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var l=s||{};switch(l.biff||2){case 8:case 5:return WB(t,s);case 4:case 3:case 2:return IB(t,s)}throw new Error("invalid type "+l.bookType+" for BIFF")}function HB(t,s,a,r){for(var n=t["!merges"]||[],l=[],i=s.s.c;i<=s.e.c;++i){for(var o=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>a||n[d].s.c>i)&&!(n[d].e.r<a||n[d].e.c<i)){if(n[d].s.r<a||n[d].s.c<i){o=-1;break}o=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(o<0)){var u=Hs({r:a,c:i}),x=r.dense?(t[a]||[])[i]:t[u],p=x&&x.v!=null&&(x.h||bO(x.w||(Al(x),x.w)||""))||"",h={};o>1&&(h.rowspan=o),c>1&&(h.colspan=c),r.editable?p='<span contenteditable="true">'+p+"</span>":x&&(h["data-t"]=x&&x.t||"z",x.v!=null&&(h["data-v"]=x.v),x.z!=null&&(h["data-z"]=x.z),x.l&&(x.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+x.l.Target+'">'+p+"</a>")),h.id=(r.id||"sjs")+"-"+u,l.push(Tt("td",p,h))}}var y="<tr>";return y+l.join("")+"</tr>"}var GB='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',qB="</body></html>";function JB(t,s,a){var r=[];return r.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function RC(t,s){var a=s||{},r=a.header!=null?a.header:GB,n=a.footer!=null?a.footer:qB,l=[r],i=Yr(t["!ref"]);a.dense=Array.isArray(t),l.push(JB(t,i,a));for(var o=i.s.r;o<=i.e.r;++o)l.push(HB(t,i,o,a));return l.push("</table>"+n),l.join("")}function OC(t,s,a){var r=a||{},n=0,l=0;if(r.origin!=null)if(typeof r.origin=="number")n=r.origin;else{var i=typeof r.origin=="string"?Ma(r.origin):r.origin;n=i.r,l=i.c}var o=s.getElementsByTagName("tr"),c=Math.min(r.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:n,c:l}};if(t["!ref"]){var u=Yr(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var x=[],p=0,h=t["!rows"]||(t["!rows"]=[]),y=0,f=0,v=0,w=0,g=0,j=0;for(t["!cols"]||(t["!cols"]=[]);y<o.length&&f<c;++y){var N=o[y];if(Vj(N)){if(r.display)continue;h[f]={hidden:!0}}var E=N.children;for(v=w=0;v<E.length;++v){var C=E[v];if(!(r.display&&Vj(C))){var k=C.hasAttribute("data-v")?C.getAttribute("data-v"):C.hasAttribute("v")?C.getAttribute("v"):EO(C.innerHTML),A=C.getAttribute("data-z")||C.getAttribute("z");for(p=0;p<x.length;++p){var T=x[p];T.s.c==w+l&&T.s.r<f+n&&f+n<=T.e.r&&(w=T.e.c+1-l,p=-1)}j=+C.getAttribute("colspan")||1,((g=+C.getAttribute("rowspan")||1)>1||j>1)&&x.push({s:{r:f+n,c:w+l},e:{r:f+n+(g||1)-1,c:w+l+(j||1)-1}});var M={t:"s",v:k},X=C.getAttribute("data-t")||C.getAttribute("t")||"";k!=null&&(k.length==0?M.t=X||"z":r.raw||k.trim().length==0||X=="s"||(k==="TRUE"?M={t:"b",v:!0}:k==="FALSE"?M={t:"b",v:!1}:isNaN(fl(k))?isNaN(wm(k).getDate())||(M={t:"d",v:ur(k)},r.cellDates||(M={t:"n",v:kr(M.v)}),M.z=r.dateNF||pa[14]):M={t:"n",v:fl(k)})),M.z===void 0&&A!=null&&(M.z=A);var ne="",Q=C.getElementsByTagName("A");if(Q&&Q.length)for(var oe=0;oe<Q.length&&!(Q[oe].hasAttribute("href")&&(ne=Q[oe].getAttribute("href"),ne.charAt(0)!="#"));++oe);ne&&ne.charAt(0)!="#"&&(M.l={Target:ne}),r.dense?(t[f+n]||(t[f+n]=[]),t[f+n][w+l]=M):t[Hs({c:w+l,r:f+n})]=M,d.e.c<w+l&&(d.e.c=w+l),w+=j}}++f}return x.length&&(t["!merges"]=(t["!merges"]||[]).concat(x)),d.e.r=Math.max(d.e.r,f-1+n),t["!ref"]=Sa(d),f>=c&&(t["!fullref"]=Sa((d.e.r=o.length-y+f-1+n,d))),t}function LC(t,s){var a=s||{},r=a.dense?[]:{};return OC(r,t,s)}function KB(t,s){return ko(LC(t,s),s)}function Vj(t){var s="",a=XB(t);return a&&(s=a(t).getPropertyValue("display")),s||(s=t.style&&t.style.display),s==="none"}function XB(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var QB=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),s="<office:document-styles "+jm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return ka+s}}(),Yj=function(){var t=function(l){return Ys(l).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},s=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,r=function(l,i,o){var c=[];c.push('      <table:table table:name="'+Ys(i.SheetNames[o])+`" table:style-name="ta1">
`);var d=0,u=0,x=Yr(l["!ref"]||"A1"),p=l["!merges"]||[],h=0,y=Array.isArray(l);if(l["!cols"])for(u=0;u<=x.e.c;++u)c.push("        <table:table-column"+(l["!cols"][u]?' table:style-name="co'+l["!cols"][u].ods+'"':"")+`></table:table-column>
`);var f="",v=l["!rows"]||[];for(d=0;d<x.s.r;++d)f=v[d]?' table:style-name="ro'+v[d].ods+'"':"",c.push("        <table:table-row"+f+`></table:table-row>
`);for(;d<=x.e.r;++d){for(f=v[d]?' table:style-name="ro'+v[d].ods+'"':"",c.push("        <table:table-row"+f+`>
`),u=0;u<x.s.c;++u)c.push(s);for(;u<=x.e.c;++u){var w=!1,g={},j="";for(h=0;h!=p.length;++h)if(!(p[h].s.c>u)&&!(p[h].s.r>d)&&!(p[h].e.c<u)&&!(p[h].e.r<d)){(p[h].s.c!=u||p[h].s.r!=d)&&(w=!0),g["table:number-columns-spanned"]=p[h].e.c-p[h].s.c+1,g["table:number-rows-spanned"]=p[h].e.r-p[h].s.r+1;break}if(w){c.push(a);continue}var N=Hs({r:d,c:u}),E=y?(l[d]||[])[u]:l[N];if(E&&E.f&&(g["table:formula"]=Ys(v$(E.f)),E.F&&E.F.slice(0,N.length)==N)){var C=Yr(E.F);g["table:number-matrix-columns-spanned"]=C.e.c-C.s.c+1,g["table:number-matrix-rows-spanned"]=C.e.r-C.s.r+1}if(!E){c.push(s);continue}switch(E.t){case"b":j=E.v?"TRUE":"FALSE",g["office:value-type"]="boolean",g["office:boolean-value"]=E.v?"true":"false";break;case"n":j=E.w||String(E.v||0),g["office:value-type"]="float",g["office:value"]=E.v||0;break;case"s":case"str":j=E.v==null?"":E.v,g["office:value-type"]="string";break;case"d":j=E.w||ur(E.v).toISOString(),g["office:value-type"]="date",g["office:date-value"]=ur(E.v).toISOString(),g["table:style-name"]="ce1";break;default:c.push(s);continue}var k=t(j);if(E.l&&E.l.Target){var A=E.l.Target;A=A.charAt(0)=="#"?"#"+w$(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),k=Tt("text:a",k,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+Tt("table:table-cell",Tt("text:p",k,{}),g)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},n=function(l,i){l.push(` <office:automatic-styles>
`),l.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),l.push(`   <number:month number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:day number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:year/>
`),l.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var x=d["!cols"][u];if(x.width==null&&x.wpx==null&&x.wch==null)continue;jv(x),x.ods=o;var p=d["!cols"][u].wpx+"px";l.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),l.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),l.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var x=d["!rows"][u].hpx+"px";l.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),l.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+x+`"/>
`),l.push(`  </style:style>
`),++c}}}),l.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),l.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),l.push(`  </style:style>
`),l.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),l.push(` </office:automatic-styles>
`)};return function(i,o){var c=[ka],d=jm({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=jm({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(Z3().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),n(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var x=0;x!=i.SheetNames.length;++x)c.push(r(i.Sheets[i.SheetNames[x]],i,x));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function $C(t,s){if(s.bookType=="fods")return Yj(t,s);var a=dv(),r="",n=[],l=[];return r="mimetype",ys(a,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",ys(a,r,Yj(t,s)),n.push([r,"text/xml"]),l.push([r,"ContentFile"]),r="styles.xml",ys(a,r,QB(t,s)),n.push([r,"text/xml"]),l.push([r,"StylesFile"]),r="meta.xml",ys(a,r,ka+Z3()),n.push([r,"text/xml"]),l.push([r,"MetadataFile"]),r="manifest.rdf",ys(a,r,dL(l)),n.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",ys(a,r,oL(n)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Xx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ZB(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Sn(ym(t))}function ez(t,s){e:for(var a=0;a<=t.length-s.length;++a){for(var r=0;r<s.length;++r)if(t[a+r]!=s[r])continue e;return!0}return!1}function Ei(t){var s=t.reduce(function(n,l){return n+l.length},0),a=new Uint8Array(s),r=0;return t.forEach(function(n){a.set(n,r),r+=n.length}),a}function tz(t,s,a){var r=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,n=a/Math.pow(10,r-6176);t[s+15]|=r>>7,t[s+14]|=(r&127)<<1;for(var l=0;n>=1;++l,n/=256)t[s+l]=n&255;t[s+15]|=a>=0?0:128}function Nm(t,s){var a=s?s[0]:0,r=t[a]&127;e:if(t[a++]>=128&&(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,28),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,35),++a,t[a++]<128)||(r+=(t[a]&127)*Math.pow(2,42),++a,t[a++]<128)))break e;return s&&(s[0]=a),r}function Bs(t){var s=new Uint8Array(7);s[0]=t&127;var a=1;e:if(t>127){if(s[a-1]|=128,s[a]=t>>7&127,++a,t<=16383||(s[a-1]|=128,s[a]=t>>14&127,++a,t<=2097151)||(s[a-1]|=128,s[a]=t>>21&127,++a,t<=268435455)||(s[a-1]|=128,s[a]=t/256>>>21&127,++a,t<=34359738367)||(s[a-1]|=128,s[a]=t/65536>>>21&127,++a,t<=4398046511103))break e;s[a-1]|=128,s[a]=t/16777216>>>21&127,++a}return s.slice(0,a)}function vc(t){var s=0,a=t[s]&127;e:if(t[s++]>=128){if(a|=(t[s]&127)<<7,t[s++]<128||(a|=(t[s]&127)<<14,t[s++]<128)||(a|=(t[s]&127)<<21,t[s++]<128))break e;a|=(t[s]&127)<<28}return a}function Ea(t){for(var s=[],a=[0];a[0]<t.length;){var r=a[0],n=Nm(t,a),l=n&7;n=Math.floor(n/8);var i=0,o;if(n==0)break;switch(l){case 0:{for(var c=a[0];t[a[0]++]>=128;);o=t.slice(c,a[0])}break;case 5:i=4,o=t.slice(a[0],a[0]+i),a[0]+=i;break;case 1:i=8,o=t.slice(a[0],a[0]+i),a[0]+=i;break;case 2:i=Nm(t,a),o=t.slice(a[0],a[0]+i),a[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(l," for Field ").concat(n," at offset ").concat(r))}var d={data:o,type:l};s[n]==null?s[n]=[d]:s[n].push(d)}return s}function Oa(t){var s=[];return t.forEach(function(a,r){a.forEach(function(n){n.data&&(s.push(Bs(r*8+n.type)),n.type==2&&s.push(Bs(n.data.length)),s.push(n.data))})}),Ei(s)}function un(t){for(var s,a=[],r=[0];r[0]<t.length;){var n=Nm(t,r),l=Ea(t.slice(r[0],r[0]+n));r[0]+=n;var i={id:vc(l[1][0].data),messages:[]};l[2].forEach(function(o){var c=Ea(o.data),d=vc(c[3][0].data);i.messages.push({meta:c,data:t.slice(r[0],r[0]+d)}),r[0]+=d}),(s=l[3])!=null&&s[0]&&(i.merge=vc(l[3][0].data)>>>0>0),a.push(i)}return a}function Lo(t){var s=[];return t.forEach(function(a){var r=[];r[1]=[{data:Bs(a.id),type:0}],r[2]=[],a.merge!=null&&(r[3]=[{data:Bs(+!!a.merge),type:0}]);var n=[];a.messages.forEach(function(i){n.push(i.data),i.meta[3]=[{type:0,data:Bs(i.data.length)}],r[2].push({data:Oa(i.meta),type:2})});var l=Oa(r);s.push(Bs(l.length)),s.push(l),n.forEach(function(i){return s.push(i)})}),Ei(s)}function sz(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var a=[0],r=Nm(s,a),n=[];a[0]<s.length;){var l=s[a[0]]&3;if(l==0){var i=s[a[0]++]>>2;if(i<60)++i;else{var o=i-59;i=s[a[0]],o>1&&(i|=s[a[0]+1]<<8),o>2&&(i|=s[a[0]+2]<<16),o>3&&(i|=s[a[0]+3]<<24),i>>>=0,i++,a[0]+=o}n.push(s.slice(a[0],a[0]+i)),a[0]+=i;continue}else{var c=0,d=0;if(l==1?(d=(s[a[0]]>>2&7)+4,c=(s[a[0]++]&224)<<3,c|=s[a[0]++]):(d=(s[a[0]++]>>2)+1,l==2?(c=s[a[0]]|s[a[0]+1]<<8,a[0]+=2):(c=(s[a[0]]|s[a[0]+1]<<8|s[a[0]+2]<<16|s[a[0]+3]<<24)>>>0,a[0]+=4)),n=[Ei(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=Ei(n);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function xn(t){for(var s=[],a=0;a<t.length;){var r=t[a++],n=t[a]|t[a+1]<<8|t[a+2]<<16;a+=3,s.push(sz(r,t.slice(a,a+n))),a+=n}if(a!==t.length)throw new Error("data is not a valid framed stream!");return Ei(s)}function $o(t){for(var s=[],a=0;a<t.length;){var r=Math.min(t.length-a,268435455),n=new Uint8Array(4);s.push(n);var l=Bs(r),i=l.length;s.push(l),r<=60?(i++,s.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,s.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,s.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,s.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,s.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),s.push(t.slice(a,a+r)),i+=r,n[0]=0,n[1]=i&255,n[2]=i>>8&255,n[3]=i>>16&255,a+=r}return Ei(s)}function qp(t,s){var a=new Uint8Array(32),r=Xx(a),n=12,l=0;switch(a[0]=5,t.t){case"n":a[1]=2,tz(a,n,t.v),l|=1,n+=16;break;case"b":a[1]=6,r.setFloat64(n,t.v?1:0,!0),l|=2,n+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[1]=3,r.setUint32(n,s.indexOf(t.v),!0),l|=8,n+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,l,!0),a.slice(0,n)}function Jp(t,s){var a=new Uint8Array(32),r=Xx(a),n=12,l=0;switch(a[0]=3,t.t){case"n":a[2]=2,r.setFloat64(n,t.v,!0),l|=32,n+=8;break;case"b":a[2]=6,r.setFloat64(n,t.v?1:0,!0),l|=32,n+=8;break;case"s":if(s.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));a[2]=3,r.setUint32(n,s.indexOf(t.v),!0),l|=16,n+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,l,!0),a.slice(0,n)}function $l(t){var s=Ea(t);return Nm(s[1][0].data)}function az(t,s,a){var r,n,l,i;if(!((r=t[6])!=null&&r[0])||!((n=t[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(l=t[8])==null?void 0:l[0])==null?void 0:i.data)&&vc(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,d=Xx(t[7][0].data),u=0,x=[],p=Xx(t[4][0].data),h=0,y=[],f=0;f<s.length;++f){if(s[f]==null){d.setUint16(f*2,65535,!0),p.setUint16(f*2,65535);continue}d.setUint16(f*2,u,!0),p.setUint16(f*2,h,!0);var v,w;switch(typeof s[f]){case"string":v=qp({t:"s",v:s[f]},a),w=Jp({t:"s",v:s[f]},a);break;case"number":v=qp({t:"n",v:s[f]},a),w=Jp({t:"n",v:s[f]},a);break;case"boolean":v=qp({t:"b",v:s[f]},a),w=Jp({t:"b",v:s[f]},a);break;default:throw new Error("Unsupported value "+s[f])}x.push(v),u+=v.length,y.push(w),h+=w.length,++c}for(t[2][0].data=Bs(c);f<t[7][0].data.length/2;++f)d.setUint16(f*2,65535,!0),p.setUint16(f*2,65535,!0);return t[6][0].data=Ei(x),t[3][0].data=Ei(y),c}function rz(t,s){if(!s||!s.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Yr(a["!ref"]);r.s.r=r.s.c=0;var n=!1;r.e.c>9&&(n=!0,r.e.c=9),r.e.r>49&&(n=!0,r.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(Sa(r)));var l=Qx(a,{range:r,header:1}),i=["~Sh33tJ5~"];l.forEach(function(O){return O.forEach(function(Y){typeof Y=="string"&&i.push(Y)})});var o={},c=[],d=Js.read(s.numbers,{type:"base64"});d.FileIndex.map(function(O,Y){return[O,d.FullPaths[Y]]}).forEach(function(O){var Y=O[0],W=O[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ue=Y.content,U=xn(ue),z=un(U);z.forEach(function(te){c.push(te.id),o[te.id]={deps:[],location:W,type:vc(te.messages[0].meta[1][0].data)}})}}),c.sort(function(O,Y){return O-Y});var u=c.filter(function(O){return O>1}).map(function(O){return[O,Bs(O)]});d.FileIndex.map(function(O,Y){return[O,d.FullPaths[Y]]}).forEach(function(O){var Y=O[0];if(O[1],!!Y.name.match(/\.iwa/)){var W=un(xn(Y.content));W.forEach(function(ue){ue.messages.forEach(function(U){u.forEach(function(z){ue.messages.some(function(te){return vc(te.meta[1][0].data)!=11006&&ez(te.data,z[1])})&&o[z[0]].deps.push(ue.id)})})})}});for(var x=Js.find(d,o[1].location),p=un(xn(x.content)),h,y=0;y<p.length;++y){var f=p[y];f.id==1&&(h=f)}var v=$l(Ea(h.messages[0].data)[1][0].data);for(x=Js.find(d,o[v].location),p=un(xn(x.content)),y=0;y<p.length;++y)f=p[y],f.id==v&&(h=f);for(v=$l(Ea(h.messages[0].data)[2][0].data),x=Js.find(d,o[v].location),p=un(xn(x.content)),y=0;y<p.length;++y)f=p[y],f.id==v&&(h=f);for(v=$l(Ea(h.messages[0].data)[2][0].data),x=Js.find(d,o[v].location),p=un(xn(x.content)),y=0;y<p.length;++y)f=p[y],f.id==v&&(h=f);var w=Ea(h.messages[0].data);{w[6][0].data=Bs(r.e.r+1),w[7][0].data=Bs(r.e.c+1);var g=$l(w[46][0].data),j=Js.find(d,o[g].location),N=un(xn(j.content));{for(var E=0;E<N.length&&N[E].id!=g;++E);if(N[E].id!=g)throw"Bad ColumnRowUIDMapArchive";var C=Ea(N[E].messages[0].data);C[1]=[],C[2]=[],C[3]=[];for(var k=0;k<=r.e.c;++k){var A=[];A[1]=A[2]=[{type:0,data:Bs(k+420690)}],C[1].push({type:2,data:Oa(A)}),C[2].push({type:0,data:Bs(k)}),C[3].push({type:0,data:Bs(k)})}C[4]=[],C[5]=[],C[6]=[];for(var T=0;T<=r.e.r;++T)A=[],A[1]=A[2]=[{type:0,data:Bs(T+726270)}],C[4].push({type:2,data:Oa(A)}),C[5].push({type:0,data:Bs(T)}),C[6].push({type:0,data:Bs(T)});N[E].messages[0].data=Oa(C)}j.content=$o(Lo(N)),j.size=j.content.length,delete w[46];var M=Ea(w[4][0].data);{M[7][0].data=Bs(r.e.r+1);var X=Ea(M[1][0].data),ne=$l(X[2][0].data);j=Js.find(d,o[ne].location),N=un(xn(j.content));{if(N[0].id!=ne)throw"Bad HeaderStorageBucket";var Q=Ea(N[0].messages[0].data);for(T=0;T<l.length;++T){var oe=Ea(Q[2][0].data);oe[1][0].data=Bs(T),oe[4][0].data=Bs(l[T].length),Q[2][T]={type:Q[2][0].type,data:Oa(oe)}}N[0].messages[0].data=Oa(Q)}j.content=$o(Lo(N)),j.size=j.content.length;var ge=$l(M[2][0].data);j=Js.find(d,o[ge].location),N=un(xn(j.content));{if(N[0].id!=ge)throw"Bad HeaderStorageBucket";for(Q=Ea(N[0].messages[0].data),k=0;k<=r.e.c;++k)oe=Ea(Q[2][0].data),oe[1][0].data=Bs(k),oe[4][0].data=Bs(r.e.r+1),Q[2][k]={type:Q[2][0].type,data:Oa(oe)};N[0].messages[0].data=Oa(Q)}j.content=$o(Lo(N)),j.size=j.content.length;var me=$l(M[4][0].data);(function(){for(var O=Js.find(d,o[me].location),Y=un(xn(O.content)),W,ue=0;ue<Y.length;++ue){var U=Y[ue];U.id==me&&(W=U)}var z=Ea(W.messages[0].data);{z[3]=[];var te=[];i.forEach(function(je,b){te[1]=[{type:0,data:Bs(b)}],te[2]=[{type:0,data:Bs(1)}],te[3]=[{type:2,data:ZB(je)}],z[3].push({type:2,data:Oa(te)})})}W.messages[0].data=Oa(z);var se=Lo(Y),J=$o(se);O.content=J,O.size=O.content.length})();var H=Ea(M[3][0].data);{var L=H[1][0];delete H[2];var he=Ea(L.data);{var ie=$l(he[2][0].data);(function(){for(var O=Js.find(d,o[ie].location),Y=un(xn(O.content)),W,ue=0;ue<Y.length;++ue){var U=Y[ue];U.id==ie&&(W=U)}var z=Ea(W.messages[0].data);{delete z[6],delete H[7];var te=new Uint8Array(z[5][0].data);z[5]=[];for(var se=0,J=0;J<=r.e.r;++J){var je=Ea(te);se+=az(je,l[J],i),je[1][0].data=Bs(J),z[5].push({data:Oa(je),type:2})}z[1]=[{type:0,data:Bs(r.e.c+1)}],z[2]=[{type:0,data:Bs(r.e.r+1)}],z[3]=[{type:0,data:Bs(se)}],z[4]=[{type:0,data:Bs(r.e.r+1)}]}W.messages[0].data=Oa(z);var b=Lo(Y),S=$o(b);O.content=S,O.size=O.content.length})()}L.data=Oa(he)}M[3][0].data=Oa(H)}w[4][0].data=Oa(M)}h.messages[0].data=Oa(w);var ke=Lo(p),V=$o(ke);return x.content=V,x.size=x.content.length,d}function nz(t){return function(a){for(var r=0;r!=t.length;++r){var n=t[r];a[n[0]]===void 0&&(a[n[0]]=n[1]),n[2]==="n"&&(a[n[0]]=Number(a[n[0]]))}}}function kv(t){nz([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function lz(t,s){return s.bookType=="ods"?$C(t,s):s.bookType=="numbers"?rz(t,s):s.bookType=="xlsb"?iz(t,s):oz(t,s)}function iz(t,s){sc=1024,t&&!t.SSF&&(t.SSF=Er(pa)),t&&t.SSF&&(Rh(),Ih(t.SSF),s.revssf=Oh(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Yd?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a=s.bookType=="xlsb"?"bin":"xml",r=jC.indexOf(s.bookType)>-1,n=K3();kv(s=s||{});var l=dv(),i="",o=0;if(s.cellXfs=[],Ri(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",ys(l,i,eC(t.Props,s)),n.coreprops.push(i),Vs(s.rels,2,i,Is.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,ys(l,i,sC(t.Props)),n.extprops.push(i),Vs(s.rels,3,i,Is.EXT_PROPS),t.Custprops!==t.Props&&Wa(t.Custprops||{}).length>0&&(i="docProps/custom.xml",ys(l,i,aC(t.Custprops)),n.custprops.push(i),Vs(s.rels,4,i,Is.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var u={"!id":{}},x=t.Sheets[t.SheetNames[o-1]],p=(x||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+a,ys(l,i,dB(o-1,i,s,t,u)),n.sheets.push(i),Vs(s.wbrels,-1,"worksheets/sheet"+o+"."+a,Is.WS[0])}if(x){var h=x["!comments"],y=!1,f="";h&&h.length>0&&(f="xl/comments"+o+"."+a,ys(l,f,xB(h,f)),n.comments.push(f),Vs(u,-1,"../comments"+o+"."+a,Is.CMNT),y=!0),x["!legacy"]&&y&&ys(l,"xl/drawings/vmlDrawing"+o+".vml",wC(o,x["!comments"])),delete x["!comments"],delete x["!legacy"]}u["!id"].rId1&&ys(l,Q3(i),fc(u))}return s.Strings!=null&&s.Strings.length>0&&(i="xl/sharedStrings."+a,ys(l,i,uB(s.Strings,i,s)),n.strs.push(i),Vs(s.wbrels,-1,"sharedStrings."+a,Is.SST)),i="xl/workbook."+a,ys(l,i,cB(t,i)),n.workbooks.push(i),Vs(s.rels,1,i,Is.WB),i="xl/theme/theme1.xml",ys(l,i,gC(t.Themes,s)),n.themes.push(i),Vs(s.wbrels,-1,"theme/theme1.xml",Is.THEME),i="xl/styles."+a,ys(l,i,mB(t,i,s)),n.styles.push(i),Vs(s.wbrels,-1,"styles."+a,Is.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",ys(l,i,t.vbaraw),n.vba.push(i),Vs(s.wbrels,-1,"vbaProject.bin",Is.VBA)),i="xl/metadata."+a,ys(l,i,hB(i)),n.metadata.push(i),Vs(s.wbrels,-1,"metadata."+a,Is.XLMETA),ys(l,"[Content_Types].xml",X3(n,s)),ys(l,"_rels/.rels",fc(s.rels)),ys(l,"xl/_rels/workbook."+a+".rels",fc(s.wbrels)),delete s.revssf,delete s.ssf,l}function oz(t,s){sc=1024,t&&!t.SSF&&(t.SSF=Er(pa)),t&&t.SSF&&(Rh(),Ih(t.SSF),s.revssf=Oh(t.SSF),s.revssf[t.SSF[65535]]=0,s.ssf=t.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Yd?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a="xml",r=jC.indexOf(s.bookType)>-1,n=K3();kv(s=s||{});var l=dv(),i="",o=0;if(s.cellXfs=[],Ri(s.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",ys(l,i,eC(t.Props,s)),n.coreprops.push(i),Vs(s.rels,2,i,Is.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,ys(l,i,sC(t.Props)),n.extprops.push(i),Vs(s.rels,3,i,Is.EXT_PROPS),t.Custprops!==t.Props&&Wa(t.Custprops||{}).length>0&&(i="docProps/custom.xml",ys(l,i,aC(t.Custprops)),n.custprops.push(i),Vs(s.rels,4,i,Is.CUST_PROPS));var u=["SheetJ5"];for(s.tcid=0,o=1;o<=t.SheetNames.length;++o){var x={"!id":{}},p=t.Sheets[t.SheetNames[o-1]],h=(p||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+a,ys(l,i,_C(o-1,s,t,x)),n.sheets.push(i),Vs(s.wbrels,-1,"worksheets/sheet"+o+"."+a,Is.WS[0])}if(p){var y=p["!comments"],f=!1,v="";if(y&&y.length>0){var w=!1;y.forEach(function(g){g[1].forEach(function(j){j.T==!0&&(w=!0)})}),w&&(v="xl/threadedComments/threadedComment"+o+"."+a,ys(l,v,$9(y,u,s)),n.threadedcomments.push(v),Vs(x,-1,"../threadedComments/threadedComment"+o+"."+a,Is.TCMNT)),v="xl/comments"+o+"."+a,ys(l,v,yC(y)),n.comments.push(v),Vs(x,-1,"../comments"+o+"."+a,Is.CMNT),f=!0}p["!legacy"]&&f&&ys(l,"xl/drawings/vmlDrawing"+o+".vml",wC(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}x["!id"].rId1&&ys(l,Q3(i),fc(x))}return s.Strings!=null&&s.Strings.length>0&&(i="xl/sharedStrings."+a,ys(l,i,mC(s.Strings,s)),n.strs.push(i),Vs(s.wbrels,-1,"sharedStrings."+a,Is.SST)),i="xl/workbook."+a,ys(l,i,FC(t)),n.workbooks.push(i),Vs(s.rels,1,i,Is.WB),i="xl/theme/theme1.xml",ys(l,i,gC(t.Themes,s)),n.themes.push(i),Vs(s.wbrels,-1,"theme/theme1.xml",Is.THEME),i="xl/styles."+a,ys(l,i,pC(t,s)),n.styles.push(i),Vs(s.wbrels,-1,"styles."+a,Is.STY),t.vbaraw&&r&&(i="xl/vbaProject.bin",ys(l,i,t.vbaraw),n.vba.push(i),Vs(s.wbrels,-1,"vbaProject.bin",Is.VBA)),i="xl/metadata."+a,ys(l,i,vC()),n.metadata.push(i),Vs(s.wbrels,-1,"metadata."+a,Is.XLMETA),u.length>1&&(i="xl/persons/person.xml",ys(l,i,U9(u)),n.people.push(i),Vs(s.wbrels,-1,"persons/person.xml",Is.PEOPLE)),ys(l,"[Content_Types].xml",X3(n,s)),ys(l,"_rels/.rels",fc(s.rels)),ys(l,"xl/_rels/workbook."+a+".rels",fc(s.wbrels)),delete s.revssf,delete s.ssf,l}function cz(t,s){var a="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":a=Dl(t.slice(0,12));break;case"binary":a=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function UC(t,s){switch(s.type){case"base64":case"binary":break;case"buffer":case"array":s.type="";break;case"file":return zm(s.file,Js.write(t,{type:Rs?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");default:throw new Error("Unrecognized type "+s.type)}return Js.write(t,s)}function dz(t,s){var a=Er(s||{}),r=lz(t,a);return mz(r,a)}function mz(t,s){var a={},r=Rs?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(s.compression&&(a.compression="DEFLATE"),s.password)a.type=r;else switch(s.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");case"buffer":case"file":a.type=r;break;default:throw new Error("Unrecognized type "+s.type)}var n=t.FullPaths?Js.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!s.compression}):t.generate(a);if(typeof Deno<"u"&&typeof n=="string"){if(s.type=="binary"||s.type=="base64")return n;n=new Uint8Array(Mh(n))}return s.password&&typeof encrypt_agile<"u"?UC(encrypt_agile(n,s.password),s):s.type==="file"?zm(s.file,n):s.type=="string"?Ud(n):n}function uz(t,s){var a=s||{},r=DB(t,a);return UC(r,a)}function On(t,s,a){a||(a="");var r=a+t;switch(s.type){case"base64":return vm(ym(r));case"binary":return ym(r);case"string":return t;case"file":return zm(s.file,r,"utf8");case"buffer":return Rs?Fl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):On(r,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function xz(t,s){switch(s.type){case"base64":return vm(t);case"binary":return t;case"string":return t;case"file":return zm(s.file,t,"binary");case"buffer":return Rs?Fl(t,"binary"):t.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function _u(t,s){switch(s.type){case"string":case"base64":case"binary":for(var a="",r=0;r<t.length;++r)a+=String.fromCharCode(t[r]);return s.type=="base64"?vm(a):s.type=="string"?Ud(a):a;case"file":return zm(s.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+s.type)}}function BC(t,s){BR(),QU(t);var a=Er(s||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var r=BC(t,a);return a.type="array",Mh(r)}var n=0;if(a.sheet&&(typeof a.sheet=="number"?n=a.sheet:n=t.SheetNames.indexOf(a.sheet),!t.SheetNames[n]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return On(kB(t,a),a);case"slk":case"sylk":return On(JL.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"htm":case"html":return On(RC(t.Sheets[t.SheetNames[n]],a),a);case"txt":return xz(zC(t.Sheets[t.SheetNames[n]],a),a);case"csv":return On(Ev(t.Sheets[t.SheetNames[n]],a),a,"\uFEFF");case"dif":return On(KL.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"dbf":return _u(qL.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"prn":return On(XL.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"rtf":return On(r9.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"eth":return On(dC.from_sheet(t.Sheets[t.SheetNames[n]],a),a);case"fods":return On($C(t,a),a);case"wk1":return _u(Oj.sheet_to_wk1(t.Sheets[t.SheetNames[n]],a),a);case"wk3":return _u(Oj.book_to_wk3(t,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),_u(IC(t,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),uz(t,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return dz(t,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function hz(t){if(!t.bookType){var s={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},a=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();a.match(/^\.[a-z]+$/)&&(t.bookType=a.slice(1)),t.bookType=s[t.bookType]||t.bookType}}function zh(t,s,a){var r={};return r.type="file",r.file=s,hz(r),BC(t,r)}function pz(t,s,a,r,n,l,i,o){var c=Va(a),d=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),x=!0,p=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:a,enumerable:!1})}catch{p.__rowNum__=a}else p.__rowNum__=a;if(!i||t[a])for(var h=s.s.c;h<=s.e.c;++h){var y=i?t[a][h]:t[r[h]+c];if(y===void 0||y.t===void 0){if(d===void 0)continue;l[h]!=null&&(p[l[h]]=d);continue}var f=y.v;switch(y.t){case"z":if(f==null)break;continue;case"e":f=f==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(l[h]!=null){if(f==null)if(y.t=="e"&&f===null)p[l[h]]=null;else if(d!==void 0)p[l[h]]=d;else if(u&&f===null)p[l[h]]=null;else continue;else p[l[h]]=u&&(y.t!=="n"||y.t==="n"&&o.rawNumbers!==!1)?f:Al(y,f,o);f!=null&&(x=!1)}}return{row:p,isempty:x}}function Qx(t,s){if(t==null||t["!ref"]==null)return[];var a={t:"n",v:0},r=0,n=1,l=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=s||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?r=1:d.header==="A"?r=2:Array.isArray(d.header)?r=3:d.header==null&&(r=0),typeof u){case"string":c=na(u);break;case"number":c=na(t["!ref"]),c.s.r=u;break;default:c=u}r>0&&(n=0);var x=Va(c.s.r),p=[],h=[],y=0,f=0,v=Array.isArray(t),w=c.s.r,g=0,j={};v&&!t[w]&&(t[w]=[]);var N=d.skipHidden&&t["!cols"]||[],E=d.skipHidden&&t["!rows"]||[];for(g=c.s.c;g<=c.e.c;++g)if(!(N[g]||{}).hidden)switch(p[g]=Za(g),a=v?t[w][g]:t[p[g]+x],r){case 1:l[g]=g-c.s.c;break;case 2:l[g]=p[g];break;case 3:l[g]=d.header[g-c.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),o=i=Al(a,null,d),f=j[i]||0,!f)j[i]=1;else{do o=i+"_"+f++;while(j[o]);j[i]=f,j[o]=1}l[g]=o}for(w=c.s.r+n;w<=c.e.r;++w)if(!(E[w]||{}).hidden){var C=pz(t,c,w,p,r,l,v,d);(C.isempty===!1||(r===1?d.blankrows!==!1:d.blankrows))&&(h[y++]=C.row)}return h.length=y,h}var Wj=/"/g;function fz(t,s,a,r,n,l,i,o){for(var c=!0,d=[],u="",x=Va(a),p=s.s.c;p<=s.e.c;++p)if(r[p]){var h=o.dense?(t[a]||[])[p]:t[r[p]+x];if(h==null)u="";else if(h.v!=null){c=!1,u=""+(o.rawNumbers&&h.t=="n"?h.v:Al(h,null,o));for(var y=0,f=0;y!==u.length;++y)if((f=u.charCodeAt(y))===n||f===l||f===34||o.forceQuotes){u='"'+u.replace(Wj,'""')+'"';break}u=="ID"&&(u='"ID"')}else h.f!=null&&!h.F?(c=!1,u="="+h.f,u.indexOf(",")>=0&&(u='"'+u.replace(Wj,'""')+'"')):u="";d.push(u)}return o.blankrows===!1&&c?null:d.join(i)}function Ev(t,s){var a=[],r=s??{};if(t==null||t["!ref"]==null)return"";var n=na(t["!ref"]),l=r.FS!==void 0?r.FS:",",i=l.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,c=o.charCodeAt(0),d=new RegExp((l=="|"?"\\|":l)+"+$"),u="",x=[];r.dense=Array.isArray(t);for(var p=r.skipHidden&&t["!cols"]||[],h=r.skipHidden&&t["!rows"]||[],y=n.s.c;y<=n.e.c;++y)(p[y]||{}).hidden||(x[y]=Za(y));for(var f=0,v=n.s.r;v<=n.e.r;++v)(h[v]||{}).hidden||(u=fz(t,n,v,x,i,c,l,r),u!=null&&(r.strip&&(u=u.replace(d,"")),(u||r.blankrows!==!1)&&a.push((f++?o:"")+u)));return delete r.dense,a.join("")}function zC(t,s){s||(s={}),s.FS="	",s.RS=`
`;var a=Ev(t,s);return a}function gz(t){var s="",a,r="";if(t==null||t["!ref"]==null)return[];var n=na(t["!ref"]),l="",i=[],o,c=[],d=Array.isArray(t);for(o=n.s.c;o<=n.e.c;++o)i[o]=Za(o);for(var u=n.s.r;u<=n.e.r;++u)for(l=Va(u),o=n.s.c;o<=n.e.c;++o)if(s=i[o]+l,a=d?(t[u]||[])[o]:t[s],r="",a!==void 0){if(a.F!=null){if(s=a.F,!a.f)continue;r=a.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(a.f!=null)r=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)r=""+a.v;else if(a.t=="b")r=a.v?"TRUE":"FALSE";else if(a.w!==void 0)r="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?r="'"+a.v:r=""+a.v}}c[c.length]=s+"="+r}return c}function VC(t,s,a){var r=a||{},n=+!r.skipHeader,l=t||{},i=0,o=0;if(l&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var c=typeof r.origin=="string"?Ma(r.origin):r.origin;i=c.r,o=c.c}var d,u={s:{c:0,r:0},e:{c:o,r:i+s.length-1+n}};if(l["!ref"]){var x=na(l["!ref"]);u.e.c=Math.max(u.e.c,x.e.c),u.e.r=Math.max(u.e.r,x.e.r),i==-1&&(i=x.e.r+1,u.e.r=i+s.length-1+n)}else i==-1&&(i=0,u.e.r=s.length-1+n);var p=r.header||[],h=0;s.forEach(function(f,v){Wa(f).forEach(function(w){(h=p.indexOf(w))==-1&&(p[h=p.length]=w);var g=f[w],j="z",N="",E=Hs({c:o+h,r:i+v+n});d=bm(l,E),g&&typeof g=="object"&&!(g instanceof Date)?l[E]=g:(typeof g=="number"?j="n":typeof g=="boolean"?j="b":typeof g=="string"?j="s":g instanceof Date?(j="d",r.cellDates||(j="n",g=kr(g)),N=r.dateNF||pa[14]):g===null&&r.nullError&&(j="e",g=0),d?(d.t=j,d.v=g,delete d.w,delete d.R,N&&(d.z=N)):l[E]=d={t:j,v:g},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,o+p.length-1);var y=Va(i);if(n)for(h=0;h<p.length;++h)l[Za(h+o)+y]={t:"s",v:p[h]};return l["!ref"]=Sa(u),l}function vz(t,s){return VC(null,t,s)}function bm(t,s,a){if(typeof s=="string"){if(Array.isArray(t)){var r=Ma(s);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[s]||(t[s]={t:"z"})}return typeof s!="number"?bm(t,Hs(s)):bm(t,Hs({r:s,c:a||0}))}function wz(t,s){if(typeof s=="number"){if(s>=0&&t.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var a=t.SheetNames.indexOf(s);if(a>-1)return a;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function yz(){return{SheetNames:[],Sheets:{}}}function jz(t,s,a,r){var n=1;if(!a)for(;n<=65535&&t.SheetNames.indexOf(a="Sheet"+n)!=-1;++n,a=void 0);if(!a||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(a)>=0){var l=a.match(/(^.*?)(\d+)$/);n=l&&+l[2]||0;var i=l&&l[1]||a;for(++n;n<=65535&&t.SheetNames.indexOf(a=i+n)!=-1;++n);}if(TC(a),t.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return t.SheetNames.push(a),t.Sheets[a]=s,a}function Nz(t,s,a){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=wz(t,s);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}t.Workbook.Sheets[r].Hidden=a}function bz(t,s){return t.z=s,t}function YC(t,s,a){return s?(t.l={Target:s},a&&(t.l.Tooltip=a)):delete t.l,t}function Sz(t,s,a){return YC(t,"#"+s,a)}function Cz(t,s,a){t.c||(t.c=[]),t.c.push({t:s,a:a||"SheetJS"})}function kz(t,s,a,r){for(var n=typeof s!="string"?s:na(s),l=typeof s=="string"?s:Sa(s),i=n.s.r;i<=n.e.r;++i)for(var o=n.s.c;o<=n.e.c;++o){var c=bm(t,i,o);c.t="n",c.F=l,delete c.v,i==n.s.r&&o==n.s.c&&(c.f=a,r&&(c.D=!0))}return t}var nn={encode_col:Za,encode_row:Va,encode_cell:Hs,encode_range:Sa,decode_col:fv,decode_row:pv,split_cell:BO,decode_cell:Ma,decode_range:Yr,format_cell:Al,sheet_add_aoa:Y3,sheet_add_json:VC,sheet_add_dom:OC,aoa_to_sheet:Qc,json_to_sheet:vz,table_to_sheet:LC,table_to_book:KB,sheet_to_csv:Ev,sheet_to_txt:zC,sheet_to_json:Qx,sheet_to_html:RC,sheet_to_formulae:gz,sheet_to_row_object_array:Qx,sheet_get_cell:bm,book_new:yz,book_append_sheet:jz,book_set_sheet_visibility:Nz,cell_set_number_format:bz,cell_set_hyperlink:YC,cell_set_internal_link:Sz,cell_add_comment:Cz,sheet_set_array_formula:kz,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Gr=({message:t="Loading...",showIcon:s=!0,className:a="",size:r="medium"})=>{const l={small:{container:"py-4",icon:"h-6 w-6",text:"text-base"},medium:{container:"py-8",icon:"h-8 w-8",text:"text-lg"},large:{container:"py-12",icon:"h-10 w-10",text:"text-xl"}}[r];return e.jsx("div",{className:`min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8 ${a}`,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl p-4 sm:p-6 shadow-lg",children:e.jsxs("div",{className:`flex items-center justify-center ${l.container}`,children:[s&&e.jsx(es,{className:`${l.icon} animate-spin text-blue-600`}),e.jsx("span",{className:`ml-3 ${l.text} text-gray-700`,children:t})]})})})})},Ez=()=>{js();const t=["January","February","March","April","May","June","July","August","September","October","November","December"],s=new Date().getMonth()+1,a=new Date().getFullYear(),[r,n]=m.useState([]),[l,i]=m.useState([]),[o,c]=m.useState(!0),[d,u]=m.useState(""),[x,p]=m.useState(""),[h,y]=m.useState(""),[f,v]=m.useState(s),[w,g]=m.useState(a),[j,N]=m.useState(!1),[E,C]=m.useState(1),[k,A]=m.useState(!1),[T,M]=m.useState(null),X=10;m.useEffect(()=>{ne()},[]),m.useEffect(()=>{Q()},[r,d,x,h,f,w]);const ne=async()=>{try{c(!0);try{const O=await fetch("/api/patients/deleted");if(O.ok){const Y=await O.json();n(Y)}else throw new Error("API not available")}catch{const Y=localStorage.getItem("deletedPatients");if(Y)n(JSON.parse(Y));else{const W=[{id:"DEL001",name:"John Deleted",age:45,gender:"Male",phone:"+91 98765 43210",email:"john.deleted@email.com",address:"123 Deleted St, City",emergencyContact:"+91 98765 43211",medicalHistory:"Previous medical records",admissionDate:new Date("2024-01-15"),status:"Deleted",attenderName:"Dr. Smith",deletedAt:new Date("2024-01-20"),deletedBy:"Admin User"},{id:"DEL002",name:"Jane Removed",age:32,gender:"Female",phone:"+91 98765 43212",email:"jane.removed@email.com",address:"456 Removed Ave, City",emergencyContact:"+91 98765 43213",medicalHistory:"Allergies noted",admissionDate:new Date("2024-01-10"),status:"Deleted",attenderName:"Dr. Jones",deletedAt:new Date("2024-01-25"),deletedBy:"Manager User"}];n(W),localStorage.setItem("deletedPatients",JSON.stringify(W))}}}catch(O){console.error("Error loading deleted patients:",O),Te({title:"Error",description:"Failed to load deleted patients.",variant:"destructive"})}finally{c(!1)}},Q=()=>{let O=[...r];if(d){const Y=d.toLowerCase();O=O.filter(W=>W.name.toLowerCase().includes(Y)||W.id.toLowerCase().includes(Y)||W.phone.toLowerCase().includes(Y)||W.email.toLowerCase().includes(Y))}f!==null&&w!==null&&(O=O.filter(Y=>{const W=new Date(Y.deletedAt);return W.getMonth()===f-1&&W.getFullYear()===w})),x&&(O=O.filter(Y=>{const W=new Date(Y.deletedAt),ue=new Date(x);return W.toDateString()===ue.toDateString()})),h&&(O=O.filter(Y=>Y.deletedBy===h)),i(O),C(1)},oe=O=>{M(O),A(!0)},ge=async()=>{if(T)try{const Y=JSON.parse(localStorage.getItem("deletedPatients")||"[]").filter(U=>U.id!==T.id);localStorage.setItem("deletedPatients",JSON.stringify(Y));const W=JSON.parse(localStorage.getItem("patients")||"[]"),ue={...T,status:"Active"};delete ue.deletedAt,delete ue.deletedBy,W.push(ue),localStorage.setItem("patients",JSON.stringify(W)),Te({title:"Success",description:`${T.name} has been restored successfully.`}),ne(),A(!1),M(null)}catch(O){console.error("Error restoring patient:",O),Te({title:"Error",description:"Failed to restore patient. Please try again.",variant:"destructive"})}},me=()=>{const O=new Set;return r.forEach(Y=>{Y.deletedBy&&O.add(Y.deletedBy)}),Array.from(O)},H=O=>{try{const Y=new Date(O);return wt(Y,"MMM dd, yyyy")}catch{return"Invalid Date"}},L=()=>{const O=l.map(ue=>({"Patient ID":ue.id,Name:ue.name,Age:ue.age,Gender:ue.gender,Phone:ue.phone,Email:ue.email,Address:ue.address,"Deleted Date":H(ue.deletedAt),"Deleted By":ue.deletedBy})),Y=nn.json_to_sheet(O),W=nn.book_new();nn.book_append_sheet(W,Y,"Deleted Patients"),zh(W,`deleted-patients-${wt(new Date,"yyyy-MM-dd")}.xlsx`),Te({title:"Export Successful",description:"Deleted patients data exported to Excel successfully."})},he=Math.ceil(l.length/X),ie=(E-1)*X,ke=ie+X,V=l.slice(ie,ke);return o?e.jsx(Gr,{}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(mc,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Deleted Patients"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`${t[(f||1)-1]} ${w}`,onClick:()=>N(!0)}),e.jsxs(P,{onClick:L,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export Excel"}),e.jsx("span",{className:"sm:hidden",children:"Excel"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Total Deleted"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:r.length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(mt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[t[(f||1)-1]," ",w]})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(mt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Filtered Results"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:l.length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(fs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Current view"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(fs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"This Month"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:r.filter(O=>{const Y=new Date(O.deletedAt),W=new Date;return Y.getMonth()===W.getMonth()&&Y.getFullYear()===W.getFullYear()}).length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Pt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Recent deletions"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Pt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Can Restore"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:l.length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ir,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ir,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search deleted patients by name, ID, or phone...",value:d,onChange:O=>u(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-full sm:w-auto min-w-[160px]",children:e.jsx("input",{type:"date",value:x,onChange:O=>p(O.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base",placeholder:"Deletion date"})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[140px]",children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base",value:h,onChange:O=>y(O.target.value),children:[e.jsx("option",{value:"",children:"All Users"}),me().map(O=>e.jsx("option",{value:O,children:O},O))]})}),e.jsxs("button",{onClick:()=>{u(""),p(""),y("")},className:"global-btn global-btn-secondary flex-shrink-0 text-xs sm:text-sm px-3 sm:px-4 py-2",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear Filters"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsxs(Zt,{className:"crm-table-header",children:[e.jsxs("div",{className:"crm-table-title",children:[e.jsx(mc,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Deleted Patient Records (",l.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Deleted (",l.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(kt,{variant:"destructive",className:"bg-red-100 text-red-800 border-red-300",children:[l.length," deleted"]}),e.jsxs(kt,{variant:"outline",children:["Page ",E," of ",he]})]})]}),e.jsx(Re,{className:"p-0",children:e.jsxs("div",{className:"overflow-x-auto",children:[V.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No deleted patients found"}),e.jsx("p",{className:"text-gray-500",children:"There are no deleted patients matching your criteria."})]}):e.jsxs(ls,{className:"crm-table",children:[e.jsx(is,{children:e.jsxs(nt,{className:"crm-table-header-row",children:[e.jsx(re,{className:"crm-table-header-cell text-center",children:"Sr No."}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Patient ID"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Name"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Age"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Gender"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Phone"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Deleted Date"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Deleted By"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Status"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Actions"})]})}),e.jsx(os,{children:V.map((O,Y)=>e.jsxs(nt,{className:"crm-table-row",children:[e.jsx(q,{className:"crm-table-cell text-center",children:ie+Y+1}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx("span",{className:"crm-patient-id",children:O.id})}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx("span",{className:"crm-patient-name",children:O.name})}),e.jsx(q,{className:"crm-table-cell text-center",children:O.age}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx(kt,{variant:O.gender==="Male"?"default":"secondary",className:"crm-badge",children:O.gender})}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx("span",{className:"crm-phone",children:O.phone})}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx("span",{className:"crm-date",children:H(O.deletedAt)})}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx(kt,{variant:"outline",className:"crm-badge",children:O.deletedBy})}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx(kt,{variant:"destructive",className:"crm-status-badge crm-status-deleted",children:"Deleted"})}),e.jsx(q,{className:"crm-table-cell text-center",children:e.jsx("div",{className:"crm-action-buttons",children:e.jsx("button",{onClick:()=>oe(O),className:"crm-action-btn crm-action-btn-success",title:"Restore Patient",children:e.jsx(Ir,{className:"w-4 h-4"})})})})]},O.id))})]}),he>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",ie+1," to ",Math.min(ke,l.length)," of ",l.length," results"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>C(O=>Math.max(1,O-1)),disabled:E===1,className:"crm-pagination-btn",children:e.jsx(jg,{className:"h-4 w-4"})}),Array.from({length:Math.min(5,he)},(O,Y)=>{const W=Y+1;return e.jsx(P,{variant:E===W?"default":"outline",size:"sm",onClick:()=>C(W),className:bt("crm-pagination-btn",E===W&&"crm-pagination-btn-active"),children:W},W)}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>C(O=>Math.min(he,O+1)),disabled:E===he,className:"crm-pagination-btn",children:e.jsx(Pm,{className:"h-4 w-4"})})]})]})]})})]}),e.jsx($t,{open:k,onOpenChange:A,children:e.jsxs(Ot,{className:"crm-dialog",children:[e.jsxs(Ut,{children:[e.jsxs(Bt,{className:"crm-dialog-title",children:[e.jsx(Ir,{className:"w-5 h-5 mr-2 text-green-600"}),"Restore Patient"]}),e.jsxs(Vt,{className:"crm-dialog-description",children:["Are you sure you want to restore ",e.jsx("strong",{children:T==null?void 0:T.name}),"? This will move the patient back to the active patients list."]})]}),e.jsxs(zt,{className:"crm-dialog-footer",children:[e.jsx("button",{className:"global-btn global-btn-secondary",onClick:()=>A(!1),children:"Cancel"}),e.jsxs("button",{onClick:ge,className:"global-btn global-btn-success",children:[e.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Restore Patient"]})]})]})}),e.jsx($s,{open:j,onOpenChange:N,selectedMonth:f||s,selectedYear:w||a,onMonthChange:v,onYearChange:g,onApply:()=>{N(!1)}})]})})},Dz=()=>{js();const[t,s]=m.useState(1),a=10,[r,n]=m.useState(new Date),[l,i]=m.useState(new Date),[o,c]=m.useState([]),[d,u]=m.useState([]),[x,p]=m.useState(""),[h,y]=m.useState([]),[f,v]=m.useState(!0),w=["January","February","March","April","May","June","July","August","September","October","November","December"],g=new Date().getFullYear(),[j,N]=m.useState(new Date().getMonth()+1),[E,C]=m.useState(g),[k,A]=m.useState(!1),[T,M]=m.useState(new Date().getMonth()+1),[X,ne]=m.useState(g);m.useEffect(()=>{s(1)},[]),m.useEffect(()=>{oe(),ge()},[r]),m.useEffect(()=>{Q()},[o,x]),m.useEffect(()=>{s(1)},[x,o]),m.useEffect(()=>{h.length>0&&s(1)},[h.length]);const Q=()=>{let U=o;x&&(U=o.filter(z=>z.name.toLowerCase().includes(x.toLowerCase())||z.patient_id.toLowerCase().includes(x.toLowerCase())||z.phone.includes(x))),U.sort((z,te)=>{const se=J=>{if(!J)return 0;const je=J.match(/P(\d+)/);return je?parseInt(je[1],10):0};return se(z.patient_id)-se(te.patient_id)}),y(U)},oe=async()=>{try{const U=await gt.getAllPatients();c(U),s(1)}catch(U){console.error("Error loading patients:",U),Te({title:"Error",description:"Failed to load patients",variant:"destructive"})}},ge=async()=>{try{v(!0);const U=await gt.getAllPatientAttendance();console.log(" Loaded attendance records:",U.length,"records"),u(U)}catch(U){console.error("Error loading attendance records:",U),Te({title:"Error",description:"Failed to load attendance records",variant:"destructive"})}finally{v(!1)}},me=async(U,z)=>{try{const te=wt(r,"yyyy-MM-dd"),se=d.find(J=>J.patient_id===U&&wt(new Date(J.date),"yyyy-MM-dd")===te);se&&se.id&&(await gt.deletePatientAttendanceById(se.id),u(J=>J.filter(je=>je.id!==se.id)),Te({title:"Attendance Reset",description:`${z}'s attendance has been reset`}))}catch(te){console.error("Error resetting attendance:",te),Te({title:"Error",description:"Failed to reset attendance",variant:"destructive"})}},H=async(U,z,te)=>{try{console.log(" markAttendance called:",{patientId:U,patientName:z,status:te,selectedDate:r});const se=wt(r,"yyyy-MM-dd"),J=te!=="Absent"?wt(new Date,"HH:mm:ss"):"",je=L(U,r);console.log(" Existing attendance found:",je),je&&je.id?(console.log(" Updating existing attendance record:",je.id),await gt.updatePatientAttendance(je.id,{status:te,checkInTime:J,notes:`Updated to ${te} at ${wt(new Date,"HH:mm:ss")}`}),console.log(" Update successful")):(console.log(" Creating new attendance record"),await gt.markPatientAttendance({patientId:U,patientName:z,date:se,checkInTime:J,status:te}),console.log(" Create successful")),await ge(),Te({title:"Attendance Updated",description:`${z} marked as ${te}`})}catch(se){console.error(" Error marking attendance:",se);const J=se instanceof Error?se.message:"Failed to mark attendance";Te({title:"Error",description:J,variant:"destructive"})}},L=(U,z)=>{const te=wt(z,"yyyy-MM-dd"),se=d.find(J=>{const je=J.date?wt(new Date(J.date),"yyyy-MM-dd"):"";return J.patient_id===U&&je===te});return se&&["Present","Absent","Late","Half Day"].includes(se.status)?se:null},he=U=>{const te={Present:{className:"bg-success text-success-foreground",icon:Xs},Absent:{className:"bg-destructive text-destructive-foreground",icon:$r},Late:{className:"bg-warning text-warning-foreground",icon:Qt},"Half Day":{className:"bg-warning text-warning-foreground",icon:Qt}}[U];if(!te)return null;const se=te.icon;return e.jsxs(kt,{className:te.className,children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),U.charAt(0).toUpperCase()+U.slice(1)]})},ie=()=>{const U=T!==null?T-1:new Date().getMonth(),z=X!==null?X:new Date().getFullYear(),te=new Date(z,U,1),se=wt(te,"yyyy-MM"),J=z,je=U,b=new Date(J,je+1,0).getDate(),S=Array.from({length:b},(be,Me)=>{const Je=new Date(J,je,Me+1);return wt(Je,"yyyy-MM-dd")}),D=o.reduce((be,Me)=>(be[Me.patient_id]=Me.name,be),{}),F=Array.from(new Set([...o.map(be=>be.patient_id),...d.filter(be=>{const Me=new Date(be.date);return Me.getMonth()===je&&Me.getFullYear()===J}).map(be=>be.patient_id)])).map((be,Me)=>{const Je={"S NO":Me+1,"Patient ID":be,"Patient Name":D[be]||""};return S.forEach(vt=>{const Le=d.find(Ae=>{const Ee=wt(new Date(Ae.date),"yyyy-MM-dd");return Ae.patient_id===be&&Ee===vt});Je[wt(new Date(vt),"dd/MM")]=Le?Le.status:"-"}),Je}),I=["S NO","Patient ID","Patient Name",...S.map(be=>wt(new Date(be),"dd/MM"))],ce=[I.join(",")];F.forEach(be=>{ce.push(I.map(Me=>be[Me]??"").join(","))});const de=ce.join(`
`),ve=new Blob([de],{type:"text/csv"}),_e=window.URL.createObjectURL(ve),ze=document.createElement("a");ze.href=_e,ze.download=`patient-attendance-${se}.csv`,ze.click(),window.URL.revokeObjectURL(_e),Te({title:"Export Successful",description:`Patient attendance for ${wt(te,"MMMM yyyy")} exported to CSV file`})},ke=Math.ceil(h.length/a),V=(t-1)*a,O=V+a,Y=h.slice(V,O),ue=(()=>{if(o.length===0)return{total:0,present:0,absent:0,notMarked:0};const U=wt(r,"yyyy-MM-dd");let z=0,te=0,se=0;return o.forEach(J=>{const je=d.find(b=>{const S=b.date?wt(new Date(b.date),"yyyy-MM-dd"):"";return b.patient_id===J.patient_id&&S===U});if(je)switch(je.status){case"Present":z++;break;case"Absent":te++;break;case"Late":se++;break}}),{total:o.length,present:z,absent:te,notMarked:o.length-(z+te+se)}})();return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Patient Attendance"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsxs(P,{onClick:()=>A(!0),className:"global-btn text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),w[j-1]," ",E]}),e.jsxs(P,{onClick:ie,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered attendance to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8",children:[e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-blue-50 to-blue-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-blue-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-blue-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Patients"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:ue.total}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Active"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-blue-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-blue-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-green-50 to-green-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-green-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-green-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Present Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:ue.present}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"On duty"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-green-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-green-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Xs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-red-50 to-red-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-red-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-red-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Absent Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:ue.absent}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Not present"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-red-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-red-600 transition-colors duration-300 flex-shrink-0",children:e.jsx($r,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-orange-50 to-orange-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-orange-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-orange-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Not Marked"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:ue.notMarked}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Pending"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-orange-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-orange-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]})]}),e.jsx(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg mb-6 sm:mb-8",children:e.jsx(Re,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ve,{placeholder:"Search patients...",value:x,onChange:U=>p(U.target.value),className:"pl-10 border-gray-200 focus:border-blue-500 rounded-lg w-full h-10"})]})}),e.jsx("div",{className:"w-full lg:w-auto flex justify-center lg:justify-end",children:e.jsxs(go,{children:[e.jsx(vo,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:bt("w-full lg:w-[240px] justify-start text-left font-normal border-gray-200 hover:border-blue-300 h-10",!r&&"text-muted-foreground"),children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:r?wt(r,"PPP"):"Pick a date"})]})}),e.jsx(Si,{className:"w-auto p-0",align:"end",children:e.jsx(bi,{mode:"single",selected:r,onSelect:U=>U&&n(U),initialFocus:!0,className:"pointer-events-auto"})})]})})]})})}),e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"p-4 sm:p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs(Es,{className:"text-lg sm:text-xl text-gray-900",children:["Patient Attendance - ",wt(r,"dd MMM yyyy")]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsxs("span",{children:[h.length," patients"]})]})]})}),e.jsx(Re,{className:"p-0",children:f?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(es,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading attendance..."})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Patient ID"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Phone"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Check In"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:Y.length>0?Y.map((U,z)=>{const te=L(U.patient_id,r);return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:V+z+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx(El,{photoPath:U.photo,alt:U.name,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover mx-auto border bg-muted"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-blue-600 whitespace-nowrap",children:U.patient_id}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:U.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:U.phone}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:te?he(te.status):e.jsx(kt,{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full font-medium",children:"Not Marked"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:(te==null?void 0:te.check_in_time)||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",onClick:()=>H(U.patient_id,U.name,"Present"),variant:"outline",className:`action-btn-lead action-btn-present h-8 w-8 sm:h-9 sm:w-9 p-0 ${(te==null?void 0:te.status)==="Present"?"active":""}`,title:"Mark Present",children:e.jsx(Xs,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>H(U.patient_id,U.name,"Late"),variant:"outline",className:`action-btn-lead action-btn-late h-8 w-8 sm:h-9 sm:w-9 p-0 ${(te==null?void 0:te.status)==="Late"?"active":""}`,title:"Mark Late",children:e.jsx(Qt,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>H(U.patient_id,U.name,"Absent"),variant:"outline",className:`action-btn-lead action-btn-absent h-8 w-8 sm:h-9 sm:w-9 p-0 ${(te==null?void 0:te.status)==="Absent"?"active":""}`,title:"Mark Absent",children:e.jsx($r,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>me(U.patient_id,U.name),variant:"outline",className:"action-btn-lead action-btn-reset h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Reset Attendance",children:e.jsx(Ir,{className:"h-4 w-4 sm:h-4 sm:w-4"})})]})})]},U.patient_id)}):e.jsx(nt,{children:e.jsx(q,{colSpan:8,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Rt,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patients found"}),e.jsx("p",{className:"text-gray-500",children:"No patients match your search criteria or no patients have been added yet."})]})]})})})})]}),ke>1&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",V+1," to ",Math.min(O,h.length)," of ",h.length," patients"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,t-1)),disabled:t===1,className:"border-gray-200 text-gray-600 hover:bg-gray-50",children:"Previous"}),Array.from({length:ke},(U,z)=>z+1).map(U=>e.jsx(P,{variant:t===U?"default":"outline",size:"sm",onClick:()=>s(U),className:bt("w-8 h-8",t===U?"bg-blue-600 text-white hover:bg-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:U},U)),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.min(ke,t+1)),disabled:t===ke,className:"border-gray-200 text-gray-600 hover:bg-gray-50",children:"Next"})]})]})]})})]}),e.jsx($s,{open:k,onOpenChange:A,selectedMonth:j,selectedYear:E,onMonthChange:N,onYearChange:C,onApply:()=>{M(j),ne(E),A(!1),ge()},title:"Select Month & Year",description:"Filter attendance records by specific month and year",previewText:"attendance records"})]})})},Az=()=>{var ss,qs;js();const[t,s]=m.useState(1),a=10,[r,n]=m.useState([]),[l,i]=m.useState([]),[o,c]=m.useState([]),[d,u]=m.useState([]),[x,p]=m.useState(""),[h,y]=m.useState(0),[f,v]=m.useState(0),[w,g]=m.useState(!1),[j,N]=m.useState(!1),[E,C]=m.useState(!1),[k,A]=m.useState(!1),[T,M]=m.useState(!1),X=["January","February","March","April","May","June","July","August","September","October","November","December"],ne=new Date().getFullYear(),Q=new Date().getMonth()+1,[oe,ge]=m.useState(Q),[me,H]=m.useState(ne),[L,he]=m.useState(!1),[ie,ke]=m.useState(Q),[V,O]=m.useState(ne),[Y,W]=m.useState(!1),[ue,U]=m.useState(null),[z,te]=m.useState(null),[se,J]=m.useState(null),[je,b]=m.useState(!1),[S,D]=m.useState(!1),[R,F]=m.useState(0),[I,ce]=m.useState(null),[de,ve]=m.useState(null),[_e,ze]=m.useState(1),[be,Me]=m.useState({patientId:"",doctor:"",title:"",category:"",description:"",date:new Date().toISOString().split("T")[0],documents:[],audioFiles:[],photoFiles:[]}),[Je,vt]=m.useState([]),[Le,Ae]=m.useState({date:new Date().toISOString().split("T")[0],doctor:"",recordType:"",category:"",description:"",audioFiles:[]}),[Ee,Se]=m.useState([]),[B,Ye]=m.useState(!1),[Ne,rt]=m.useState(Q),[Be,We]=m.useState(ne),[ft,He]=m.useState(!1),[Ke,Oe]=m.useState(null),[Ze,it]=m.useState(null);m.useRef(null),m.useRef(null);const dt=m.useRef(null),xt=pe=>`P${(typeof pe=="string"?parseInt(pe.replace(/^P0*/,"")):pe).toString().padStart(4,"0")}`;m.useEffect(()=>{(async()=>{try{const[qe,Z,xe]=await Promise.allSettled([Wt(),qt(),bs()]);qe.status==="rejected"&&console.error("Failed to load patients:",qe.reason),Z.status==="rejected"&&console.error("Failed to load doctors:",Z.reason),xe.status==="rejected"&&console.error("Failed to load history:",xe.reason),M(!0)}catch(qe){console.error("Error in loadData:",qe),M(!0)}})()},[f]),m.useEffect(()=>{s(1)},[x,ie,V]),m.useEffect(()=>{h>0&&bs()},[h]);const Wt=async()=>{N(!0);try{console.log("Attempting to load patients from DatabaseService...");const pe=await gt.getAllPatients();console.log("Patients data received:",pe);const Z=pe.map(xe=>{const Ce=et=>{if(!et)return null;const ct=new Date(et);return isNaN(ct.getTime())?null:ct},Qe=et=>Ce(et.admissionDate||et.admission_date)||Ce(et.created_at)||null;return{id:xe.id?String(xe.id):"",name:xe.name,age:parseInt(xe.age)||0,gender:xe.gender,phone:xe.phone,email:xe.email||"",address:xe.address,emergencyContact:xe.emergency_contact||"",medicalHistory:xe.medical_history||"",admissionDate:Qe(xe),status:xe.status||"Active",attenderName:xe.attender_name||"",attenderPhone:xe.attender_phone||"",photo:xe.photo||"",photoUrl:xe.photoUrl||xe.photo_url||"",fees:parseFloat(xe.fees)||0,bloodTest:parseFloat(xe.blood_test)||0,pickupCharge:parseFloat(xe.pickup_charge)||0,totalAmount:parseFloat(xe.total_amount)||0,payAmount:parseFloat(xe.pay_amount)||0,balance:parseFloat(xe.balance)||0,paymentType:xe.payment_type||"",fatherName:xe.father_name||"",motherName:xe.mother_name||"",attenderRelationship:xe.attender_relationship||"",dateOfBirth:Ce(xe.date_of_birth),marriageStatus:xe.marriage_status||"",employeeStatus:xe.employee_status||"",created_at:Ce(xe.created_at),createdAt:Ce(xe.created_at)}}).map(xe=>({id:xe.id,name:xe.name,age:xe.age,gender:xe.gender,phone:xe.phone,email:xe.email,address:xe.address,emergencyContact:xe.emergencyContact,medicalHistory:xe.medicalHistory,admissionDate:xe.admissionDate,status:xe.status,attenderName:xe.attenderName,attenderPhone:xe.attenderPhone,photo:xe.photo,photoUrl:xe.photoUrl,fees:xe.fees,bloodTest:xe.bloodTest,pickupCharge:xe.pickupCharge,totalAmount:xe.totalAmount,payAmount:xe.payAmount,balance:xe.balance,paymentType:xe.paymentType,fatherName:xe.fatherName,motherName:xe.motherName,attenderRelationship:xe.attenderRelationship,dateOfBirth:xe.dateOfBirth,marriageStatus:xe.marriageStatus,employeeStatus:xe.employeeStatus}));n(Z),console.log("Mapped patients with sample data:",Z)}catch(pe){console.error("Error loading patients:",pe);const qe=localStorage.getItem("patients");if(qe)try{const Z=JSON.parse(qe).map(xe=>({id:xe.id,name:xe.name,age:xe.age||0,gender:xe.gender||"",phone:xe.phone||"",email:xe.email||"",address:xe.address||"",emergencyContact:xe.emergencyContact||"",medicalHistory:xe.medicalHistory||"",admissionDate:xe.admissionDate?new Date(xe.admissionDate):void 0,status:xe.status||"Active",attenderName:xe.attenderName||"",attenderPhone:xe.attenderPhone||"",photo:xe.photo||"",photoUrl:xe.photoUrl||"",fees:xe.fees||0,bloodTest:xe.bloodTest||0,pickupCharge:xe.pickupCharge||0,totalAmount:xe.totalAmount||0,payAmount:xe.payAmount||0,balance:xe.balance||0,paymentType:xe.paymentType||"",fatherName:xe.fatherName||"",motherName:xe.motherName||"",attenderRelationship:xe.attenderRelationship||"",dateOfBirth:xe.dateOfBirth?new Date(xe.dateOfBirth):new Date,marriageStatus:xe.marriageStatus||"",employeeStatus:xe.employeeStatus||""}));n(Z),Te({title:"Using Local Data",description:"Loaded patients from local storage due to database connection issue",variant:"default"});return}catch(Z){console.error("Failed to parse local storage patients:",Z)}n([]),Te({title:"Error",description:`Failed to load patients: ${pe}. No patient data available.`,variant:"destructive"})}finally{N(!1)}},qt=async()=>{C(!0);try{const qe=(await gt.getAllDoctors()).map(Z=>({id:Z.id,name:Z.name}));i(qe)}catch(pe){console.error("Error loading doctors:",pe);const qe=localStorage.getItem("doctors");if(qe)try{const Z=JSON.parse(qe).map(xe=>({id:xe.id,name:xe.name}));i(Z),Te({title:"Using Local Data",description:"Loaded doctors from local storage due to database connection issue",variant:"default"});return}catch(Z){console.error("Failed to parse local storage doctors:",Z)}i([]),Te({title:"Warning",description:"Failed to load doctors from database. No doctors available.",variant:"destructive"})}finally{C(!1)}},bs=async()=>{A(!0),console.log(" Loading history records from database...");try{const pe=await gt.getAllPatientHistory();console.log(" Raw records from database:",pe.length,pe),pe.forEach((Ce,Qe)=>{var ot;console.log(` Record ${Qe+1} (${Ce.id}):`,{patient_id:Ce.patient_id,patient_name:Ce.patient_name,documents_info_raw:Ce.documents_info,documents_info_type:typeof Ce.documents_info,documents_info_exists:!!Ce.documents_info,documents_info_length:(ot=Ce.documents_info)==null?void 0:ot.length})});const qe=pe.map(Ce=>({id:Ce.id,patientId:Ce.patient_id,patientName:Ce.patient_name,date:Ce.date,title:Ce.title,doctor:Ce.doctor,category:Ce.category,description:Ce.description,audioRecording:Ce.audio_recording?{blob:null,url:Ja(Ce.audio_recording),duration:Ce.audio_duration||0,filePath:Ce.audio_recording,fileName:Ce.audio_file_name||"audio.wav"}:void 0,audioFiles:(()=>{var ot;const Qe=[];if(Ce.audio_file_name&&Qe.push({name:Ce.audio_file_name,filePath:Ce.audio_recording,type:"audio/wav"}),Ce.documents_info)try{let et=Ce.documents_info;if(et==="0"||et===""||et==="null")return Qe;typeof et=="string"&&et.startsWith('"')&&et.endsWith('"')&&(et=et.slice(1,-1),et=et.replace(/\\"/g,'"'));const ct=JSON.parse(et);if(Array.isArray(ct)){const Kt=ct.filter(Nt=>{var _s;return Nt&&Nt.name&&((_s=Nt.type)==null?void 0:_s.startsWith("audio/"))});Kt.forEach(Nt=>{Nt.filePath&&!Nt.filePath.startsWith("http")&&(Nt.filePath=Nt.filePath)}),Qe.push(...Kt)}else ct&&ct.name&&((ot=ct.type)!=null&&ot.startsWith("audio/"))&&(ct.filePath&&!ct.filePath.startsWith("http")&&(ct.filePath=ct.filePath),Qe.push(ct))}catch(et){console.error("Error parsing documents_info for audio files:",et)}return console.log(` Audio files for record ${Ce.id}:`,Qe),Qe})(),documents:Ce.documents_info?(()=>{var Qe;try{if(console.log(` Processing documents_info for record ${Ce.id}:`,Ce.documents_info),!Ce.documents_info||Ce.documents_info==="0"||Ce.documents_info===""||Ce.documents_info==="null")return console.log(` Invalid documents_info for record ${Ce.id}`),[];let ot=Ce.documents_info;typeof ot=="string"&&ot.startsWith('"')&&ot.endsWith('"')&&(console.log(" Detected double-encoded JSON, removing outer quotes..."),ot=ot.slice(1,-1),ot=ot.replace(/\\"/g,'"')),console.log(" Processed JSON string:",ot);const et=JSON.parse(ot);if(console.log(` Parse successful for record ${Ce.id}:`,et),Array.isArray(et)){const ct=et.filter(Kt=>{var Nt;return Kt&&Kt.name&&!((Nt=Kt.type)!=null&&Nt.startsWith("audio/"))});return console.log(" Document files found:",ct.length,ct),ct}else if(et&&et.name&&!((Qe=et.type)!=null&&Qe.startsWith("audio/")))return console.log(" Single non-audio document found:",et),[et];return[]}catch(ot){return console.error(" Error parsing documents_info for documents:",ot),[]}})():[],createdAt:Ce.created_at}));let Z=r;if(Z.length===0)try{Z=(await gt.getAllPatients()).map(Qe=>{const ot=et=>{if(!et)return null;const ct=new Date(et);return isNaN(ct.getTime())?null:ct};return{id:Qe.id,name:Qe.name,admissionDate:ot(Qe.admissionDate||Qe.admission_date||Qe.created_at),status:Qe.status||"Active"}})}catch(Ce){console.error("Error loading patients for history:",Ce),Z=[]}const xe=[];Z.forEach(Ce=>{xe.push({id:`patient_${Ce.id}`,patientId:Ce.id,patientName:Ce.name,date:new Date().toISOString().split("T")[0],title:"Patient Registration",doctor:"System",category:"Registration",description:`Patient ${Ce.name} registered in the system.`,documents:[],audioFiles:[],createdAt:new Date().toISOString()})}),console.log(" Setting medical records state...",{recordsCount:qe.length,recordsWithDocuments:qe.filter(Ce=>Ce.documents&&Ce.documents.length>0).length,p0040Records:qe.filter(Ce=>Ce.patientId==="P0040").map(Ce=>{var Qe;return{id:Ce.id,documentsCount:((Qe=Ce.documents)==null?void 0:Qe.length)||0,documents:Ce.documents}})}),u(qe),console.log(" Medical records set:",qe.length,qe),xe.sort((Ce,Qe)=>new Date(Qe.date).getTime()-new Date(Ce.date).getTime()),c(xe)}catch(pe){console.error("Error loading patient history:",pe),c([]),Te({title:"Note",description:"Failed to load patient history from database",variant:"destructive"})}finally{A(!1)}},Us=async()=>{try{const[pe,qe,Z]=await Promise.allSettled([Wt(),qt(),bs()]);pe.status==="rejected"&&console.error("Failed to load patients:",pe.reason),qe.status==="rejected"&&console.error("Failed to load doctors:",qe.reason),Z.status==="rejected"&&console.error("Failed to load history:",Z.reason),M(!0)}catch(pe){console.error("Error in loadData:",pe),M(!0)}},Ss=m.useMemo(()=>{let pe=o;if(pe=pe.filter(Z=>{const xe=r.find(Ce=>String(Ce.id)===String(Z.patientId));return xe&&xe.status==="Active"}),x){const Z=x.toLowerCase();pe=pe.filter(xe=>xe.title.toLowerCase().includes(Z)||xe.patientName.toLowerCase().includes(Z)||xe.doctor.toLowerCase().includes(Z)||xe.patientId.toLowerCase().includes(Z))}ie!==null&&V!==null&&(pe=pe.filter(Z=>{const xe=new Date(Z.date);return xe.getMonth()+1===ie&&xe.getFullYear()===V}));const qe=new Map;return pe.forEach(Z=>{qe.has(Z.patientId)||qe.set(Z.patientId,Z)}),Array.from(qe.values())},[o,r,x,ie,V]),Ls=Math.ceil(Ss.length/a),$e=(t-1)*a,we=$e+a,K=(pe,qe)=>{var Z;console.log(" playAudio called with URL:",pe,"Record ID:",qe),de===qe?(console.log(" Pausing currently playing audio"),(Z=dt.current)==null||Z.pause(),ve(null)):(dt.current&&(console.log(" Stopping previous audio"),dt.current.pause()),console.log(" Creating new Audio object with URL:",pe),dt.current=new Audio(pe),dt.current.playbackRate=_e,dt.current.onerror=xe=>{console.error(" Audio playback error:",xe),console.error(" Failed to load audio from URL:",pe),ve(null),Te({title:"Audio Playback Error",description:"Failed to play audio file. Please check if the file exists and is accessible.",variant:"destructive"})},dt.current.onloadstart=()=>{console.log(" Audio loading started")},dt.current.oncanplay=()=>{console.log(" Audio can play")},dt.current.play().then(()=>{console.log(" Audio playback started successfully"),ve(qe)}).catch(xe=>{console.error(" Audio play() failed:",xe),ve(null),Te({title:"Audio Playback Error",description:`Failed to start audio playback: ${xe.message}`,variant:"destructive"})}),dt.current.onended=()=>{console.log(" Audio playback ended"),ve(null)})},De=pe=>{ze(pe),dt.current&&(dt.current.playbackRate=pe)},_=(pe,qe)=>{const Z=document.createElement("a");Z.href=pe,Z.download=`${qe}.wav`,Z.click()},ee=pe=>{if(pe){const qe=Array.from(pe);Me(Z=>({...Z,documents:[...Z.documents,...qe]}))}},G=pe=>{if(pe){const qe=Array.from(pe);Me(Z=>({...Z,audioFiles:[...Z.audioFiles,...qe]}))}},le=pe=>{if(pe){const qe=Array.from(pe),Z=50*1024*1024;if(qe.filter(Ce=>Ce.size>Z).length>0){Te({title:"File Size Error",description:"Photo files larger than 50MB are not allowed.",variant:"destructive"});return}Me(Ce=>({...Ce,photoFiles:[...Ce.photoFiles,...qe]}))}},fe=pe=>{Me(qe=>({...qe,photoFiles:qe.photoFiles.filter((Z,xe)=>xe!==pe)}))},ye=pe=>{Me(qe=>({...qe,documents:qe.documents.filter((Z,xe)=>xe!==pe)}))},Ue=()=>{Me({patientId:"",doctor:"",title:"",category:"",description:"",date:new Date().toISOString().split("T")[0],documents:[],audioFiles:[],photoFiles:[]}),ce(null),F(0),te(null),vt([])},at=async()=>{if(console.log(" handleSubmit called"),console.log(" Form data:",be),console.log(" Edit record:",z),!be.patientId||!be.doctor||!be.date){console.log(" Validation failed:",{patientId:be.patientId,doctor:be.doctor,date:be.date}),Te({title:"Validation Error",description:"Please fill in all required fields (Patient, Doctor, Date).",variant:"destructive"});return}const pe=r.find(qe=>qe.id===be.patientId);if(pe)try{const qe=z!==null,Z=qe?z.id:`history_${Date.now()}`;let xe=null,Ce=null,Qe=0;if(I)try{const ct=new FormData;ct.append("file",I.blob,`audio-${Date.now()}.wav`),ct.append("patientId",be.patientId),ct.append("fileType","audio");const Kt=await fetch("/api/upload-medical-history-file",{method:"POST",body:ct});if(Kt.ok)xe=(await Kt.json()).filePath,Ce=`audio-${Date.now()}.wav`,Qe=I.duration,console.log(" Audio uploaded:",xe);else{const Nt=await Kt.text();throw console.error(" Audio upload failed:",Kt.status,Nt),new Error(`Audio upload failed: ${Kt.status}`)}}catch(ct){throw console.error(" Audio upload error:",ct),ct}if(!I&&be.audioFiles.length>0)try{const ct=be.audioFiles[0],Kt=await qi(ct,be.patientId,"audio");xe=Kt,Ce=ct.name,Qe=0,console.log(" Audio file uploaded:",Kt)}catch(ct){throw console.error(" Audio file upload failed:",ct),ct}const ot=[...Je];for(const ct of be.documents)try{const Kt=await qi(ct,be.patientId,"document");ot.push({name:ct.name,size:ct.size,type:ct.type,lastModified:ct.lastModified,filePath:Kt}),console.log(" Document uploaded:",Kt)}catch(Kt){console.error(" Document upload failed:",Kt)}for(const ct of be.photoFiles)try{const Kt=await qi(ct,be.patientId,"document");ot.push({name:ct.name,size:ct.size,type:ct.type,lastModified:ct.lastModified,filePath:Kt}),console.log(" Photo uploaded:",Kt)}catch(Kt){console.error(" Photo upload failed:",Kt)}const et={id:Z,patient_id:be.patientId,patient_name:pe.name,date:be.date,title:be.title||"Medical Record",doctor:be.doctor,category:be.category||"General",description:be.description,audio_recording:xe,audio_file_name:Ce,audio_duration:Qe,documents_info:ot.length>0?JSON.stringify(ot):null};qe?(console.log(" Updating record:",Z,et),await gt.updatePatientHistory(Z,et),Te({title:"Record Updated",description:"Medical record has been updated successfully."})):(console.log(" Adding new record:",et),await gt.addPatientHistory(et),Te({title:"Record Added",description:"Medical record has been added successfully."})),Ue(),W(!1),y(ct=>ct+1)}catch(qe){console.error(" Submit error:",qe),Te({title:"Error",description:qe.message||"Failed to save medical record.",variant:"destructive"})}},Ge=pe=>{J(pe),b(!0)},Xe=pe=>{J(pe),b(!0)},tt=async()=>{if(se)try{await gt.deletePatientHistory(se.id),await bs(),y(pe=>pe+1),b(!1),J(null),Te({title:"Record Deleted",description:"Patient history record has been successfully deleted from database."})}catch(pe){console.error("Error deleting patient history:",pe),Te({title:"Error",description:"Failed to delete patient history record from database.",variant:"destructive"})}},yt=async pe=>{if(pe.preventDefault(),!(!Le.date||!Le.recordType.trim()||!ue)){Ye(!0);try{const qe=`record_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;let Z=[];const xe=[...Ee,...Le.audioFiles];if(xe.length>0)for(const ot of xe)try{const et=ot.type.startsWith("audio/")?"audio":"document",ct=await qi(ot,ue.patientId,et);Z.push(ct)}catch(et){console.error("File upload failed:",et)}const Ce=xe.map((ot,et)=>({name:ot.name,size:ot.size,type:ot.type,filePath:Z[et]||null})),Qe={id:qe,patient_id:ue.patientId,patient_name:ue.patientName,date:Le.date,title:Le.recordType,doctor:Le.doctor||"System",category:"General",description:Le.description,documents_info:Ce.length>0?JSON.stringify(Ce):null};await gt.addPatientHistory(Qe),Te({title:"Record Added",description:"Medical record has been added successfully."}),Ae({date:new Date().toISOString().split("T")[0],doctor:"",recordType:"",category:"",description:"",audioFiles:[]}),Se([]),ce(null),F(0),y(ot=>ot+1)}catch(qe){console.error("Error adding record:",qe),Te({title:"Error",description:"Failed to add medical record.",variant:"destructive"})}finally{Ye(!1)}}},Mt=pe=>{pe.target.files&&Se(Array.from(pe.target.files))},Yt=pe=>{const qe=Math.floor(pe/60),Z=pe%60;return`${qe}:${Z.toString().padStart(2,"0")}`},Ct=pe=>{let qe=d.filter(Ce=>{const Qe=String(Ce.patientId).replace(/^P0*/,""),ot=String(pe).replace(/^P0*/,"");return Qe===ot});ie!==null&&V!==null&&(qe=qe.filter(Ce=>{const Qe=new Date(Ce.date||Ce.createdAt),ot=Qe.getMonth()+1,et=Qe.getFullYear();return ot===ie&&et===V}));let Z=0;qe.forEach(Ce=>{Ce.audioRecording?Z+=1:Ce.audioFiles&&Ce.audioFiles.length>0&&(Z+=Ce.audioFiles.length)});const xe=qe.reduce((Ce,Qe)=>{const ot=Qe.documents?Qe.documents.length:0;return console.log(` Document count for record ${Qe.id}:`,{recordId:Qe.id,documentsExists:!!Qe.documents,documentsArray:Qe.documents,documentsLength:ot,currentCount:Ce,newCount:Ce+ot}),Ce+ot},0);return String(pe).includes("40")&&console.log("Debug P0040 counts:",{patientId:pe,medicalRecordsTotal:d.length,patientMedicalRecordsCount:qe.length,totalAudioCount:Z,totalDocumentsCount:xe,allMedicalRecords:d.map(Ce=>{var Qe;return{id:Ce.id,patientId:Ce.patientId,documentsCount:((Qe=Ce.documents)==null?void 0:Qe.length)||0,documentsDetails:Ce.documents,rawDocuments:Ce.documents}}),recordsDetails:qe.map(Ce=>{var Qe,ot,et;return{id:Ce.id,patientId:Ce.patientId,audioRecording:!!Ce.audioRecording,audioFiles:((Qe=Ce.audioFiles)==null?void 0:Qe.length)||0,documents:((ot=Ce.documents)==null?void 0:ot.length)||0,documentsArray:Ce.documents,documentsDetails:((et=Ce.documents)==null?void 0:et.map(ct=>({name:(ct==null?void 0:ct.name)||"Unknown",filePath:(ct==null?void 0:ct.filePath)||"No path"})))||[]}})}),{audioCount:Z,documentsCount:xe}},Lt=m.useMemo(()=>{if(!ue)return[];let pe=d.filter(qe=>{const Z=String(qe.patientId).replace(/^P0*/,""),xe=String(ue.patientId).replace(/^P0*/,"");return Z===xe});return Ke!==null&&Ze!==null&&(pe=pe.filter(qe=>{const Z=new Date(qe.date||qe.createdAt);return Z.getMonth()+1===Ke&&Z.getFullYear()===Ze})),pe},[d,ue==null?void 0:ue.patientId,h,Ke,Ze]);return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(It,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Patient History"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`${X[oe-1]} ${me}`,onClick:()=>he(!0)}),e.jsxs(P,{onClick:()=>{console.log(" Add Record button clicked"),W(!0)},className:"global-btn global-btn-primary flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(It,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Record"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 my-6",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Active Patients"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:(()=>{let pe=new Set,qe=d;return ie!==null&&V!==null&&(qe=qe.filter(Z=>{const xe=new Date(Z.date);return xe.getMonth()+1===ie&&xe.getFullYear()===V})),qe.forEach(Z=>{const xe=r.find(Ce=>String(Ce.id)===String(Z.patientId));xe&&xe.status==="Active"&&pe.add(Z.patientId)}),pe.size})()}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In treatment"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Audio Files"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:(()=>{let pe=0,qe=d;if(x){const Z=x.toLowerCase();qe=qe.filter(xe=>xe.title.toLowerCase().includes(Z)||xe.patientName.toLowerCase().includes(Z)||xe.doctor.toLowerCase().includes(Z)||xe.patientId.toLowerCase().includes(Z))}return ie!==null&&V!==null&&(qe=qe.filter(Z=>{const xe=new Date(Z.date);return xe.getMonth()+1===ie&&xe.getFullYear()===V})),qe=qe.filter(Z=>{const xe=r.find(Ce=>String(Ce.id)===String(Z.patientId));return xe&&xe.status==="Active"}),qe.forEach(Z=>{Z.audioRecording?pe+=1:Z.audioFiles&&Z.audioFiles.length>0&&(pe+=Z.audioFiles.length)}),pe})()}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(ll,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Recordings"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(ll,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-purple",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-700 mb-1 truncate",children:"Documents"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-purple-900 mb-1",children:(()=>{let pe=0,qe=d;if(x){const Z=x.toLowerCase();qe=qe.filter(xe=>xe.title.toLowerCase().includes(Z)||xe.patientName.toLowerCase().includes(Z)||xe.doctor.toLowerCase().includes(Z)||xe.patientId.toLowerCase().includes(Z))}return ie!==null&&V!==null&&(qe=qe.filter(Z=>{const xe=new Date(Z.date);return xe.getMonth()+1===ie&&xe.getFullYear()===V})),qe=qe.filter(Z=>{const xe=r.find(Ce=>String(Ce.id)===String(Z.patientId));return xe&&xe.status==="Active"}),qe.forEach(Z=>{Z.documents&&Z.documents.length>0&&(pe+=Z.documents.length)}),pe})()}),e.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[e.jsx(pn,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Files"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-purple",children:e.jsx(pn,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search records...",value:x,onChange:pe=>p(pe.target.value),className:"pl-10 w-full"})]})})}),e.jsxs("div",{className:"crm-table-container",children:[e.jsx("div",{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(It,{className:"crm-table-title-icon"}),e.jsx("h2",{className:"crm-table-title-text",children:"Patients Medical Records"})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[!T&&(j||E||k)&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Loading data...",j&&" (Patients)",E&&" (Doctors)",k&&" (History)"]})]})}),T&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{children:[e.jsx(re,{className:"text-center",children:"S NO"}),e.jsx(re,{className:"text-center",children:"Photo"}),e.jsx(re,{className:"text-center",children:"Patient Id"}),e.jsx(re,{className:"text-center",children:"Patient Name"}),e.jsx(re,{className:"text-center",children:"Audio"}),e.jsx(re,{className:"text-center",children:"Document"}),e.jsx(re,{className:"text-center",children:"Actions"})]})}),e.jsx(os,{children:Ss.sort((pe,qe)=>{const Z=parseInt(String(pe.patientId).replace(/\D/g,""))||0,xe=parseInt(String(qe.patientId).replace(/\D/g,""))||0;return Z-xe}).slice((t-1)*a,t*a).map((pe,qe)=>e.jsxs(nt,{className:"hover:bg-muted/50",children:[e.jsx(q,{className:"text-center font-medium",children:(t-1)*a+qe+1}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center items-center",children:(()=>{const Z=r.find(xe=>String(xe.id)===String(pe.patientId));return Z!=null&&Z.photo?e.jsx(El,{photoPath:Z.photo,alt:pe.patientName,className:"w-10 h-10 rounded-full object-cover border border-gray-200"},`${pe.patientId}-${Z.photo}`):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center border border-gray-200",children:e.jsx("span",{className:"text-sm font-semibold text-white",children:(pe.patientName||"P").charAt(0).toUpperCase()})})})()})}),e.jsx(q,{className:"text-center",children:e.jsx("span",{className:"font-medium text-blue-600",children:xt(pe.patientId)})}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"font-medium",children:pe.patientName})}),e.jsx(q,{className:"text-center",children:(()=>{const Z=Ct(pe.patientId);return Z.audioCount>0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{const xe=d.find(Ce=>{const Qe=String(Ce.patientId).replace(/^P0*/,""),ot=String(pe.patientId).replace(/^P0*/,"");return Qe===ot&&(Ce.audioRecording||Ce.audioFiles&&Ce.audioFiles.length>0)});if(xe!=null&&xe.audioRecording)K(xe.audioRecording.url,xe.id);else if(xe!=null&&xe.audioFiles&&xe.audioFiles.length>0){const Ce=xe.audioFiles[0];if(Ce&&Ce.filePath){const Qe=Ja(Ce.filePath);K(Qe,xe.id)}else Te({title:"Audio Not Available",description:"Audio file path not found.",variant:"destructive"})}},className:"action-btn-count action-btn-primary",title:`${Z.audioCount} audio recording${Z.audioCount>1?"s":""} available`,children:e.jsx("span",{className:"text-sm font-semibold",children:Z.audioCount})})}):e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("span",{className:"text-gray-400 bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-sm",children:"0"})})})()}),e.jsx(q,{className:"text-center",children:(()=>{const Z=Ct(pe.patientId);return Z.documentsCount>0?e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{try{const xe=d.find(Ce=>{const Qe=String(Ce.patientId).replace(/^P0*/,""),ot=String(pe.patientId).replace(/^P0*/,"");return Qe===ot&&Ce.documents&&Ce.documents.length>0});if(xe&&xe.documents&&xe.documents.length>0){const Ce=xe.documents[0];if(Ce&&Ce.filePath){const Qe=Ja(Ce.filePath);window.open(Qe,"_blank")}else if(Ce&&Ce.data){const Qe=atob(Ce.data),ot=new Array(Qe.length);for(let Nt=0;Nt<Qe.length;Nt++)ot[Nt]=Qe.charCodeAt(Nt);const et=new Uint8Array(ot),ct=new Blob([et],{type:Ce.type||"application/octet-stream"}),Kt=URL.createObjectURL(ct);window.open(Kt,"_blank"),setTimeout(()=>URL.revokeObjectURL(Kt),1e3)}}}catch(xe){console.error("Error opening document:",xe),Te({title:"Error",description:"Failed to open document",variant:"destructive"})}},className:"action-btn-count action-btn-secondary",title:`${Z.documentsCount} document${Z.documentsCount>1?"s":""} available - Click to view`,children:e.jsx("span",{className:"text-sm font-semibold",children:Z.documentsCount})}):e.jsx(kt,{variant:"outline",className:"bg-gray-50 text-gray-400 border-gray-200",children:"0"})})()}),e.jsx(q,{className:"text-center",children:e.jsxs("div",{className:"flex space-x-2 justify-center",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>U(pe),title:"View Details",className:"action-btn-lead action-btn-view",children:e.jsx(vs,{className:"w-4 h-4"})}),(pe.id.startsWith("patient_"),null),!pe.id.startsWith("patient_")&&e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>Ge(pe),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Record",children:e.jsx(mt,{className:"w-4 h-4"})})]})})]},pe.id))})]}),Ss.length===0&&T&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"mb-4",children:e.jsx(It,{className:"w-12 h-12 mx-auto text-muted-foreground/50"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Patient Records Found"}),e.jsx("p",{className:"text-sm",children:"No patients or medical records are available to display."}),e.jsx("p",{className:"text-sm mt-1",children:"Add patients and create medical records to see them here."})]})]}),Ss.length>a&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",$e+1," to ",Math.min(we,Ss.length)," of ",Ss.length," records"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Previous"}),Array.from({length:Math.min(5,Ls)},(pe,qe)=>{const Z=qe+Math.max(1,t-2);return Z>Ls?null:e.jsx(P,{variant:t===Z?"default":"outline",size:"sm",onClick:()=>s(Z),className:"w-8",children:Z},Z)}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.min(Ls,t+1)),disabled:t===Ls,children:"Next"})]})]})]})]}),e.jsx($t,{open:Y,onOpenChange:pe=>{W(pe),pe||Ue()},children:e.jsxs(Ot,{className:"max-w-4xl max-h-[95vh] overflow-hidden flex flex-col",children:[e.jsxs(Ut,{className:"shrink-0 pb-4 border-b border-gray-200",children:[e.jsxs(Bt,{className:"flex items-center space-x-2 text-xl",children:[e.jsx(Ds,{className:"w-6 h-6"}),e.jsx("span",{children:z?"Edit Medical Record":"Add Medical Record"})]}),e.jsx(Vt,{children:z?"Update patient medical record":"Create a new patient medical record"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 px-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Patient *"}),z||be.patientId&&Y?e.jsx(Ve,{value:z?`${z.patientName||"Unknown Patient"} (${z.patientId})`:(()=>{const qe=(()=>{const Z=be.patientId;let xe=r.find(ot=>ot.id===Z);if(xe||(xe=r.find(ot=>String(ot.id)===String(Z)),xe))return xe;const Ce=String(Z).replace(/^P0*/,"");if(xe=r.find(ot=>String(ot.id)===Ce),xe)return xe;const Qe=`P${String(Z).padStart(4,"0")}`;return xe=r.find(ot=>ot.id===Qe),xe||null})();return`${(qe==null?void 0:qe.name)||"Unknown Patient"} (${be.patientId})`})(),disabled:!0,className:"bg-muted"}):e.jsxs(At,{value:be.patientId,onValueChange:pe=>Me({...be,patientId:pe}),children:[e.jsx(Et,{children:e.jsx(_t,{placeholder:"Select patient",children:be.patientId&&r.find(pe=>pe.id===be.patientId)&&`${(ss=r.find(pe=>pe.id===be.patientId))==null?void 0:ss.name} (${be.patientId})`})}),e.jsx(Dt,{children:r.map(pe=>e.jsxs(Pe,{value:pe.id,children:[pe.name," (",pe.id,")"]},pe.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Date *"}),e.jsx(Ve,{type:"date",value:be.date,onChange:pe=>Me({...be,date:pe.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Doctor *"}),e.jsxs(At,{value:be.doctor,onValueChange:pe=>Me({...be,doctor:pe}),children:[e.jsx(Et,{children:e.jsx(_t,{placeholder:"Select doctor"})}),e.jsx(Dt,{children:l.map(pe=>e.jsxs(Pe,{value:pe.name,children:[pe.name," (",pe.id,")"]},pe.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Title"}),e.jsx(Ve,{placeholder:"Enter title",value:be.title,onChange:pe=>Me({...be,title:pe.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Category"}),e.jsxs(At,{value:be.category,onValueChange:pe=>Me({...be,category:pe}),children:[e.jsx(Et,{children:e.jsx(_t,{placeholder:"Select category"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"General",children:"General"}),e.jsx(Pe,{value:"Consultation",children:"Consultation"}),e.jsx(Pe,{value:"Follow-up",children:"Follow-up"}),e.jsx(Pe,{value:"Emergency",children:"Emergency"}),e.jsx(Pe,{value:"Registration",children:"Registration"}),e.jsx(Pe,{value:"Lab Results",children:"Lab Results"}),e.jsx(Pe,{value:"Prescription",children:"Prescription"}),e.jsx(Pe,{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Description"}),e.jsx(As,{placeholder:"Enter detailed description",value:be.description,onChange:pe=>Me({...be,description:pe.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(ll,{className:"h-4 w-4 text-blue-600"}),"Upload Audio Files ",e.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),e.jsxs("div",{className:"border-2 border-dashed border-blue-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsx(Ve,{type:"file",accept:"audio/*",multiple:!0,onChange:pe=>G(pe.target.files),className:"mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Select multiple audio files (MP3, WAV, etc.) - up to 500MB each"}),be.audioFiles.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"text-sm font-medium text-blue-700",children:["Uploaded Audio Files (",be.audioFiles.length,"):"]}),be.audioFiles.map((pe,qe)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ll,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:pe.name}),e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:[(pe.size/(1024*1024)).toFixed(2)," MB"]})]}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Z=be.audioFiles.filter((xe,Ce)=>Ce!==qe);Me({...be,audioFiles:Z})},className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(mt,{className:"w-4 h-4"})})]},qe))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Documents"}),e.jsx(Ve,{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:pe=>ee(pe.target.files)}),Je.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Existing Documents:"}),Je.map((pe,qe)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded border-blue-200 border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pn,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-800",children:pe.name}),e.jsxs("span",{className:"text-xs text-blue-600",children:["(",(pe.size/1024).toFixed(1)," KB)"]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(P,{type:"button",variant:"ghost",size:"sm",onClick:()=>{if(pe.filePath){const Z=Ja(pe.filePath),xe=document.createElement("a");xe.href=Z,xe.download=pe.name,xe.target="_blank",xe.click()}else if(pe.data){const Z=atob(pe.data),xe=new Array(Z.length);for(let ct=0;ct<Z.length;ct++)xe[ct]=Z.charCodeAt(ct);const Ce=new Uint8Array(xe),Qe=new Blob([Ce],{type:pe.type}),ot=URL.createObjectURL(Qe),et=document.createElement("a");et.href=ot,et.download=pe.name,et.click(),URL.revokeObjectURL(ot)}else Te({title:"Download Error",description:"Document data is not available for download.",variant:"destructive"})},className:"bg-blue-50 hover:bg-blue-100 text-blue-600 border border-blue-200 px-2 py-1",title:"Download",children:e.jsx(Cs,{className:"w-4 h-4"})}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",onClick:()=>{vt(Z=>Z.filter((xe,Ce)=>Ce!==qe))},className:"text-red-600 hover:text-red-700",title:"Remove",children:e.jsx(mt,{className:"w-4 h-4"})})]})]},`existing-${qe}`))]}),be.documents.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"New Documents:"}),be.documents.map((pe,qe)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:pe.name})]}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",onClick:()=>ye(qe),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(mt,{className:"w-4 h-4"})})]},`new-${qe}`))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"photo-upload",children:"Upload Photos"}),e.jsx(Ve,{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",onChange:pe=>le(pe.target.files)}),be.photoFiles.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-muted-foreground",children:"Selected Photos:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:be.photoFiles.map((pe,qe)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(pe),alt:pe.name,className:"w-full h-20 object-cover rounded border"}),e.jsx(P,{type:"button",size:"sm",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6 p-0 bg-red-100 hover:bg-red-200 text-red-600 border-red-200",onClick:()=>fe(qe),children:e.jsx(mt,{className:"w-3 h-3"})}),e.jsx("div",{className:"text-xs text-center mt-1 text-muted-foreground truncate",children:pe.name})]},`photo-${qe}`))})]})]})]}),e.jsxs(zt,{className:"shrink-0 border-t-2 border-gray-300 pt-6 bg-gradient-to-r from-gray-50 to-white shadow-xl sticky bottom-0 z-10 flex justify-end gap-4",children:[e.jsxs(P,{variant:"outline",onClick:()=>{W(!1),Ue()},className:"px-6 py-3 text-base font-medium border-2 border-gray-300 hover:bg-gray-100 transition-all",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx(P,{onClick:at,disabled:B||!Le.date||!Le.doctor.trim()||!Le.recordType.trim(),className:"px-8 py-3 text-base font-bold bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),z?"Updating...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"w-5 h-5 mr-2"}),z?"Update Medical Record":"Add Medical Record"]})})]})]})}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>U(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl flex flex-col",onClick:pe=>pe.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6 flex-shrink-0",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsx("div",{className:"relative flex-shrink-0",children:(()=>{const pe=r.find(qe=>String(qe.id)===String(ue.patientId));return pe!=null&&pe.photo?e.jsx(El,{photoPath:pe.photo,alt:ue.patientName,className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg"},`${ue.patientId}-${pe.photo}`):e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm sm:text-base md:text-lg lg:text-xl",children:(ue.patientName||"P").charAt(0).toUpperCase()})})})})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Medical History Details"})]}),e.jsx("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:e.jsxs("span",{className:"text-gray-600",children:["Complete medical record information for ",ue.patientName]})})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>U(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",style:{scrollbarWidth:"thin",scrollbarColor:"#60a5fa #dbeafe"},children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),"Patient Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 rounded-lg border border-blue-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-blue-700 block",children:"Patient Name"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:ue.patientName})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 rounded-lg border border-purple-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-purple-700 block",children:"Patient ID"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:xt(ue.patientId)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 rounded-lg border border-green-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Pt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-green-700 block",children:"Joining Date"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(()=>{const pe=r.find(qe=>String(qe.id)===String(ue.patientId));return pe&&pe.admissionDate?wt(new Date(pe.admissionDate),"dd/MM/yyyy"):"Not Available"})()})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-green-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Add New Medical Record"]}),e.jsxs("form",{onSubmit:yt,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-date",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-blue-600"}),"Record Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"add-record-date",type:"date",value:Le.date,onChange:pe=>Ae({...Le,date:pe.target.value}),className:"w-full bg-white/90 backdrop-blur-sm border-blue-200 focus:border-blue-400 focus:ring-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-doctor",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-indigo-600"}),"Doctor ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"add-record-doctor",value:Le.doctor,onChange:pe=>Ae({...Le,doctor:pe.target.value}),className:"w-full bg-white/90 backdrop-blur-sm border-indigo-200 focus:border-indigo-400 focus:ring-indigo-300 px-3 py-2 rounded-md text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select doctor"}),e.jsx("option",{value:"Sabarish 2 (DOC002)",children:"Sabarish 2 (DOC002)"}),e.jsx("option",{value:"Sabarish 1 (DOC001)",children:"Sabarish 1 (DOC001)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-type",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-purple-600"}),"Record Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"add-record-type",type:"text",value:Le.recordType,onChange:pe=>Ae({...Le,recordType:pe.target.value}),className:"w-full bg-white/90 backdrop-blur-sm border-purple-200 focus:border-purple-400 focus:ring-purple-300",placeholder:"Enter record type (e.g., Consultation, Prescription, Lab Report)",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-category",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-orange-600"}),"Category"]}),e.jsx(Ve,{id:"add-record-category",type:"text",value:Le.category,onChange:pe=>Ae({...Le,category:pe.target.value}),className:"w-full bg-white/90 backdrop-blur-sm border-orange-200 focus:border-orange-400 focus:ring-orange-300",placeholder:"Enter category (e.g., Consultation, Prescription, Lab Report)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-description",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-orange-600"}),"Description"]}),e.jsx(As,{id:"add-record-description",value:Le.description,onChange:pe=>Ae({...Le,description:pe.target.value}),className:"w-full bg-white/90 backdrop-blur-sm border border-orange-200 focus:border-orange-400 focus:ring-orange-300 min-h-[100px] resize-y",placeholder:"Enter detailed description of the medical record..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(ll,{className:"h-4 w-4 text-blue-600"}),"Upload Audio Files ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border-2 border-dashed border-blue-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[e.jsx(Ve,{type:"file",accept:"audio/*",multiple:!0,onChange:pe=>{const qe=Array.from(pe.target.files||[]);Ae({...Le,audioFiles:[...Le.audioFiles,...qe]})},className:"mb-2 bg-white/80 border-blue-200 focus:border-blue-400 focus:ring-blue-300"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Select multiple audio files (MP3, WAV, etc.) - up to 500MB each"}),((qs=Le.audioFiles)==null?void 0:qs.length)>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"text-sm font-medium text-blue-700",children:["Uploaded Audio Files (",Le.audioFiles.length,"):"]}),Le.audioFiles.map((pe,qe)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ll,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:pe.name}),e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:[(pe.size/(1024*1024)).toFixed(2)," MB"]})]}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var xe;const Z=((xe=Le.audioFiles)==null?void 0:xe.filter((Ce,Qe)=>Qe!==qe))||[];Ae({...Le,audioFiles:Z})},className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(mt,{className:"w-4 h-4"})})]},qe))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-files",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(rn,{className:"h-4 w-4 text-indigo-600"}),"Upload Files (Images, Audio, Documents)"]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border-2 border-dashed border-indigo-200 rounded-lg p-4 hover:border-indigo-400 transition-colors",children:[e.jsx("input",{id:"add-record-files",type:"file",multiple:!0,accept:"image/*,audio/*,.pdf,.doc,.docx,.txt",onChange:Mt,className:"w-full p-2 border border-gray-300 rounded-md focus:border-indigo-400 focus:ring-indigo-300"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You can select multiple files including images, audio recordings, and documents"}),Ee.length>0&&e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Selected Files:"}),Ee.map((pe,qe)=>e.jsxs("p",{className:"text-xs text-gray-600 bg-gray-50 px-2 py-1 rounded",children:[pe.name," (",(pe.size/1024).toFixed(1)," KB)"]},qe))]})]})]}),e.jsx("div",{className:"flex justify-end pt-6 pb-2 border-t border-gray-200 mt-6",children:e.jsx(P,{type:"submit",disabled:B||!Le.date||!Le.doctor.trim()||!Le.recordType.trim(),className:"px-8 py-3 text-base font-bold bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adding Record..."]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{className:"w-5 h-5 mr-2"}),"Add Medical Record"]})})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-purple-100 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"}),"Medical History Records"]})}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-purple-500 via-blue-500 to-indigo-500",children:[e.jsx(re,{className:"text-center font-bold text-white",children:"S NO"}),e.jsx(re,{className:"text-center font-bold text-white",children:"Date"}),e.jsx(re,{className:"text-center font-bold text-white",children:"Doctor"}),e.jsx(re,{className:"text-center font-bold text-white",children:"Description"}),e.jsx(re,{className:"text-center font-bold text-white",children:"Documents"}),e.jsx(re,{className:"text-center font-bold text-white",children:"Actions"})]})}),e.jsxs(os,{children:[Lt.map((pe,qe)=>e.jsxs(nt,{className:"hover:bg-blue-50/50 backdrop-blur-sm transition-all duration-200 border-b border-gray-100",children:[e.jsx(q,{className:"text-center font-medium text-gray-700",children:qe+1}),e.jsx(q,{className:"text-center text-gray-700",children:wt(new Date(pe.date),"dd/MM/yyyy")}),e.jsx(q,{className:"text-center text-gray-700",children:pe.doctor}),e.jsx(q,{className:"text-center max-w-xs truncate text-gray-700",title:pe.description,children:pe.description||"No description"}),e.jsx(q,{className:"text-center",children:pe.documents&&pe.documents.length>0?e.jsxs(kt,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700 border-blue-200",children:[pe.documents.length," file",pe.documents.length>1?"s":""]}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No docs"})}),e.jsx(q,{className:"text-center",children:e.jsxs("div",{className:"flex justify-center space-x-1 sm:space-x-2",children:[(pe.audioRecording||pe.audioFiles&&pe.audioFiles.length>0)&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>{var xe;let Z="";if((xe=pe.audioRecording)!=null&&xe.url)Z=pe.audioRecording.url,console.log(" Using audioRecording URL:",Z);else if(pe.audioFiles&&pe.audioFiles.length>0){const Ce=pe.audioFiles[0];"filePath"in Ce&&Ce.filePath?(Z=Ja(Ce.filePath),console.log(" Using audioFile filePath:",Ce.filePath,"-> URL:",Z)):Ce instanceof pn?(Z=URL.createObjectURL(Ce),console.log(" Created blob URL from File object:",Z)):"name"in Ce&&Ce.name&&(Z=Ja(`uploads/medical-history-audio/${Ce.name}`),console.log(" Constructed server URL from name:",Ce.name,"-> URL:",Z))}Z?(console.log(" Final audio URL for playback:",Z),K(Z,pe.id)):(console.error(" No valid audio URL found for record:",pe.id),Te({title:"Audio Not Found",description:"No valid audio file found for this record.",variant:"destructive"}))},title:"Play Audio",className:"action-btn-lead bg-green-50 hover:bg-green-100 text-green-600 border border-green-200",children:de===pe.id?e.jsx(Jf,{className:"w-3 h-3 sm:w-4 sm:h-4"}):e.jsx(Ju,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>{var xe;let Z="";if((xe=pe.audioRecording)!=null&&xe.url)Z=pe.audioRecording.url;else if(pe.audioFiles&&pe.audioFiles.length>0){const Ce=pe.audioFiles[0];"filePath"in Ce&&Ce.filePath?Z=Ja(Ce.filePath):Ce instanceof pn?Z=URL.createObjectURL(Ce):"name"in Ce&&Ce.name&&(Z=Ja(`uploads/medical-history-audio/${Ce.name}`))}Z&&_(Z,`${pe.patientName}-audio`)},title:"Download Audio",className:"action-btn-lead bg-blue-50 hover:bg-blue-100 text-blue-600 border border-blue-200",children:e.jsx(Cs,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]}),pe.documents.length>0&&e.jsx("div",{className:"flex space-x-1",children:e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>{pe.documents.forEach((Z,xe)=>{if(Z.filePath){const Ce=Ja(Z.filePath),Qe=document.createElement("a");Qe.href=Ce,Qe.download=Z.name,Qe.target="_blank",Qe.click()}else if(Z.data){const Ce=atob(Z.data),Qe=new Array(Ce.length);for(let Nt=0;Nt<Ce.length;Nt++)Qe[Nt]=Ce.charCodeAt(Nt);const ot=new Uint8Array(Qe),et=new Blob([ot],{type:Z.type}),ct=URL.createObjectURL(et),Kt=document.createElement("a");Kt.href=ct,Kt.download=Z.name,Kt.click(),URL.revokeObjectURL(ct)}else console.warn("Document data not available for download:",Z.name)})},title:"Download All Documents",className:"action-btn-lead bg-purple-50 hover:bg-purple-100 text-purple-600 border border-purple-200",children:e.jsx(pn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})}),pe.documents&&pe.documents.length>0&&e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>{try{const Z=pe.documents[0];if(Z&&Z.filePath){const xe=Ja(Z.filePath);window.open(xe,"_blank")}else if(Z&&Z.data){const xe=atob(Z.data),Ce=new Array(xe.length);for(let ct=0;ct<xe.length;ct++)Ce[ct]=xe.charCodeAt(ct);const Qe=new Uint8Array(Ce),ot=new Blob([Qe],{type:Z.type||"application/octet-stream"}),et=URL.createObjectURL(ot);window.open(et,"_blank"),setTimeout(()=>URL.revokeObjectURL(et),1e3)}}catch(Z){console.error("Error opening document:",Z),Te({title:"Error",description:"Failed to open document",variant:"destructive"})}},title:"View Document",className:"action-btn-lead action-btn-view",children:e.jsx(vs,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>Xe(pe),title:"Delete Medical Record",className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(mt,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},pe.id)),Lt.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-8 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(It,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"No medical records found"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Medical records will appear here when added"})]})]})})})]})]})})]}),ue.audioRecording&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(ll,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),"Audio Recording"]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-3 sm:p-4 md:p-6 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-sm p-3 sm:p-4 rounded-lg border border-blue-200 mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ll,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:ue.audioRecording.fileName||"Audio Recording"}),e.jsxs("p",{className:"text-xs sm:text-sm text-blue-600",children:["Duration: ",Yt(ue.audioRecording.duration),"  Audio File"]})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 mb-4 sm:mb-6",children:[e.jsx(P,{variant:"outline",onClick:()=>{var pe;(pe=ue.audioRecording)!=null&&pe.url&&K(ue.audioRecording.url,ue.id)},className:"bg-white/90 backdrop-blur-sm border-blue-200 hover:bg-blue-50 flex items-center gap-2",children:de===ue.id?e.jsxs(e.Fragment,{children:[e.jsx(Jf,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Pause"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ju,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Play"})]})}),e.jsxs(P,{variant:"outline",onClick:()=>{var pe;(pe=ue.audioRecording)!=null&&pe.url&&_(ue.audioRecording.url,`${ue.patientName}-${ue.audioRecording.fileName||"audio.wav"}`)},className:"bg-blue-50/90 backdrop-blur-sm border-blue-200 hover:bg-blue-100 flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Download"})]}),e.jsx(P,{variant:"outline",onClick:()=>{const pe=[.5,1,1.25,1.5,2],qe=pe.indexOf(_e),Z=pe[(qe+1)%pe.length];ze(Z),dt.current&&de===ue.id&&(dt.current.playbackRate=Z)},className:"bg-white/90 backdrop-blur-sm border-purple-200 hover:bg-purple-50 flex items-center gap-2",title:`Playback Speed: ${_e}x`,children:e.jsxs("span",{className:"text-sm font-mono text-purple-600 font-bold",children:[_e,"x"]})}),ue.audioRecording&&e.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-3 py-2 rounded-lg border border-gray-200",children:e.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:["Duration: ",Yt(ue.audioRecording.duration)]})})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm p-3 sm:p-4 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 mb-3",children:e.jsxs(ae,{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[e.jsx(ll,{className:"h-4 w-4 text-purple-600"}),"Playback Speed:"]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[1,1.25,1.5,2,2.5,3].map(pe=>e.jsxs(P,{variant:_e===pe?"default":"outline",size:"sm",onClick:()=>De(pe),className:`px-3 py-2 text-sm font-medium transition-all duration-200 ${_e===pe?"bg-gradient-to-r from-purple-500 to-blue-500 text-white shadow-md transform scale-105":"bg-white/90 backdrop-blur-sm border-gray-200 hover:bg-gray-50 text-gray-700"}`,children:[pe,"x"]},pe))}),de===ue.id&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:e.jsxs("span",{className:"text-xs text-blue-600 font-medium flex items-center gap-1",children:[e.jsx(Ju,{className:"h-3 w-3"}),"Playing at ",_e,"x speed"]})})]})]})]}),ue.documents.length>0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-green-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(pn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Documents & Media Files"]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 p-3 sm:p-4 md:p-6 rounded-lg border border-green-200",children:[ue.documents.filter(pe=>{var qe;return(qe=pe.type)==null?void 0:qe.startsWith("image/")}).length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-800 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-blue-600"}),"Photo Gallery"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4",children:ue.documents.filter(pe=>{var qe;return(qe=pe.type)==null?void 0:qe.startsWith("image/")}).map((pe,qe)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-full h-20 sm:h-24 md:h-28 bg-white/90 backdrop-blur-sm rounded-lg border-2 border-blue-200 cursor-pointer overflow-hidden hover:border-blue-400 transition-all duration-300 shadow-sm hover:shadow-md",onClick:()=>{if(pe.filePath){const Z=Ja(pe.filePath);window.open(Z,"_blank")}},children:pe.filePath?e.jsx("img",{src:Ja(pe.filePath),alt:pe.name,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:e.jsx(pn,{className:"w-6 h-6 text-gray-400"})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 rounded-lg transition-all duration-300 flex items-center justify-center",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm p-2 rounded-full shadow-lg transform scale-90 group-hover:scale-100 transition-transform",children:e.jsx(vs,{className:"w-4 h-4 text-blue-600"})})}),e.jsx("p",{className:"text-xs text-center mt-2 text-gray-600 font-medium truncate",children:pe.name})]},`photo-${qe}`))})]}),ue.documents.filter(pe=>{var qe;return!((qe=pe.type)!=null&&qe.startsWith("image/"))}).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm sm:text-base font-bold text-gray-800 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-purple-600"}),"Document Files"]}),e.jsx("div",{className:"grid gap-3 sm:gap-4",children:ue.documents.filter(pe=>{var qe;return!((qe=pe.type)!=null&&qe.startsWith("image/"))}).map((pe,qe)=>e.jsx("div",{className:"bg-white/90 backdrop-blur-sm p-3 sm:p-4 rounded-lg border border-purple-200 hover:border-purple-300 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(pn,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:pe.name}),e.jsxs("p",{className:"text-xs text-purple-600",children:[(pe.size/1024).toFixed(1)," KB  ",pe.type]})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{if(pe.filePath){const Z=Ja(pe.filePath),xe=document.createElement("a");xe.href=Z,xe.download=pe.name,xe.target="_blank",xe.click()}else if(pe.data){const Z=atob(pe.data),xe=new Array(Z.length);for(let ct=0;ct<Z.length;ct++)xe[ct]=Z.charCodeAt(ct);const Ce=new Uint8Array(xe),Qe=new Blob([Ce],{type:pe.type}),ot=URL.createObjectURL(Qe),et=document.createElement("a");et.href=ot,et.download=pe.name,et.click(),URL.revokeObjectURL(ot)}else console.warn("Document data not available for download:",pe.name),alert("This document cannot be downloaded as it was uploaded before file storage was implemented.")},className:"action-btn-lead bg-blue-50 hover:bg-blue-100 text-blue-600 border border-blue-200",title:"Download Document",children:e.jsx(Cs,{className:"w-4 h-4"})})]})},`doc-${qe}`))})]})]})]})]})]})}),e.jsx($t,{open:ft,onOpenChange:He,children:e.jsxs(Ot,{className:"sm:max-w-[400px] bg-gradient-to-br from-white to-blue-50/30 backdrop-blur-xl border-0 shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 via-blue-500 to-indigo-500 p-4 -mt-6 -mx-6 mb-4 rounded-t-lg",children:e.jsxs(Ut,{children:[e.jsxs(Bt,{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(Pt,{className:"h-5 w-5"}),"Select Month & Year"]}),e.jsx(Vt,{className:"text-blue-100",children:"Choose the time period for medical history records"})]})}),e.jsxs("div",{className:"flex flex-col gap-4 py-2",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Month"}),e.jsx("select",{className:"w-full bg-white/90 backdrop-blur-sm border border-blue-200 rounded-lg px-3 py-2 focus:border-blue-400 focus:ring-2 focus:ring-blue-300 transition-all",value:Ne,onChange:pe=>rt(Number(pe.target.value)),children:X.map((pe,qe)=>e.jsx("option",{value:qe,children:pe},pe))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Year"}),e.jsx("select",{className:"w-full bg-white/90 backdrop-blur-sm border border-purple-200 rounded-lg px-3 py-2 focus:border-purple-400 focus:ring-2 focus:ring-purple-300 transition-all",value:Be,onChange:pe=>We(Number(pe.target.value)),children:[...Array(10)].map((pe,qe)=>e.jsx("option",{value:ne-5+qe,children:ne-5+qe},ne-5+qe))})]})]}),e.jsxs(zt,{className:"flex gap-2 pt-4",children:[e.jsxs(P,{type:"button",onClick:()=>{Oe(Ne),it(Be),He(!1)},className:"action-btn-lead action-btn-primary",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Apply Filter"]}),e.jsx(P,{type:"button",onClick:()=>He(!1),variant:"outline",className:"flex-1 bg-white/90 backdrop-blur-sm border-gray-200 hover:bg-gray-50",children:"Cancel"}),e.jsx(P,{type:"button",variant:"outline",onClick:()=>{Oe(null),it(null),He(!1)},className:"flex-1 bg-white/90 backdrop-blur-sm border-red-200 hover:bg-red-50 text-red-600",children:"Clear Filter"})]})]})]})}),e.jsx($t,{open:je,onOpenChange:b,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Medical Record"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this medical record? This action cannot be undone."})]})]})}),se&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:se.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:se.patientName||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:se.date||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:se.category||"Medical Record"})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>b(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:tt,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Record"]})]})]})}),e.jsx($s,{open:L,onOpenChange:he,selectedMonth:oe,selectedYear:me,onMonthChange:ge,onYearChange:H,onApply:()=>{ke(oe),O(me),he(!1),Us()},title:"Select Month & Year",description:"Filter patient history records by specific month and year",previewText:"history records"})]})})},Ul="http://localhost:4000/api",Uo={async getAll(t,s,a,r){try{const n=new URLSearchParams;t&&n.append("month",t.toString()),s&&n.append("year",s.toString()),a&&n.append("page",a.toString()),r&&n.append("limit",r.toString());const l=`${Ul}/patient-payments/all${n.toString()?`?${n.toString()}`:""}`,i=await fetch(l);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()}catch(n){throw console.error("Error fetching patient payments:",n),n}},async recordPayment(t){try{const s=await fetch(`${Ul}/patient-payments/record-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error recording payment:",s),s}},async getPaymentHistory(t){try{const s=await fetch(`${Ul}/patient-payments/history/${t}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error fetching payment history:",s),s}},async deletePayment(t){try{const s=await fetch(`${Ul}/patient-payments/${t}`,{method:"DELETE"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error deleting payment:",s),s}},async updatePayment(t,s){try{const a=await fetch(`${Ul}/patient-payments/payment/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error updating payment:",a),a}},async saveMonthlyRecords(t,s){try{const a=await fetch(`${Ul}/patient-payments/save-monthly-records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:t,year:s})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error saving monthly records:",a),a}},async autoCarryForward(t,s){try{const a=await fetch(`${Ul}/patient-payments/auto-carry-forward/${t}/${s}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error in auto carry forward:",a),a}},async checkCarryForward(t,s){try{const a=await fetch(`${Ul}/patient-payments/carry-forward/${t}/${s}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error checking carry forward:",a),a}}},_z=()=>{var Ae;const[t,s]=m.useState([]),[a,r]=m.useState(""),[n,l]=m.useState([]),[i,o]=m.useState(null),[c,d]=m.useState(!1),[u,x]=m.useState({date:new Date().toISOString().split("T")[0],amount:"",type:"fee_payment"}),[p,h]=m.useState(!1),[y,f]=m.useState([]),[v,w]=m.useState(!1),[g,j]=m.useState(!1),[N,E]=m.useState(new Date().getMonth()+1),[C,k]=m.useState(new Date().getFullYear()),[A,T]=m.useState(!1),[M,X]=m.useState(null),[ne,Q]=m.useState(!1),oe=10,ge=["January","February","March","April","May","June","July","August","September","October","November","December"],[me,H]=m.useState([]),[L,he]=m.useState({totalPatients:0,totalTestReportAmount:0,totalPaid:0,totalPending:0}),[ie,ke]=m.useState(!0),[V,O]=m.useState(null),[Y,W]=m.useState(1),[ue,U]=m.useState(0),[z,te]=m.useState(new Date().getMonth()+1),[se,J]=m.useState(new Date().getFullYear()),je=10,b=async()=>{try{ke(!0),O(null);const Ee=await Uo.getAll(z,se,Y,je),Se=(Ee.payments||[]).map(B=>({id:B.patient_id,name:B.patient_name,phone:B.phone||"",email:B.email||"",photo:B.photo||"",admissionDate:B.admissionDate||B.admission_date||"",monthlyFees:B.fees||0,otherFees:B.month_specific_other_fees||0,totalAmount:B.total_amount||0,balance:B.amount_pending||0,advance_amount:(B.amount_paid||0).toString(),carry_forward:(B.carry_forward||0).toString(),total_paid:(B.amount_paid||0).toString(),payment_mode:B.payment_method||"",status:B.payment_status==="completed"?"Paid":"Pending"}));H(Se),he(Ee.stats||{totalPatients:0,totalTestReportAmount:0,totalPaid:0,totalPending:0}),U(Math.ceil((Ee.totalCount||0)/je))}catch(Ee){console.error("Error loading patients:",Ee),O("Failed to load patient data"),Te({title:"Error",description:"Failed to load patient payment data",variant:"destructive"})}finally{ke(!1)}},S=async()=>{await b()},D=async()=>{W(1),await b()},R=async(Ee,Se,B,Ye)=>{try{await Uo.recordPayment({patientId:Ee,amount:Se,method:B,notes:Ye}),Te({title:"Success",description:"Payment recorded successfully"}),await S()}catch(Ne){console.error("Error recording payment:",Ne),Te({title:"Error",description:"Failed to record payment",variant:"destructive"})}},F=Ee=>{W(Ee)},I=Ee=>{te(Ee),W(1)},ce=Ee=>{J(Ee),W(1)};js("Patient Payment Management"),m.useEffect(()=>{b()},[]),m.useEffect(()=>{Y>1&&b()},[Y]),m.useEffect(()=>{console.log(" Month/Year changed, reloading data:",z,se),b()},[z,se]),m.useEffect(()=>{me.length>0&&(console.log(" Auto-triggering carry forward for month/year change:",z,se),ve())},[z,se]),m.useEffect(()=>{de()},[me,a]),m.useEffect(()=>{W(1)},[a,me]);const de=()=>{let Ee=me;a&&(Ee=Ee.filter(Se=>Se.name.toLowerCase().includes(a.toLowerCase())||Se.id.toLowerCase().includes(a.toLowerCase()))),Ee.sort((Se,B)=>{const Ye=Ne=>{if(!Ne)return 0;const rt=Ne.match(/P(\d+)/);return rt?parseInt(rt[1],10):0};return Ye(Se.id)-Ye(B.id)}),l(Ee)},ve=async()=>{try{const Ee=z,Se=se,B=await Uo.checkCarryForward(Ee,Se);if(B.success&&B.data.length>0){const Ye=B.totalCarryForward.toFixed(2);Te({title:`Carry Forward Available for ${ge[Ee-1]} ${Se}`,description:`${B.data.length} patients have ${parseFloat(Ye).toLocaleString()} total carry forward amount`})}}catch(Ee){console.error("Error checking carry forward:",Ee)}},_e=Ee=>{console.log(" Patient selected for payment:",Ee),o(Ee),E(z),k(se),x({date:new Date().toISOString().split("T")[0],amount:"",type:"fee_payment"}),d(!0),ze(Ee.id)},ze=async Ee=>{try{w(!0);const Se=await Uo.getPaymentHistory(Ee);f(Se.history||[])}catch(Se){console.error("Error fetching payment history:",Se)}finally{w(!1)}},be=Ee=>{if(typeof Ee=="number")return Ee;if(typeof Ee=="string"){const Se=Ee.replace(/[^\d.-]/g,""),B=parseFloat(Se);return isNaN(B)?0:B}return 0},Me=async()=>{if(!i||!u.amount||!u.date){Te({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}h(!0);try{await R(i.id,parseFloat(u.amount),"bank_transfer",`Payment for ${u.type}`),Te({title:"Success",description:"Payment recorded successfully"}),x({date:new Date().toISOString().split("T")[0],amount:"",type:"fee_payment"}),d(!1),b(),i&&ze(i.id)}catch(Ee){console.error("Error recording payment:",Ee),Te({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{h(!1)}},Je=async()=>{if(M){Q(!0);try{await Uo.deletePayment(M.id),Te({title:"Success",description:"Payment deleted successfully"}),b(),i&&ze(i.id),T(!1),X(null)}catch(Ee){console.error("Error deleting payment:",Ee),Te({title:"Error",description:"Failed to delete payment",variant:"destructive"})}finally{Q(!1)}}},vt=async()=>{try{ke(!0);const Ee=z!==null?z:new Date().getMonth()+1,Se=se!==null?se:new Date().getFullYear(),B=await Uo.saveMonthlyRecords(Ee,Se);if(B.success){const Ye=ge[Ee-1],Ne=`${B.recordsProcessed||0} patient records processed`,rt=B.carryForwardUpdates?`, ${B.carryForwardUpdates} with carry-forward`:"";Te({title:"Success",description:`Monthly records saved successfully for ${Ye} ${Se}! ${Ne}${rt}`}),B.carryForwardUpdates>0&&setTimeout(()=>{Te({title:"Carry Forward Info",description:`${B.carryForwardUpdates} patients have balance amounts that will carry forward to the next month`})},1e3),b()}else Te({title:"Error",description:B.message||"Failed to save monthly records. Please try again.",variant:"destructive"})}catch(Ee){console.error("Error saving monthly records:",Ee),Te({title:"Error",description:"Failed to save monthly records. Please check your connection and try again.",variant:"destructive"})}finally{ke(!1)}},Le=()=>{const Ee=n.map((Ne,rt)=>({"S.No":rt+1,"Patient ID":Ne.id,Name:Ne.name,Phone:Ne.phone,Email:Ne.email,"Monthly Fees":`${be(Ne.monthlyFees).toLocaleString()}`,"Total Paid":`${be(Ne.total_paid).toLocaleString()}`,"Advance Amount":`${be(Ne.advance_amount).toLocaleString()}`,Balance:`${be(Ne.balance).toLocaleString()}`,Status:Ne.status,"Admission Date":Ne.admissionDate})),Se=nn.json_to_sheet(Ee),B=nn.book_new();nn.book_append_sheet(B,Se,"Patient Payment Report");const Ye=new Date(se,z-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});zh(B,`Patient_Payment_Report_${Ye.replace(" ","_")}.xlsx`)};return ie?e.jsx(Gr,{message:"Loading patient payment data..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Patient Payment Management"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsxs(P,{onClick:vt,disabled:ie,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-3 sm:px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",title:`Save monthly records for ${ge[z-1]} ${se}`,children:[e.jsx(Sl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsxs("span",{className:"hidden lg:inline",children:["Save Monthly - ",ge[z-1]," ",se]}),e.jsxs("span",{className:"hidden sm:inline lg:hidden",children:["Save ",ge[z-1]]}),e.jsx("span",{className:"sm:hidden",children:"Save"})]}),e.jsx(Ht.MonthYear,{onClick:()=>j(!0),text:`${ge[z-1]} ${se}`}),e.jsxs(P,{onClick:Le,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-3 sm:px-4 py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Patients"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:L.totalPatients}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[ge[z-1]," ",se]})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Fees"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:["",L.totalTestReportAmount.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(cs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[ge[z-1]," ",se]})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-purple",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-700 mb-1 truncate",children:"Total Paid"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-purple-900 mb-1",children:["",L.totalPaid.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[e.jsx(Xs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[ge[z-1]," ",se]})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-purple",children:e.jsx(Xs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Total Pending"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:["",L.totalPending.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[ge[z-1]," ",se]})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search patients by name or ID...",value:a,onChange:Ee=>r(Ee.target.value),className:"pl-10 w-full"})]})})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(ts,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Patient Payment Management - ",ge[z-1]," ",se," (",n.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:[ge[z-1]," ",se," (",n.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50/80 hover:bg-gray-50",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"S.No"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Profile"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Admission Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Patient ID"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Patient Name"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Monthly Fees"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Other Fees"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Carry Forward"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Total Paid"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Balance"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Status"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Actions"})]})}),e.jsx(os,{children:n.length>0?n.slice((Y-1)*oe,Y*oe).map((Ee,Se)=>{const B=be(Ee.balance);be(Ee.advance_amount);const Ye=be(Ee.carry_forward),Ne=be(Ee.total_paid),rt=be(Ee.monthlyFees),Be=be(Ee.otherFees),We=(Y-1)*oe+Se+1;return e.jsxs(nt,{className:"hover:bg-gray-50/80 transition-colors duration-200 group",children:[e.jsx(q,{className:"py-4 px-6 text-center font-medium text-gray-900",children:We}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(El,{photoPath:Ee.photo,alt:Ee.name,className:"w-10 h-10 border-2 border-green-200 shadow-sm rounded-full object-cover",showPlaceholder:!0})})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:Ee.admissionDate?wt(new Date(Ee.admissionDate),"dd/MM/yyyy"):"-"})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx(kt,{variant:"outline",className:"text-blue-600 border-blue-200 bg-blue-50",children:Ee.id})}),e.jsx(q,{className:"py-4 px-6 text-center font-medium text-gray-900",children:Ee.name}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",rt.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-orange-600",children:["",Be.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-purple-600",children:["",Ye.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["",Ne.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:`text-sm font-medium ${B>0?"text-red-600":"text-green-600"}`,children:["",B.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx(kt,{className:`text-xs ${B>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:B>0?"Pending":"Paid"})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx(P,{size:"sm",variant:"outline",onClick:()=>_e(Ee),className:"action-btn-lead action-btn-add h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Record Payment",children:e.jsx(ts,{className:"h-3 w-3"})})})})]},Ee.id)}):e.jsx(nt,{children:e.jsx(q,{colSpan:12,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Rt,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patients found"}),e.jsx("p",{className:"text-gray-500",children:"No patients match your search criteria."})]})]})})})})]})}),Math.ceil(n.length/oe)>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(Y-1)*oe+1," to ",Math.min(Y*oe,n.length)," of ",n.length," patients"]}),e.jsxs("span",{className:"sm:hidden",children:[Y," / ",Math.ceil(n.length/oe)]})]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>F(Math.max(1,Y-1)),disabled:Y===1,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,Math.ceil(n.length/oe))},(Ee,Se)=>{const B=Se+Math.max(1,Y-2);return B>Math.ceil(n.length/oe)?null:e.jsx(P,{variant:Y===B?"default":"outline",size:"sm",onClick:()=>F(B),className:`w-8 h-8 p-0 text-xs ${Y===B?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-white hover:bg-gray-50 text-gray-600 border-gray-300"}`,children:B},B)})}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>F(Math.min(Math.ceil(n.length/oe),Y+1)),disabled:Y===Math.ceil(n.length/oe),className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"})]})]})]})]})]}),e.jsx($s,{open:g,onOpenChange:j,selectedMonth:z,selectedYear:se,onMonthChange:I,onYearChange:ce,onApply:async()=>{j(!1),await D()},title:"Select Month & Year",description:"Select month and year for patient payment data",previewText:"patient records"}),c&&i&&zr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{zIndex:9999,position:"fixed",top:0,left:0,right:0,bottom:0},onClick:()=>d(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:Ee=>Ee.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 md:h-8 md:w-8 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 mb-1",children:"Payment Management"}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["Patient: ",e.jsx("span",{className:"font-semibold text-blue-600",children:i.name}),"  ID: ",i.id]}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:"New Transaction"})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-120px)] custom-scrollbar",children:e.jsxs("div",{className:"p-4 lg:p-6 space-y-6",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 lg:p-6 border border-blue-200 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full overflow-hidden border-4 border-white shadow-lg flex-shrink-0",children:e.jsx(El,{photoPath:i.photo||"",alt:i.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:i.name}),e.jsxs("p",{className:"text-base text-gray-600 mb-3",children:["Patient ID: ",i.id]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(kt,{className:"bg-blue-100 text-blue-800 text-sm",children:[" ",i.phone||"N/A"]}),i.email&&e.jsxs(kt,{className:"bg-green-100 text-green-800 text-sm",children:[" ",i.email]}),i.admissionDate&&e.jsxs(kt,{className:"bg-purple-100 text-purple-800 text-sm",children:[" ",new Date(i.admissionDate).toLocaleDateString("en-IN")]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl border border-green-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(cs,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Monthly Fees"})})]}),e.jsxs("p",{className:"text-lg font-bold text-green-900",children:["",be(i.monthlyFees||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-xl border border-orange-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(st,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-xs font-semibold text-orange-700 uppercase tracking-wide",children:"Other Fees"})})]}),e.jsxs("p",{className:"text-lg font-bold text-orange-900",children:["",be(i.otherFees||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Xs,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-xs font-semibold text-blue-700 uppercase tracking-wide",children:"Total Paid"})})]}),e.jsxs("p",{className:"text-lg font-bold text-blue-900",children:["",be(i.total_paid||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-xl border border-red-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx($r,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-xs font-semibold text-red-700 uppercase tracking-wide",children:"Balance"})})]}),e.jsxs("p",{className:"text-lg font-bold text-red-900",children:["",be(i.balance||0).toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 lg:p-6 border border-blue-200 shadow-lg",children:[e.jsxs("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(us,{className:"h-3 w-3 md:h-4 md:w-4 text-green-600"})}),"Record New Payment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-4 rounded-xl border border-blue-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-blue-600 mb-2 uppercase tracking-wide",children:"Payment Date *"}),e.jsx(Ve,{type:"date",value:u.date,onChange:Ee=>x(Se=>({...Se,date:Ee.target.value})),className:"w-full border-blue-200 focus:border-blue-400 focus:ring-blue-400"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-4 rounded-xl border border-green-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-green-600 mb-2 uppercase tracking-wide",children:"Amount () *"}),e.jsx(Ve,{type:"number",placeholder:"Enter payment amount",value:u.amount,onChange:Ee=>x(Se=>({...Se,amount:Ee.target.value})),className:"w-full border-green-200 focus:border-green-400 focus:ring-green-400"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl border border-purple-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-purple-600 mb-2 uppercase tracking-wide",children:"Payment Type *"}),e.jsxs(At,{value:u.type,onValueChange:Ee=>x(Se=>({...Se,type:Ee})),children:[e.jsx(Et,{className:"w-full border-purple-200 focus:border-purple-400",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsxs(Dt,{className:"z-[99999]",style:{zIndex:2147483647,position:"relative"},children:[e.jsx(Pe,{value:"fee_payment",children:"Fee Payment"}),e.jsx(Pe,{value:"advance_payment",children:"Advance Payment"}),e.jsx(Pe,{value:"partial_payment",children:"Partial Payment"})]})]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx(P,{onClick:Me,disabled:p||!u.amount||!u.date,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 text-lg font-semibold shadow-lg",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Recording Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"h-5 w-5 mr-2"}),"Record Payment"]})})})]}),N!==null&&C!==null&&e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 lg:p-6 border border-blue-200 shadow-lg",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 text-center text-lg",children:["Payment Calculation for ",ge[N-1]," ",C]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Monthly Fees"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["",be(i.monthlyFees||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-200 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Other Fees"}),e.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["",be(i.otherFees||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Total Amount"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",(be(i.monthlyFees||0)+be(i.otherFees||0)).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-purple-200 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Total Paid Amount"}),e.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["",y.reduce((Ee,Se)=>Ee+be(Se.payment_amount||0),0).toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-3 text-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-semibold text-blue-600",children:["",be(i.monthlyFees||0).toLocaleString("en-IN")]}),e.jsx("span",{className:"text-gray-500",children:"+"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",be(i.otherFees||0).toLocaleString("en-IN")]}),e.jsx("span",{className:"text-gray-500",children:"="}),e.jsxs(kt,{className:"bg-green-100 text-green-800 text-lg px-3 py-1 font-bold",children:["",(be(i.monthlyFees||0)+be(i.otherFees||0)).toLocaleString("en-IN")]})]}),e.jsx("div",{className:"hidden lg:block w-px h-8 bg-gray-300"}),e.jsx("div",{className:"block lg:hidden w-full h-px bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Total Paid:"}),e.jsxs(kt,{className:"bg-purple-100 text-purple-800 text-lg px-3 py-1 font-bold",children:["",y.reduce((Ee,Se)=>Ee+be(Se.payment_amount||0),0).toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"text-center text-xs text-gray-500 mt-3 space-y-1",children:[e.jsx("p",{children:"Monthly Fees + Other Fees = Total Amount"}),e.jsx("p",{className:"text-purple-600 font-medium",children:"Total Paid Amount = Sum of All Payments Made"})]})]})]}),y.length>0&&e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 lg:p-6 border border-blue-200 shadow-lg",children:[e.jsxs("h3",{className:"text-lg md:text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(wr,{className:"h-3 w-3 md:h-4 md:w-4 text-purple-600"})}),"Payment History"]}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"S.No"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Amount ()"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Payment Mode"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Notes"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map((Ee,Se)=>{var B;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center font-medium",children:Se+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:new Date(Ee.payment_date).toLocaleDateString("en-IN")}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-green-600 text-center",children:["",be(Ee.payment_amount).toLocaleString("en-IN")]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(kt,{className:`text-xs font-medium px-2 py-1 rounded-full border
                                      ${Ee.type==="fee_payment"?"border-blue-200 text-blue-700 bg-blue-50":""}
                                      ${Ee.type==="advance_payment"?"border-orange-200 text-orange-700 bg-orange-50":""}
                                      ${Ee.type==="partial_payment"?"border-purple-200 text-purple-700 bg-purple-50":""}
                                    `,children:((B=Ee.type)==null?void 0:B.replace("_"," "))||"fee payment"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:Ee.payment_mode||"Bank Transfer"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:Ee.notes||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:[new Date(Ee.created_at).toLocaleDateString("en-IN")," ",new Date(Ee.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(P,{size:"sm",variant:"outline",onClick:()=>{X(Ee),T(!0)},className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete payment record",children:e.jsx(mt,{className:"h-4 w-4 sm:h-4 sm:w-4"})})})]},Ee.id)})})]})})]})]})})]})}),document.body),A&&zr.createPortal(e.jsx("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4 bg-black bg-opacity-50",style:{zIndex:2147483647,position:"fixed",top:0,left:0,right:0,bottom:0},onClick:()=>{T(!1),X(null)},children:e.jsx("div",{className:"relative z-[100000] w-full max-w-md mx-auto",style:{zIndex:2147483647},onClick:Ee=>Ee.stopPropagation(),children:e.jsx("div",{className:"bg-white rounded-lg shadow-2xl border-0 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(mt,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700",children:"Delete Payment Record"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to delete this payment record? This action cannot be undone."})]})]}),M&&e.jsx("div",{className:"my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Amount:"}),e.jsxs("p",{className:"font-bold text-green-600",children:["",be(M.payment_amount).toLocaleString("en-IN")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Date:"}),e.jsx("p",{className:"text-gray-900",children:new Date(M.payment_date).toLocaleDateString("en-IN")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Type:"}),e.jsx("p",{className:"text-gray-900",children:((Ae=M.type)==null?void 0:Ae.replace("_"," "))||"fee payment"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Mode:"}),e.jsx("p",{className:"text-gray-900",children:M.payment_mode||"Bank Transfer"})]})]})}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(P,{variant:"outline",onClick:()=>{T(!1),X(null)},disabled:ne,className:"px-4 py-2",children:"Cancel"}),e.jsx(P,{variant:"destructive",onClick:Je,disabled:ne,className:"px-4 py-2 bg-red-600 hover:bg-red-700",children:ne?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Delete Payment"]})})]})]})})})}),document.body)]})})};class Ed{static async getAllPatientCallRecords(){try{const s=await fetch(`${this.baseUrl}/patient-call-records`);if(!s.ok){const a=await s.text();throw new Error(`Failed to fetch call records: ${a}`)}return await s.json()}catch(s){throw console.error("Error fetching call records:",s),s}}static async addPatientCallRecord(s){try{const a=await fetch(`${this.baseUrl}/patient-call-records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add call record");return await a.json()}catch(a){throw console.error("Error adding call record:",a),a}}static async updatePatientCallRecord(s,a){try{const r=await fetch(`${this.baseUrl}/patient-call-records/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update call record");return await r.json()}catch(r){throw console.error("Error updating call record:",r),r}}static async deletePatientCallRecord(s){try{console.log(" CallRecordService: Attempting to delete record ID:",s),console.log(" CallRecordService: Delete URL:",`${this.baseUrl}/patient-call-records/${s}`);const a=await fetch(`${this.baseUrl}/patient-call-records/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log(" CallRecordService: Response status:",a.status),console.log(" CallRecordService: Response headers:",Object.fromEntries(a.headers.entries())),!a.ok){const n=await a.text();throw console.error(" CallRecordService: Error response:",n),new Error(`Failed to delete call record: ${a.status} ${a.statusText} - ${n}`)}const r=await a.json();return console.log(" CallRecordService: Delete successful:",r),!0}catch(a){throw console.error(" CallRecordService: Error deleting call record:",a),a}}}Gm(Ed,"baseUrl","http://localhost:4000/api");const Pz=()=>{const[t,s]=m.useState(1),a=10,[r,n]=m.useState([]),[l,i]=m.useState([]),[o,c]=m.useState([]),[d,u]=m.useState(""),[x,p]=m.useState(0),[h,y]=m.useState(!1),[f,v]=m.useState(!1),[w,g]=m.useState(!1),[j,N]=m.useState(!1),E=["January","February","March","April","May","June","July","August","September","October","November","December"],C=new Date().getFullYear(),k=new Date().getMonth()+1,[A,T]=m.useState(k),[M,X]=m.useState(C),[ne,Q]=m.useState(!1),[oe,ge]=m.useState(k),[me,H]=m.useState(C),[L,he]=m.useState(k),[ie,ke]=m.useState(C),[V,O]=m.useState(!1),[Y,W]=m.useState(null),[ue,U]=m.useState(null),[z,te]=m.useState(!1),[se,J]=m.useState(null),[je,b]=m.useState(null),[S,D]=m.useState(null),[R,F]=m.useState(!1),[I,ce]=m.useState(!1),[de,ve]=m.useState(0),[_e,ze]=m.useState(null),[be,Me]=m.useState(null),[Je,vt]=m.useState(1),[Le,Ae]=m.useState(null),[Ee,Se]=m.useState({patientId:"",description:"",date:new Date().toISOString().split("T")[0],audioFiles:[]});m.useEffect(()=>{s(1)},[d,oe,me]),m.useRef(null),m.useRef(null);const B=m.useRef(null),Ye=$e=>`P${(typeof $e=="string"?parseInt($e.replace(/^P0*/,"")):$e).toString().padStart(4,"0")}`,Ne=$e=>$e?$e.startsWith("data:image/")||$e.startsWith("http")?$e:Ja($e):"",rt=$e=>{if($e){const we=Array.from($e),K=500*1024*1024;if(we.filter(_=>_.size>K).length>0){Te({title:"File Size Error",description:"Files larger than 500MB are not allowed. Please select smaller files.",variant:"destructive"});return}Se(_=>({..._,audioFiles:[..._.audioFiles,...we]}))}},Be=$e=>{Se(we=>({...we,audioFiles:we.audioFiles.filter((K,De)=>De!==$e)}))};m.useEffect(()=>{je&&je.patientId&&(console.log(" Auto-setting patient ID for view dialog:",je.patientId),Se($e=>({...$e,patientId:String(je.patientId)})))},[je]),m.useEffect(()=>{(async()=>{try{console.log("Starting data load for PatientCallRecord...");const[we,K]=await Promise.allSettled([it(),dt()]);we.status==="rejected"&&console.error("Failed to load patients:",we.reason),K.status==="rejected"&&console.error("Failed to load records:",K.reason),console.log("Data loading completed for PatientCallRecord"),N(!0)}catch(we){console.error("Error in loadData:",we),N(!0)}})()},[]);const We=m.useMemo(()=>{let $e=l;if($e=$e.filter(we=>{const K=r.find(De=>String(De.id)===String(we.patientId));return K&&(K.status==="Active"||K.status==="active")}),d){const we=d.toLowerCase();$e=$e.filter(K=>{const De=r.find(_=>String(_.id)===String(K.patientId));return K.patientName.toLowerCase().includes(we)||K.description.toLowerCase().includes(we)||K.patientId.toLowerCase().includes(we)||(De==null?void 0:De.contactNumber)&&De.contactNumber.toLowerCase().includes(we)||(De==null?void 0:De.uhid)&&De.uhid.toLowerCase().includes(we)})}return oe!==null&&me!==null&&($e=$e.filter(we=>{const K=new Date(we.date);return K.getMonth()===oe-1&&K.getFullYear()===me})),$e.sort((we,K)=>{const De=G=>{if(G==null)return 0;const fe=(typeof G=="string"?G:String(G)).replace(/^P0*/,"");return parseInt(fe)||0},_=De(we.patientId),ee=De(K.patientId);return _-ee}),$e},[l,r,d,oe,me]),ft=Math.ceil(We.length/a),He=(t-1)*a,Ke=He+a,Oe=m.useMemo(()=>{if(!je)return[];let $e=o.filter(we=>{const K=String(je.patientId).replace(/^P0*/,""),De=String(we.patientId).replace(/^P0*/,"");return K===De});return Y!==null&&ue!==null&&($e=$e.filter(we=>{const K=new Date(we.date);return K.getMonth()===Y-1&&K.getFullYear()===ue})),$e.sort((we,K)=>new Date(K.date).getTime()-new Date(we.date).getTime()),$e},[o,je==null?void 0:je.patientId,x,Y,ue]),Ze=$e=>{b($e)},it=async()=>{v(!0);try{console.log("Loading patients from DatabaseService...");const we=(await gt.getAllPatients()).map(K=>{const De=G=>{if(!G)return null;const le=new Date(G);return isNaN(le.getTime())?null:le},_=G=>De(G.admissionDate||G.admission_date)||De(G.created_at)||null;return{id:K.id?String(K.id):"",name:K.name,age:parseInt(K.age)||0,gender:K.gender,phone:K.phone,email:K.email||"",address:K.address,emergencyContact:K.emergency_contact||"",medicalHistory:K.medical_history||"",admissionDate:_(K),status:K.status||"Active",attenderName:K.attender_name||"",attenderPhone:K.attender_phone||"",photo:K.photo||"",fees:parseFloat(K.fees)||0,bloodTest:parseFloat(K.blood_test)||0,pickupCharge:parseFloat(K.pickup_charge)||0,totalAmount:parseFloat(K.total_amount)||0,payAmount:parseFloat(K.pay_amount)||0,balance:parseFloat(K.balance)||0,paymentType:K.payment_type||"",fatherName:K.father_name||"",motherName:K.mother_name||"",attenderRelationship:K.attender_relationship||"",dateOfBirth:De(K.date_of_birth),marriageStatus:K.marriage_status||"",employeeStatus:K.employee_status||"",created_at:De(K.created_at),createdAt:De(K.created_at),contactNumber:K.contact_number||K.phone||"",locality:K.locality||"",city:K.city||"",bloodGroup:K.blood_group||"",occupation:K.occupation||"",guardian:K.guardian||"",guardianPhone:K.guardian_phone||"",referredBy:K.referred_by||"",uhid:K.uhid||"",photoUrl:K.photo_url||""}});n(we),console.log("Patients loaded successfully:",we.length)}catch($e){console.error("Error loading patients:",$e);const we=localStorage.getItem("patients");if(we)try{const K=JSON.parse(we).map(De=>({id:De.id,name:De.name,age:De.age||0,gender:De.gender||"",phone:De.phone||"",email:De.email||"",address:De.address||"",emergencyContact:De.emergencyContact||"",medicalHistory:De.medicalHistory||"",admissionDate:De.admissionDate?new Date(De.admissionDate):void 0,status:De.status||"Active",attenderName:De.attenderName||"",attenderPhone:De.attenderPhone||"",photo:De.photo||"",fees:De.fees||0,bloodTest:De.bloodTest||0,pickupCharge:De.pickupCharge||0,totalAmount:De.totalAmount||0,payAmount:De.payAmount||0,balance:De.balance||0,paymentType:De.paymentType||"",fatherName:De.fatherName||"",motherName:De.motherName||"",attenderRelationship:De.attenderRelationship||"",dateOfBirth:De.dateOfBirth?new Date(De.dateOfBirth):new Date,marriageStatus:De.marriageStatus||"",employeeStatus:De.employeeStatus||"",contactNumber:De.contactNumber||De.phone||"",locality:De.locality||"",city:De.city||"",bloodGroup:De.bloodGroup||"",occupation:De.occupation||"",guardian:De.guardian||"",guardianPhone:De.guardianPhone||"",referredBy:De.referredBy||"",uhid:De.uhid||"",photoUrl:De.photoUrl||""}));n(K),Te({title:"Using Local Data",description:"Loaded patients from local storage due to database connection issue",variant:"default"});return}catch(K){console.error("Failed to parse local storage patients:",K)}n([]),Te({title:"Error",description:`Failed to load patients: ${$e}. No patient data available.`,variant:"destructive"})}finally{v(!1)}},dt=async()=>{g(!0);try{console.log("Loading call records from CallRecordService...");const $e=await Ed.getAllPatientCallRecords(),we=($e&&Array.isArray($e)?$e:[]).map(_=>{console.log(" Processing call record:",_.id,"audio_file_path:",_.audio_file_path,"audio_file_name:",_.audio_file_name);let ee="";if(_.audio_file_path)ee=Ja(_.audio_file_path);else if(_.audio_file_name){const G=`Photos/Patient Call Records/${_.patient_id}/audio/${_.audio_file_name}`;ee=Ja(G)}return console.log(" Constructed audio URL:",ee),{id:_.id,patientId:_.patient_id,patientName:_.patient_name,date:_.date,description:_.description,audioRecording:ee?{blob:null,url:ee,duration:_.audio_duration||0}:void 0,audioFiles:_.audio_file_name?[{name:_.audio_file_name}]:[],createdAt:_.created_at}});c(we);let K=r;if(K.length===0)try{K=(await gt.getAllPatients()).map(ee=>{const G=le=>{if(!le)return null;const fe=new Date(le);return isNaN(fe.getTime())?null:fe};return{id:ee.id,name:ee.name,admissionDate:G(ee.admissionDate||ee.admission_date||ee.created_at),status:ee.status||"Active"}})}catch(_){console.error("Error loading patients for call records:",_),K=[]}const De=[];K.forEach(_=>{const ee=we.filter(G=>String(G.patientId)===String(_.id)).sort((G,le)=>new Date(le.date).getTime()-new Date(G.date).getTime())[0];De.push({id:`patient_${_.id}`,patientId:_.id,patientName:_.name,date:new Date().toISOString().split("T")[0],description:ee?ee.description:`Patient ${_.name} registered in the system.`,audioRecording:ee==null?void 0:ee.audioRecording,audioFiles:(ee==null?void 0:ee.audioFiles)||[],createdAt:new Date().toISOString()})}),De.sort((_,ee)=>new Date(ee.date).getTime()-new Date(_.date).getTime()),i(De),console.log("Patient list with call records loaded successfully:",De.length),console.log("Actual call records loaded:",we.length)}catch($e){console.error("Error loading patient list:",$e),i([]),c([]),Te({title:"Note",description:"Failed to load patient list from database",variant:"destructive"})}finally{g(!1)}},xt=async $e=>{if(!$e||!$e.id){Te({title:"Error",description:"Invalid record data",variant:"destructive"});return}try{if(g(!0),!await Ed.deletePatientCallRecord($e.id))throw new Error("Failed to delete the record");await dt(),p(K=>K+1),Te({title:"Success",description:"Call record has been successfully deleted.",variant:"default"})}catch(we){console.error("Error deleting call record:",we),Te({title:"Error",description:we.message||"Failed to delete call record. Please try again.",variant:"destructive"})}finally{g(!1)}},Wt=($e,we)=>{var K;if(console.log(" Attempting to play audio:",$e),!$e){console.error(" No audio URL provided"),Te({title:"Audio Error",description:"No audio file available for this record.",variant:"destructive"});return}be===we?((K=B.current)==null||K.pause(),Me(null)):(B.current&&B.current.pause(),B.current=new Audio($e),B.current.onerror=De=>{console.error(" Audio playback error:",De),Te({title:"Audio Error",description:"Failed to load or play the audio file. The file may not exist or be corrupted.",variant:"destructive"}),Me(null)},B.current.onloadstart=()=>{console.log(" Loading audio...")},B.current.oncanplay=()=>{console.log(" Audio loaded successfully")},B.current.playbackRate=Je,B.current.play().then(()=>{console.log(" Audio playing successfully"),Me(we)}).catch(De=>{console.error(" Audio play failed:",De),Te({title:"Audio Error",description:"Failed to play the audio file. Please check if the file exists.",variant:"destructive"}),Me(null)}),B.current.onended=()=>{Me(null)})},qt=($e,we)=>{if(console.log(" Attempting to download audio:",$e),!$e){console.error(" No audio URL provided for download"),Te({title:"Download Error",description:"No audio file available for download.",variant:"destructive"});return}try{fetch($e).then(K=>{if(!K.ok)throw new Error(`HTTP ${K.status}: ${K.statusText}`);return K.blob()}).then(K=>{const De=window.URL.createObjectURL(K),_=document.createElement("a");_.style.display="none",_.href=De,_.download=`${we}.wav`,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(De),console.log(" Download completed successfully"),Te({title:"Download Started",description:"Audio file download has been initiated.",variant:"default"})}).catch(K=>{console.error(" Download failed:",K),Te({title:"Download Error",description:"The audio file could not be downloaded. It may have been moved or deleted.",variant:"destructive"})})}catch(K){console.error(" Download error:",K),Te({title:"Download Error",description:"Failed to download the audio file.",variant:"destructive"})}},bs=async $e=>{D($e),F(!0)},Us=async()=>{S&&(await xt(S),D(null),F(!1),p($e=>$e+1))},Ss=async()=>{if(console.log(" Add Record button clicked"),console.log(" Form Data:",Ee),console.log(" Selected Patient ID:",Le),console.log(" Audio Recording:",_e),!Ee.patientId||!Ee.date){console.log(" Validation failed - missing required fields"),Te({title:"Validation Error",description:"Please fill in all required fields (Patient and Date).",variant:"destructive"});return}const $e=r.find(we=>String(we.id)===String(Ee.patientId));if(!$e){console.error("Patient not found for ID:",Ee.patientId),console.log("Available patients:",r.map(we=>({id:we.id,name:we.name}))),Te({title:"Patient Error",description:"Selected patient not found. Please try selecting the patient again.",variant:"destructive"});return}console.log("Found patient:",$e.name,"ID:",$e.id);try{const we=se!==null,K=we?se.id:`call_${Date.now()}`;let De=null,_=null,ee=0;if(_e)try{_=`patient-${Ee.patientId}-call-${Date.now()}.wav`,ee=_e.duration;const le=new File([_e.blob],_,{type:"audio/wav"});De=await tj(le,Ee.patientId),console.log(" Recorded audio uploaded:",De)}catch(le){throw console.error(" Audio upload error:",le),le}if(!_e&&Ee.audioFiles.length>0)try{const le=Ee.audioFiles[0];De=await tj(le,Ee.patientId),_=le.name,ee=0,console.log(" Audio file uploaded:",De)}catch(le){throw console.error(" Audio file upload failed:",le),le}const G={id:K,patient_id:Ee.patientId,patient_name:$e.name,date:Ee.date,description:Ee.description,audio_file_path:De,audio_file_name:_,audio_duration:ee};console.log(" About to save DB record:",G),we?(console.log(" Updating existing record..."),await Ed.updatePatientCallRecord(K,G),Te({title:"Record Updated",description:"Call record has been successfully updated."})):(console.log(" Adding new record..."),await Ed.addPatientCallRecord(G),Te({title:"Record Added",description:"Call record has been successfully added."})),console.log(" Record saved successfully!"),y(!0),await dt(),y(!1),p(le=>le+1),te(!1),J(null),Ls()}catch(we){console.error("Error saving call record:",we),Te({title:"Error",description:`Failed to ${se?"update":"save"} call record.`,variant:"destructive"})}},Ls=()=>{Se({patientId:"",description:"",date:new Date().toISOString().split("T")[0],audioFiles:[]}),ze(null),ve(0),J(null),Ae(null)};return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Ps,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Patients Call Record"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`${E[(oe||1)-1]} ${me}`,onClick:()=>Q(!0)}),e.jsxs(P,{onClick:()=>{console.log(" Add Record button clicked"),te(!0)},className:"global-btn global-btn-primary flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Ps,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Record"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 my-6",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Active Patients"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:(()=>{let $e=new Set,we=o;return oe!==null&&me!==null&&(we=we.filter(K=>{const De=new Date(K.date);return De.getMonth()+1===oe&&De.getFullYear()===me})),we.forEach(K=>{const De=r.find(_=>String(_.id)===String(K.patientId));De&&De.status==="Active"&&$e.add(K.patientId)}),$e.size})()}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"With calls"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Audio Files"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:(()=>{let $e=0,we=o;if(d){const K=d.toLowerCase();we=we.filter(De=>De.description.toLowerCase().includes(K)||De.patientName.toLowerCase().includes(K)||String(De.patientId).toLowerCase().includes(K))}return oe!==null&&me!==null&&(we=we.filter(K=>{const De=new Date(K.date);return De.getMonth()+1===oe&&De.getFullYear()===me})),we=we.filter(K=>{const De=r.find(_=>String(_.id)===String(K.patientId));return De&&De.status==="Active"}),we.forEach(K=>{K.audioRecording?$e+=1:K.audioFiles&&K.audioFiles.length>0&&($e+=K.audioFiles.length)}),$e})()}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Sd,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Recordings"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Sd,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-purple",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-700 mb-1 truncate",children:"Call Records"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-purple-900 mb-1",children:(()=>{let $e=o;if(d){const we=d.toLowerCase();$e=$e.filter(K=>K.description.toLowerCase().includes(we)||K.patientName.toLowerCase().includes(we)||String(K.patientId).toLowerCase().includes(we))}return oe!==null&&me!==null&&($e=$e.filter(we=>{const K=new Date(we.date);return K.getMonth()+1===oe&&K.getFullYear()===me})),$e=$e.filter(we=>{const K=r.find(De=>String(De.id)===String(we.patientId));return K&&K.status==="Active"}),$e.length})()}),e.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[e.jsx(Ps,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Total calls"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-purple",children:e.jsx(Ps,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search call records...",value:d,onChange:$e=>u($e.target.value),className:"pl-10 w-full"})]})})}),e.jsxs("div",{className:"crm-table-container",children:[e.jsx("div",{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Ps,{className:"crm-table-title-icon"}),e.jsx("h2",{className:"crm-table-title-text",children:"Patients Call Records"})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[!j&&(f||w)&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Loading data...",f&&" (Patients)",w&&" (Records)"]})]})}),j&&e.jsx("div",{className:"overflow-x-auto",children:We.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("p",{className:"text-lg",children:"No active patients found"}),e.jsx("p",{className:"text-sm mt-2",children:"Check if patients are marked as active in the system"})]})}):e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{children:[e.jsx(re,{className:"text-center",children:"S NO"}),e.jsx(re,{className:"text-center",children:"Photo"}),e.jsx(re,{className:"text-center",children:"Patient Id"}),e.jsx(re,{className:"text-center",children:"Patient Name"}),e.jsx(re,{className:"text-center",children:"Audio"}),e.jsx(re,{className:"text-center",children:"Actions"})]})}),e.jsx(os,{children:We.slice((t-1)*a,t*a).map(($e,we)=>{const K=r.find(De=>String(De.id)===String($e.patientId));return $e.id.toString().startsWith("patient_"),e.jsxs(nt,{children:[e.jsx(q,{className:"text-center",children:(t-1)*a+we+1}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qn,{className:"h-10 w-10",children:[e.jsx(Nl,{src:Ne((K==null?void 0:K.photo)||(K==null?void 0:K.photoUrl)),alt:$e.patientName}),e.jsx(Zn,{className:"bg-blue-100 text-blue-600 font-medium",children:(()=>{const De=$e.patientName||(K==null?void 0:K.name)||`Patient${$e.patientId}`;return typeof De=="string"&&De.length>0?De.charAt(0).toUpperCase():"P"})()})]})})}),e.jsx(q,{className:"text-center",children:e.jsx("span",{className:"font-medium text-blue-600",children:Ye($e.patientId)})}),e.jsx(q,{className:"text-center font-semibold",children:$e.patientName}),e.jsx(q,{className:"text-center",children:(()=>{const De=o.filter(_=>{const ee=String(_.patientId).replace(/^P0*/,""),G=String($e.patientId).replace(/^P0*/,"");return ee===G&&_.audioRecording}).length;return De>0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{const _=o.find(ee=>{const G=String(ee.patientId).replace(/^P0*/,""),le=String($e.patientId).replace(/^P0*/,"");return G===le&&ee.audioRecording});_!=null&&_.audioRecording&&Wt(_.audioRecording.url,_.id)},className:"bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-full w-8 h-8 p-0",title:`${De} audio recording${De>1?"s":""} available`,children:e.jsx("span",{className:"text-sm font-semibold",children:De})})}):e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("span",{className:"text-gray-400 bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-sm",children:"0"})})})()}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx("button",{onClick:()=>Ze($e),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0 inline-flex items-center justify-center",title:"View Patient Details",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})})]},$e.id)})})]})}),We.length>a&&j&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",He+1," to ",Math.min(Ke,We.length)," of ",We.length," records"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Previous"}),Array.from({length:Math.min(5,ft)},($e,we)=>{const K=we+Math.max(1,t-2);return K>ft?null:e.jsx(P,{variant:t===K?"default":"outline",size:"sm",onClick:()=>s(K),className:"w-8",children:K},K)}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.min(ft,t+1)),disabled:t===ft,children:"Next"})]})]})]})]}),e.jsx($t,{open:z,onOpenChange:$e=>{te($e),$e||Ls()},children:e.jsxs(Ot,{className:"max-w-2xl",children:[e.jsxs(Ut,{children:[e.jsx(Bt,{children:se?"Edit Call Record":"Add New Call Record"}),e.jsx(Vt,{children:se?"Update patient call record details":"Create a new patient call record"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Patient *"}),Le?e.jsx("div",{className:"w-full p-2 border rounded-md bg-gray-50 text-gray-700",children:(()=>{let $e=r.find(we=>String(we.id)===String(Le));return $e||($e=r.find(we=>String(we.id)===String(Ee.patientId))),$e||($e=r.find(we=>we.uhid===Le||String(we.id).toLowerCase()===String(Le).toLowerCase())),$e?`${$e.name} (${$e.id})`:`Unknown Patient (${Le})`})()}):e.jsxs("select",{value:Ee.patientId,onChange:$e=>Se({...Ee,patientId:$e.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Select Patient"}),r.map($e=>e.jsxs("option",{value:$e.id,children:[$e.name," (",$e.id,")"]},$e.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Date *"}),e.jsx(Ve,{type:"date",value:Ee.date,onChange:$e=>Se({...Ee,date:$e.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Description"}),e.jsx(As,{placeholder:"Enter call description",value:Ee.description,onChange:$e=>Se({...Ee,description:$e.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Upload Audio Files (Multiple files supported, up to 500MB each)"}),e.jsx(Ve,{type:"file",accept:"audio/*",multiple:!0,onChange:$e=>rt($e.target.files)}),Ee.audioFiles.length>0&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs(ae,{className:"text-sm font-medium",children:["Uploaded Audio Files (",Ee.audioFiles.length,"):"]}),Ee.audioFiles.map(($e,we)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:$e.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",($e.size/(1024*1024)).toFixed(2)," MB)"]})]}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",onClick:()=>Be(we),children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]},we))]})]})]}),e.jsxs(zt,{children:[e.jsx(P,{variant:"outline",onClick:()=>te(!1),children:"Cancel"}),e.jsx(P,{onClick:Ss,children:se?"Update Record":"Add Record"})]})]})}),je&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>b(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:$e=>$e.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[(()=>{const $e=r.find(K=>String(K.id)===String(je.patientId));let we="";return $e!=null&&$e.photo?$e.photo.startsWith("http")?we=$e.photo:$e.photo.includes("Photos/patient Admission/")?we=`/${$e.photo.replace(/\s/g,"%20")}`:we=`/Photos/patient%20Admission/${je.patientId}/${$e.photo}`:$e!=null&&$e.photoUrl&&($e.photoUrl.startsWith("http")?we=$e.photoUrl:$e.photoUrl.includes("Photos/patient Admission/")?we=`/${$e.photoUrl.replace(/\s/g,"%20")}`:we=`/Photos/patient%20Admission/${je.patientId}/${$e.photoUrl}`),e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center overflow-hidden",children:we?e.jsx(e.Fragment,{children:e.jsx("img",{src:we,alt:`${je.patientName}'s photo`,className:"w-full h-full object-cover",onError:K=>{console.log(" Image failed for:",je.patientName),console.log("   Failed URL:",we);const De=K.target;De.style.display="none";const _=De.parentElement;_&&(_.innerHTML=`<span class="text-lg font-semibold text-white">${(je.patientName||"P").charAt(0).toUpperCase()}</span>`)},onLoad:()=>{console.log(" Image loaded successfully for patient:",je.patientName,"URL:",we)}})}):e.jsx("span",{className:"text-lg font-semibold text-white",children:(je.patientName||"P").charAt(0).toUpperCase()})})})(),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:"bg-green-100 text-green-800 border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full",children:"Active"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(rs,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:je.patientName})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Call Records Total:"}),e.jsxs("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:[Oe.length," Records"]})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>b(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(rs,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Patient Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Patient Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:je.patientName})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-bold text-xs sm:text-sm",children:"ID"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Patient ID"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Ye(je.patientId)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Joining Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:(()=>{const $e=r.find(we=>String(we.id)===String(je.patientId));return $e&&$e.admissionDate?wt(new Date($e.admissionDate),"dd/MM/yyyy"):"Not Available"})()})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-green-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Add New Call Record"]}),e.jsxs("form",{onSubmit:$e=>{$e.preventDefault(),Ss()},className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-call-date",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-blue-600"}),"Call Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"add-call-date",type:"date",value:Ee.date,onChange:$e=>Se(we=>({...we,date:$e.target.value})),className:"w-full bg-white/90 backdrop-blur-sm border-blue-200 focus:border-blue-400 focus:ring-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-call-patient",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-indigo-600"}),"Patient ",e.jsx("span",{className:"text-green-500",children:"*"})]}),e.jsx(Ve,{id:"add-call-patient",type:"text",value:`${je.patientName} (${Ye(je.patientId)})`,readOnly:!0,className:"w-full bg-gray-50/90 backdrop-blur-sm border-indigo-200 text-gray-700 cursor-not-allowed"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-call-description",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-orange-600"}),"Call Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(As,{id:"add-call-description",value:Ee.description,onChange:$e=>Se(we=>({...we,description:$e.target.value})),className:"w-full bg-white/90 backdrop-blur-sm border border-orange-200 focus:border-orange-400 focus:ring-orange-300 min-h-[100px] resize-y",placeholder:"Enter detailed description of the call...",required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ae,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(Sd,{className:"h-4 w-4 text-red-600"}),"Upload Audio Files ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border-2 border-dashed border-red-200 rounded-lg p-4 hover:border-red-300 transition-colors",children:[e.jsx(Ve,{type:"file",accept:"audio/*",multiple:!0,onChange:$e=>{const we=Array.from($e.target.files||[]),K=999*1024*1024,De=we.filter(_=>_.size>K?(Te({title:"File Too Large",description:`${_.name} is larger than 999MB. Please select a smaller file.`,variant:"destructive"}),!1):!0);De.length>0&&Se(_=>({..._,audioFiles:[..._.audioFiles,...De]}))},className:"mb-3 bg-white/80 border-red-200 focus:border-red-400 focus:ring-red-300"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select audio files (MP3, WAV, M4A, etc.) - Maximum 999MB per file"}),Ee.audioFiles.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{className:"text-sm font-medium text-red-700",children:["Uploaded Audio Files (",Ee.audioFiles.length,"):"]}),Ee.audioFiles.map(($e,we)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Sd,{className:"w-4 h-4 text-red-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:$e.name}),e.jsxs("div",{className:"text-xs text-red-600 bg-red-100 px-2 py-1 rounded inline-block ml-2",children:[($e.size/(1024*1024)).toFixed(2)," MB"]})]}),e.jsxs("audio",{controls:!0,className:"h-8",children:[e.jsx("source",{src:URL.createObjectURL($e),type:$e.type}),"Your browser does not support the audio element."]})]}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",onClick:()=>Be(we),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(mt,{className:"w-4 h-4"})})]},we))]}),e.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:[e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Supported formats:"})," MP3, WAV, M4A, AAC, OGG, FLAC"]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:[e.jsx("strong",{children:"File size limit:"})," 999MB per file"]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6 pb-2 border-t border-gray-200 mt-6",children:e.jsx(P,{type:"submit",disabled:w||!Ee.date||!Ee.description.trim(),className:"px-8 py-3 text-base font-bold bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adding Call Record..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5 mr-2"}),"Add Call Record"]})})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Ps,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Call History (",Oe.length,")"]}),e.jsx("button",{type:"button",className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white hover:bg-gray-50 min-w-[140px]",onClick:()=>O(!0),children:Y!==null&&ue!==null?`${E[Y-1]} ${ue}`:`${E[L-1]} ${ie}`})]}),Oe.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ps,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"No call records found for this patient"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Call records will appear here when added"})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"S No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Audio"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Oe.map(($e,we)=>{var K;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:we+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:wt(new Date($e.date),"dd/MM/yyyy")}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs",children:e.jsx("div",{className:"truncate",title:$e.description||"No description",children:$e.description||"No description"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:(K=$e.audioRecording)!=null&&K.url?e.jsxs("div",{className:"flex justify-center gap-1",children:[e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>{var _;const De=(_=$e.audioRecording)==null?void 0:_.url;console.log(" Play button clicked, URL:",De),De?Wt(De,$e.id):(console.error(" No audio URL available"),Te({title:"Audio Error",description:"No audio file available for this record.",variant:"destructive"}))},title:"Play Audio",className:"p-1 h-8 w-8",children:be===$e.id?e.jsx(Jf,{className:"w-3 h-3 text-blue-600"}):e.jsx(Ju,{className:"w-3 h-3 text-blue-600"})}),e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>{const De=[.5,1,1.25,1.5,2],_=De.indexOf(Je),ee=De[(_+1)%De.length];vt(ee),B.current&&be===$e.id&&(B.current.playbackRate=ee)},title:`Playback Speed: ${Je}x`,className:"p-1 h-8 w-8",children:e.jsxs("span",{className:"text-xs font-mono text-purple-600",children:[Je,"x"]})}),e.jsx(P,{size:"sm",variant:"ghost",onClick:()=>{var _;const De=(_=$e.audioRecording)==null?void 0:_.url;console.log(" Download button clicked, URL:",De),De?qt(De,`${$e.patientName}-audio-${$e.date}`):(console.error(" No audio URL available for download"),Te({title:"Download Error",description:"No audio file available for download.",variant:"destructive"}))},title:"Download Audio",className:"p-1 h-8 w-8",children:e.jsx(Cs,{className:"w-3 h-3 text-green-600"})})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No Audio"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>bs($e),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0 inline-flex items-center justify-center",title:"Delete call record",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})]},$e.id)})})]})})})]})]})})]})}),e.jsx($t,{open:V,onOpenChange:O,children:e.jsxs(Ot,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Bt,{children:"Filter Call History"}),e.jsx(Vt,{children:"Select month and year to filter call records"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Month"}),e.jsx("select",{value:L,onChange:$e=>he(parseInt($e.target.value)),className:"w-full p-2 border rounded-md",children:E.map(($e,we)=>e.jsx("option",{value:we,children:$e},we))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Year"}),e.jsx("select",{value:ie,onChange:$e=>ke(parseInt($e.target.value)),className:"w-full p-2 border rounded-md",children:Array.from({length:10},($e,we)=>C-we).map($e=>e.jsx("option",{value:$e,children:$e},$e))})]})]}),e.jsxs(zt,{children:[e.jsx(P,{variant:"outline",onClick:()=>{W(null),U(null),O(!1)},children:"Clear Filter"}),e.jsx(P,{onClick:()=>{W(L),U(ie),O(!1)},children:"Apply Filter"})]})]})}),e.jsx($s,{open:ne,onOpenChange:Q,selectedMonth:A,selectedYear:M,onMonthChange:T,onYearChange:X,onApply:()=>{ge(A),H(M),Q(!1)},title:"Filter Records",description:"Select month and year to filter call records",previewText:"records"}),e.jsx($t,{open:R,onOpenChange:F,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Call Record"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this call record? This action cannot be undone."})]})]})}),S&&e.jsxs("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:S.patientName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a2,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Patient ID: ",S.patientId]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:wt(new Date(S.date),"PPP")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:S.description})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded border border-red-200",children:e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("p",{className:"font-medium mb-2",children:" This will permanently delete:"}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:" Call record details and description"}),e.jsx("li",{children:" Associated audio recordings"}),e.jsx("li",{children:" All related metadata"})]})]})})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>F(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:Us,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Record"]})]})]})})]})})};class zo{static async getAllPatientMedicalRecords(){try{const s=await fetch(`${this.baseUrl}/patient-medical-records`);if(!s.ok){const a=await s.text();throw new Error(`Failed to fetch medical records: ${a}`)}return await s.json()}catch(s){throw console.error("Error fetching medical records:",s),s}}static async addPatientMedicalRecord(s){try{const a=await fetch(`${this.baseUrl}/patient-medical-records/json`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error("Failed to add medical record");return await a.json()}catch(a){throw console.error("Error adding medical record:",a),a}}static async updatePatientMedicalRecord(s,a){try{const r=await fetch(`${this.baseUrl}/patient-medical-records/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to update medical record");return await r.json()}catch(r){throw console.error("Error updating medical record:",r),r}}static async deletePatientMedicalRecord(s){try{const a=await fetch(`${this.baseUrl}/patient-medical-records/${s}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete medical record");return await a.json()}catch(a){throw console.error("Error deleting medical record:",a),a}}}Gm(zo,"baseUrl","http://localhost:4000/api");const Tz=()=>{var qe;js();const[t,s]=m.useState(1),a=10,[r,n]=m.useState([]),[l,i]=m.useState([]),[o,c]=m.useState([]),[d,u]=m.useState(""),[x,p]=m.useState("all"),[h,y]=m.useState("all"),[f,v]=m.useState(0),[w,g]=m.useState(!1),[j,N]=m.useState(!1),[E,C]=m.useState(!1),[k,A]=m.useState(!1),T=["January","February","March","April","May","June","July","August","September","October","November","December"],M=new Date().getFullYear(),X=new Date().getMonth()+1,[ne,Q]=m.useState(X),[oe,ge]=m.useState(M),[me,H]=m.useState(!1),[L,he]=m.useState(X),[ie,ke]=m.useState(M),[V,O]=m.useState(X),[Y,W]=m.useState(M),[ue,U]=m.useState(!1),[z,te]=m.useState(null),[se,J]=m.useState(null),[je,b]=m.useState(!1),[S,D]=m.useState(null),[R,F]=m.useState(null),[I,ce]=m.useState(null),[de,ve]=m.useState(!1),[_e,ze]=m.useState({show:!1,images:[],currentIndex:0,recordId:""}),[be,Me]=m.useState(!1),[Je,vt]=m.useState(0),[Le,Ae]=m.useState(null),[Ee,Se]=m.useState(null),[B,Ye]=m.useState(1),[Ne,rt]=m.useState(!1),[Be,We]=m.useState([]),[ft,He]=m.useState(null),[Ke,Oe]=m.useState(null),[Ze,it]=m.useState({patientId:"",recordType:"consultation",description:"",date:new Date().toISOString().split("T")[0],audioFiles:[],photoFiles:[],documentFiles:[]}),[dt,xt]=m.useState({patientId:"",date:new Date().toISOString().split("T")[0],recordType:"",description:""}),[Wt,qt]=m.useState([]),[bs,Us]=m.useState(!1),Ss=Z=>`P${(typeof Z=="string"?parseInt(Z.replace(/^P0*/,"")):Z).toString().padStart(4,"0")}`;m.useEffect(()=>{s(1)},[d,L,ie]),m.useRef(null);const Ls=m.useRef(null),$e=m.useRef(null),we=m.useRef(null),K=m.useRef(null),De=m.useRef(null),_=m.useRef(null),ee=async()=>{try{const Z=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720},audio:!1});we.current&&(we.current.srcObject=Z,De.current=Z,rt(!0))}catch{Te({title:"Camera Error",description:"Could not access camera. Please check permissions.",variant:"destructive"})}},G=()=>{if(we.current&&K.current){const Z=K.current,xe=we.current,Ce=Z.getContext("2d");Z.width=xe.videoWidth,Z.height=xe.videoHeight,Ce==null||Ce.drawImage(xe,0,0),Z.toBlob(Qe=>{if(Qe){const ot=new window.File([Qe],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});We(ct=>[...ct,ot]),it(ct=>({...ct,photoFiles:[...ct.photoFiles,ot]}));const et=URL.createObjectURL(Qe);He(et),Te({title:"Photo Captured",description:"Photo captured successfully!"})}},"image/jpeg",.9)}},le=()=>{De.current&&(De.current.getTracks().forEach(Z=>Z.stop()),De.current=null,rt(!1))},fe=Z=>{if(Z){const xe=Array.from(Z),Ce=50*1024*1024;if(xe.filter(ot=>ot.size>Ce).length>0){Te({title:"File Size Error",description:"Files larger than 50MB are not allowed.",variant:"destructive"});return}it(ot=>({...ot,photoFiles:[...ot.photoFiles,...xe]}))}},ye=Z=>{if(Z){const xe=Array.from(Z).filter(Ce=>["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain","text/csv","image/jpeg","image/png","image/gif","image/webp"].includes(Ce.type)?Ce.size>524288e3?(Te({title:"File Too Large",description:`${Ce.name}: Files larger than 500MB are not allowed.`,variant:"destructive"}),!1):!0:(Te({title:"Invalid File Type",description:`${Ce.name}: Only PDF, Word, Excel, PowerPoint, text, and image files are allowed.`,variant:"destructive"}),!1));it(Ce=>({...Ce,documentFiles:[...Ce.documentFiles,...xe]}))}},Ue=async()=>{v(Z=>Z+1),C(!0);try{const[Z,xe]=await Promise.all([gt.getAllPatients(),zo.getAllPatientMedicalRecords()]),Ce=Z.map(et=>{const ct=Nt=>{if(!Nt)return null;const _s=new Date(Nt);return isNaN(_s.getTime())?null:_s},Kt=Nt=>ct(Nt.admissionDate||Nt.admission_date)||ct(Nt.created_at)||null;return{id:et.id.toString(),name:et.name,age:et.age||"",gender:et.gender||"",contactNumber:et.contactNumber||et.phone||"",address:et.address||"",locality:et.locality||"",city:et.city||"",bloodGroup:et.bloodGroup||"",occupation:et.occupation||"",guardian:et.guardian||"",guardianPhone:et.guardianPhone||"",referredBy:et.referredBy||"",uhid:et.uhid||"",photo:et.photo||"",photoUrl:et.photoUrl||"",status:et.status||"Active",admissionDate:Kt(et)}}),Qe=xe.map(et=>{var ct,Kt;return{...et,patientId:((ct=et.patient_id)==null?void 0:ct.toString())||((Kt=et.patientId)==null?void 0:Kt.toString())||"",patientName:et.patient_name||et.patientName||"Unknown",recordType:et.record_type||et.recordType||"consultation",images:Array.isArray(et.images)?et.images:et.images?JSON.parse(et.images):[],createdBy:et.created_by||et.createdBy||"System",createdAt:et.created_at||et.createdAt||new Date().toISOString()}}),ot=[];Ce.forEach(et=>{const ct=Qe.filter(Kt=>String(Kt.patientId)===String(et.id)).sort((Kt,Nt)=>new Date(Nt.date).getTime()-new Date(Kt.date).getTime())[0];ot.push({id:`patient_${et.id}`,patientId:et.id,patientName:et.name,date:new Date().toISOString().split("T")[0],recordType:"registration",description:ct?ct.description:`Patient ${et.name} registered in the system.`,images:(ct==null?void 0:ct.images)||[],audioRecording:ct==null?void 0:ct.audioRecording,audioFiles:(ct==null?void 0:ct.audioFiles)||[],photoFiles:(ct==null?void 0:ct.photoFiles)||[],createdAt:new Date().toISOString(),createdBy:"System"})}),ot.sort((et,ct)=>{const Kt=Dr=>{const sr=Dr.replace(/^P0*/,"");return parseInt(sr)||0},Nt=Kt(et.patientId),_s=Kt(ct.patientId);return Nt-_s}),n(Ce),c(Qe),i(ot),console.log("Data loaded successfully without resetting filters")}catch(Z){console.error("Error loading data:",Z),n([]),c([]),i([]),Te({title:"Error",description:"Failed to load data. Please try again.",variant:"destructive"})}finally{C(!1),A(!0)}},at=async()=>{v(Qe=>Qe+1),C(!0);const Z=new Date,xe=Z.getMonth()+1,Ce=Z.getFullYear();he(xe),ke(Ce),Q(xe),ge(Ce),u(""),p("all"),y("all"),s(1);try{const[Qe,ot]=await Promise.all([gt.getAllPatients(),zo.getAllPatientMedicalRecords()]),et=Qe.map(Nt=>{const _s=sr=>{if(!sr)return null;const Po=new Date(sr);return isNaN(Po.getTime())?null:Po},Dr=sr=>_s(sr.admissionDate||sr.admission_date)||_s(sr.created_at)||null;return{id:Nt.id.toString(),name:Nt.name,age:Nt.age||"",gender:Nt.gender||"",contactNumber:Nt.contactNumber||Nt.phone||"",address:Nt.address||"",locality:Nt.locality||"",city:Nt.city||"",bloodGroup:Nt.bloodGroup||"",occupation:Nt.occupation||"",guardian:Nt.guardian||"",guardianPhone:Nt.guardianPhone||"",referredBy:Nt.referredBy||"",uhid:Nt.uhid||"",photo:Nt.photo||"",photoUrl:Nt.photoUrl||"",status:Nt.status||"Active",admissionDate:Dr(Nt)}}),ct=ot.map(Nt=>{var Dr,sr;console.log(" Processing medical record:",Nt.id,"Raw images:",Nt.images,"Type:",typeof Nt.images);let _s=[];try{Array.isArray(Nt.images)?_s=Nt.images:Nt.images&&typeof Nt.images=="string"?_s=JSON.parse(Nt.images):Nt.images&&(_s=Nt.images)}catch(Po){console.error(" Error parsing images for record",Nt.id,":",Po),_s=[]}return console.log(" Parsed images for record",Nt.id,":",_s),{...Nt,patientId:((Dr=Nt.patient_id)==null?void 0:Dr.toString())||((sr=Nt.patientId)==null?void 0:sr.toString())||"",patientName:Nt.patient_name||Nt.patientName||"Unknown",recordType:Nt.record_type||Nt.recordType||"consultation",images:_s,createdBy:Nt.created_by||Nt.createdBy||"System",createdAt:Nt.created_at||Nt.createdAt||new Date().toISOString()}}),Kt=[];et.forEach(Nt=>{const _s=ct.filter(Dr=>String(Dr.patientId)===String(Nt.id)).sort((Dr,sr)=>new Date(sr.date).getTime()-new Date(Dr.date).getTime())[0];Kt.push({id:`patient_${Nt.id}`,patientId:Nt.id,patientName:Nt.name,date:new Date().toISOString().split("T")[0],recordType:"registration",description:_s?_s.description:`Patient ${Nt.name} registered in the system.`,images:(_s==null?void 0:_s.images)||[],audioRecording:_s==null?void 0:_s.audioRecording,audioFiles:(_s==null?void 0:_s.audioFiles)||[],photoFiles:(_s==null?void 0:_s.photoFiles)||[],createdAt:new Date().toISOString(),createdBy:"System"})}),Kt.sort((Nt,_s)=>{const Dr=C6=>{const k6=C6.replace(/^P0*/,"");return parseInt(k6)||0},sr=Dr(Nt.patientId),Po=Dr(_s.patientId);return sr-Po}),n(et),c(ct),i(Kt),console.log("Patient list with medical records loaded successfully:",Kt.length),console.log("Actual medical records loaded:",ct.length),console.log("Medical records sample:",ct.slice(0,2)),console.log("Patients sample:",et.slice(0,2))}catch(Qe){console.error("Error loading data:",Qe),n([]),c([]),i([]),Te({title:"Error",description:"Failed to load data. Please try again.",variant:"destructive"})}finally{C(!1),A(!0)}};m.useEffect(()=>{at()},[]),m.useEffect(()=>{const Z=xe=>{_e.show&&xe.key==="Escape"&&(console.log(" Global Escape key pressed - closing image modal"),ze({show:!1,images:[],currentIndex:0,recordId:""}))};if(_e.show)return document.addEventListener("keydown",Z),setTimeout(()=>{_.current&&(_.current.focus(),console.log(" Image modal close button focused"))},100),()=>document.removeEventListener("keydown",Z)},[_e.show]);const Ge=m.useMemo(()=>{let Z=l;if(d){const xe=d.toLowerCase();Z=Z.filter(Ce=>{const Qe=r.find(ot=>String(ot.id)===String(Ce.patientId));return Ce.patientName.toLowerCase().includes(xe)||Ce.description.toLowerCase().includes(xe)||Ce.patientId.toLowerCase().includes(xe)||Ce.recordType.toLowerCase().includes(xe)||(Qe==null?void 0:Qe.contactNumber)&&Qe.contactNumber.toLowerCase().includes(xe)||(Qe==null?void 0:Qe.uhid)&&Qe.uhid.toLowerCase().includes(xe)})}return x!=="all"&&(Z=Z.filter(xe=>xe.recordType===x)),h!=="all"&&(Z=Z.filter(xe=>{const Ce=r.find(Qe=>String(Qe.id)===String(xe.patientId));return(Ce==null?void 0:Ce.status)===h})),L!==null&&ie!==null&&(Z=Z.filter(xe=>{const Ce=new Date(xe.date);return Ce.getMonth()===L-1&&Ce.getFullYear()===ie})),Z.sort((xe,Ce)=>{const Qe=ct=>{const Kt=ct.replace(/^P0*/,"");return parseInt(Kt)||0},ot=Qe(xe.patientId),et=Qe(Ce.patientId);return ot-et}),Z},[l,r,d,x,h,L,ie]),Xe=Math.ceil(Ge.length/a),tt=(t-1)*a,yt=tt+a;Ge.slice(tt,yt);const Mt=m.useMemo(()=>{if(!R)return[];console.log("View Record:",R),console.log("All Medical Records:",o);let Z=o.filter(xe=>{const Ce=String(R.patientId).replace(/^P0*/,""),Qe=String(xe.patientId).replace(/^P0*/,"");return console.log(`Comparing viewPatientId: ${Ce} with recordPatientId: ${Qe}`),Ce===Qe});return console.log("Filtered Medical Records for view:",Z),z!==null&&se!==null&&(Z=Z.filter(xe=>{const Ce=new Date(xe.date);return Ce.getMonth()===z-1&&Ce.getFullYear()===se})),Z.sort((xe,Ce)=>new Date(xe.date).getTime()-new Date(Ce.date).getTime())},[o,R==null?void 0:R.patientId,f,z,se]),Yt=()=>{it({patientId:Ke||"",recordType:"consultation",description:"",date:new Date().toISOString().split("T")[0],audioFiles:[],photoFiles:[],documentFiles:[]}),Ae(null),We([]),He(null),le(),Me(!1),Ls.current&&clearInterval(Ls.current)},Ct=async()=>{if(!Ze.patientId||!Ze.description.trim()){Te({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{g(!0);const Z=r.find(ot=>ot.id===Ze.patientId),xe=(Z==null?void 0:Z.name)||"Unknown Patient",Ce=[];for(const ot of Ze.photoFiles)try{const et=await qi(ot,Ze.patientId,"document");Ce.push(et)}catch(et){console.error("Error uploading photo:",et)}for(const ot of Ze.audioFiles)try{const et=await qi(ot,Ze.patientId,"audio");Ce.push(et)}catch(et){console.error("Error uploading audio:",et)}for(const ot of Ze.documentFiles)try{const et=await yR(ot,Ze.patientId,"document");Ce.push(et)}catch(et){console.error("Error uploading document:",et)}const Qe={id:(S==null?void 0:S.id)||`MR${Date.now()}`,patient_id:Ze.patientId,patient_name:xe,date:Ze.date,record_type:Ze.recordType,description:Ze.description,images:Ce,created_by:"Admin"};S?(await zo.updatePatientMedicalRecord(S.id,Qe),Te({title:"Success",description:"Medical record updated successfully!"})):(await zo.addPatientMedicalRecord(Qe),Te({title:"Success",description:"Medical record added successfully!"})),b(!1),D(null),Yt(),await at()}catch(Z){console.error("Error saving medical record:",Z),Te({title:"Error",description:"Failed to save medical record. Please try again.",variant:"destructive"})}finally{g(!1)}},Lt=async()=>{if(I)try{await zo.deletePatientMedicalRecord(I.id),Te({title:"Success",description:"Medical record deleted successfully!"}),ve(!1),ce(null),await at()}catch(Z){console.error("Error deleting medical record:",Z),Te({title:"Error",description:"Failed to delete medical record. Please try again.",variant:"destructive"})}},ss=Z=>{F(Z),xt({patientId:Z.patientId,date:new Date().toISOString().split("T")[0],recordType:"",description:""}),qt([])},qs=async Z=>{var xe,Ce;if(Z.preventDefault(),console.log(" Form validation debug:"),console.log("   viewRecord?.patientId:",R==null?void 0:R.patientId),console.log("   newRecord.date:",dt.date),console.log("   newRecord.recordType:",`"${dt.recordType}"`),console.log("   newRecord.recordType?.trim():",`"${(xe=dt.recordType)==null?void 0:xe.trim()}"`),!(R!=null&&R.patientId)||!dt.date||!((Ce=dt.recordType)!=null&&Ce.trim())){console.log(" Validation failed!"),Te({title:"Missing Information",description:"Please fill in all required fields (Date and Record Type).",variant:"destructive"});return}Us(!0);try{const Qe=[];for(const ct of Wt)try{const Kt=await qi(ct,R.patientId,"document");Qe.push(Kt),console.log(" File uploaded:",Kt)}catch(Kt){console.error(" File upload failed:",Kt)}const ot={patient_id:R.patientId,patient_name:R.patientName,date:dt.date,record_type:dt.recordType,description:dt.description,images:Qe,created_by:"system"},et=await fetch("http://localhost:4000/api/patient-medical-records/json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ot)});if(et.ok){const ct=await et.json();Te({title:"Success",description:"Medical record added successfully!"}),xt({patientId:"",date:new Date().toISOString().split("T")[0],recordType:"",description:""}),qt([]),Ue()}else{const ct=await et.json().catch(()=>({}));throw new Error(ct.error||"Failed to add record")}}catch(Qe){console.error("Error adding record:",Qe),Te({title:"Error",description:Qe instanceof Error?Qe.message:"Failed to add medical record. Please try again.",variant:"destructive"})}finally{Us(!1)}},pe=Z=>{const xe=Z.target.files;if(xe){const Ce=Array.from(xe),Qe=50*1024*1024;if(Ce.filter(et=>et.size>Qe).length>0){Te({title:"File Size Error",description:"Files larger than 50MB are not allowed.",variant:"destructive"});return}qt(et=>[...et,...Ce]),Te({title:"Files Selected",description:`${Ce.length} file(s) selected successfully.`})}};return e.jsxs("div",{className:"crm-page-bg",children:[_e.show&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999] p-4",onClick:Z=>{console.log(" Backdrop click detected, target:",Z.target,"currentTarget:",Z.currentTarget),Z.target===Z.currentTarget?(console.log(" Backdrop clicked - closing image modal"),ze({show:!1,images:[],currentIndex:0,recordId:""})):console.log(" Click was not on backdrop - ignoring")},onKeyDown:Z=>{Z.key==="Escape"&&(console.log(" Escape key pressed on backdrop - closing image modal"),ze({show:!1,images:[],currentIndex:0,recordId:""}))},tabIndex:0,role:"dialog","aria-modal":"true","aria-labelledby":"image-modal-title",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl max-h-[90vh] w-full overflow-hidden",onClick:Z=>{console.log(" Modal content clicked - stopping propagation"),Z.stopPropagation()},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{id:"image-modal-title",className:"text-lg font-semibold",children:["Medical Record Files (",_e.currentIndex+1," of ",_e.images.length,")"]}),e.jsx("button",{ref:_,onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),console.log(" Close button clicked - closing image modal"),ze({show:!1,images:[],currentIndex:0,recordId:""})},onMouseDown:Z=>{Z.preventDefault(),Z.stopPropagation(),console.log(" Close button mouse down - preventing default")},onTouchStart:Z=>{Z.preventDefault(),Z.stopPropagation(),console.log(" Close button touch start - preventing default")},onKeyDown:Z=>{(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),Z.stopPropagation(),console.log(" Close button key pressed - closing image modal"),ze({show:!1,images:[],currentIndex:0,recordId:""}))},className:"p-2 hover:bg-gray-100 rounded-full transition-colors cursor-pointer select-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-gray-100",title:"Close Modal",type:"button",tabIndex:0,"aria-label":"Close modal",children:e.jsx(jt,{className:"w-5 h-5 pointer-events-none"})})]}),e.jsxs("div",{className:"p-4 flex flex-col items-center",children:[e.jsx("div",{className:"relative max-w-full max-h-[60vh] overflow-hidden rounded-lg",children:e.jsx("img",{src:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${_e.images[_e.currentIndex]}`,alt:`Medical record file ${_e.currentIndex+1}`,className:"max-w-full max-h-full object-contain",onError:Z=>{console.error("Image failed to load:",_e.images[_e.currentIndex]),Z.currentTarget.src="/placeholder.svg"}})}),_e.images.length>1&&e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx("button",{onClick:()=>ze(Z=>({...Z,currentIndex:Z.currentIndex>0?Z.currentIndex-1:Z.images.length-1})),className:"p-2 bg-blue-100 hover:bg-blue-200 rounded-full text-blue-600",children:e.jsx(jg,{className:"w-5 h-5"})}),e.jsxs("span",{className:"px-4 py-2 bg-gray-100 rounded-full text-sm",children:[_e.currentIndex+1," / ",_e.images.length]}),e.jsx("button",{onClick:()=>ze(Z=>({...Z,currentIndex:Z.currentIndex<Z.images.length-1?Z.currentIndex+1:0})),className:"p-2 bg-blue-100 hover:bg-blue-200 rounded-full text-blue-600",children:e.jsx(Pm,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>{const Z=document.createElement("a");Z.href=`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${_e.images[_e.currentIndex]}`,Z.download=_e.images[_e.currentIndex].split("/").pop()||"file",Z.click()},className:"px-4 py-2 bg-green-100 hover:bg-green-200 text-green-600 rounded-lg flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Download"]}),e.jsxs("button",{onClick:()=>{window.open(`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${_e.images[_e.currentIndex]}`,"_blank")},className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg flex items-center gap-2",children:[e.jsx(CA,{className:"w-4 h-4"}),"Open in New Tab"]})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(It,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Patient Medical Records"})})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 lg:flex-shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`${T[ne-1]} ${oe}`,onClick:()=>H(!0)})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Patients"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:r.length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In treatment"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Medical Records"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:o.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(It,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Total records"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(It,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsxs(P,{type:"button",onClick:()=>H(!0),variant:"outline",className:"crm-month-year-btn w-full",children:[e.jsx(ly,{className:"crm-month-year-btn-icon"}),e.jsx("span",{className:"crm-month-year-btn-text",children:L!==null&&ie!==null?`${T[L-1]} ${ie}`:`${T[ne-1]} ${oe}`}),e.jsx("span",{className:"crm-month-year-btn-text-mobile",children:L!==null&&ie!==null?`${T[L-1].slice(0,3)} ${ie}`:`${T[ne-1].slice(0,3)} ${oe}`})]})}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{type:"text",placeholder:"Search by name, ID, type, or condition...",value:d,onChange:Z=>u(Z.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-base"})]})})]})}),e.jsxs("div",{className:"crm-table-container",children:[e.jsx("div",{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(It,{className:"crm-table-title-icon"}),e.jsx("h2",{className:"crm-table-title-text",children:"Medical Records"})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[!k&&E&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Loading medical records..."})]})}),k&&e.jsx("div",{className:"overflow-x-auto",children:Ge.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("p",{className:"text-lg",children:"No medical records found"}),e.jsx("p",{className:"text-sm mt-2",children:d||x!=="all"||h!=="all"?"Try adjusting your filters or search term":"Start by adding your first medical record"})]})}):e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{children:[e.jsx(re,{className:"text-center",children:"S NO"}),e.jsx(re,{className:"text-center",children:"Photo"}),e.jsx(re,{className:"text-center",children:"Patient Id"}),e.jsx(re,{className:"text-center",children:"Patient Name"}),e.jsx(re,{className:"text-center",children:"Records"}),e.jsx(re,{className:"text-center",children:"Actions"})]})}),e.jsx(os,{children:Ge.slice((t-1)*a,t*a).map((Z,xe)=>{const Ce=r.find(Qe=>String(Qe.id)===String(Z.patientId));return Z.id.toString().startsWith("patient_"),e.jsxs(nt,{children:[e.jsx(q,{className:"text-center",children:(t-1)*a+xe+1}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(El,{photoPath:Ce==null?void 0:Ce.photo,alt:(Ce==null?void 0:Ce.name)||Z.patientName,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover mx-auto border bg-muted"})})}),e.jsx(q,{className:"text-center",children:e.jsx("span",{className:"font-medium text-blue-600",children:Ss(Z.patientId)})}),e.jsx(q,{className:"text-center font-semibold",children:Z.patientName}),e.jsx(q,{className:"text-center",children:(()=>{const Qe=o.filter(ot=>{const et=String(ot.patientId).replace(/^P0*/,""),ct=String(Z.patientId).replace(/^P0*/,"");return et===ct}).length;return Qe>0?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(P,{variant:"ghost",size:"sm",className:"bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-full w-8 h-8 p-0",title:`${Qe} medical record${Qe>1?"s":""} available`,children:e.jsx("span",{className:"text-sm font-semibold",children:Qe})})}):e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("span",{className:"text-gray-400 bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-sm",children:"0"})})})()}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center gap-2",children:e.jsx(P,{variant:"outline",size:"sm",onClick:()=>ss(Z),className:"action-btn-lead action-btn-view",title:"View Patient Details",children:e.jsx(vs,{className:"w-3 h-3 sm:w-4 sm:h-4"})})})})]},Z.id)})})]})}),Ge.length>a&&k&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",tt+1," to ",Math.min(yt,Ge.length)," of ",Ge.length," records"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,t-1)),disabled:t===1,children:"Previous"}),Array.from({length:Math.min(5,Xe)},(Z,xe)=>{const Ce=xe+Math.max(1,t-2);return Ce>Xe?null:e.jsx(P,{variant:t===Ce?"default":"outline",size:"sm",onClick:()=>s(Ce),className:"w-8",children:Ce},Ce)}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.min(Xe,t+1)),disabled:t===Xe,children:"Next"})]})]})]})]}),e.jsx($t,{open:je,onOpenChange:b,children:e.jsxs(Ot,{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-green-100 flex items-center justify-center",children:e.jsx(It,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:S?"Edit Medical Record":"Add Medical Record"})]}),e.jsx("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:e.jsx("span",{className:"text-gray-600",children:S?"Update the medical record details below.":"Add a new medical record with audio and photo uploads."})})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{b(!1),D(null),Yt()},className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsx("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"patient",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Patient *"}),e.jsx("div",{className:"w-full p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-700",children:(()=>{if(!Ze.patientId)return"No patient selected";console.log(" Patient Lookup Debug:"),console.log("   Looking for PatientId:",Ze.patientId,typeof Ze.patientId),console.log("   Patients array length:",r.length),console.log("   First few patients:",r.slice(0,3).map(Qe=>({id:Qe.id,name:Qe.name,idType:typeof Qe.id})));const Z=Qe=>String(Qe).replace(/^P0*/,""),xe=Z(Ze.patientId);console.log("   Normalized target ID:",xe);let Ce=r.find(Qe=>{const ot=Z(Qe.id);return console.log("   Comparing:",ot,"with",xe),ot===xe});return Ce||(Ce=r.find(Qe=>String(Qe.id)===String(Ze.patientId))),console.log("   Selected Patient:",Ce),Ce?`${Ce.name} (ID: ${Ce.id})`:S&&S.patientName!=="Unknown"?`${S.patientName} (ID: ${Ze.patientId})`:`Patient ID: ${Ze.patientId} (Not Found - Check Console)`})()})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"recordType",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Record Type"}),e.jsx(Ve,{id:"recordType",type:"text",placeholder:"Enter record type (e.g., Consultation, Diagnosis, Treatment)",value:Ze.recordType,onChange:Z=>it(xe=>({...xe,recordType:Z.target.value})),className:"border-gray-200 rounded-lg"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(ae,{htmlFor:"date",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date"}),e.jsx(Ve,{id:"date",type:"date",value:Ze.date,onChange:Z=>it(xe=>({...xe,date:Z.target.value})),className:"border-gray-200 rounded-lg"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(ae,{htmlFor:"description",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Description *"}),e.jsx(As,{id:"description",placeholder:"Enter medical record description...",value:Ze.description,onChange:Z=>it(xe=>({...xe,description:Z.target.value})),rows:4,required:!0,className:"border-gray-200 rounded-lg"})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center",children:[e.jsx(tc,{className:"w-4 h-4 mr-2 text-blue-600"}),"Instant Photo Capture"]}),e.jsx("div",{className:"space-x-2",children:Ne?e.jsxs(e.Fragment,{children:[e.jsxs(P,{type:"button",onClick:G,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(tc,{className:"w-4 h-4 mr-2"}),"Capture Photo"]}),e.jsx(P,{type:"button",variant:"outline",onClick:le,className:"bg-gray-50 hover:bg-gray-100 text-gray-600 border-gray-200",children:"Stop Camera"})]}):e.jsxs(P,{type:"button",onClick:ee,variant:"outline",className:"bg-blue-50 hover:bg-blue-100 text-blue-600 border-blue-200",children:[e.jsx(tc,{className:"w-4 h-4 mr-2"}),"Start Camera"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("video",{ref:we,autoPlay:!0,playsInline:!0,className:"w-full h-64 bg-black rounded-lg border border-gray-200",style:{display:Ne?"block":"none"}}),!Ne&&e.jsx("div",{className:"w-full h-64 bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(tc,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:'Click "Start Camera" to begin'})]})}),e.jsx("canvas",{ref:K,style:{display:"none"}})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 text-gray-700",children:["Captured Photos (",Be.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto bg-gray-50 rounded-lg p-2",children:Be.map((Z,xe)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(Z),alt:`Captured ${xe+1}`,className:"w-full h-20 object-cover rounded border"}),e.jsx(P,{type:"button",size:"sm",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>{We(Ce=>Ce.filter((Qe,ot)=>ot!==xe)),it(Ce=>({...Ce,photoFiles:Ce.photoFiles.filter((Qe,ot)=>ot!==xe)}))},children:""})]},xe))})]})]})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 text-gray-800 flex items-center",children:[e.jsx(rn,{className:"w-4 h-4 mr-2 text-purple-600"}),"Upload Photos"]}),e.jsx(Ve,{type:"file",accept:"image/*",multiple:!0,onChange:Z=>fe(Z.target.files),className:"mb-2 border-gray-200 rounded-lg"}),Ze.photoFiles.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Selected files: ",Ze.photoFiles.length]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 bg-gray-50 rounded-lg p-2",children:Ze.photoFiles.map((Z,xe)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(Z),alt:Z.name,className:"w-full h-20 object-cover rounded border"}),e.jsx(P,{type:"button",size:"sm",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>{it(Ce=>({...Ce,photoFiles:Ce.photoFiles.filter((Qe,ot)=>ot!==xe)}))},children:""})]},xe))})]})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 text-gray-800 flex items-center",children:[e.jsx(rn,{className:"w-4 h-4 mr-2 text-orange-600"}),"Upload Documents"]}),e.jsx(Ve,{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,image/*",multiple:!0,onChange:Z=>ye(Z.target.files),className:"mb-2 border-gray-200 rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Supported formats: PDF, Word, Excel, PowerPoint, Text, CSV, Images (Max 500MB per file)"}),Ze.documentFiles.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Selected documents: ",Ze.documentFiles.length]}),e.jsx("div",{className:"space-y-2 bg-gray-50 rounded-lg p-2 max-h-48 overflow-y-auto",children:Ze.documentFiles.map((Z,xe)=>{var Ce;return e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded bg-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-blue-600",children:((Ce=Z.name.split(".").pop())==null?void 0:Ce.toUpperCase())||"DOC"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:Z.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(Z.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(P,{type:"button",size:"sm",variant:"destructive",className:"h-6 w-6 p-0",onClick:()=>{it(Qe=>({...Qe,documentFiles:Qe.documentFiles.filter((ot,et)=>et!==xe)}))},children:""})]},xe)})})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:e.jsx(P,{onClick:Ct,disabled:w||!Ze.patientId||!Ze.description.trim(),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-2 rounded-lg font-medium shadow-sm transition-all duration-200",children:w?e.jsxs(e.Fragment,{children:[e.jsx(_A,{className:"w-4 h-4 mr-2 animate-spin"}),S?"Updating...":"Adding..."]}):S?"Update Record":"Add Record"})})]})})})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>F(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl rounded-xl flex flex-col",onClick:Z=>Z.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6 flex-shrink-0",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 rounded-t-xl"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(st,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Medical Record Details"})]}),e.jsx("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:e.jsxs("span",{className:"text-gray-600",children:["Complete medical record information for ",R.patientName]})})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>F(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",style:{scrollbarWidth:"thin",scrollbarColor:"#60a5fa #dbeafe"},children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),"Patient Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 rounded-lg border border-blue-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-blue-700 block",children:"Patient Name"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:R.patientName})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 rounded-lg border border-purple-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-purple-700 block",children:"Patient ID"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:R.patientId})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 rounded-lg border border-green-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Pt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-green-700 block",children:"Joining Date"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(()=>{const Z=r.find(xe=>String(xe.id)===String(R.patientId));return Z&&Z.admissionDate?wt(new Date(Z.admissionDate),"dd/MM/yyyy"):"Not Available"})()})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-3 sm:p-4 rounded-lg border border-orange-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(ly,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-orange-700 block",children:"Record Date"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:wt(new Date(R.date),"dd/MM/yyyy")})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-3 sm:p-4 rounded-lg border border-indigo-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-indigo-700 block",children:"Created By"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:R.createdBy})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-green-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(us,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Add New Medical Record"]}),e.jsxs("form",{onSubmit:qs,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-date",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-blue-600"}),"Record Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"add-record-date",type:"date",value:dt.date,onChange:Z=>xt({...dt,date:Z.target.value}),className:"w-full bg-white/90 backdrop-blur-sm border-blue-200 focus:border-blue-400 focus:ring-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-type",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-purple-600"}),"Record Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"add-record-type",type:"text",value:dt.recordType,onChange:Z=>xt({...dt,recordType:Z.target.value}),className:"w-full bg-white/90 backdrop-blur-sm border-purple-200 focus:border-purple-400 focus:ring-purple-300",placeholder:"Enter record type (e.g., Consultation, Prescription, Lab Report)",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-description",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-orange-600"}),"Description"]}),e.jsx("textarea",{id:"add-record-description",value:dt.description,onChange:Z=>xt({...dt,description:Z.target.value}),className:"w-full p-3 bg-white/90 backdrop-blur-sm border border-orange-200 rounded-md focus:border-orange-400 focus:ring-orange-300 min-h-[100px] resize-y",placeholder:"Enter detailed description of the medical record..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ae,{htmlFor:"add-record-files",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(rn,{className:"h-4 w-4 text-indigo-600"}),"Upload Files (Images, Audio, Documents)"]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border-2 border-dashed border-indigo-200 rounded-lg p-4 hover:border-indigo-400 transition-colors",children:[e.jsx("input",{id:"add-record-files",type:"file",multiple:!0,accept:"image/*,audio/*,.pdf,.doc,.docx,.txt",onChange:pe,className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Supported: Images (JPG, PNG, GIF), Audio (MP3, WAV), Documents (PDF, DOC, TXT)"})]}),Wt.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Selected Files:"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Wt.map((Z,xe)=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white p-3 rounded-lg border border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:Z.type.startsWith("image/")?e.jsx(kA,{className:"w-4 h-4 text-blue-600"}):Z.type.startsWith("audio/")?e.jsx(Sd,{className:"w-4 h-4 text-green-600"}):e.jsx(It,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",title:Z.name,children:Z.name.length>20?`${Z.name.substring(0,20)}...`:Z.name})]}),e.jsx("button",{type:"button",onClick:()=>qt(Wt.filter((Ce,Qe)=>Qe!==xe)),className:"w-6 h-6 bg-red-100 hover:bg-red-200 text-red-600 rounded-full flex items-center justify-center transition-colors",children:e.jsx(jt,{className:"w-3 h-3"})})]},xe))})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx(P,{type:"submit",disabled:bs||!dt.date||!((qe=dt.recordType)!=null&&qe.trim()),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:bs?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding Record..."]}):e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Add Medical Record"]})})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-purple-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"}),"Medical History"]}),e.jsxs(P,{variant:"outline",onClick:()=>U(!0),className:"bg-white/80 backdrop-blur-sm border-purple-200 hover:bg-purple-50 text-purple-700 text-xs sm:text-sm px-3 py-1.5 min-w-[140px]",children:[e.jsx(Qt,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),z!==null&&se!==null?`${T[z-1]} ${se}`:`${T[V-1]} ${Y}`]})]}),e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg border border-purple-100 overflow-hidden",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-purple-500 via-blue-500 to-indigo-500 border-none",children:[e.jsx(re,{className:"text-center font-semibold text-white",children:"S NO"}),e.jsx(re,{className:"text-center font-semibold text-white",children:"Date"}),e.jsx(re,{className:"text-center font-semibold text-white",children:"Type"}),e.jsx(re,{className:"text-center font-semibold text-white",children:"Description"}),e.jsx(re,{className:"text-center font-semibold text-white",children:"Files"}),e.jsx(re,{className:"text-center font-semibold text-white",children:"Action"})]})}),e.jsxs(os,{children:[Mt.map((Z,xe)=>e.jsxs(nt,{className:"hover:bg-muted/50",children:[e.jsx(q,{className:"text-center font-medium",children:xe+1}),e.jsx(q,{className:"text-center",children:wt(new Date(Z.date),"dd/MM/yyyy")}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(kt,{variant:"outline",className:"capitalize",children:Z.recordType})})}),e.jsx(q,{className:"text-center max-w-xs truncate",title:Z.description,children:Z.description||"No description"}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center items-center gap-2",children:(()=>{var Ce;return console.log(" Display check for record:",Z.id,"Images:",Z.images,"Length:",(Ce=Z.images)==null?void 0:Ce.length),Z.images&&Z.images.length>0})()?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{const Ce=Z.images[0];if(Ce.includes(".jpg")||Ce.includes(".jpeg")||Ce.includes(".png")||Ce.includes(".gif")||Ce.includes(".bmp")||Ce.includes(".webp")){const ot=Z.images.filter(et=>et.includes(".jpg")||et.includes(".jpeg")||et.includes(".png")||et.includes(".gif")||et.includes(".bmp")||et.includes(".webp"));ze({show:!0,images:ot,currentIndex:0,recordId:Z.id})}else{const ot=`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${Z.images[0]}`;window.open(ot,"_blank")}},className:"w-8 h-8 rounded-lg bg-blue-100 hover:bg-blue-200 text-blue-600 border-blue-200 border flex items-center justify-center transition-colors",title:`View ${Z.images.length} file${Z.images.length>1?"s":""}`,children:e.jsx(vs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:async()=>{try{const Ce=Z.images[0],Qe=Ce.split("/").pop()||"file",ot=`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${Ce}`,ct=await(await fetch(ot)).blob(),Kt=window.URL.createObjectURL(ct),Nt=document.createElement("a");Nt.href=Kt,Nt.download=Qe,Nt.style.display="none",document.body.appendChild(Nt),Nt.click(),document.body.removeChild(Nt),window.URL.revokeObjectURL(Kt)}catch(Ce){console.error("Download failed:",Ce);const Qe=`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${Z.images[0]}`;window.open(Qe,"_blank")}},className:"w-8 h-8 rounded-lg bg-green-100 hover:bg-green-200 text-green-600 border-green-200 border flex items-center justify-center transition-colors",title:`Download ${Z.images.length} file${Z.images.length>1?"s":""}`,children:e.jsx(Cs,{className:"w-4 h-4"})})]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"No files"})})}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("button",{onClick:()=>{ce(Z),ve(!0)},className:"action-btn-lead action-btn-delete w-8 h-8 rounded-lg flex items-center justify-center",title:"Delete Medical Record",children:e.jsx(mt,{className:"w-4 h-4"})})})})]},Z.id)),Mt.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No medical records found for this patient"})})]})]})})]})]})]})}),e.jsx($t,{open:ue,onOpenChange:U,children:e.jsxs(Ot,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsx(Bt,{children:"Filter Medical History"}),e.jsx(Vt,{children:"Select month and year to filter patient's medical history"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(ae,{children:"Month"}),e.jsx("select",{value:V,onChange:Z=>O(Number(Z.target.value)),className:"w-full p-2 border rounded-md",children:T.map((Z,xe)=>e.jsx("option",{value:xe,children:Z},xe))})]}),e.jsxs("div",{children:[e.jsx(ae,{children:"Year"}),e.jsx("select",{value:Y,onChange:Z=>W(Number(Z.target.value)),className:"w-full p-2 border rounded-md",children:Array.from({length:10},(Z,xe)=>M-xe).map(Z=>e.jsx("option",{value:Z,children:Z},Z))})]})]}),e.jsxs(zt,{children:[e.jsx(P,{variant:"outline",onClick:()=>U(!1),className:"global-btn global-btn-secondary",children:"Cancel"}),e.jsx(P,{onClick:()=>{te(V),J(Y),U(!1)},className:"global-btn global-btn-primary",children:"Apply Filter"})]})]})}),e.jsx($t,{open:de,onOpenChange:ve,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Medical Record"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this medical record? This action cannot be undone."})]})]})}),I&&e.jsxs("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:I.patientName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:wt(new Date(I.date),"dd/MM/yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:I.recordType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:I.description||"No description"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-red-50 rounded border border-red-200",children:e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("p",{className:"font-medium mb-2",children:" This will permanently delete:"}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:" The complete medical record"}),e.jsx("li",{children:" All associated files and images"}),e.jsx("li",{children:" All audio recordings"}),e.jsx("li",{children:" Medical history entry"})]})]})})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{ve(!1),ce(null)},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:Lt,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Medical Record"]})]})]})}),e.jsx("audio",{ref:$e}),e.jsx($s,{open:me,onOpenChange:H,selectedMonth:ne,selectedYear:oe,onMonthChange:Q,onYearChange:ge,onApply:()=>{he(ne),ke(oe),H(!1),Ue()},title:"Select Month & Year",description:"Filter medical records by specific month and year",previewText:"medical records"})]})]})},vd=async(t,s="new",a="photo")=>{try{if(console.log(" Starting staff file upload..."),console.log(" File details:",{name:t.name,size:t.size,type:t.type,lastModified:t.lastModified}),console.log(" Upload params:",{staffId:s,fieldName:a}),!t)throw new Error("No file provided");if(t.size>10*1024*1024)throw new Error("File size exceeds 10MB limit");const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];if(!r.includes(t.type))throw new Error(`File type ${t.type} not allowed. Allowed types: ${r.join(", ")}`);try{console.log(" Testing backend connectivity through proxy...");const c=await fetch("/api/health",{method:"GET",headers:{Accept:"application/json"}});if(console.log(" Health check response:",c.status,c.statusText),!c.ok){console.log(" Trying direct backend connection...");const u=await fetch("http://localhost:4000/api/health",{method:"GET"});if(!u.ok)throw new Error(`Backend server is not responding. Proxy: ${c.status}, Direct: ${u.status}`);console.log(" Direct backend connection works, but proxy might be misconfigured")}const d=await c.text();console.log(" Backend server is healthy:",d)}catch(c){throw console.error(" Backend health check failed:",c),new Error(`Cannot connect to backend server. Please make sure the backend server is running on port http://localhost:4000/api and the proxy is configured correctly. Error: ${c.message}`)}const n=new FormData;n.append("file",t),n.append("staffId",s),n.append("fieldName",a),console.log(" FormData contents:"),console.log(" - file:",t.name,t.size,"bytes"),console.log(" - staffId:",s,"type:",typeof s),console.log(" - fieldName:",a);const l="/api/upload-staff-file";console.log(" Sending upload request to backend..."),console.log(" Request URL:",l),console.log(" FormData contents:",{file:t.name,staffId:s,fieldName:a});const i=await fetch(l,{method:"POST",body:n});if(console.log(" Upload response status:",i.status,i.statusText),!i.ok){let c;try{const d=await i.json();c=d.error||d.message||`HTTP ${i.status}`,console.error(" Upload failed - Error data:",d)}catch{c=`HTTP ${i.status} - ${i.statusText}`,console.error(" Upload failed - Could not parse error response")}throw new Error(`Upload failed: ${c}`)}const o=await i.json();if(console.log(" Upload successful:",o),!o.filePath)throw new Error("Upload succeeded but no file path returned");return o.filePath}catch(r){throw console.error(" Staff file upload error:",r),r}},Fz=t=>t?t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:image/")||t.startsWith("/Photos")||t.startsWith("/uploads")?t:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${t.startsWith("/")?"":"/"}${t}`:"",Mz=()=>{js();const t=al(),[s,a]=m.useState(!1),[r,n]=m.useState(),[l,i]=m.useState(null),[o,c]=m.useState(""),d=async()=>{try{const[k,A]=await Promise.all([fetch("/api/staff"),fetch("/api/staff-categories")]);if(!k.ok)throw new Error("Failed to fetch staff data");const T=await k.json();let M=0;return T.forEach(X=>{if(X.id&&/^STF\d{3,}$/.test(X.id)){const ne=parseInt(X.id.replace("STF",""),10);!isNaN(ne)&&ne>M&&(M=ne)}}),`STF${String(M+1).padStart(3,"0")}`}catch(k){return console.error("Error generating staff ID:",k),`STF${String(Date.now()).slice(-3)}`}},[u,x]=m.useState({name:"",email:"",phone:"",address:"",role:"",department:"",salary:"",status:"Active"}),[p,h]=m.useState([]);m.useEffect(()=>{y()},[]);const y=async()=>{try{console.log("Fetching staff categories from API...");const k=await fetch("/api/staff-categories");if(!k.ok)throw new Error(`API request failed: ${k.status}`);const A=await k.json();console.log("Fetched categories:",A);const T=A.filter(M=>M.status==="active").map(M=>M.name);h(T),console.log("Set staff categories:",T)}catch(k){console.error("Error fetching staff categories from API:",k);const A=localStorage.getItem("staffCategories");if(A)try{const T=JSON.parse(A);Array.isArray(T)&&h(T.map(M=>typeof M=="string"?M:M.name||""))}catch{h([])}else h([]);Te({title:"Warning",description:"Failed to load staff categories from API. Using local data.",variant:"destructive"})}},[f,v]=m.useState({aadharFront:null,aadharBack:null,panFront:null,panBack:null}),w=(k,A)=>{if(k==="phone"){const T=A.replace(/\D/g,"");T.length<=10&&x(M=>({...M,[k]:T}))}else x(T=>({...T,[k]:A}))},g=k=>{if(!k)return!0;const A=5*1024*1024;return k.size>A?(Te({title:"File Too Large",description:`File size must be less than 5MB. Current file size: ${(k.size/(1024*1024)).toFixed(2)}MB`,variant:"destructive"}),!1):!0},j=async k=>{if(g(k))if(i(k),k){let A=o;A||(A=await d(),c(A),console.log(" Generated Staff ID for upload:",A)),Te({title:"Photo Selected",description:`${k.name} (${(k.size/(1024*1024)).toFixed(2)}MB) selected. Will upload with Staff ID: ${A}`})}else c("")},N=(k,A)=>{g(A)&&(v(T=>({...T,[k]:A})),A&&Te({title:"File Selected",description:`${A.name} (${(A.size/(1024*1024)).toFixed(2)}MB) selected successfully`}))},E=({label:k,field:A,accept:T=".pdf,.jpg,.jpeg,.png"})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:k}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(Ve,{type:"file",accept:T,onChange:M=>{var X;return N(A,((X=M.target.files)==null?void 0:X[0])||null)},className:"hidden",id:A}),e.jsxs(ae,{htmlFor:A,className:"flex items-center space-x-2 cursor-pointer bg-muted hover:bg-muted/80 px-4 py-3 rounded-lg border border-input transition-colors w-full sm:w-auto min-h-[2.75rem] justify-center sm:justify-start",children:[e.jsx(rn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-center sm:text-left",children:f[A]?`${f[A].name.length>25?f[A].name.substring(0,25)+"...":f[A].name} (${(f[A].size/(1024*1024)).toFixed(2)}MB)`:"Choose file (Max 5MB)"})]}),f[A]&&e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>N(A,null),className:"w-full sm:w-auto h-11",children:"Remove"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted formats: ",T,". Maximum file size: 5MB"]})]}),C=async k=>{k.preventDefault(),a(!0);try{if(!u.name||!u.email||!u.phone||!u.role){Te({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"}),a(!1);return}const A=o||await d();console.log(" Using Staff ID for form submission:",A),console.log(" Pre-generated ID:",o);let T="";if(l)try{console.log(" Uploading photo with Staff ID:",A),T=await vd(l,A,"profile_photo"),console.log(" Photo uploaded to:",T)}catch(me){console.error(" Photo upload failed:",me),Te({title:"Upload Error",description:`Failed to upload photo: ${me.message}`,variant:"destructive"}),a(!1);return}const M={aadharFront:"",aadharBack:"",panFront:"",panBack:""};if(f.aadharFront)try{M.aadharFront=await vd(f.aadharFront,A,"aadharFront"),console.log(" Aadhar front uploaded:",M.aadharFront)}catch(me){console.error(" Aadhar front upload failed:",me),Te({title:"Upload Error",description:`Failed to upload Aadhar front: ${me.message}`,variant:"destructive"}),a(!1);return}if(f.aadharBack)try{M.aadharBack=await vd(f.aadharBack,A,"aadharBack"),console.log(" Aadhar back uploaded:",M.aadharBack)}catch(me){console.error(" Aadhar back upload failed:",me),Te({title:"Upload Error",description:`Failed to upload Aadhar back: ${me.message}`,variant:"destructive"}),a(!1);return}if(f.panFront)try{M.panFront=await vd(f.panFront,A,"panFront"),console.log(" PAN front uploaded:",M.panFront)}catch(me){console.error(" PAN front upload failed:",me),Te({title:"Upload Error",description:`Failed to upload PAN front: ${me.message}`,variant:"destructive"}),a(!1);return}if(f.panBack)try{M.panBack=await vd(f.panBack,A,"panBack"),console.log(" PAN back uploaded:",M.panBack)}catch(me){console.error(" PAN back upload failed:",me),Te({title:"Upload Error",description:`Failed to upload PAN back: ${me.message}`,variant:"destructive"}),a(!1);return}let X=null;if(u.role)try{const me=await fetch("/api/staff-categories");if(me.ok){const L=(await me.json()).find(he=>he.name===u.role);X=L?L.id:null}}catch(me){console.warn("Could not fetch category ID:",me)}const ne=r?r.toISOString().split("T")[0]:new Date().toISOString().split("T")[0],Q={id:A,name:u.name,email:u.email,phone:u.phone,address:u.address,role:u.role,category_id:X,department:u.department,join_date:ne,salary:u.salary?parseFloat(u.salary):void 0,status:u.status,photo:T,documents:M};console.log(" Sending staff data to API:",Q);const oe=await fetch("/api/staff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(console.log(" Staff creation response status:",oe.status,oe.statusText),!oe.ok){let me;try{const H=await oe.json();me=H.error||H.message||`HTTP ${oe.status}`,console.error(" Staff creation failed - Error data:",H)}catch{const H=await oe.text();me=`HTTP ${oe.status} - ${oe.statusText}`,console.error(" Staff creation failed - Non-JSON response:",H)}throw new Error(me)}const ge=await oe.json();console.log(" Staff created successfully:",ge),Te({title:"Staff Added Successfully!",description:`Staff ${A} has been registered in the database.`}),setTimeout(()=>{t("/management/staff")},1500)}catch(A){console.error("Error adding staff:",A),Te({title:"Error",description:`Failed to add staff: ${A.message}`,variant:"destructive"})}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 pl-1 pr-3 sm:pl-2 sm:pr-4 lg:pl-3 lg:pr-6 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-lg border border-white/30 rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 shadow-2xl mb-4 sm:mb-6 lg:mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-indigo-600/5 to-purple-600/5"}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full -mr-12 sm:-mr-16 -mt-12 sm:-mt-16"}),e.jsxs("div",{className:"relative flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl sm:rounded-2xl shadow-lg",children:e.jsx(yi,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Add New Staff"})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-2 bg-blue-50 px-4 py-2 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Ready to submit"})]})]})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4 sm:space-y-6",children:[e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(Rt,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Staff Information"]})}),e.jsxs(Re,{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"name",children:"Full Name *"}),e.jsx(Ve,{id:"name",placeholder:"Enter staff's full name",value:u.name,onChange:k=>w("name",k.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(Ve,{id:"email",type:"email",placeholder:"Enter email address",value:u.email,onChange:k=>w("email",k.target.value),required:!0,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ps,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(Ve,{id:"phone",placeholder:"Enter phone number",value:u.phone,onChange:k=>w("phone",k.target.value),required:!0,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(ae,{htmlFor:"address",children:"Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(mr,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(As,{id:"address",placeholder:"Enter complete address",value:u.address,onChange:k=>w("address",k.target.value),required:!0,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"role",children:"Staff Category *"}),e.jsxs(At,{value:u.role,onValueChange:k=>{k==="__add_category__"?t("/management/staff-category"):w("role",k)},required:!0,children:[e.jsx(Et,{children:e.jsx(_t,{placeholder:p.length===0?"Add Category":"Select staff category"})}),e.jsx(Dt,{children:p.length>0?p.map(k=>e.jsx(Pe,{value:k,children:k},k)):e.jsx(Pe,{value:"__add_category__",children:"Add Category"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"department",children:"Department"}),e.jsx(Ve,{id:"department",placeholder:"Enter department",value:u.department,onChange:k=>w("department",k.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"salary",children:"Salary"}),e.jsx(Ve,{id:"salary",type:"number",placeholder:"Enter salary",value:u.salary,onChange:k=>w("salary",k.target.value),min:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Join Date *"}),e.jsxs(go,{children:[e.jsx(vo,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:bt("w-full justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[e.jsx(Pt,{className:"mr-2 h-4 w-4"}),r?wt(r,"PPP"):"Pick join date"]})}),e.jsx(Si,{className:"w-auto p-0",align:"start",children:e.jsx(bi,{mode:"single",selected:r,onSelect:n,initialFocus:!0,className:"pointer-events-auto"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"status",children:"Status"}),e.jsxs(At,{value:u.status,onValueChange:k=>w("status",k),children:[e.jsx(Et,{children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsx(ae,{htmlFor:"photo",className:"text-sm font-medium",children:"Staff Photo"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(Ve,{type:"file",accept:"image/*",onChange:k=>{var A;return j(((A=k.target.files)==null?void 0:A[0])||null)},className:"hidden",id:"photo"}),e.jsxs(ae,{htmlFor:"photo",className:"flex items-center space-x-2 cursor-pointer bg-muted hover:bg-muted/80 px-4 py-3 rounded-lg border border-input transition-colors w-full sm:w-auto min-h-[2.75rem] justify-center sm:justify-start",children:[e.jsx(rn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-center sm:text-left",children:l?`${l.name.length>20?l.name.substring(0,20)+"...":l.name} (${(l.size/(1024*1024)).toFixed(2)}MB)`:"Choose photo (Max 5MB)"})]}),l&&e.jsx("div",{className:"flex space-x-2 w-full sm:w-auto",children:e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>{i(null),c("")},className:"flex-1 sm:flex-none h-11",children:"Remove"})})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-blue-600",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{children:["Photo will be saved with Staff ID: ",o]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted formats: JPG, JPEG, PNG, GIF. Maximum file size: 5MB. Photos will be saved to server/photos/Staff Admission/","{","STF_ID","}","."]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(It,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Document Upload"]})}),e.jsx(Re,{className:"p-4 sm:p-6 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-base",children:"Aadhar Card"}),e.jsx(E,{label:"Aadhar Card Front",field:"aadharFront",accept:"image/*"}),e.jsx(E,{label:"Aadhar Card Back",field:"aadharBack",accept:"image/*"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-base",children:"PAN Card"}),e.jsx(E,{label:"PAN Card Front",field:"panFront",accept:"image/*"}),e.jsx(E,{label:"PAN Card Back",field:"panBack",accept:"image/*"})]})]})})]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-4 sm:pt-6",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>t("/management/staff"),className:"header-action-btn header-action-btn--clear h-11 px-6 w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),e.jsx(P,{type:"submit",disabled:s||p.length===0,className:"header-action-btn header-action-btn--primary h-11 px-8 w-full sm:w-auto order-1 sm:order-2",children:p.length===0?"Add Staff (Add Category First)":s?"Adding Staff...":"Add Staff"})]})]})]})})},Iz=()=>{js();const[t,s]=Fe.useState([]),[a,r]=Fe.useState(!0);Fe.useEffect(()=>{n()},[]);const n=async()=>{try{r(!0);const U=await gt.getAllStaffCategories();console.log("Fetched staff categories from MySQL:",U);const z=[...U].sort((te,se)=>te.id-se.id);s(z)}catch(U){console.error("Error fetching staff categories:",U);const z=localStorage.getItem("staffCategories");if(z){const te=JSON.parse(z).map(se=>({...se,id:parseInt(se.id)||se.id,created_at:se.createdAt||se.created_at||new Date().toISOString(),updated_at:se.updatedAt||se.updated_at||new Date().toISOString()}));s(te)}L({title:"Warning",description:"Could not connect to database. Using local data.",variant:"destructive"})}finally{r(!1)}},[l,i]=Fe.useState(!1),[o,c]=Fe.useState(!1),[d,u]=Fe.useState(null),[x,p]=Fe.useState(""),[h,y]=Fe.useState({name:"",description:"",status:"active",quantity:0}),f=["January","February","March","April","May","June","July","August","September","October","November","December"],v=new Date().getFullYear(),[w,g]=Fe.useState(new Date().getMonth()),[j,N]=Fe.useState(v),[E,C]=Fe.useState(!1),[k,A]=Fe.useState(new Date().getMonth()),[T,M]=Fe.useState(v),[X,ne]=Fe.useState(!1),[Q,oe]=Fe.useState(null),[ge,me]=Fe.useState(1),H=10;Fe.useEffect(()=>{me(1)},[x,t.length]);const{toast:L}=ya(),he=async()=>{if(!h.name){L({title:"Error",description:"Please enter a category name",variant:"destructive"});return}try{const U=await gt.addStaffCategory({name:h.name,description:h.description,status:h.status});await n(),y({name:"",description:"",status:"active",quantity:0}),i(!1),L({title:"Success",description:"Category added successfully"})}catch(U){console.error("Error adding category:",U),L({title:"Error",description:U instanceof Error?U.message:"Failed to add category",variant:"destructive"})}},ie=U=>{u(U.id),y({name:U.name,description:U.description,status:U.status,quantity:U.quantity||0}),c(!0)},ke=async()=>{if(!h.name||d===null){L({title:"Error",description:"Please enter a category name",variant:"destructive"});return}try{await gt.updateStaffCategory(d,{name:h.name,description:h.description,status:h.status}),await n(),c(!1),u(null),y({name:"",description:"",status:"active",quantity:0}),L({title:"Success",description:"Category updated successfully"})}catch(U){console.error("Error updating category:",U),L({title:"Error",description:U instanceof Error?U.message:"Failed to update category",variant:"destructive"})}},V=U=>{oe(U),ne(!0)},O=async()=>{if(Q)try{await gt.deleteStaffCategory(Q.id),ne(!1),oe(null),await n(),L({title:"Success",description:"Category deleted successfully"})}catch(U){console.error("Error deleting category:",U),L({title:"Error",description:U instanceof Error?U.message:"Failed to delete category",variant:"destructive"})}},Y=t.filter(U=>{const z=U.name.toLowerCase().includes(x.toLowerCase())||U.description.toLowerCase().includes(x.toLowerCase());if(k!==null&&T!==null){const te=U.created_at;if(!te)return!1;let se;if(te.includes("T"))se=new Date(te);else if(/^\d{4}-\d{2}-\d{2}$/.test(te))se=new Date(te+"T00:00:00");else return!1;return isNaN(se.getTime())?!1:z&&se.getMonth()===k&&se.getFullYear()===T}return z}).sort((U,z)=>U.id-z.id),W=Math.ceil(Y.length/H),ue=Y.slice((ge-1)*H,ge*H);return a?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading staff categories..."})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Staff Categories"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a,disabled:a}),e.jsxs(P,{onClick:()=>i(!0),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:Y.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:Y.filter(U=>U.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In use"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(us,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:Y.filter(U=>U.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Archived"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(mt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ve,{placeholder:"Search categories...",value:x,onChange:U=>p(U.target.value),className:"w-full"})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[150px]",children:e.jsx(Ht.MonthYear,{onClick:()=>C(!0),text:k!==null&&T!==null?`${f[k]} ${T}`:"Show All"})})]})}),e.jsx($t,{open:l,onOpenChange:i,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container",children:[e.jsxs(Ut,{className:"editpopup form crm-modal-header",children:[e.jsxs(Bt,{className:"editpopup form crm-modal-title",children:[e.jsx(us,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Add New Category"]}),e.jsx(Vt,{className:"editpopup form text-sm sm:text-base text-gray-600",children:"Create a new category for staff"})]}),e.jsx("form",{onSubmit:U=>{U.preventDefault(),he()},className:"editpopup form crm-edit-form",children:e.jsxs("div",{className:"editpopup form crm-edit-form-grid",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label required",children:"Category Name"}),e.jsx(Ve,{id:"name",value:h.name,onChange:U=>y({...h,name:U.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label",children:"Description"}),e.jsx(As,{id:"description",value:h.description,onChange:U=>y({...h,description:U.target.value}),placeholder:"Enter category description",rows:3,className:"editpopup form crm-edit-form-textarea"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label",children:"Status"}),e.jsxs("select",{id:"status",className:"editpopup form crm-edit-form-select",value:h.status,onChange:U=>y({...h,status:U.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>i(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:he,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Add Category"]})]})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(ds,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Categories List (",Y.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Categories (",Y.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Category Name"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Description"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Created Date"}),e.jsx("span",{className:"sm:hidden",children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:a?e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"px-2 sm:px-3 lg:px-4 py-8 text-center text-gray-500",children:"Loading categories..."})}):ue.map((U,z)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ge-1)*H+z+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm max-w-[100px] sm:max-w-[120px] truncate",children:U.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-[150px] sm:max-w-[200px] truncate",children:U.description}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsx(kt,{className:`${U.status==="active"?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200"} text-xs`,children:U.status.charAt(0).toUpperCase()+U.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const te=U.created_at;if(!te)return e.jsx("span",{className:"text-gray-400 text-xs",children:"Not Set"});const se=new Date(te);if(isNaN(se.getTime()))return te;const[J,je,b]=se.toISOString().split("T")[0].split("-");return`${b}/${je}/${J}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>ie(U),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Category",children:e.jsx(an,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>V(U),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Category",children:e.jsx(mt,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},U.id))})]}),!a&&Y.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white",children:[e.jsx(ds,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No categories found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No categories match your search criteria. Try adjusting your filters."})]})]}),W>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Page ",ge," of ",W,"(",Y.length," total categories)"]}),e.jsxs("span",{className:"sm:hidden",children:[ge," / ",W]})]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>me(U=>Math.max(1,U-1)),disabled:ge===1,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,W)},(U,z)=>{let te;return W<=5||ge<=3?te=z+1:ge>=W-2?te=W-4+z:te=ge-2+z,e.jsx(P,{variant:ge===te?"default":"outline",size:"sm",onClick:()=>me(te),className:`w-8 h-8 p-0 text-xs ${ge===te?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-white hover:bg-gray-50 text-gray-600 border-gray-300"}`,children:te},te)})}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>me(U=>Math.min(W,U+1)),disabled:ge===W,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"})]})]})]})]})]}),e.jsx($t,{open:E,onOpenChange:C,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsxs(Bt,{className:"editpopup form crm-modal-title",children:[e.jsx(Pt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Select Month & Year"]})}),e.jsx("div",{className:"editpopup form crm-edit-form",children:e.jsx("div",{className:"flex flex-col gap-4 py-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{className:"editpopup form crm-edit-form-select flex-1",value:w,onChange:U=>g(Number(U.target.value)),children:f.map((U,z)=>e.jsx("option",{value:z,children:U},U))}),e.jsx("select",{className:"editpopup form crm-edit-form-select flex-1",value:j,onChange:U=>N(Number(U.target.value)),children:[...Array(10)].map((U,z)=>e.jsx("option",{value:v-5+z,children:v-5+z},v-5+z))})]})})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>C(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:()=>{A(w),M(j),C(!1)},className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Submit"]})]})]})}),e.jsx($t,{open:o,onOpenChange:c,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container",children:[e.jsxs(Ut,{className:"editpopup form crm-modal-header",children:[e.jsxs(Bt,{className:"editpopup form crm-modal-title",children:[e.jsx(an,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Edit Category"]}),e.jsx(Vt,{className:"editpopup form text-sm sm:text-base text-gray-600",children:"Update the details for this category"})]}),e.jsx("form",{onSubmit:U=>{U.preventDefault(),ke()},className:"editpopup form crm-edit-form",children:e.jsxs("div",{className:"editpopup form crm-edit-form-grid",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{htmlFor:"edit-name",className:"editpopup form crm-edit-form-label required",children:"Category Name"}),e.jsx(Ve,{id:"edit-name",value:h.name,onChange:U=>y({...h,name:U.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{htmlFor:"edit-description",className:"editpopup form crm-edit-form-label",children:"Description"}),e.jsx(As,{id:"edit-description",value:h.description,onChange:U=>y({...h,description:U.target.value}),placeholder:"Enter category description",rows:3,className:"editpopup form crm-edit-form-textarea"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{htmlFor:"edit-quantity",className:"editpopup form crm-edit-form-label",children:"Quantity"}),e.jsx(Ve,{id:"edit-quantity",type:"number",value:h.quantity,onChange:U=>y({...h,quantity:parseInt(U.target.value)||0}),placeholder:"Enter quantity",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{htmlFor:"edit-status",className:"editpopup form crm-edit-form-label",children:"Status"}),e.jsxs("select",{id:"edit-status",className:"editpopup form crm-edit-form-select",value:h.status,onChange:U=>y({...h,status:U.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>c(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:ke,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(an,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Update Category"]})]})]})}),e.jsx($t,{open:X,onOpenChange:ne,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Staff Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this staff category? This action cannot be undone."})]})]})}),Q&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:Q.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",Q.status.charAt(0).toUpperCase()+Q.status.slice(1)]})]}),Q.description&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:Q.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Created: ",(()=>{const U=Q.created_at;if(!U)return"Not Set";const z=new Date(U);return isNaN(z.getTime())?U:z.toLocaleDateString()})()]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{ne(!1),oe(null)},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:O,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Category"]})]})]})})]})})},Rz=()=>{var oe,ge,me,H,L,he,ie,ke,V,O,Y,W,ue,U,z,te,se,J,je,b;js();const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(""),[i,o]=m.useState("All"),[c,d]=m.useState(1),[u,x]=m.useState(null),[p,h]=m.useState(null),y=S=>S?S.startsWith("data:image/")?S:Fz(S):"",f=S=>{var I;const D=(I=S.target.files)==null?void 0:I[0];if(!D)return;if(D.size>5*1024*1024){alert("File size should be less than 5MB");return}if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(D.type)){alert("Please select a valid image file (JPEG, PNG, or GIF)");return}const F=new FileReader;F.onload=ce=>{var de;try{if(typeof((de=ce.target)==null?void 0:de.result)=="string"){const ve=ce.target.result;if(!ve.startsWith("data:image/"))throw new Error("Invalid image format");console.log("Processing image, size:",Math.round(ve.length/1024),"KB"),h(_e=>_e&&(console.log("Updating staff with new photo"),{..._e,photo:ve}))}}catch(ve){console.error("Error processing image:",ve),alert("Error processing image. Please try again.")}},F.onerror=()=>{console.error("Error reading file"),alert("Error reading file. Please try again.")},console.log("Starting to read file:",D.name),F.readAsDataURL(D)},[v,w]=m.useState(null),[g,j]=m.useState(!1),[N,E]=m.useState(!0),C=10,k=S=>({Active:"bg-success text-success-foreground",Inactive:"bg-muted text-muted-foreground"})[S]||"bg-muted text-muted-foreground";m.useEffect(()=>{(async()=>{var D;try{E(!0);const R=await gt.getAllStaff();console.log("Fetched staff from MySQL:",R),console.log("First staff documents:",(D=R[0])==null?void 0:D.documents),s(R);const F=await gt.getAllStaffCategories();console.log("Fetched staff categories:",F),r(F)}catch(R){console.error("Error fetching data:",R);const F=JSON.parse(localStorage.getItem("staff")||"[]");s(F)}finally{E(!1)}})()},[]),m.useEffect(()=>{d(1)},[n,i]);let A=t.filter(S=>{var D,R,F,I;return(((D=S==null?void 0:S.name)==null?void 0:D.toLowerCase().includes(n.toLowerCase()))||((R=S==null?void 0:S.id)==null?void 0:R.toLowerCase().includes(n.toLowerCase()))||((F=S==null?void 0:S.email)==null?void 0:F.toLowerCase().includes(n.toLowerCase()))||((I=S==null?void 0:S.role)==null?void 0:I.toLowerCase().includes(n.toLowerCase()))||(S==null?void 0:S.address)&&S.address.toLowerCase().includes(n.toLowerCase()))&&(i==="All"||(S==null?void 0:S.status)===i)});A.sort((S,D)=>{const R=F=>{if(!F||typeof F!="string")return 0;const I=F.match(/STF(\d+)/);return I?parseInt(I[1],10):0};return R(S==null?void 0:S.id)-R(D==null?void 0:D.id)});const T=()=>{const D=[["S No","Staff ID","Name","Email","Phone","Role","Department","Address","Join Date","Salary","Status"].join(","),...A.map((ce,de)=>[de+1,ce.id,ce.name,ce.email,ce.phone,ce.role,ce.department,ce.address,ce.joinDate,ce.salary,ce.status].map(ve=>typeof ve=="string"?'"'+ve.replace(/"/g,'""')+'"':ve).join(","))].join(`
`),R=new Blob([D],{type:"text/csv"}),F=window.URL.createObjectURL(R),I=document.createElement("a");I.href=F,I.download="staff-list.csv",I.click(),window.URL.revokeObjectURL(F)},M=(S,D)=>{console.log(`Updating ${S} in state...`),h(R=>{var I;if(!R)return console.log("Previous state is null"),R;const F={...R,[S]:D};return S==="photo"&&console.log("Updated photo in state, length:",((I=F.photo)==null?void 0:I.length)||0),F})},X=async()=>{var S;if(p){try{let D=null;if(p.role)try{const ce=await fetch("/api/staff-categories");if(ce.ok){const ve=(await ce.json()).find(_e=>_e.name===p.role);D=ve?ve.id:null}}catch(ce){console.warn("Could not fetch category ID:",ce)}let R=p.joinDate;if(p.joinDate&&!p.joinDate.match(/^\d{4}-\d{2}-\d{2}$/))try{const ce=new Date(p.joinDate);isNaN(ce.getTime())||(R=ce.toISOString().split("T")[0])}catch(ce){console.warn("Could not format join date:",ce)}const F={...p,category_id:D,join_date:R,photo:p.photo&&p.photo.startsWith("data:image/")?p.photo:"",documents:{aadharFront:p.aadharFront||"",aadharBack:p.aadharBack||"",aadharNumber:p.aadharNumber||"",panFront:p.panFront||"",panBack:p.panBack||"",panNumber:p.panNumber||""}};console.log("Updating staff:",p.id),console.log("Category ID:",D),console.log("Formatted join date:",R),console.log("Photo included:",!!F.photo),console.log("Photo data length:",((S=F.photo)==null?void 0:S.length)||0),await gt.updateStaff(p.id,F);const I=await gt.getAllStaff();s(I),console.log("Staff updated successfully with documents")}catch(D){console.error("Error updating staff:",D);const R=t.map(F=>F.id===p.id?p:F);s(R),localStorage.setItem("staff",JSON.stringify(R))}h(null)}},ne=S=>{w(S),j(!0)},Q=async()=>{if(v){try{const D=JSON.parse(localStorage.getItem("healthcare_user")||"{}").name||"System";await gt.deleteStaff(v.id,D);const R=t.filter(F=>F.id!==v.id);s(R),console.log("Staff soft deleted successfully")}catch(S){console.error("Error deleting staff:",S);const D=t.filter(de=>de.id!==v.id);s(D),localStorage.setItem("staff",JSON.stringify(D));const R=JSON.parse(localStorage.getItem("deletedStaff")||"[]"),F=new Date().toISOString(),I=JSON.parse(localStorage.getItem("healthcare_user")||"{}").name||"System",ce={...v,deletedAt:F,deletedBy:I};R.push(ce),localStorage.setItem("deletedStaff",JSON.stringify(R))}j(!1),w(null)}};return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Staff Management"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage staff members and their information"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:!1,disabled:!1}),e.jsxs(P,{onClick:T,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>window.location.href="/management/add-staff",className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Staff"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Staff"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:A.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Staff"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:A.filter(S=>S.status==="Active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Working"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Staff"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:A.filter(S=>S.status==="Inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Not active"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(mc,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:a.length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ve,{placeholder:"Search staff by name, email, or phone...",value:n,onChange:S=>l(S.target.value),className:"w-full"})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs("select",{value:i,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-sm",children:[e.jsx("option",{value:"All",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Rt,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Staff List (",A.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Staff (",A.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Staff ID"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Specialization"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Department"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Phone"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Join Date"}),e.jsx("span",{className:"sm:hidden",children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:A.slice((c-1)*C,c*C).map((S,D)=>{var R;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(c-1)*C+D+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qn,{className:"h-10 w-10",children:[e.jsx(Nl,{src:y(S.photo),alt:S.name||"Profile"}),e.jsx(Zn,{className:"bg-muted text-muted-foreground text-xs",children:((R=S.name)==null?void 0:R.split(" ").map(F=>F[0]).join("").toUpperCase())||"N/A"})]})})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx("span",{className:"text-primary font-medium hover:underline hover:text-blue-700 hover:bg-blue-50 transition-all duration-200 p-1 h-auto text-xs sm:text-sm cursor-pointer rounded-md inline-flex items-center gap-1",children:S.id})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-[100px] sm:max-w-[120px] truncate",children:S.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:S.role}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:S.department||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:S.phone}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:S.joinDate?(()=>{try{const F=u8(S.joinDate);if(!isNaN(F.getTime()))return wt(F,"dd/MM/yyyy")}catch{}if(/^\d{4}-\d{2}-\d{2}$/.test(S.joinDate)){const[F,I,ce]=S.joinDate.split("-");return`${ce}/${I}/${F}`}return S.joinDate})():e.jsx("span",{className:"text-gray-400 text-xs",children:"Not Set"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsx(kt,{className:`${k(S.status)} text-xs`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>x(S),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Staff",children:e.jsx(vs,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>{var I,ce,de,ve,_e,ze;const F={...S,photo:S.photo||"",aadharFront:S.aadharFront||((I=S.documents)==null?void 0:I.aadharFront)||"",aadharBack:S.aadharBack||((ce=S.documents)==null?void 0:ce.aadharBack)||"",aadharNumber:S.aadharNumber||((de=S.documents)==null?void 0:de.aadharNumber)||"",panFront:S.panFront||((ve=S.documents)==null?void 0:ve.panFront)||"",panBack:S.panBack||((_e=S.documents)==null?void 0:_e.panBack)||"",panNumber:S.panNumber||((ze=S.documents)==null?void 0:ze.panNumber)||"",name:S.name||"",email:S.email||"",phone:S.phone||"",role:S.role||"",department:S.department||"",address:S.address||"",status:S.status||"Active",salary:S.salary||"",joinDate:S.joinDate||""};h(F)},className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Staff",children:e.jsx(Ds,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>ne(S),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Staff",children:e.jsx(mt,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},S.id)})})]}),A.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white",children:[e.jsx(Rt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No staff found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No staff match your search criteria. Try adjusting your filters."})]})]}),A.length>C&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Page ",c," of ",Math.ceil(A.length/C),"(",A.length," total staff)"]}),e.jsxs("span",{className:"sm:hidden",children:[c," / ",Math.ceil(A.length/C)]})]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>d(S=>Math.max(1,S-1)),disabled:c===1,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,Math.ceil(A.length/C))},(S,D)=>{const R=Math.ceil(A.length/C);let F;return R<=5||c<=3?F=D+1:c>=R-2?F=R-4+D:F=c-2+D,e.jsx(P,{variant:c===F?"default":"outline",size:"sm",onClick:()=>d(F),className:`w-8 h-8 p-0 text-xs ${c===F?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-white hover:bg-gray-50 text-gray-600 border-gray-300"}`,children:F},F)})}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>d(S=>Math.min(Math.ceil(A.length/C),S+1)),disabled:c===Math.ceil(A.length/C),className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"})]})]})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600",children:u.photo?e.jsx("img",{src:y(u.photo),alt:u.name||"Profile",className:"w-full h-full object-cover",onError:S=>{const R=S.target.parentElement;R&&(R.innerHTML=`<div class="w-full h-full flex items-center justify-center"><span class="text-lg font-semibold text-white">${(u.name||"S").charAt(0).toUpperCase()}</span></div>`)}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-semibold text-white",children:(u.name||"S").charAt(0).toUpperCase()})})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${k(u.status)}`,children:u.status})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:u.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Staff ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:u.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>x(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(rs,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:u.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ia,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Email Address"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:u.email})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ps,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Phone Number"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:u.phone})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100 sm:col-span-2 lg:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(mr,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Address"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:u.address})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(dc,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Professional Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(dc,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Role"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:u.role})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Department"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:u.department||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Join Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:u.joinDate||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ai,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Salary"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",u.salary||"N/A"]})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Np,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Document Details"]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Np,{className:"h-4 w-4 text-blue-600"}),"Aadhar Card Details"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 rounded-lg border border-blue-100",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide mb-2",children:"Aadhar Front"}),u.aadharFront||(oe=u.documents)!=null&&oe.aadharFront?e.jsx("img",{src:y(u.aadharFront||((ge=u.documents)==null?void 0:ge.aadharFront)),alt:"Aadhar Front",className:"w-full h-24 object-cover rounded border cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var S;return window.open(y(u.aadharFront||((S=u.documents)==null?void 0:S.aadharFront)),"_blank")}}):e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded border flex items-center justify-center text-gray-400",children:e.jsx(It,{className:"h-8 w-8"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 rounded-lg border border-blue-100",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide mb-2",children:"Aadhar Back"}),u.aadharBack||(me=u.documents)!=null&&me.aadharBack?e.jsx("img",{src:y(u.aadharBack||((H=u.documents)==null?void 0:H.aadharBack)),alt:"Aadhar Back",className:"w-full h-24 object-cover rounded border cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var S;return window.open(y(u.aadharBack||((S=u.documents)==null?void 0:S.aadharBack)),"_blank")}}):e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded border flex items-center justify-center text-gray-400",children:e.jsx(It,{className:"h-8 w-8"})})]}),e.jsxs("div",{className:"sm:col-span-2 bg-gradient-to-br from-green-50 to-white p-3 rounded-lg border border-green-100",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide mb-2",children:"Aadhar Number"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.aadharNumber||((L=u.documents)==null?void 0:L.aadharNumber)||"Not provided"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-purple-600"}),"PAN Card Details"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 rounded-lg border border-purple-100",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide mb-2",children:"PAN Front"}),u.panFront||(he=u.documents)!=null&&he.panFront?e.jsx("img",{src:y(u.panFront||((ie=u.documents)==null?void 0:ie.panFront)),alt:"PAN Front",className:"w-full h-24 object-cover rounded border cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var S;return window.open(y(u.panFront||((S=u.documents)==null?void 0:S.panFront)),"_blank")}}):e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded border flex items-center justify-center text-gray-400",children:e.jsx(It,{className:"h-8 w-8"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 rounded-lg border border-purple-100",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide mb-2",children:"PAN Back"}),u.panBack||(ke=u.documents)!=null&&ke.panBack?e.jsx("img",{src:y(u.panBack||((V=u.documents)==null?void 0:V.panBack)),alt:"PAN Back",className:"w-full h-24 object-cover rounded border cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var S;return window.open(y(u.panBack||((S=u.documents)==null?void 0:S.panBack)),"_blank")}}):e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded border flex items-center justify-center text-gray-400",children:e.jsx(It,{className:"h-8 w-8"})})]}),e.jsxs("div",{className:"sm:col-span-2 bg-gradient-to-br from-orange-50 to-white p-3 rounded-lg border border-orange-100",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide mb-2",children:"PAN Number"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.panNumber||((O=u.documents)==null?void 0:O.panNumber)||"Not provided"})]})]})]}),u.documents&&Array.isArray(u.documents)&&u.documents.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-green-600"}),"Additional Documents"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:u.documents.map((S,D)=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white p-3 rounded-lg border border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-2",children:S.type||"Document"}),S.url?e.jsx("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline break-all text-sm",children:S.name||S.url}):e.jsx("span",{className:"text-gray-500 text-sm",children:S.name||"N/A"})]},D))})]})]})]})})]})}),p&&e.jsx($t,{open:!!p,onOpenChange:()=>h(null),children:e.jsxs(Ot,{className:"editpopup form crm-modal-container max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ut,{className:"editpopup form crm-modal-header",children:[e.jsxs(Bt,{className:"editpopup form crm-modal-title",children:[e.jsx(Ds,{className:"h-4 w-4 sm:h-5 sm:w-5 inline mr-2"}),"Edit Staff - ",p.id]}),e.jsx(Vt,{className:"editpopup form text-sm sm:text-base text-gray-600",children:"Update staff information"})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),X()},className:"editpopup form crm-edit-form",children:[e.jsxs("div",{className:"flex flex-col items-center py-2 mb-4",children:[p.photo?e.jsx("img",{src:y(p.photo),alt:p.name||"Profile",className:"w-24 h-24 rounded-full object-cover border mb-2"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-muted flex items-center justify-center mb-2 text-lg text-muted-foreground border",children:"N/A"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",className:"mb-2",onChange:f}),e.jsx("p",{className:"text-sm text-gray-500",children:"Maximum file size: 5MB"}),p.photo&&e.jsx(P,{variant:"outline",size:"sm",onClick:()=>M("photo",""),className:"text-red-600",children:"Remove Photo"})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Name"}),e.jsx(Ve,{value:p.name,onChange:S=>M("name",S.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Email"}),e.jsx(Ve,{value:p.email,onChange:S=>M("email",S.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Phone"}),e.jsx(Ve,{value:p.phone,onChange:S=>M("phone",S.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Role"}),e.jsxs("select",{className:"editpopup form crm-edit-form-select",value:p.role,onChange:S=>M("role",S.target.value),children:[e.jsx("option",{value:"",children:"Select Role"}),a.map(S=>e.jsx("option",{value:S.name,children:S.name},S.id)),a.length===0&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Nurse",children:"Nurse"}),e.jsx("option",{value:"Receptionist",children:"Receptionist"}),e.jsx("option",{value:"Pharmacist",children:"Pharmacist"}),e.jsx("option",{value:"Lab Technician",children:"Lab Technician"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Department"}),e.jsxs("select",{className:"editpopup form crm-edit-form-select",value:p.department,onChange:S=>M("department",S.target.value),children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"Administration",children:"Administration"}),e.jsx("option",{value:"Nursing",children:"Nursing"}),e.jsx("option",{value:"Reception",children:"Reception"}),e.jsx("option",{value:"Pharmacy",children:"Pharmacy"}),e.jsx("option",{value:"Laboratory",children:"Laboratory"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Human Resources",children:"Human Resources"}),e.jsx("option",{value:"IT",children:"IT"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Security",children:"Security"}),e.jsx("option",{value:"Housekeeping",children:"Housekeeping"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Join Date"}),e.jsx(Ve,{type:"date",value:p.joinDate?p.joinDate.match(/^\d{4}-\d{2}-\d{2}$/)?p.joinDate:new Date(p.joinDate).toISOString().split("T")[0]:"",onChange:S=>M("joinDate",S.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Salary"}),e.jsx(Ve,{value:p.salary,onChange:S=>M("salary",S.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group col-span-2",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Address"}),e.jsx(As,{value:p.address,onChange:S=>M("address",S.target.value),className:"editpopup form crm-edit-form-textarea"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsx(ae,{className:"editpopup form crm-edit-form-label",children:"Status"}),e.jsxs("select",{className:"editpopup form crm-edit-form-select",value:p.status,onChange:S=>M("status",S.target.value),children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"col-span-2 mt-4",children:[e.jsx(ae,{className:"font-medium text-foreground text-lg mb-2 block",children:"Document Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{children:"Aadhar Card Front"}),p.aadharFront||(Y=p.documents)!=null&&Y.aadharFront?e.jsx("img",{src:y(p.aadharFront||((W=p.documents)==null?void 0:W.aadharFront)),alt:"Aadhar Front",className:"w-full h-24 object-cover rounded border mb-1"}):null,e.jsx("input",{type:"file",accept:"image/*",onChange:S=>{const D=S.target.files&&S.target.files[0];if(D){const R=new FileReader;R.onload=F=>{var ce;const I=(ce=F.target)==null?void 0:ce.result;typeof I=="string"&&M("aadharFront",I)},R.readAsDataURL(D)}}})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{children:"Aadhar Card Back"}),p.aadharBack||(ue=p.documents)!=null&&ue.aadharBack?e.jsx("img",{src:y(p.aadharBack||((U=p.documents)==null?void 0:U.aadharBack)),alt:"Aadhar Back",className:"w-full h-24 object-cover rounded border mb-1"}):null,e.jsx("input",{type:"file",accept:"image/*",onChange:S=>{const D=S.target.files&&S.target.files[0];if(D){const R=new FileReader;R.onload=F=>{var ce;const I=(ce=F.target)==null?void 0:ce.result;typeof I=="string"&&M("aadharBack",I)},R.readAsDataURL(D)}}})]}),e.jsxs("div",{className:"space-y-1 col-span-2",children:[e.jsx(ae,{children:"Aadhar Card Number"}),e.jsx(Ve,{value:p.aadharNumber||((z=p.documents)==null?void 0:z.aadharNumber)||"",onChange:S=>M("aadharNumber",S.target.value),maxLength:12})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{children:"PAN Card Front"}),p.panFront||(te=p.documents)!=null&&te.panFront?e.jsx("img",{src:p.panFront||((se=p.documents)==null?void 0:se.panFront),alt:"PAN Front",className:"w-full h-24 object-cover rounded border mb-1"}):null,e.jsx("input",{type:"file",accept:"image/*",onChange:S=>{const D=S.target.files&&S.target.files[0];if(D){const R=new FileReader;R.onload=F=>{var ce;const I=(ce=F.target)==null?void 0:ce.result;typeof I=="string"&&M("panFront",I)},R.readAsDataURL(D)}}})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ae,{children:"PAN Card Back"}),p.panBack||(J=p.documents)!=null&&J.panBack?e.jsx("img",{src:p.panBack||((je=p.documents)==null?void 0:je.panBack),alt:"PAN Back",className:"w-full h-24 object-cover rounded border mb-1"}):null,e.jsx("input",{type:"file",accept:"image/*",onChange:S=>{const D=S.target.files&&S.target.files[0];if(D){const R=new FileReader;R.onload=F=>{var ce;const I=(ce=F.target)==null?void 0:ce.result;typeof I=="string"&&M("panBack",I)},R.readAsDataURL(D)}}})]}),e.jsxs("div",{className:"space-y-1 col-span-2",children:[e.jsx(ae,{children:"PAN Card Number"}),e.jsx(Ve,{value:p.panNumber||((b=p.documents)==null?void 0:b.panNumber)||"",onChange:S=>M("panNumber",S.target.value),maxLength:10})]})]})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>h(null),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:X,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(Ns,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx($t,{open:g,onOpenChange:j,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Staff Member"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this staff member? This action cannot be undone."})]})]})}),v&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:v.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Np,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["ID: ",v.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dc,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Role: ",v.role]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:v.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",v.status]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{j(!1),w(null)},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:Q,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Staff"]})]})]})})]})})},Oz=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(""),[i,o]=m.useState(new Date),[c,d]=m.useState(""),[u,x]=m.useState(""),[p,h]=m.useState(1),[y]=m.useState(10),[f,v]=m.useState(!0),[w,g]=m.useState(null),[j,N]=m.useState(!1);m.useEffect(()=>{h(1)},[]),m.useEffect(()=>{E()},[i]),m.useEffect(()=>{C()},[t,n,c,u]),m.useEffect(()=>{h(1)},[n,a]);const E=async()=>{try{v(!0);const H=await gt.getDeletedStaff();console.log("Fetched deleted staff from MySQL:",H),s(H)}catch(H){console.error("Error fetching deleted staff:",H);const he=JSON.parse(localStorage.getItem("deletedStaff")||"[]").map(ie=>({...ie,deleted_by:ie.deletedBy||ie.deleted_by||"System",deleted_at:ie.deletedAt||ie.deleted_at||new Date().toISOString()}));s(he)}finally{v(!1)}},C=()=>{let H=t;n&&(H=H.filter(L=>L.name.toLowerCase().includes(n.toLowerCase())||L.id.toLowerCase().includes(n.toLowerCase())||L.phone&&L.phone.includes(n))),c&&(H=H.filter(L=>new Date(L.deleted_at).toISOString().split("T")[0]===c)),u&&u!=="all"&&(H=H.filter(L=>L.deleted_by.toLowerCase().includes(u.toLowerCase()))),r(H)},k=async H=>{g(H),N(!0)},A=async()=>{if(w)try{await gt.restoreStaff(w.id);const H=t.filter(L=>L.id!==w.id);s(H),Te({title:"Staff Restored",description:`${w.name} has been restored successfully.`}),N(!1),g(null),console.log("Staff restored successfully")}catch(H){console.error("Error restoring staff:",H),Te({title:"Error",description:"Failed to restore staff member. Please try again.",variant:"destructive"})}},T=()=>{const H=a.map((ie,ke)=>({"S No":ke+1,"Staff ID":ie.id,Name:ie.name,Role:ie.role,Phone:ie.phone,Email:ie.email||"N/A","Date Deleted":wt(new Date(ie.deleted_at),"dd/MM/yyyy"),"Deleted By":ie.deleted_by,Status:"Deleted"})),L=nn.json_to_sheet(H),he=nn.book_new();nn.book_append_sheet(he,L,"Deleted Staff"),zh(he,`deleted-staff-${wt(new Date,"dd-MM-yyyy")}.xlsx`),Te({title:"Export Successful",description:"Deleted staff data has been exported to Excel."})},M=H=>{try{return wt(new Date(H),"dd/MM/yyyy")}catch{return"Invalid Date"}},X=H=>H?H.startsWith("Photos/")||H.startsWith("Photos\\")?`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${H.replace(/\\/g,"/")}`:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${H}`:"/api/placeholder/40/40",ne=()=>[...new Set(t.map(L=>L.deleted_by))].sort(),Q=Math.ceil(a.length/y),oe=(p-1)*y,ge=oe+y,me=a.slice(oe,ge);return f?e.jsx(Gr,{}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(bp,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Deleted Staff"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsxs(P,{onClick:T,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"}),e.jsx("span",{className:"sm:hidden",children:""})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Total Deleted"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:t.length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Removed"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(mt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Filtered Results"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:a.length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Showing"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(oy,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"This Month"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:t.filter(H=>{const L=new Date(H.deleted_at),he=new Date;return L.getMonth()===he.getMonth()&&L.getFullYear()===he.getFullYear()}).length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Recent"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Pt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Can Restore"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:a.length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ir,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search by name, ID, phone...",value:n,onChange:H=>l(H.target.value),className:"pl-10 w-full"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"min-w-[150px]",children:e.jsx(Ve,{type:"date",value:c,onChange:H=>d(H.target.value),className:"w-full"})}),e.jsx("div",{className:"min-w-[150px]",children:e.jsxs("select",{className:"w-full h-10 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:H=>x(H.target.value),children:[e.jsx("option",{value:"",children:"All Users"}),ne().map(H=>e.jsx("option",{value:H,children:H},H))]})}),e.jsxs(P,{onClick:()=>{l(""),d(""),x("")},className:"global-btn",children:[e.jsx(oy,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(bp,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Deleted Staff Records (",a.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Deleted (",a.length,")"]})]})}),e.jsx(Re,{className:"p-0",children:me.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(bp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No deleted staff found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria or filters."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"hover:bg-transparent",children:[e.jsx(re,{className:"text-center font-semibold",children:"S No"}),e.jsx(re,{className:"text-center font-semibold",children:"Photo"}),e.jsx(re,{className:"text-center font-semibold",children:"Staff ID"}),e.jsx(re,{className:"text-center font-semibold",children:"Name"}),e.jsx(re,{className:"text-center font-semibold",children:"Role"}),e.jsx(re,{className:"text-center font-semibold",children:"Phone"}),e.jsx(re,{className:"text-center font-semibold",children:"Date Deleted"}),e.jsx(re,{className:"text-center font-semibold",children:"Deleted By"}),e.jsx(re,{className:"text-center font-semibold",children:"Status"}),e.jsx(re,{className:"text-center font-semibold",children:"Actions"})]})}),e.jsx(os,{children:me.map((H,L)=>e.jsxs(nt,{className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsx(q,{className:"text-center font-medium",children:oe+L+1}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qn,{className:"h-10 w-10",children:[e.jsx(Nl,{src:X(H.photo||""),alt:H.name}),e.jsx(Zn,{className:"bg-blue-100 text-blue-600 font-medium",children:H.name.charAt(0).toUpperCase()})]})})}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:"outline",className:"font-mono",children:H.id})}),e.jsx(q,{className:"text-center font-medium",children:H.name}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:"secondary",children:H.role})}),e.jsx(q,{className:"text-center font-mono",children:H.phone}),e.jsx(q,{className:"text-center",children:M(H.deleted_at)}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:"outline",children:H.deleted_by})}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:"destructive",children:"Deleted"})}),e.jsx(q,{className:"text-center",children:e.jsx("div",{className:"action-buttons-container",children:e.jsx(P,{size:"sm",onClick:()=>k(H),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Restore Staff",children:e.jsx(Ir,{className:"w-3 h-3 sm:w-4 sm:h-4"})})})})]},H.id))})]})}),Q>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",oe+1," to ",Math.min(ge,a.length)," of ",a.length," results"]}),e.jsxs("span",{className:"sm:hidden",children:[p," / ",Q]})]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>h(H=>Math.max(1,H-1)),disabled:p===1,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,Q)},(H,L)=>{const he=L+Math.max(1,p-2);return he>Q?null:e.jsx(P,{variant:p===he?"default":"outline",size:"sm",onClick:()=>h(he),className:`w-8 h-8 p-0 text-xs ${p===he?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-white hover:bg-gray-50 text-gray-600 border-gray-300"}`,children:he},he)})}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>h(H=>Math.min(Q,H+1)),disabled:p===Q,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"})]})]})]})]})})]}),e.jsx($t,{open:j,onOpenChange:N,children:e.jsxs(Ot,{children:[e.jsxs(Ut,{children:[e.jsxs(Bt,{className:"flex items-center",children:[e.jsx(Ir,{className:"w-5 h-5 mr-2 text-green-600"}),"Restore Staff Member"]}),e.jsxs(Vt,{children:["Are you sure you want to restore ",e.jsx("strong",{children:w==null?void 0:w.name}),"? This will move them back to the active staff list."]})]}),e.jsxs(zt,{children:[e.jsx(P,{variant:"outline",onClick:()=>N(!1),className:"global-btn",children:"Cancel"}),e.jsxs(P,{onClick:A,className:"global-btn",children:[e.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Restore Staff"]})]})]})})]})})},Lz=()=>{js();const t=z=>z?z.startsWith("data:image/")?z:z.startsWith("/")||z.startsWith("http")?`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${z.startsWith("/")?"":"/"}${z}`:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${z}`:"",[s,a]=m.useState(1),r=10,[n,l]=m.useState(new Date),[i,o]=m.useState(new Date),[c,d]=m.useState([]),[u,x]=m.useState([]),[p,h]=m.useState(""),[y,f]=m.useState([]),[v,w]=m.useState(!0),g=["January","February","March","April","May","June","July","August","September","October","November","December"],j=new Date().getFullYear(),[N,E]=m.useState(new Date().getMonth()),[C,k]=m.useState(j),[A,T]=m.useState(!1),[M,X]=m.useState(new Date().getMonth()),[ne,Q]=m.useState(j);m.useEffect(()=>{a(1)},[]),m.useEffect(()=>{ge(),me()},[n]),m.useEffect(()=>{oe()},[c,p]),m.useEffect(()=>{a(1)},[p,c]),m.useEffect(()=>{y.length>0&&a(1)},[y.length]);const oe=()=>{let z=c;p&&(z=c.filter(te=>te.name.toLowerCase().includes(p.toLowerCase())||te.id.toLowerCase().includes(p.toLowerCase())||te.role&&te.role.toLowerCase().includes(p.toLowerCase()))),z.sort((te,se)=>{const J=je=>{if(!je)return 0;const b=je.match(/STF(\d+)/);return b?parseInt(b[1],10):0};return J(te.id)-J(se.id)}),f(z)},ge=async()=>{try{const te=(await gt.getAllStaff()).filter(se=>se.status!=="deleted"&&se.name);d(te),a(1)}catch(z){console.error("Error loading staff:",z),Te({title:"Error",description:"Failed to load staff",variant:"destructive"})}},me=async()=>{try{w(!0);const z=await gt.getAllStaffAttendance();console.log("Loaded attendance records:",z),x(z)}catch(z){console.error("Error loading attendance records:",z),Te({title:"Error",description:"Failed to load attendance records",variant:"destructive"})}finally{w(!1)}},H=async(z,te)=>{try{const se=wt(n,"yyyy-MM-dd"),J=u.find(je=>je.staff_id===z&&wt(new Date(je.date),"yyyy-MM-dd")===se);J&&J.id&&(await gt.deleteStaffAttendance(J.id),x(je=>je.filter(b=>b.id!==J.id)),Te({title:"Attendance Reset",description:`${te}'s attendance has been reset`}))}catch(se){console.error("Error resetting attendance:",se),Te({title:"Error",description:"Failed to reset attendance",variant:"destructive"})}},L=async(z,te,se)=>{try{const J=wt(n,"yyyy-MM-dd"),je=se!=="Absent"?wt(new Date,"HH:mm:ss"):"";await gt.markStaffAttendance({staff_id:z,staff_name:te,date:J,check_in:je,status:se}),await me(),Te({title:"Attendance Marked",description:`${te} marked as ${se}`})}catch(J){console.error("Error marking attendance:",J),Te({title:"Error",description:"Failed to mark attendance",variant:"destructive"})}},he=(z,te)=>{const se=wt(te,"yyyy-MM-dd"),J=u.find(je=>{const b=je.date?wt(new Date(je.date),"yyyy-MM-dd"):"";return je.staff_id===z&&b===se});return J&&["Present","Absent","Late","Half Day"].includes(J.status)?J:null},ie=z=>{const se={Present:{className:"bg-success text-success-foreground",icon:Xs},Absent:{className:"bg-destructive text-destructive-foreground",icon:$r},Late:{className:"bg-warning text-warning-foreground",icon:Qt},"Half Day":{className:"bg-warning text-warning-foreground",icon:Qt}}[z];if(!se)return null;const J=se.icon;return e.jsxs(kt,{className:se.className,children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),z.charAt(0).toUpperCase()+z.slice(1)]})},ke=()=>{const z=M!==null?M:new Date().getMonth(),te=ne!==null?ne:new Date().getFullYear(),se=new Date(te,z,1),J=wt(se,"yyyy-MM"),je=te,b=z,S=new Date(je,b+1,0).getDate(),D=Array.from({length:S},(Me,Je)=>{const vt=new Date(je,b,Je+1);return wt(vt,"yyyy-MM-dd")}),R=c.reduce((Me,Je)=>(Me[Je.id]=Je.name,Me),{}),I=Array.from(new Set([...c.map(Me=>Me.id),...u.filter(Me=>{const Je=new Date(Me.date);return Je.getMonth()===b&&Je.getFullYear()===je}).map(Me=>Me.staff_id)])).map((Me,Je)=>{const vt={"S NO":Je+1,"Staff ID":Me,"Staff Name":R[Me]||""};return D.forEach(Le=>{const Ae=u.find(Ee=>{const Se=wt(new Date(Ee.date),"yyyy-MM-dd");return Ee.staff_id===Me&&Se===Le});vt[wt(new Date(Le),"dd/MM")]=Ae?Ae.status:"-"}),vt}),ce=["S NO","Staff ID","Staff Name",...D.map(Me=>wt(new Date(Me),"dd/MM"))],de=[ce.join(",")];I.forEach(Me=>{de.push(ce.map(Je=>Me[Je]??"").join(","))});const ve=de.join(`
`),_e=new Blob([ve],{type:"text/csv"}),ze=window.URL.createObjectURL(_e),be=document.createElement("a");be.href=ze,be.download=`staff-attendance-${J}.csv`,be.click(),window.URL.revokeObjectURL(ze),Te({title:"Export Successful",description:`Staff attendance for ${wt(se,"MMMM yyyy")} exported to CSV file`})},V=Math.ceil(y.length/r),O=(s-1)*r,Y=O+r,W=y.slice(O,Y),U=(()=>{if(c.length===0)return{total:0,present:0,absent:0,late:0};const z=wt(n,"yyyy-MM-dd");let te=0,se=0,J=0;return c.forEach(je=>{const b=u.find(S=>{const D=S.date?wt(new Date(S.date),"yyyy-MM-dd"):"";return S.staff_id===je.id&&D===z});if(b)switch(b.status){case"Present":te++;break;case"Absent":se++;break;case"Late":J++;break}}),{total:c.length,present:te,absent:se,late:J}})();return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Staff Attendance"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:ge,loading:v,disabled:v}),e.jsx(Ht.MonthYear,{onClick:()=>T(!0),text:M!==null&&ne!==null?`${g[M].slice(0,3)} ${ne}`:`${g[N].slice(0,3)} ${C}`}),e.jsxs(P,{onClick:ke,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered attendance to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8",children:[e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-blue-50 to-blue-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-blue-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-blue-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Staff"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:U.total}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Active"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-blue-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-blue-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-green-50 to-green-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-green-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-green-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Present Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:U.present}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"On duty"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-green-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-green-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Xs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-red-50 to-red-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-red-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-red-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Absent Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:U.absent}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Not present"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-red-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-red-600 transition-colors duration-300 flex-shrink-0",children:e.jsx($r,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-orange-50 to-orange-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-orange-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-orange-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Late Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:U.late}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Delayed"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-orange-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-orange-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]})]}),e.jsx(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg mb-6 sm:mb-8",children:e.jsx(Re,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ve,{placeholder:"Search staff...",value:p,onChange:z=>h(z.target.value),className:"pl-10 border-gray-200 focus:border-blue-500 rounded-lg w-full h-10"})]})}),e.jsx("div",{className:"w-full lg:w-auto flex justify-center lg:justify-end",children:e.jsxs(go,{children:[e.jsx(vo,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:bt("w-full lg:w-[240px] justify-start text-left font-normal border-gray-200 hover:border-blue-300 h-10",!n&&"text-muted-foreground"),children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:n?wt(n,"PPP"):"Pick a date"})]})}),e.jsx(Si,{className:"w-auto p-0",align:"end",children:e.jsx(bi,{mode:"single",selected:n,onSelect:z=>z&&l(z),initialFocus:!0,className:"pointer-events-auto"})})]})})]})})}),e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"p-4 sm:p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs(Es,{className:"text-lg sm:text-xl text-gray-900",children:["Staff Attendance for ",wt(n,"EEEE, MMMM dd, yyyy")]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last updated: ",wt(new Date,"MMM dd, yyyy HH:mm")]})]})]})}),e.jsx(Re,{className:"p-0",children:v?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(es,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading attendance..."})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Staff ID"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Role"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Check In"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:W.length>0?W.map((z,te)=>{const se=he(z.id,n);return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:O+te+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qn,{className:"h-10 w-10",children:[e.jsx(Nl,{src:t(z.photo),alt:z.name}),e.jsx(Zn,{className:"bg-blue-100 text-blue-600 font-medium",children:z.name.charAt(0).toUpperCase()})]})})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-blue-600 whitespace-nowrap",children:z.id}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:z.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:z.role}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:se?ie(se.status):e.jsx(kt,{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full font-medium",children:"Not Updated"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:(se==null?void 0:se.check_in)||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",onClick:()=>L(z.id,z.name,"Present"),variant:"outline",className:`action-btn-lead action-btn-present h-8 w-8 sm:h-9 sm:w-9 p-0 ${(se==null?void 0:se.status)==="Present"?"active":""}`,title:"Mark Present",children:e.jsx(Xs,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>L(z.id,z.name,"Late"),variant:"outline",className:`action-btn-lead action-btn-late h-8 w-8 sm:h-9 sm:w-9 p-0 ${(se==null?void 0:se.status)==="Late"?"active":""}`,title:"Mark Late",children:e.jsx(Qt,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>L(z.id,z.name,"Absent"),variant:"outline",className:`action-btn-lead action-btn-absent h-8 w-8 sm:h-9 sm:w-9 p-0 ${(se==null?void 0:se.status)==="Absent"?"active":""}`,title:"Mark Absent",children:e.jsx($r,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>H(z.id,z.name),variant:"outline",className:"action-btn-lead action-btn-reset h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Reset Attendance",children:e.jsx(Ir,{className:"h-4 w-4 sm:h-4 sm:w-4"})})]})})]},z.id)}):e.jsx(nt,{children:e.jsx(q,{colSpan:8,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Rt,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No staff found"}),e.jsx("p",{className:"text-gray-500",children:"No staff match your search criteria or no staff have been added yet."})]})]})})})})]}),V>1&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",O+1," to ",Math.min(Y,y.length)," of ",y.length," staff"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>a(Math.max(1,s-1)),disabled:s===1,className:"border-gray-200 text-gray-600 hover:bg-gray-50",children:"Previous"}),Array.from({length:V},(z,te)=>te+1).map(z=>e.jsx(P,{variant:s===z?"default":"outline",size:"sm",onClick:()=>a(z),className:bt("w-8 h-8",s===z?"bg-blue-600 text-white hover:bg-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:z},z)),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>a(Math.min(V,s+1)),disabled:s===V,className:"border-gray-200 text-gray-600 hover:bg-gray-50",children:"Next"})]})]})]})})]}),e.jsx($s,{open:A,onOpenChange:T,selectedMonth:N,selectedYear:C,onMonthChange:E,onYearChange:k,onApply:()=>{X(N),Q(C),T(!1),me()},title:"Select Month & Year",description:"Filter attendance records by specific month and year",previewText:"attendance records"})]})})},Bl="http://localhost:4000/api",Pu={async getAll(t,s){try{const a=new URLSearchParams;t&&a.append("month",t.toString()),s&&a.append("year",s.toString());const r=`${Bl}/staff-salaries${a.toString()?`?${a.toString()}`:""}`,n=await fetch(r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(a){throw console.error("Error fetching staff salaries:",a),a}},async recordPayment(t){try{const s=await fetch(`${Bl}/staff-salaries/payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error recording payment:",s),s}},async getPaymentHistory(t,s,a){try{const r=new URLSearchParams;s&&r.append("month",s.toString()),a&&r.append("year",a.toString());const n=`${Bl}/staff-salaries/${t}/history${r.toString()?`?${r.toString()}`:""}`,l=await fetch(n);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(r){throw console.error("Error fetching payment history:",r),r}},async updatePayment(t,s){try{const a=await fetch(`${Bl}/staff-salaries/payment/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error updating payment:",a),a}},async deletePayment(t){try{const s=await fetch(`${Bl}/staff-salaries/payment/${t}`,{method:"DELETE"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("Error deleting payment:",s),s}},async saveMonthlyRecords(t,s){try{const a=await fetch(`${Bl}/staff-salaries/save-monthly-records/${t}/${s}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error saving monthly records:",a),a}},async autoCarryForward(t,s){try{const a=await fetch(`${Bl}/staff-salaries/auto-carry-forward/${t}/${s}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error in auto carry forward:",a),a}},async getMonthlySummary(t,s){try{const a=await fetch(`${Bl}/staff-salaries/monthly-summary/${t}/${s}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Error fetching monthly summary:",a),a}},async checkCarryForward(t,s){try{return await this.autoCarryForward(t,s)}catch(a){throw console.error("Error checking carry forward:",a),a}}},$z=()=>{js();const t=de=>de?de.startsWith("data:image/")?de:de.startsWith("/")||de.startsWith("http")?`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${de.startsWith("/")?"":"/"}${de}`:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${de}`:"",[s,a]=m.useState(1),r=10,[n,l]=m.useState([]),[i,o]=m.useState(""),[c,d]=m.useState([]),[u,x]=m.useState(!0),[p,h]=m.useState(null),[y,f]=m.useState(!1),[v,w]=m.useState({date:new Date().toISOString().split("T")[0],amount:"",type:"salary"}),[g,j]=m.useState(!1),[N,E]=m.useState([]),[C,k]=m.useState(!1),[A,T]=m.useState(new Date().getMonth()+1),[M,X]=m.useState(new Date().getFullYear()),[ne,Q]=m.useState(!1),[oe,ge]=m.useState(new Date().getMonth()+1),[me,H]=m.useState(new Date().getFullYear()),[L,he]=m.useState(!1),[ie,ke]=m.useState(null),[V,O]=m.useState(!1),Y=["January","February","March","April","May","June","July","August","September","October","November","December"];m.useEffect(()=>{ue()},[A,M]),m.useEffect(()=>{W()},[n,i]),m.useEffect(()=>{a(1)},[i,n]);const W=()=>{let de=n;i&&(de=n.filter(ve=>ve.name.toLowerCase().includes(i.toLowerCase())||ve.id.toLowerCase().includes(i.toLowerCase()))),de.sort((ve,_e)=>{const ze=be=>{if(!be)return 0;const Me=be.match(/STF(\d+)/);return Me?parseInt(Me[1],10):0};return ze(ve.id)-ze(_e.id)}),d(de)},ue=async()=>{try{x(!0);const de=await Pu.getAll(A,M);l(de.data||[]),a(1)}catch(de){console.error("Error loading staff salaries:",de),Te({title:"Error",description:"Failed to load staff salary data",variant:"destructive"})}finally{x(!1)}},U=de=>{h(de),ge(A),H(M),w({date:new Date().toISOString().split("T")[0],amount:"",type:"salary"}),f(!0),S(de.id)},z=de=>{if(typeof de=="number")return de;if(typeof de=="string"){const ve=de.replace(/[^\d.-]/g,""),_e=parseFloat(ve);return isNaN(_e)?0:_e}return 0},te=async()=>{if(!p||!v.amount||!v.date){Te({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}j(!0);try{await Pu.recordPayment({staffId:p.id,amount:parseFloat(v.amount),date:v.date,type:v.type,payment_mode:"Bank Transfer"}),Te({title:"Success",description:"Payment recorded successfully"}),w({date:new Date().toISOString().split("T")[0],amount:"",type:"salary"}),ue(),p&&S(p.id)}catch(de){console.error("Error recording payment:",de),Te({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{j(!1)}},se=m.useMemo(()=>N.filter(de=>{const ve=new Date(de.payment_date),_e=ve.getMonth()+1,ze=ve.getFullYear();return _e===oe&&ze===me}),[N,oe,me]),J=()=>se.reduce((ve,_e)=>ve+(parseFloat(_e.payment_amount)||0),0),je=()=>p?z(p.advance_amount||0):0,b=()=>{const de=J(),ve=je();return de+ve},S=async de=>{k(!0);try{const ve=await Pu.getPaymentHistory(de);E(ve.data||[])}catch(ve){console.error("Error fetching payment history:",ve),E([])}finally{k(!1)}},D=de=>{ke(de),he(!0)},R=async()=>{if(ie)try{O(!0),await Pu.deletePayment(ie.id),Te({title:"Success",description:"Payment deleted successfully"}),ue(),p&&S(p.id),he(!1),ke(null)}catch(de){console.error("Error deleting payment:",de),Te({title:"Error",description:"Failed to delete payment",variant:"destructive"})}finally{O(!1)}},F=async()=>{try{x(!0);const de=A,ve=M,ze=await(await fetch("http://localhost:4000/api/staff-salaries/save-monthly-records",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:de,year:ve})})).json();ze.success?(Te({title:"Success",description:`Monthly records saved successfully for ${["January","February","March","April","May","June","July","August","September","October","November","December"][de-1]} ${ve}! ${ze.recordsProcessed||0} staff records processed${ze.carryForwardUpdates?`, ${ze.carryForwardUpdates} with carry-forward`:""}`}),ze.carryForwardUpdates>0&&setTimeout(()=>{Te({title:"Carry Forward Notice",description:`${ze.carryForwardUpdates} staff members have balance amounts that will automatically carry forward to the next month`})},1e3),ue()):Te({title:"Error",description:ze.message||"Failed to save monthly records. Please try again.",variant:"destructive"})}catch(de){console.error("Error saving monthly records:",de),Te({title:"Error",description:"Failed to save monthly records. Please check your connection and try again.",variant:"destructive"})}finally{x(!1)}},I=()=>{const de=c.map((be,Me)=>{const Je=z(be.monthly_paid||0),vt=z(be.advance_amount),Le=Je+vt,Ae=z(be.salary),Ee=Ae-Le;return{"S.No":Me+1,"Staff ID":be.id,Name:be.name,Role:be.role,Department:be.department,"Monthly Salary":`${Ae.toLocaleString()}`,"Total Paid":`${Le.toLocaleString()}`,"Advance Amount":`${vt.toLocaleString()}`,Balance:`${Ee.toLocaleString()}`,Status:be.status,"Join Date":be.join_date}}),ve=nn.json_to_sheet(de),_e=nn.book_new();nn.book_append_sheet(_e,ve,"Staff Salary Report");const ze=new Date(M,A-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});zh(_e,`Staff_Salary_Report_${ze.replace(" ","_")}.xlsx`)},ce=m.useMemo(()=>{const de=c.reduce((ze,be)=>ze+z(be.salary),0),ve=c.reduce((ze,be)=>ze+z(be.total_paid),0),_e=c.reduce((ze,be)=>ze+z(be.balance),0);return{total:c.length,totalSalary:de,totalPaid:ve,totalPending:_e}},[c]);return u?e.jsx(Gr,{message:"Loading staff salary data..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Staff Salary Management"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsxs(P,{onClick:F,disabled:u,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-3 sm:px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",children:[e.jsx(Sl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Save Monthly"}),e.jsx("span",{className:"sm:hidden",children:"Save"})]}),e.jsx(Ht.MonthYear,{onClick:()=>Q(!0),text:`${Y[A-1]} ${M}`}),e.jsxs(P,{onClick:I,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-3 sm:px-4 py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Staff"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:ce.total}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Active"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Salary"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:["",ce.totalSalary.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(ai,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Monthly"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(ai,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-purple",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-700 mb-1 truncate",children:"Total Paid"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-purple-900 mb-1",children:["",ce.totalPaid.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[e.jsx(Xs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Completed"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-purple",children:e.jsx(Xs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Total Pending"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:["",ce.totalPending.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Outstanding"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search staff by name or ID...",value:i,onChange:de=>o(de.target.value),className:"pl-10 w-full"})]})})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(ts,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Staff Salary Management (",c.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Salary (",c.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50/80 hover:bg-gray-50",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"S.No"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Profile"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Joining Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Staff ID"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Staff Name"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Salary"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Advance"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Carry Forward"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Total Paid"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Balance"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Status"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Actions"})]})}),e.jsx(os,{children:c.length>0?c.slice((s-1)*r,s*r).map((de,ve)=>{var Ae;const _e=z(de.advance_amount),ze=z(de.carry_forward),Me=z(de.monthly_paid||0)+_e,Je=z(de.salary),vt=Je-Me,Le=(s-1)*r+ve+1;return e.jsxs(nt,{className:"hover:bg-gray-50/80 transition-colors duration-200 group",children:[e.jsx(q,{className:"py-4 px-6 text-center font-medium text-gray-900",children:Le}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qn,{className:"h-10 w-10",children:[e.jsx(Nl,{src:t(de.photo),alt:de.name}),e.jsx(Zn,{className:"bg-green-100 text-green-600 text-xs",children:((Ae=de.name)==null?void 0:Ae.split(" ").map(Ee=>Ee[0]).join("").toUpperCase())||"S"})]})})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:de.join_date?wt(new Date(de.join_date),"dd/MM/yyyy"):"-"})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx(kt,{variant:"outline",className:"text-blue-600 border-blue-200 bg-blue-50",children:de.id})}),e.jsx(q,{className:"py-4 px-6 text-center font-medium text-gray-900",children:de.name}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",Je.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-orange-600",children:["",_e.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-purple-600",children:["",ze.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["",Me.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsxs("span",{className:`text-sm font-medium ${vt>0?"text-red-600":"text-green-600"}`,children:["",vt.toLocaleString()]})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx(kt,{className:`text-xs ${vt>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:vt>0?"Pending":"Paid"})}),e.jsx(q,{className:"py-4 px-6 text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx(P,{size:"sm",variant:"outline",onClick:()=>U(de),className:"action-btn-lead action-btn-add h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Record Payment",children:e.jsx(ts,{className:"h-3 w-3"})})})})]},de.id)}):e.jsx(nt,{children:e.jsx(q,{colSpan:12,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Rt,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No staff found"}),e.jsx("p",{className:"text-gray-500",children:"No staff match your search criteria."})]})]})})})})]})}),Math.ceil(c.length/r)>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 order-2 sm:order-1",children:[e.jsxs("span",{className:"hidden sm:inline",children:["Showing ",(s-1)*r+1," to ",Math.min(s*r,c.length)," of ",c.length," staff"]}),e.jsxs("span",{className:"sm:hidden",children:[s," / ",Math.ceil(c.length/r)]})]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>a(Math.max(1,s-1)),disabled:s===1,className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-1",children:Array.from({length:Math.min(5,Math.ceil(c.length/r))},(de,ve)=>{const _e=ve+Math.max(1,s-2);return _e>Math.ceil(c.length/r)?null:e.jsx(P,{variant:s===_e?"default":"outline",size:"sm",onClick:()=>a(_e),className:`w-8 h-8 p-0 text-xs ${s===_e?"bg-blue-600 hover:bg-blue-700 text-white border-blue-600":"bg-white hover:bg-gray-50 text-gray-600 border-gray-300"}`,children:_e},_e)})}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>a(Math.min(Math.ceil(c.length/r),s+1)),disabled:s===Math.ceil(c.length/r),className:"bg-white hover:bg-gray-50 text-gray-600 border-gray-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"Next"})]})]})]})]})]}),y&&p&&zr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{zIndex:9999,position:"fixed",top:0,left:0,right:0,bottom:0},onClick:()=>f(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:de=>de.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white shadow-lg overflow-hidden",children:p.photo?e.jsx("img",{src:p.photo,alt:p.name,className:"w-full h-full object-cover",onError:de=>{const ve=de.target;ve.src="/api/placeholder/40/40"}}):e.jsx("div",{className:"w-full h-full bg-green-100 flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx(kt,{className:"bg-green-100 text-green-800 border-2 border-white shadow-sm text-xs",children:"Active"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(ts,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:p.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Record Payment Session"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:"New Transaction"})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>f(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Staff Information"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-4 lg:grid-cols-3 lg:gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-4 rounded-xl border border-green-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-green-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Full Name"})})]}),e.jsx("p",{className:"text-xl sm:text-lg font-bold text-green-900 ml-0",children:p.name})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 sm:p-4 rounded-xl border border-blue-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-blue-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white font-bold text-base sm:text-sm",children:"ID"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-blue-700 uppercase tracking-wide",children:"Staff ID"})})]}),e.jsx("p",{className:"text-xl sm:text-lg font-bold text-blue-900 ml-0",children:p.id})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 sm:p-4 rounded-xl border border-purple-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-purple-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(rs,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Role"})})]}),e.jsx("p",{className:"text-xl sm:text-lg font-bold text-purple-900 ml-0",children:p.role||"Staff Member"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 sm:p-4 rounded-xl border border-orange-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-orange-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(st,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-orange-700 uppercase tracking-wide",children:"Department"})})]}),e.jsx("p",{className:"text-xl sm:text-lg font-bold text-orange-900 ml-0",children:p.department||"Administration"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-4 rounded-xl border border-green-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-green-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(ai,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Salary"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-green-900 ml-0",children:["",z(p.salary).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 sm:p-4 rounded-xl border border-purple-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-purple-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white font-bold text-base sm:text-sm",children:""})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Advance Available"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-purple-900 ml-0",children:["",z(p.advance_amount||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 sm:p-4 rounded-xl border border-blue-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-blue-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Xs,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-blue-700 uppercase tracking-wide",children:"Total Paid"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-blue-900 ml-0",children:["",b().toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 sm:p-4 rounded-xl border border-red-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-red-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Qs,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-red-700 uppercase tracking-wide",children:"Balance Due"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-red-900 ml-0",children:["",(z(p.salary)-b()).toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(us,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Record New Payment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-4 rounded-xl border border-blue-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-blue-600 mb-2 uppercase tracking-wide",children:"Payment Date *"}),e.jsx(Ve,{type:"date",value:v.date,onChange:de=>w(ve=>({...ve,date:de.target.value})),className:"w-full border-blue-200 focus:border-blue-400 focus:ring-blue-400"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-4 rounded-xl border border-green-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-green-600 mb-2 uppercase tracking-wide",children:"Amount () *"}),e.jsx(Ve,{type:"number",placeholder:"Enter payment amount",value:v.amount,onChange:de=>w(ve=>({...ve,amount:de.target.value})),className:"w-full border-green-200 focus:border-green-400 focus:ring-green-400"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl border border-purple-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-purple-600 mb-2 uppercase tracking-wide",children:"Payment Type *"}),e.jsxs(At,{value:v.type,onValueChange:de=>w(ve=>({...ve,type:de})),children:[e.jsx(Et,{className:"w-full border-purple-200 focus:border-purple-400",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsxs(Dt,{className:"z-[99999]",style:{zIndex:2147483647,position:"relative"},children:[e.jsx(Pe,{value:"salary",children:"Salary"}),e.jsx(Pe,{value:"advance",children:"Advance"}),e.jsx(Pe,{value:"bonus",children:"Bonus"}),e.jsx(Pe,{value:"incentive",children:"Incentive"})]})]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx(P,{onClick:te,disabled:g||!v.amount||!v.date,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 text-lg font-semibold shadow-lg",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Recording Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"h-5 w-5 mr-2"}),"Record Payment"]})})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-3 sm:mb-4 md:mb-6",children:e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Payment History (",se.length,")"]})}),C?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading payment history..."})]}):se.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(ts,{className:"h-12 w-12 mx-auto mb-4 text-slate-300"}),e.jsxs("p",{children:["No payment records found",oe!==null&&me!==null?` for ${Y[oe-1]} ${me}`:""]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-4 rounded-xl border border-green-100 mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 text-center text-sm sm:text-base",children:["Payment Calculation",oe!==null&&me!==null?` for ${Y[oe-1]} ${me}`:""]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white p-4 sm:p-3 rounded-lg border border-blue-200 text-center",children:[e.jsx("p",{className:"text-sm sm:text-sm text-gray-600 mb-2 sm:mb-1 font-medium",children:"Monthly Payment"}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-blue-600",children:["",J().toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-4 sm:p-3 rounded-lg border border-orange-200 text-center",children:[e.jsx("p",{className:"text-sm sm:text-sm text-gray-600 mb-2 sm:mb-1 font-medium",children:"Advance Amount"}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-orange-600",children:["",je().toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-4 sm:p-3 rounded-lg border border-green-200 text-center",children:[e.jsx("p",{className:"text-sm sm:text-sm text-gray-600 mb-2 sm:mb-1 font-medium",children:"Total Paid"}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-green-600",children:["",b().toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsxs("div",{className:"flex flex-col sm:hidden gap-3 items-center text-base",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Monthly Payment:"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:["",J().toLocaleString("en-IN")]})]}),e.jsx("div",{className:"text-2xl text-gray-400",children:"+"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Advance Amount:"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",je().toLocaleString("en-IN")]})]}),e.jsx("div",{className:"text-2xl text-gray-400",children:"="}),e.jsxs(kt,{className:"bg-green-100 text-green-800 text-lg px-4 py-2 font-bold",children:["",b().toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-center gap-2 text-sm",children:[e.jsxs("span",{className:"font-semibold text-blue-600",children:["",J().toLocaleString("en-IN")]}),e.jsx("span",{className:"text-gray-500",children:"+"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",je().toLocaleString("en-IN")]}),e.jsx("span",{className:"text-gray-500",children:"="}),e.jsxs(kt,{className:"bg-green-100 text-green-800 text-lg px-3 py-1 font-bold",children:["",b().toLocaleString("en-IN")]})]}),e.jsx("p",{className:"text-center text-xs text-gray-500 mt-3 sm:mt-2",children:"Monthly Payment + Advance = Total Paid"})]})]}),e.jsx("div",{className:"w-full",children:e.jsxs("table",{className:"w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"S.No"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Amount ()"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Payment Mode"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Notes"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:se.map((de,ve)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:ve+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:new Date(de.payment_date).toLocaleDateString("en-IN")}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-center",children:["",parseFloat(de.payment_amount||"0").toLocaleString("en-IN")]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(kt,{variant:"outline",className:`
                                      ${de.type==="salary"?"border-blue-200 text-blue-700 bg-blue-50":""}
                                      ${de.type==="advance"?"border-orange-200 text-orange-700 bg-orange-50":""}
                                      ${de.type==="bonus"?"border-green-200 text-green-700 bg-green-50":""}
                                      ${de.type==="incentive"?"border-purple-200 text-purple-700 bg-purple-50":""}
                                    `,children:de.type||"salary"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:de.payment_mode||"Bank Transfer"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:de.notes||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:[new Date(de.created_at).toLocaleDateString("en-IN")," ",new Date(de.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(P,{size:"sm",variant:"outline",onClick:()=>D(de),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete payment record",children:e.jsx(mt,{className:"h-4 w-4 sm:h-4 sm:w-4"})})})]},de.id))})]})})]})]})]})})]})}),document.body),L&&zr.createPortal(e.jsx("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4 bg-black bg-opacity-50",style:{zIndex:2147483647,position:"fixed",top:0,left:0,right:0,bottom:0},onClick:()=>{he(!1),ke(null)},children:e.jsx("div",{className:"relative z-[100000] w-full max-w-md mx-auto",style:{zIndex:2147483647},onClick:de=>de.stopPropagation(),children:e.jsx("div",{className:"bg-white rounded-lg shadow-2xl border-0 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(mt,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700",children:"Delete Payment Record"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to delete this payment record? This action cannot be undone."})]})]}),ie&&e.jsx("div",{className:"my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Payment Details"}),e.jsx(kt,{variant:"outline",className:"text-xs",children:ie.type||"salary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 text-xs font-medium",children:"Date:"}),e.jsx("span",{className:"text-gray-600",children:new Date(ie.payment_date).toLocaleDateString("en-IN")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ai,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600 font-medium",children:["",parseFloat(ie.payment_amount||"0").toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:ie.payment_mode||"Bank Transfer"})]})]})]})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 pt-4",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{he(!1),ke(null)},disabled:V,className:"w-full sm:w-auto",children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:R,disabled:V,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:V?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Delete Payment"]})})]})]})})})}),document.body),e.jsx($s,{open:ne,onOpenChange:Q,selectedMonth:A,selectedYear:M,onMonthChange:T,onYearChange:X,onApply:()=>{Q(!1)},title:"Select Month & Year",description:"Select month and year for staff salary data",previewText:"staff records"})]})})},Uz=(t,s,a)=>new Date(t,s-1,a),Bz=t=>{if(!t)return"";if(t instanceof Date&&!isNaN(t.getTime())){const s=t.getFullYear();return s<1900||s>2100?"":wt(t,"dd-MM-yyyy")}return""},zz=t=>{if(!t)return"";let s;if(t instanceof Date?s=t:s=new Date(t),isNaN(s.getTime()))return"";const a=s.getFullYear();if(a<1900||a>2100)return"";const r=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");return`${a}-${r}-${n}`},Vz=t=>{if(!t||t.trim()==="")return null;try{const[s,a,r]=t.split("-").map(Number);if(isNaN(s)||isNaN(a)||isNaN(r)||s<1900||s>2100||a<1||a>12||r<1||r>31)return null;const n=Uz(s,a,r);return isNaN(n.getTime())?null:n}catch(s){return console.warn("Error parsing date from input:",t,s),null}},Yz=()=>{js();const t=al(),[s,a]=m.useState([]),[r,n]=m.useState([]),[l,i]=m.useState(!0),[o,c]=m.useState(""),[d,u]=m.useState("all"),[x,p]=m.useState([]),[h,y]=m.useState("all"),f=["January","February","March","April","May","June","July","August","September","October","November","December"],v=new Date().getFullYear(),[w,g]=m.useState(new Date().getMonth()+1),[j,N]=m.useState(v),[E,C]=m.useState(!1),[k,A]=m.useState(null),[T,M]=m.useState(null),[X,ne]=m.useState(!1),[Q,oe]=m.useState(!1),[ge,me]=m.useState(!1),[H,L]=m.useState(null),[he,ie]=m.useState({name:"",email:"",phone:"",address:"",specialization:"",department:"",join_date:"",salary:"",status:"Active"});m.useEffect(()=>{ke(),V()},[]),m.useEffect(()=>{O()},[s,o,d,h,k,T]);const ke=async()=>{try{i(!0);const J=await gt.getAllDoctors();console.log("Loaded doctors:",J);const je=J.map(b=>({...b,join_date:(()=>{try{if(b.join_date){const S=new Date(b.join_date);return isNaN(S.getTime())?null:S}return null}catch(S){return console.warn("Failed to parse join_date for doctor:",b.id,S),null}})(),created_at:(()=>{try{const S=new Date(b.created_at);return isNaN(S.getTime())?new Date:S}catch(S){return console.warn("Failed to parse created_at for doctor:",b.id,S),new Date}})(),updated_at:(()=>{try{const S=new Date(b.updated_at);return isNaN(S.getTime())?new Date:S}catch(S){return console.warn("Failed to parse updated_at for doctor:",b.id,S),new Date}})(),documents:(()=>{try{return typeof b.documents=="string"?JSON.parse(b.documents):b.documents&&typeof b.documents=="object"?b.documents:{}}catch(S){return console.warn("Failed to parse documents for doctor:",b.id,S),{}}})()}));a(je)}catch(J){console.error("Error loading doctors:",J),Te({title:"Error",description:"Failed to load doctors",variant:"destructive"})}finally{i(!1)}},V=async()=>{try{const J=await gt.getAllDoctorCategories();p(J||[])}catch(J){console.error("Error loading categories:",J)}},O=()=>{let J=s;o&&(J=J.filter(je=>je.name.toLowerCase().includes(o.toLowerCase())||je.email.toLowerCase().includes(o.toLowerCase())||je.phone.includes(o)||je.id.toLowerCase().includes(o.toLowerCase())||je.specialization.toLowerCase().includes(o.toLowerCase()))),d!=="all"&&(J=J.filter(je=>je.status.toLowerCase()===d.toLowerCase())),h!=="all"&&(J=J.filter(je=>je.specialization===h)),k!==null&&T!==null&&(J=J.filter(je=>{const b=je.join_date||je.created_at;if(!b)return!1;let S;if(b instanceof Date)S=b;else{const D=String(b);if(D.includes("T"))S=new Date(D);else if(/^\d{4}-\d{2}-\d{2}$/.test(D))S=new Date(D+"T00:00:00");else if(/^\d{2}-\d{2}-\d{4}$/.test(D)){const[R,F,I]=D.split("-");S=new Date(parseInt(I),parseInt(F)-1,parseInt(R))}else return!1}return isNaN(S.getTime())?!1:S.getMonth()===k-1&&S.getFullYear()===T})),n(J)},Y=J=>{L(J),ne(!0)},W=J=>{L(J),ie({name:J.name,email:J.email,phone:J.phone,address:J.address,specialization:J.specialization,department:J.department,join_date:zz(J.join_date),salary:J.salary.toString(),status:J.status}),oe(!0)},ue=J=>{L(J),me(!0)},U=async()=>{if(H)try{await gt.deleteDoctor(H.id),Te({title:"Success",description:"Doctor deleted successfully"}),me(!1),L(null),ke()}catch(J){console.error("Error deleting doctor:",J),Te({title:"Error",description:"Failed to delete doctor",variant:"destructive"})}},z=async J=>{if(J.preventDefault(),!!H)try{const je={name:he.name,email:he.email,phone:he.phone,address:he.address,specialization:he.specialization,department:he.department,join_date:Bz(Vz(he.join_date)),salary:parseFloat(he.salary)||0,status:he.status};await gt.updateDoctor(H.id,je),Te({title:"Success",description:"Doctor updated successfully"}),oe(!1),L(null),ke()}catch(je){console.error("Error updating doctor:",je),Te({title:"Error",description:"Failed to update doctor",variant:"destructive"})}},te=J=>J?J.startsWith("Photos/")||J.startsWith("Photos\\")?`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${J.replace(/\\/g,"/")}`:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${J}`:"/api/placeholder/40/40",se=J=>{switch(J.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(fa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Doctor Management"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:!1,disabled:!1}),e.jsx(Ht.MonthYear,{onClick:()=>C(!0),text:f[w-1]}),e.jsxs(P,{onClick:()=>t("/management/doctors/add"),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Doctor"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Doctors"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:s.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Doctors"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:s.filter(J=>J.status==="Active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"On duty"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Specialists"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:s.filter(J=>J.specialization&&J.specialization!=="General").length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Specialized"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-purple",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-700 mb-1 truncate",children:"Recent"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-purple-900 mb-1",children:s.filter(J=>{const je=new Date(J.join_date),b=new Date;return b.setDate(b.getDate()-7),je>=b}).length}),e.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"This week"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-purple",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search doctors by name, email, phone, or specialization...",value:o,onChange:J=>c(J.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:d,onValueChange:u,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"}),e.jsx("div",{className:"px-2 py-1 border-t border-gray-200",children:e.jsxs(P,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>{u("all"),c(""),y("all"),A(new Date().getMonth()+1),M(new Date().getFullYear()),g(new Date().getMonth()+1),N(new Date().getFullYear())},children:[e.jsx(es,{className:"h-3 w-3 mr-2"}),"Reset All Filters"]})})]})]})})]})}),e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"p-4 sm:p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs(Es,{className:"text-lg sm:text-xl text-gray-900",children:["Doctors List (",r.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last updated: ",wt(new Date,"MMM dd, yyyy HH:mm")]})]})]})}),e.jsx(Re,{className:"p-0",children:l?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(es,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading doctors..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No doctors found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Doctor ID"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Specialization"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Department"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Phone"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Join Date"}),e.jsx("span",{className:"sm:hidden",children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:r.map((J,je)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:je+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full overflow-hidden bg-gray-100 ring-2 ring-blue-100",children:e.jsx("img",{src:te(J.photo),alt:J.name,className:"w-full h-full object-cover",onError:b=>{const S=b.target;S.src="/api/placeholder/40/40"}})})})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-blue-600 whitespace-nowrap",children:J.id}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:J.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:J.specialization}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:J.department}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:J.phone}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:J.join_date?wt(J.join_date,"MM/dd/yyyy"):"N/A"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsx(kt,{className:`text-xs px-2 py-1 rounded-full font-medium ${J.status.toLowerCase()==="active"?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:J.status})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Y(J),className:"action-btn-lead action-btn-view h-7 w-7 sm:h-8 sm:w-8 p-0",title:"View Doctor",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>W(J),className:"action-btn-lead action-btn-edit h-7 w-7 sm:h-8 sm:w-8 p-0",title:"Edit Doctor",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>ue(J),className:"action-btn-lead action-btn-delete h-7 w-7 sm:h-8 sm:w-8 p-0",title:"Delete Doctor",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},J.id))})]})})})]}),X&&H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>ne(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:J=>J.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600",children:e.jsx("img",{src:te(H.photo),alt:H.name,className:"w-full h-full object-cover",onError:J=>{const b=J.target.parentElement;b&&(b.innerHTML=`<div class="w-full h-full flex items-center justify-center"><span class="text-lg font-semibold text-white">${H.name.charAt(0).toUpperCase()}</span></div>`)}})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${se(H.status)}`,children:H.status})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(fa,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Dr. ",H.name]})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Doctor ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:H.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>ne(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(rs,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:H.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ia,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Email Address"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:H.email})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ps,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Phone Number"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:H.phone})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100 sm:col-span-2 lg:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(mr,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Address"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:H.address})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(fa,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Professional Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(fa,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Specialization"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:H.specialization})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Department"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:H.department})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Join Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:H.join_date?wt(H.join_date,"dd/MM/yyyy"):"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Salary"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",H.salary.toLocaleString()]})]})]})})]})]}),H.documents&&Object.keys(H.documents).length>0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(It,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Documents (",Object.keys(H.documents).length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:Object.entries(H.documents).map(([J,je])=>e.jsxs(P,{variant:"outline",onClick:()=>window.open(te(je),"_blank"),className:"justify-start bg-gradient-to-br from-blue-50 to-white p-3 rounded-lg border border-blue-100 hover:from-blue-100 hover:to-white h-auto",children:[e.jsx(It,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:J.replace(/([A-Z])/g," $1").replace(/^./,b=>b.toUpperCase())})]},J))})]})]})})]})}),e.jsx($t,{open:Q,onOpenChange:oe,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Doctor"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update doctor information and details"})]})]})}),e.jsxs("form",{onSubmit:z,className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),"Doctor Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"edit-name",value:he.name,onChange:J=>ie({...he,name:J.target.value}),placeholder:"Enter doctor's full name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-email",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"edit-email",type:"email",value:he.email,onChange:J=>ie({...he,email:J.target.value}),placeholder:"Enter email address",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-phone",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"edit-phone",value:he.phone,onChange:J=>ie({...he,phone:J.target.value}),placeholder:"Enter phone number",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-specialization",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4"}),"Specialization ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"edit-specialization",value:he.specialization,onChange:J=>ie({...he,specialization:J.target.value}),placeholder:"Enter specialization",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-department",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Department"]}),e.jsx(Ve,{id:"edit-department",value:he.department,onChange:J=>ie({...he,department:J.target.value}),placeholder:"Enter department",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-join-date",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Join Date"]}),e.jsx(Ve,{id:"edit-join-date",type:"date",value:he.join_date,onChange:J=>ie({...he,join_date:J.target.value}),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-salary",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Salary"]}),e.jsx(Ve,{id:"edit-salary",type:"number",value:he.salary,onChange:J=>ie({...he,salary:J.target.value}),placeholder:"Enter salary amount",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:he.status,onValueChange:J=>ie({...he,status:J}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-address",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4"}),"Address"]}),e.jsx(As,{id:"edit-address",value:he.address,onChange:J=>ie({...he,address:J.target.value}),placeholder:"Enter complete address",rows:3,className:"editpopup form crm-edit-form-input"})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>oe(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Update Doctor"]})]})]})]})}),e.jsx($s,{open:E,onOpenChange:C,selectedMonth:w,selectedYear:j,onMonthChange:g,onYearChange:N,onApply:()=>{A(w),M(j),C(!1)},title:"Select Month & Year",description:"Filter doctors by specific month and year",previewText:"doctors"}),e.jsx($t,{open:ge,onOpenChange:me,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Doctor"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this doctor? This action cannot be undone."})]})]})}),H&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:te(H.photo),alt:H.name,className:"w-full h-full object-cover",onError:J=>{const je=J.target;je.src="/api/placeholder/40/40"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900 truncate",children:H.name})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600 truncate",children:H.specialization})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-600 truncate",children:["ID: ",H.id]})]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{variant:"outline",onClick:()=>me(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{variant:"destructive",onClick:U,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Doctor"]})]})]})})]})})};let bY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const Hj=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const b=await gt.getAllMedicineSuppliers();s(b)}catch{}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const b=setInterval(()=>{l(S=>S+1)},3e4);return()=>clearInterval(b)},[]);const i=Fe.useCallback(()=>{r(!0),l(b=>b+1)},[]),[o,c]=m.useState(!1),[d,u]=m.useState(null),[x,p]=m.useState(!1),[h,y]=m.useState(null),[f,v]=m.useState(!1),[w,g]=m.useState(""),[j,N]=m.useState("all"),[E,C]=m.useState({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"}),k=["January","February","March","April","May","June","July","August","September","October","November","December"],A=new Date().getFullYear(),[T,M]=m.useState(new Date().getMonth()+1),[X,ne]=m.useState(A),[Q,oe]=m.useState(!1),[ge,me]=m.useState(new Date().getMonth()+1),[H,L]=m.useState(A),{toast:he}=ya();Fe.useCallback(async()=>{try{r(!0);const b=ge,S=H,D=w,R=j,F=await gt.getAllMedicineSuppliers();s(F),me(b),L(S),g(D),N(R),he({title:"Success",description:"Data refreshed successfully"})}catch(b){console.error("Refresh error:",b),he({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[ge,H,w,j,he]);const ie=b=>{u(b),C({name:b.name,contact_person:b.contact_person,email:b.email,phone:b.phone,address:b.address,status:b.status}),c(!0)},ke=b=>{y(b),p(!0)},V=async()=>{if(!E.name||!E.contact_person||!E.email||!E.phone){he({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}try{if(v(!0),d){const b=await gt.updateMedicineSupplier(d.id,E);s(t.map(S=>S.id===d.id?b:S)),he({title:"Success",description:"Supplier updated successfully"})}else{const b=await gt.addMedicineSupplier(E);s([...t,b]),he({title:"Success",description:"Supplier added successfully"})}i(),C({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"}),c(!1),u(null)}catch{he({title:"Error",description:`Failed to ${d?"update":"add"} supplier`,variant:"destructive"})}finally{v(!1)}},O=async()=>{if(h)try{v(!0),await gt.deleteMedicineSupplier(h.id),s(t.filter(b=>b.id!==h.id)),p(!1),y(null),he({title:"Success",description:"Supplier deleted successfully"})}catch{he({title:"Error",description:"Failed to delete supplier",variant:"destructive"})}finally{v(!1)}},Y=()=>{try{const b=["S No","Date","Company Name","Contact Person","Email","Phone","Address","Status"],S=W.map((I,ce)=>{const de=I.created_at;let ve="";if(de){const _e=new Date(de);if(isNaN(_e.getTime()))ve=de;else{const ze=String(_e.getDate()).padStart(2,"0"),be=String(_e.getMonth()+1).padStart(2,"0"),Me=_e.getFullYear();ve=`${ze}/${be}/${Me}`}}return[ce+1,ve,`"${I.name}"`,`"${I.contact_person}"`,I.email,I.phone,`"${I.address||""}"`,I.status.charAt(0).toUpperCase()+I.status.slice(1)]}),D=[b,...S].map(I=>I.join(",")).join(`
`),R=new Blob([D],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");if(F.download!==void 0){const I=URL.createObjectURL(R);F.setAttribute("href",I);let ve=`medicine-suppliers-${new Date().toISOString().split("T")[0]}`;ge!==null&&H!==null&&(ve+=`-${k[ge-1]}-${H}`),j!=="all"&&(ve+=`-${j}`),w&&(ve+="-filtered"),F.setAttribute("download",`${ve}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F),he({title:"Success",description:`CSV exported successfully! ${W.length} suppliers exported.`})}}catch(b){console.error("Export error:",b),he({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},W=t.filter(b=>{var R,F,I,ce;const S=((R=b.name)==null?void 0:R.toLowerCase().includes(w.toLowerCase()))||((F=b.contact_person)==null?void 0:F.toLowerCase().includes(w.toLowerCase()))||((I=b.email)==null?void 0:I.toLowerCase().includes(w.toLowerCase()))||((ce=b.phone)==null?void 0:ce.toLowerCase().includes(w.toLowerCase()));let D=!0;if(j!=="all"&&(D=b.status===j),ge!==null&&H!==null){const de=b.created_at;if(!de)return!1;const ve=new Date(de);return isNaN(ve.getTime())?!1:S&&D&&ve.getMonth()===ge-1&&ve.getFullYear()===H}return S&&D}).sort((b,S)=>{const D=b.id||0,R=S.id||0;return D-R}),[ue,U]=m.useState(1),z=10,te=Math.ceil(W.length/z),se=W.slice((ue-1)*z,ue*z),J=()=>U(b=>Math.max(1,b-1)),je=()=>U(b=>Math.min(te,b+1));return Fe.useEffect(()=>{U(1)},[w,t.length]),a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl p-4 sm:p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsxs("div",{className:"crm-page-bg",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Ta,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Medicine Suppliers"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{onClick:()=>oe(!0),text:ge!==null&&H!==null?`${k[ge-1]} ${H}`:`${k[T-1]} ${X}`}),e.jsxs(P,{onClick:Y,className:"global-btn global-btn-primary flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>{C({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"}),c(!0)},className:"global-btn global-btn-primary flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Supplier"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Suppliers"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:W.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ha,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Companies"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ha,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:W.filter(b=>b.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"With Email"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:W.filter(b=>b.email&&b.email.includes("@")).length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ia,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Connected"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ia,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:W.filter(b=>b.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Suspended"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search suppliers by name, contact person, email, or phone...",value:w,onChange:b=>g(b.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:j,onValueChange:N,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})}),w&&e.jsx(P,{onClick:()=>g(""),variant:"outline",size:"sm",className:"px-3",children:"Clear"})]})}),e.jsx($s,{open:Q,onOpenChange:oe,selectedMonth:T,selectedYear:X,onMonthChange:M,onYearChange:ne,onApply:()=>{me(T),L(X),oe(!1)},title:"Select Month & Year",description:"Filter suppliers by specific month and year",previewText:"suppliers"}),e.jsx(Ie,{className:"crm-table-card",children:e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"crm-table-header",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(Ta,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"crm-table-title-text",children:["Suppliers List (",W.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Suppliers (",W.length,")"]})]})}),e.jsx("div",{className:"crm-table-container",children:e.jsxs(ls,{className:"crm-table",children:[e.jsx(is,{children:e.jsxs(nt,{className:"crm-table-header-row",children:[e.jsx(re,{className:"crm-table-head",children:"S No"}),e.jsx(re,{className:"crm-table-head",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"crm-table-head",children:"Company Name"}),e.jsx(re,{className:"crm-table-head",children:"Contact Person"}),e.jsx(re,{className:"crm-table-head",children:"Contact Info"}),e.jsx(re,{className:"crm-table-head",children:"Address"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[se.map((b,S)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ue-1)*z+S+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const D=b.created_at;if(!D)return"";const R=new Date(D);if(isNaN(R.getTime()))return D;const F=String(R.getDate()).padStart(2,"0"),I=String(R.getMonth()+1).padStart(2,"0"),ce=R.getFullYear();return`${F}/${I}/${ce}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:b.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b.contact_person}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-[200px]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs",children:[e.jsx(ia,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"truncate",children:b.email})]}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs",children:[e.jsx(Ps,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:b.phone})]})]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-[200px]",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs",children:[e.jsx(mr,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:b.address||"-"})]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:b.status==="active"?"default":"secondary",className:`
                        ${b.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ie(b),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Supplier",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ke(b),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Supplier",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},b.id)),se.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No suppliers found"})})]})]})})]})}),te>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(ue-1)*z+1," to ",Math.min(ue*z,W.length)," of ",W.length," suppliers"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:J,disabled:ue===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(te,5)},(b,S)=>{let D;return te<=5||ue<=3?D=S+1:ue>=te-2?D=te-4+S:D=ue-2+S,e.jsx(P,{variant:ue===D?"default":"outline",size:"sm",onClick:()=>U(D),className:"crm-pagination-page-btn",children:D},D)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:je,disabled:ue===te,className:"crm-pagination-btn",children:"Next"})]})]})]}),e.jsx($t,{open:o,onOpenChange:c,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsxs("div",{className:"editpopup form crm-modal-header-content",children:[e.jsx("div",{className:"editpopup form crm-modal-icon",children:d?e.jsx(Ds,{className:"h-5 w-5 text-blue-600"}):e.jsx(us,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"editpopup form crm-modal-title-section",children:[e.jsx(Bt,{className:"editpopup form crm-modal-title",children:d?"Edit Supplier":"Add New Supplier"}),e.jsx(Vt,{className:"editpopup form crm-modal-description",children:d?"Update supplier information":"Enter the details for the new supplier"})]})]})}),e.jsxs("form",{onSubmit:b=>{b.preventDefault(),V()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:E.name,onChange:b=>C({...E,name:b.target.value}),placeholder:"Enter company name",required:!0,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"contact_person",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),"Contact Person ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"contact_person",value:E.contact_person,onChange:b=>C({...E,contact_person:b.target.value}),placeholder:"Enter contact person name",required:!0,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"email",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"email",type:"email",value:E.email,onChange:b=>C({...E,email:b.target.value}),placeholder:"Enter email address",required:!0,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"phone",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"phone",value:E.phone,onChange:b=>C({...E,phone:b.target.value}),placeholder:"Enter phone number",required:!0,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group md:col-span-2",children:[e.jsxs(ae,{htmlFor:"address",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4"}),"Address"]}),e.jsx(As,{id:"address",value:E.address,onChange:b=>C({...E,address:b.target.value}),placeholder:"Enter company address",rows:3,className:"editpopup form crm-edit-form-textarea"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:E.status,onValueChange:b=>C({...E,status:b}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{c(!1),u(null),C({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:f,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:f?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),d?"Updating...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ta,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),d?"Update Supplier":"Add Supplier"]})})]})]})]})}),e.jsx($t,{open:x,onOpenChange:p,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Supplier"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this supplier? This action cannot be undone."})]})]})}),h&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:h.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ta,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:h.contact_person})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:h.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:h.phone})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{p(!1),y(null)},disabled:f,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:O,disabled:f,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:f?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Supplier"]})})]})]})})]})},Gj=async(t,s="new",a="photo")=>{try{if(console.log(" Starting doctor file upload..."),console.log(" File details:",{name:t.name,size:t.size,type:t.type,lastModified:t.lastModified}),console.log(" Upload params:",{doctorId:s,fieldName:a}),!t)throw new Error("No file provided");if(t.size>10*1024*1024)throw new Error("File size exceeds 10MB limit");const r=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];if(!r.includes(t.type))throw new Error(`File type ${t.type} not allowed. Allowed types: ${r.join(", ")}`);try{console.log(" Testing backend connectivity through proxy...");const c=await fetch("/api/health",{method:"GET",headers:{Accept:"application/json"}});if(console.log(" Health check response:",c.status,c.statusText),!c.ok){console.log(" Trying direct backend connection...");const u=await fetch("http://localhost:4000/api/health",{method:"GET"});if(!u.ok)throw new Error(`Backend server is not responding. Proxy: ${c.status}, Direct: ${u.status}`);console.log(" Direct backend connection works, but proxy might be misconfigured")}const d=await c.text();console.log(" Backend server is healthy:",d)}catch(c){throw console.error(" Backend health check failed:",c),new Error(`Cannot connect to backend server. Please make sure the backend server is running on port http://localhost:4000/api and the proxy is configured correctly. Error: ${c.message}`)}const n=new FormData;n.append("file",t),n.append("doctorId",s),n.append("fieldName",a),console.log(" FormData contents:"),console.log(" - file:",t.name,t.size,"bytes"),console.log(" - doctorId:",s,"type:",typeof s),console.log(" - fieldName:",a);const l="/api/upload-doctor-file";console.log(" Sending upload request to backend..."),console.log(" Request URL:",l),console.log(" FormData contents:",{file:t.name,doctorId:s,fieldName:a});const i=await fetch(l,{method:"POST",body:n});if(console.log(" Upload response status:",i.status,i.statusText),!i.ok){let c;try{const d=await i.json();c=d.error||d.message||`HTTP ${i.status}`,console.error(" Upload failed - Error data:",d)}catch{c=`HTTP ${i.status} - ${i.statusText}`,console.error(" Upload failed - Could not parse error response")}throw new Error(`Upload failed: ${c}`)}const o=await i.json();if(console.log(" Upload successful:",o),!o.success)throw new Error(o.error||"Upload failed");return o.filePath}catch(r){throw console.error(" Doctor file upload error:",r),r}},Wz=()=>{const t=Date.now().toString(),s=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`DOC${t.slice(-6)}${s}`},Hz=()=>{const t=Wz();return console.log(" Pre-generated doctor ID:",t),t},Gz=()=>{js();const t=al(),[s,a]=m.useState(!1),[r,n]=m.useState(),[l,i]=m.useState(null),[o,c]=m.useState(""),[d,u]=m.useState({name:"",email:"",phone:"",address:"",specialization:"",department:"",salary:"",status:"Active"}),[x,p]=m.useState([]);m.useEffect(()=>{y(),h()},[]);const h=async()=>{try{const M=await fetch("/api/doctors/next-id");if(!M.ok)throw new Error("Failed to get next doctor ID");const ne=(await M.json()).nextId;c(ne),console.log(" Got sequential doctor ID for uploads:",ne)}catch(M){console.error("Error getting next doctor ID:",M);const X=Hz();c(X),console.log(" Using fallback ID:",X)}},y=async()=>{try{const X=(await gt.getAllDoctorCategories()).filter(ne=>ne.status==="active")||[];p(X),X.length===0&&console.log("No specializations found, user can still add doctor with manual specialization")}catch(M){console.error("Error loading specializations:",M)}},[f,v]=m.useState({aadharFront:null,aadharBack:null,panFront:null,panBack:null}),[w,g]=m.useState({photo:"",aadharFront:"",aadharBack:"",panFront:"",panBack:""}),j=M=>{if(!M)return!0;const X=5*1024*1024;return M.size>X?(Te({title:"File Too Large",description:`File size must be less than 5MB. Current file size: ${(M.size/(1024*1024)).toFixed(2)}MB`,variant:"destructive"}),!1):!0},N=async M=>{if(j(M)){if(!M){i(null),g(X=>({...X,photo:""}));return}if(!o){Te({title:"Upload Error",description:"Doctor ID not generated yet. Please try again.",variant:"destructive"});return}try{console.log(" Starting photo upload for doctor ID:",o);const X=await Gj(M,o,"photo");console.log(" Photo uploaded successfully:",X),g(ne=>({...ne,photo:X})),i(M),Te({title:"Photo Uploaded",description:`${M.name} (${(M.size/(1024*1024)).toFixed(2)}MB) uploaded successfully to ${X}`})}catch(X){console.error(" Photo upload failed:",X),Te({title:"Photo Upload Failed",description:X.message||"Failed to upload photo",variant:"destructive"})}}},E=async(M,X)=>{if(j(X)){if(!X){v(ne=>({...ne,[M]:null})),g(ne=>({...ne,[M]:""}));return}if(!o){Te({title:"Upload Error",description:"Doctor ID not generated yet. Please try again.",variant:"destructive"});return}try{console.log(` Starting ${M} upload for doctor ID:`,o);const ne=await Gj(X,o,M);console.log(` ${M} uploaded successfully:`,ne),g(Q=>({...Q,[M]:ne})),v(Q=>({...Q,[M]:X})),Te({title:"Document Uploaded",description:`${X.name} (${(X.size/(1024*1024)).toFixed(2)}MB) uploaded successfully`})}catch(ne){console.error(` ${M} upload failed:`,ne),Te({title:"Document Upload Failed",description:ne.message||`Failed to upload ${M}`,variant:"destructive"})}}},C=async()=>{if(!l){Te({title:"Test Upload",description:"Please select a photo first to test upload",variant:"destructive"});return}try{console.log(" Testing upload with photo:",l.name),console.log(" Photo details:",{size:l.size,type:l.type,name:l.name}),Te({title:"Test Upload",description:`Photo details: ${l.name} (${(l.size/(1024*1024)).toFixed(2)}MB)`})}catch(M){console.error("Test upload error:",M),Te({title:"Test Upload Failed",description:"Error during test upload",variant:"destructive"})}},k=({label:M,field:X,accept:ne=".pdf,.jpg,.jpeg,.png"})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium",children:M}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(Ve,{type:"file",accept:ne,onChange:Q=>{var oe;return E(X,((oe=Q.target.files)==null?void 0:oe[0])||null)},className:"hidden",id:X}),e.jsxs(ae,{htmlFor:X,className:"flex items-center space-x-2 cursor-pointer bg-muted hover:bg-muted/80 px-4 py-3 rounded-lg border border-input transition-colors w-full sm:w-auto min-h-[2.75rem] justify-center sm:justify-start",children:[e.jsx(rn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-center sm:text-left",children:f[X]?`${f[X].name.length>25?f[X].name.substring(0,25)+"...":f[X].name} (${(f[X].size/(1024*1024)).toFixed(2)}MB)`:"Choose file (Max 5MB)"})]}),f[X]&&e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>E(X,null),className:"w-full sm:w-auto h-11",children:"Remove"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted formats: ",ne,". Maximum file size: 5MB"]})]}),A=(M,X)=>{if(M==="phone"){const ne=X.replace(/\D/g,"");ne.length<=10&&u(Q=>({...Q,[M]:ne}))}else u(ne=>({...ne,[M]:X}))},T=async M=>{var X;M.preventDefault(),a(!0);try{console.log("=== FORM SUBMISSION STARTED ==="),console.log("Current form data:",d),console.log("Join date:",r),console.log("Photo:",l),console.log("Documents:",f);const ne=[];if((!d.name||d.name.trim()==="")&&ne.push("Name"),(!d.email||d.email.trim()==="")&&ne.push("Email"),(!d.phone||d.phone.trim()==="")&&ne.push("Phone"),(!d.address||d.address.trim()==="")&&ne.push("Address"),(!d.specialization||d.specialization.trim()==="")&&ne.push("Specialization"),console.log("Missing fields check:",ne),ne.length>0){console.log("VALIDATION FAILED - Missing fields:",ne),Te({title:"Validation Error",description:`Please fill in the following required fields: ${ne.join(", ")}`,variant:"destructive"}),a(!1);return}console.log(" Validation passed - proceeding with form submission");const Q=o;console.log("Using pre-generated doctor ID:",Q);const oe=w.photo,ge={};w.aadharFront&&(ge.aadharFront=w.aadharFront),w.aadharBack&&(ge.aadharBack=w.aadharBack),w.panFront&&(ge.panFront=w.panFront),w.panBack&&(ge.panBack=w.panBack);const me={id:Q,name:d.name.trim(),email:d.email.trim(),phone:d.phone.trim(),address:d.address.trim(),specialization:d.specialization.trim(),department:((X=d.department)==null?void 0:X.trim())||"",join_date:wt(r||new Date,"yyyy-MM-dd"),salary:d.salary?parseFloat(d.salary):0,status:d.status,photo:oe,...Object.keys(ge).length>0&&{documents:ge}};console.log("Final doctor data prepared:",{...me,photo:oe||"[NO PHOTO]",documents:ge}),console.log("Calling DatabaseService.addDoctor...");try{const H=await gt.addDoctor(me);console.log("DatabaseService.addDoctor completed successfully:",H),Te({title:"Doctor Added Successfully!",description:`Doctor ${Q} has been registered with file uploads.`}),setTimeout(()=>{t("/management/doctors")},1500)}catch(H){throw console.error("DatabaseService.addDoctor failed:",H),console.error("API Error details:",{message:H.message,stack:H.stack,name:H.name}),H}}catch(ne){console.error("Detailed error information:",ne),console.error("Error stack:",ne.stack),console.error("Form data at time of error:",d);let Q="Unknown error occurred";ne instanceof Error?Q=ne.message:typeof ne=="string"&&(Q=ne),Te({title:"Error",description:`Failed to add doctor: ${Q}`,variant:"destructive"})}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 pl-1 pr-3 sm:pl-2 sm:pr-4 lg:pl-3 lg:pr-6 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-lg border border-white/30 rounded-2xl sm:rounded-3xl p-4 sm:p-6 lg:p-8 shadow-2xl mb-4 sm:mb-6 lg:mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-indigo-600/5 to-purple-600/5"}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full -mr-12 sm:-mr-16 -mt-12 sm:-mt-16"}),e.jsxs("div",{className:"relative flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl sm:rounded-2xl shadow-lg",children:e.jsx(fa,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Add New Doctor"})}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-2 bg-blue-50 px-4 py-2 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Ready to submit"})]})]})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4 sm:space-y-6",children:[e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(fa,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Doctor Information"]})}),e.jsxs(Re,{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"name",children:"Doctor Name *"}),e.jsx(Ve,{id:"name",placeholder:"Enter doctor's full name",value:d.name,onChange:M=>A("name",M.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"email",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ia,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(Ve,{id:"email",type:"email",placeholder:"Enter email address",value:d.email,onChange:M=>A("email",M.target.value),required:!0,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ps,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(Ve,{id:"phone",placeholder:"Enter phone number",value:d.phone,onChange:M=>A("phone",M.target.value),required:!0,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(ae,{htmlFor:"address",children:"Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(mr,{className:"absolute left-3 top-3 w-4 h-4 text-muted-foreground"}),e.jsx(As,{id:"address",placeholder:"Enter complete address",value:d.address,onChange:M=>A("address",M.target.value),required:!0,className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"specialization",children:"Specialization *"}),x.length>0?e.jsxs(At,{value:d.specialization,onValueChange:M=>{M==="__add_specialization__"?t("/management/doctor-category"):A("specialization",M)},required:!0,children:[e.jsx(Et,{children:e.jsx(_t,{placeholder:"Select specialization"})}),e.jsxs(Dt,{children:[x.map(M=>e.jsx(Pe,{value:M.name,children:M.name},M.id)),e.jsx(Pe,{value:"__add_specialization__",children:"+ Add New Specialization"})]})]}):e.jsx(Ve,{id:"specialization",placeholder:"Enter specialization (e.g., Cardiology, Neurology)",value:d.specialization,onChange:M=>A("specialization",M.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"department",children:"Department"}),e.jsx(Ve,{id:"department",placeholder:"Enter department",value:d.department,onChange:M=>A("department",M.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"salary",children:"Salary"}),e.jsx(Ve,{id:"salary",type:"number",placeholder:"Enter salary",value:d.salary,onChange:M=>A("salary",M.target.value),min:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{children:"Join Date *"}),e.jsxs(go,{children:[e.jsx(vo,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:bt("w-full justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[e.jsx(Pt,{className:"mr-2 h-4 w-4"}),r?wt(r,"PPP"):"Pick join date"]})}),e.jsx(Si,{className:"w-auto p-0",align:"start",children:e.jsx(bi,{mode:"single",selected:r,onSelect:n,initialFocus:!0,className:"pointer-events-auto"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"status",children:"Status"}),e.jsxs(At,{value:d.status,onValueChange:M=>A("status",M),children:[e.jsx(Et,{children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-2 lg:col-span-2",children:[e.jsx(ae,{htmlFor:"photo",className:"text-sm font-medium",children:"Doctor Photo"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx(Ve,{type:"file",accept:"image/*",onChange:M=>{var X;return N(((X=M.target.files)==null?void 0:X[0])||null)},className:"hidden",id:"photo"}),e.jsxs(ae,{htmlFor:"photo",className:"flex items-center space-x-2 cursor-pointer bg-muted hover:bg-muted/80 px-4 py-3 rounded-lg border border-input transition-colors w-full sm:w-auto min-h-[2.75rem] justify-center sm:justify-start",children:[e.jsx(rn,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-center sm:text-left",children:l?`${l.name.length>20?l.name.substring(0,20)+"...":l.name} (${(l.size/(1024*1024)).toFixed(2)}MB)`:"Choose photo (Max 5MB)"})]}),l&&e.jsxs("div",{className:"flex space-x-2 w-full sm:w-auto",children:[e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>i(null),className:"flex-1 sm:flex-none h-11",children:"Remove"}),e.jsx(P,{type:"button",variant:"secondary",size:"sm",onClick:C,className:"flex-1 sm:flex-none h-11",children:"Test Upload"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted formats: JPG, JPEG, PNG, GIF. Maximum file size: 5MB"})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-lg",children:[e.jsx(Zt,{className:"border-b border-gray-100 p-4 sm:p-6",children:e.jsxs(Es,{className:"flex items-center text-lg sm:text-xl",children:[e.jsx(It,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"Document Upload"]})}),e.jsx(Re,{className:"p-4 sm:p-6 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-base",children:"Aadhar Card"}),e.jsx(k,{label:"Aadhar Card Front",field:"aadharFront",accept:"image/*"}),e.jsx(k,{label:"Aadhar Card Back",field:"aadharBack",accept:"image/*"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-base",children:"PAN Card"}),e.jsx(k,{label:"PAN Card Front",field:"panFront",accept:"image/*"}),e.jsx(k,{label:"PAN Card Back",field:"panBack",accept:"image/*"})]})]})})]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-4 sm:pt-6",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>t("/management/doctors"),className:"header-action-btn header-action-btn--clear h-11 px-6 w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),e.jsx(P,{type:"submit",disabled:s,className:"header-action-btn header-action-btn--primary h-11 px-8 w-full sm:w-auto order-1 sm:order-2",children:s?"Adding Doctor...":"Add Doctor"})]})]})]})})},qz=()=>{js();const[t,s]=Fe.useState([]),[a,r]=Fe.useState(!0),[n,l]=Fe.useState(!1),[i,o]=Fe.useState(!1),[c,d]=Fe.useState(null),[u,x]=Fe.useState(""),[p,h]=Fe.useState("all"),[y,f]=Fe.useState(null),[v,w]=Fe.useState(!1),[g,j]=Fe.useState({name:"",description:"",status:"active"});Fe.useEffect(()=>{N()},[]);const N=async()=>{try{r(!0);const me=await gt.getAllDoctorCategories();s(me)}catch(me){console.error("Error loading doctor categories:",me),Te({title:"Error",description:"Failed to load doctor categories",variant:"destructive"})}finally{r(!1)}},E=async()=>{if(!g.name){Te({title:"Error",description:"Please enter a category name",variant:"destructive"});return}if(t.some(me=>me.name.toLowerCase()===g.name.toLowerCase())){Te({title:"Duplicate",description:"Category already exists",variant:"destructive"});return}try{await gt.addDoctorCategory({name:g.name,description:g.description,status:g.status}),await N(),j({name:"",description:"",status:"active"}),l(!1),Te({title:"Success",description:"Category added successfully"})}catch(me){console.error("Error adding category:",me),Te({title:"Error",description:"Failed to add category",variant:"destructive"})}},C=me=>{d(me.id),j({name:me.name,description:me.description,status:me.status}),o(!0)},k=async()=>{if(!g.name){Te({title:"Error",description:"Please enter a category name",variant:"destructive"});return}try{await gt.updateDoctorCategory(c,{name:g.name,description:g.description,status:g.status}),await N(),o(!1),d(null),j({name:"",description:"",status:"active"}),Te({title:"Success",description:"Category updated successfully"})}catch(me){console.error("Error updating category:",me),Te({title:"Error",description:"Failed to update category",variant:"destructive"})}},A=me=>{f(me),w(!0)},T=async()=>{if(y)try{await gt.deleteDoctorCategory(y.id),await N(),Te({title:"Success",description:"Category deleted successfully"}),w(!1),f(null)}catch(me){console.error("Error deleting category:",me),Te({title:"Error",description:"Failed to delete category",variant:"destructive"})}},[M,X]=Fe.useState(1),ne=10,Q=t.filter(me=>{const H=me.name.toLowerCase().includes(u.toLowerCase())||me.description.toLowerCase().includes(u.toLowerCase()),L=p==="all"||me.status===p;return H&&L}),oe=Math.ceil(Q.length/ne),ge=Q.slice((M-1)*ne,M*ne);return a?e.jsx(Gr,{message:"Loading doctor categories..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Doctor Categories"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsxs(P,{onClick:()=>l(!0),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:t.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ds,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"All types"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:t.filter(me=>me.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Xs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In use"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Xs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:t.filter(me=>me.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx($r,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Disabled"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx($r,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Specializations"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:t.filter(me=>me.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(fa,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(fa,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:u,onChange:me=>x(me.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:p,onChange:me=>h(me.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})})]})}),e.jsx($t,{open:n,onOpenChange:l,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(us,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Add New Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Create a new category for doctors"})]})]})}),e.jsxs("div",{className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:g.name,onChange:me=>j({...g,name:me.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:g.description,onChange:me=>j({...g,description:me.target.value}),placeholder:"Enter category description",rows:3,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Xs,{className:"h-4 w-4"}),"Status"]}),e.jsxs("select",{id:"status",className:"editpopup form crm-edit-form-select",value:g.status,onChange:me=>j({...g,status:me.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{variant:"outline",onClick:()=>l(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{onClick:E,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Add Category"]})]})]})}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(ds,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Categories List (",Q.length,")"]}),e.jsxs("span",{className:"sm:hidden",children:["Categories (",Q.length,")"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"S No"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Category Name"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Description"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Status"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Created Date"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsx(os,{children:Q.length>0?ge.map((me,H)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(M-1)*ne+H+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:me.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-xs truncate",children:me.description}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:me.status==="active"?"default":"secondary",className:me.status==="active"?"bg-green-100 text-green-700 border border-green-200":"bg-gray-100 text-gray-500 border border-gray-200",children:me.status.charAt(0).toUpperCase()+me.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const L=me.created_at;if(!L)return"";const he=new Date(L);return isNaN(he.getTime())?L:he.toLocaleDateString("en-GB")})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>C(me),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Category",children:e.jsx(an,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>A(me),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Category",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},me.id)):e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No categories found."})})})]})}),oe>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:(()=>{const me=(M-1)*ne+1,H=Math.min(M*ne,Q.length);return`Showing ${me} to ${H} of ${Q.length} categories`})()}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>X(me=>Math.max(1,me-1)),disabled:M===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(oe,5)},(me,H)=>{let L;return oe<=5||M<=3?L=H+1:M>=oe-2?L=oe-4+H:L=M-2+H,e.jsx(P,{variant:M===L?"default":"outline",size:"sm",onClick:()=>X(L),className:"h-8 w-8 p-0",children:L},L)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>X(me=>Math.min(oe,me+1)),disabled:M===oe,className:"h-8 px-3",children:"Next"})]})]})]}),e.jsx($t,{open:i,onOpenChange:o,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(an,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update the details for this category"})]})]})}),e.jsxs("div",{className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"edit-name",value:g.name,onChange:me=>j({...g,name:me.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"edit-description",value:g.description,onChange:me=>j({...g,description:me.target.value}),placeholder:"Enter category description",rows:3,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Xs,{className:"h-4 w-4"}),"Status"]}),e.jsxs("select",{id:"edit-status",className:"editpopup form crm-edit-form-select",value:g.status,onChange:me=>j({...g,status:me.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{variant:"outline",onClick:()=>o(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{onClick:k,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(an,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Update Category"]})]})]})}),e.jsx($t,{open:v,onOpenChange:w,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this category? This action cannot be undone."})]})]})}),y&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:y.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",y.status]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{variant:"outline",onClick:()=>w(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx($r,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{variant:"destructive",onClick:T,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Category"]})]})]})})]})})},Jz=()=>{js();const[t,s]=m.useState(1),a=10,[r,n]=m.useState(new Date),[l,i]=m.useState(new Date),[o,c]=m.useState([]),[d,u]=m.useState([]),[x,p]=m.useState(""),[h,y]=m.useState([]),[f,v]=m.useState(!0),w=["January","February","March","April","May","June","July","August","September","October","November","December"],g=new Date().getFullYear(),[j,N]=m.useState(new Date().getMonth()+1),[E,C]=m.useState(g),[k,A]=m.useState(!1),[T,M]=m.useState(new Date().getMonth()+1),[X,ne]=m.useState(g);m.useEffect(()=>{s(1)},[]),m.useEffect(()=>{oe(),ge()},[r]),m.useEffect(()=>{Q()},[o,x]),m.useEffect(()=>{s(1)},[x,o]),m.useEffect(()=>{h.length>0&&s(1)},[h.length]);const Q=()=>{let z=o;x&&(z=o.filter(te=>te.name.toLowerCase().includes(x.toLowerCase())||te.id.toLowerCase().includes(x.toLowerCase())||te.role&&te.role.toLowerCase().includes(x.toLowerCase()))),z.sort((te,se)=>{const J=je=>{if(!je)return 0;const b=je.match(/DOC(\d+)/);return b?parseInt(b[1],10):0};return J(te.id)-J(se.id)}),y(z)},oe=async()=>{try{const z=await gt.getAllDoctors();c(z),s(1)}catch(z){console.error("Error loading doctors:",z),Te({title:"Error",description:"Failed to load doctors",variant:"destructive"})}},ge=async()=>{try{v(!0);const z=await gt.getAllDoctorAttendance();console.log("Loaded attendance records:",z),u(z)}catch(z){console.error("Error loading attendance records:",z),Te({title:"Error",description:"Failed to load attendance records",variant:"destructive"})}finally{v(!1)}},me=async(z,te)=>{try{const se=wt(r,"yyyy-MM-dd"),J=d.find(je=>je.doctor_id===z&&wt(new Date(je.date),"yyyy-MM-dd")===se);J&&J.id&&(await gt.deleteDoctorAttendance(J.id),u(je=>je.filter(b=>b.id!==J.id)),Te({title:"Attendance Reset",description:`${te}'s attendance has been reset`}))}catch(se){console.error("Error resetting attendance:",se),Te({title:"Error",description:"Failed to reset attendance",variant:"destructive"})}},H=async(z,te,se)=>{try{const J=wt(r,"yyyy-MM-dd"),je=se!=="Absent"?wt(new Date,"HH:mm:ss"):"";await gt.markDoctorAttendance({doctor_id:z,doctor_name:te,date:J,check_in:je,status:se}),await ge(),Te({title:"Attendance Marked",description:`${te} marked as ${se}`})}catch(J){console.error("Error marking attendance:",J),Te({title:"Error",description:"Failed to mark attendance",variant:"destructive"})}},L=(z,te)=>{const se=wt(te,"yyyy-MM-dd"),J=d.find(je=>{const b=je.date?wt(new Date(je.date),"yyyy-MM-dd"):"";return je.doctor_id===z&&b===se});return J&&["Present","Absent","Late","Half Day"].includes(J.status)?J:null},he=z=>{const se={Present:{className:"bg-success text-success-foreground",icon:Xs},Absent:{className:"bg-destructive text-destructive-foreground",icon:$r},Late:{className:"bg-warning text-warning-foreground",icon:Qt},"Half Day":{className:"bg-warning text-warning-foreground",icon:Qt}}[z];if(!se)return null;const J=se.icon;return e.jsxs(kt,{className:se.className,children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),z.charAt(0).toUpperCase()+z.slice(1)]})},ie=()=>{const z=T!==null?T-1:new Date().getMonth(),te=X!==null?X:new Date().getFullYear(),se=new Date(te,z,1),J=wt(se,"yyyy-MM"),je=te,b=z,S=new Date(je,b+1,0).getDate(),D=Array.from({length:S},(Me,Je)=>{const vt=new Date(je,b,Je+1);return wt(vt,"yyyy-MM-dd")}),R=o.reduce((Me,Je)=>(Me[Je.id]=Je.name,Me),{}),I=Array.from(new Set([...o.map(Me=>Me.id),...d.filter(Me=>{const Je=new Date(Me.date);return Je.getMonth()===b&&Je.getFullYear()===je}).map(Me=>Me.doctor_id)])).map((Me,Je)=>{const vt={"S NO":Je+1,"Doctor ID":Me,"Doctor Name":R[Me]||""};return D.forEach(Le=>{const Ae=d.find(Ee=>{const Se=wt(new Date(Ee.date),"yyyy-MM-dd");return Ee.doctor_id===Me&&Se===Le});vt[wt(new Date(Le),"dd/MM")]=Ae?Ae.status:"-"}),vt}),ce=["S NO","Doctor ID","Doctor Name",...D.map(Me=>wt(new Date(Me),"dd/MM"))],de=[ce.join(",")];I.forEach(Me=>{de.push(ce.map(Je=>Me[Je]??"").join(","))});const ve=de.join(`
`),_e=new Blob([ve],{type:"text/csv"}),ze=window.URL.createObjectURL(_e),be=document.createElement("a");be.href=ze,be.download=`doctor-attendance-${J}.csv`,be.click(),window.URL.revokeObjectURL(ze),Te({title:"Export Successful",description:`Doctor attendance for ${wt(se,"MMMM yyyy")} exported to CSV file`})},ke=Math.ceil(h.length/a),V=(t-1)*a,O=V+a,Y=h.slice(V,O),ue=(()=>{if(o.length===0)return{total:0,present:0,absent:0,late:0,active:0};const z=wt(r,"yyyy-MM-dd");let te=0,se=0,J=0;o.forEach(b=>{const S=d.find(D=>{const R=D.date?wt(new Date(D.date),"yyyy-MM-dd"):"";return D.doctor_id===b.id&&R===z});if(S)switch(S.status){case"Present":te++;break;case"Absent":se++;break;case"Late":J++;break}});const je=o.filter(b=>b.status==="active"||b.status==="Active").length;return{total:o.length,present:te,absent:se,late:J,active:je}})(),U=z=>z?z.startsWith("Photos/")||z.startsWith("Photos\\")?`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${z.replace(/\\/g,"/")}`:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${z}`:"/api/placeholder/40/40";return e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(fa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Doctor Attendance"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:f,disabled:f}),e.jsx(Ht.MonthYear,{onClick:()=>A(!0),text:T!==null&&X!==null?w[T-1]:w[j-1]}),e.jsxs(P,{onClick:ie,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered attendance to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 sm:mb-8",children:[e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-blue-50 to-blue-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-blue-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-blue-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Active Doctors"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:ue.active}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"On duty"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-blue-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-blue-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-green-50 to-green-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-green-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-green-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Present Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:ue.present}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"On duty"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-green-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-green-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Xs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-red-50 to-red-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-red-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-red-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Absent Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:ue.absent}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Not present"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-red-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-red-600 transition-colors duration-300 flex-shrink-0",children:e.jsx($r,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]}),e.jsxs(Ie,{className:"group relative overflow-hidden bg-gradient-to-br from-orange-50 to-orange-100/80 border-0 rounded-xl lg:rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-orange-600/10"}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-orange-200/20 rounded-full -mr-8 -mt-8"}),e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Late Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:ue.late}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Delayed"})]})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-orange-500 rounded-lg lg:rounded-xl shadow-md group-hover:bg-orange-600 transition-colors duration-300 flex-shrink-0",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})]})]}),e.jsx(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg mb-6 sm:mb-8",children:e.jsx(Re,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Ve,{placeholder:"Search doctors...",value:x,onChange:z=>p(z.target.value),className:"pl-10 border-gray-200 focus:border-blue-500 rounded-lg w-full h-10"})]})}),e.jsx("div",{className:"w-full lg:w-auto flex justify-center lg:justify-end",children:e.jsxs(go,{children:[e.jsx(vo,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:bt("w-full lg:w-[240px] justify-start text-left font-normal border-gray-200 hover:border-blue-300 h-10",!r&&"text-muted-foreground"),children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:r?wt(r,"PPP"):"Pick a date"})]})}),e.jsx(Si,{className:"w-auto p-0",align:"end",children:e.jsx(bi,{mode:"single",selected:r,onSelect:z=>z&&n(z),initialFocus:!0,className:"pointer-events-auto"})})]})})]})})}),e.jsxs(Ie,{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl sm:rounded-2xl shadow-lg",children:[e.jsx(Zt,{className:"p-4 sm:p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs(Es,{className:"text-lg sm:text-xl text-gray-900",children:["Doctor Attendance for ",wt(r,"EEEE, MMMM dd, yyyy")]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last updated: ",wt(new Date,"MMM dd, yyyy HH:mm")]})]})]})}),e.jsx(Re,{className:"p-0",children:f?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(es,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading attendance..."})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Doctor ID"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Role"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Check In"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:Y.length>0?Y.map((z,te)=>{const se=L(z.id,r);return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:V+te+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full overflow-hidden bg-gray-100 ring-2 ring-blue-100",children:e.jsx("img",{src:U(z.photo),alt:z.name,className:"w-full h-full object-cover",onError:J=>{const je=J.target;je.src="/api/placeholder/40/40"}})})})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-blue-600 whitespace-nowrap",children:z.id}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:z.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:z.role}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:se?he(se.status):e.jsx(kt,{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full font-medium",children:"Not Updated"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:(se==null?void 0:se.check_in)||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",onClick:()=>H(z.id,z.name,"Present"),variant:"outline",className:`action-btn-lead action-btn-present h-8 w-8 sm:h-9 sm:w-9 p-0 ${(se==null?void 0:se.status)==="Present"?"active":""}`,title:"Mark Present",children:e.jsx(Xs,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>H(z.id,z.name,"Late"),variant:"outline",className:`action-btn-lead action-btn-late h-8 w-8 sm:h-9 sm:w-9 p-0 ${(se==null?void 0:se.status)==="Late"?"active":""}`,title:"Mark Late",children:e.jsx(Qt,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>H(z.id,z.name,"Absent"),variant:"outline",className:`action-btn-lead action-btn-absent h-8 w-8 sm:h-9 sm:w-9 p-0 ${(se==null?void 0:se.status)==="Absent"?"active":""}`,title:"Mark Absent",children:e.jsx($r,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",onClick:()=>me(z.id,z.name),variant:"outline",className:"action-btn-lead action-btn-reset h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Reset Attendance",children:e.jsx(Ir,{className:"h-4 w-4 sm:h-4 sm:w-4"})})]})})]},z.id)}):e.jsx(nt,{children:e.jsx(q,{colSpan:8,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(Rt,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No doctors found"}),e.jsx("p",{className:"text-gray-500",children:"No doctors match your search criteria or no doctors have been added yet."})]})]})})})})]}),ke>1&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",V+1," to ",Math.min(O,h.length)," of ",h.length," doctors"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.max(1,t-1)),disabled:t===1,className:"border-gray-200 text-gray-600 hover:bg-gray-50",children:"Previous"}),Array.from({length:ke},(z,te)=>te+1).map(z=>e.jsx(P,{variant:t===z?"default":"outline",size:"sm",onClick:()=>s(z),className:bt("w-8 h-8",t===z?"bg-blue-600 text-white hover:bg-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-50"),children:z},z)),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>s(Math.min(ke,t+1)),disabled:t===ke,className:"border-gray-200 text-gray-600 hover:bg-gray-50",children:"Next"})]})]})]})})]}),e.jsx($s,{open:k,onOpenChange:A,selectedMonth:j,selectedYear:E,onMonthChange:N,onYearChange:C,onApply:()=>{M(j),ne(E),A(!1),ge()},title:"Select Month & Year",description:"Filter attendance records by specific month and year",previewText:"attendance records"})]})})},Oi="http://localhost:4000/api";class qj{static async getAllDoctorsWithSalary(s,a){try{let r=`${Oi}/doctor-salaries`;s!==null&&a!==null&&s!==void 0&&a!==void 0&&(r+=`?month=${s}&year=${a}`),console.log(" Fetching doctors with salary for:",{month:s,year:a,url:r});const n=await fetch(r);if(!n.ok)throw new Error(`Failed to fetch doctors with salary: ${n.statusText}`);const l=await n.json();return l.success?l.data:[]}catch(r){throw console.error("Error fetching doctors with salary:",r),r}}static async getDoctorSalaryById(s){try{const a=await fetch(`${Oi}/doctor-salaries/${s}`);if(!a.ok){if(a.status===404)return null;throw new Error(`Failed to fetch doctor salary: ${a.statusText}`)}const r=await a.json();return r.success?r.data:null}catch(a){throw console.error("Error fetching doctor salary:",a),a}}static async getSalaryHistory(s){try{const a=await fetch(`${Oi}/doctor-salaries/${s}/history`);if(!a.ok)throw new Error(`Failed to fetch salary history: ${a.statusText}`);const r=await a.json();return r.success?r.data:[]}catch(a){throw console.error("Error fetching salary history:",a),a}}static async processSalaryPayment(s){var a;try{console.log(" Processing salary payment:",s);const r=await this.getDoctorSalaryById(s.doctorId);if(!r)throw new Error("Doctor not found");const n=parseFloat(((a=r.total_paid)==null?void 0:a.toString())||"0"),l=parseFloat(String(s.paymentAmount)),i=n+l,o=new Date,c=o.getMonth()+1,d=o.getFullYear(),u={doctorId:s.doctorId,paymentAmount:l,paymentDate:s.paymentDate,paymentMode:s.paymentMode,previousTotalPaid:n,newTotalPaid:i,notes:s.notes||"",month:c,year:d,status:"Paid"},x=await fetch(`${Oi}/doctor-salaries/payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!x.ok){const h=await x.json().catch(()=>({}));throw new Error(h.message||`Failed to process payment: ${x.statusText}`)}const p=await x.json();return{success:!0,message:"Salary payment processed successfully",data:{doctorId:s.doctorId,paymentAmount:l,previousTotal:n,newTotal:i,paymentDate:s.paymentDate,paymentMode:s.paymentMode}}}catch(r){throw console.error("Error processing salary payment:",r),r}}static async updateSalaryPayment(s,a){try{const r=await fetch(`${Oi}/doctor-salaries/payment/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const l=await r.json().catch(()=>({}));throw new Error(l.message||`Failed to update payment: ${r.statusText}`)}return await r.json()}catch(r){throw console.error("Error updating salary payment:",r),r}}static async deleteSalaryPayment(s){try{const a=await fetch(`${Oi}/doctor-salaries/payment/${s}`,{method:"DELETE"});if(!a.ok){const n=await a.json().catch(()=>({}));throw new Error(n.message||`Failed to delete payment: ${a.statusText}`)}return await a.json()}catch(a){throw console.error("Error deleting salary payment:",a),a}}static async recordPayment(s){try{console.log(" Recording salary payment:",s);const a={doctorId:s.doctorId,paymentAmount:s.amount,paymentDate:s.date,paymentMode:s.payment_mode,notes:`Payment for ${s.type}`},r=await fetch(`${Oi}/doctor-salaries/payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const l=await r.json().catch(()=>({}));throw new Error(l.message||`Failed to record payment: ${r.statusText}`)}return await r.json()}catch(a){throw console.error("Error recording payment:",a),a}}}var Kz=t=>{switch(t){case"success":return Zz;case"info":return tV;case"warning":return eV;case"error":return sV;default:return null}},Xz=Array(12).fill(0),Qz=({visible:t,className:s})=>Fe.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},Fe.createElement("div",{className:"sonner-spinner"},Xz.map((a,r)=>Fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Zz=Fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),eV=Fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),tV=Fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sV=Fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),aV=Fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),rV=()=>{let[t,s]=Fe.useState(document.hidden);return Fe.useEffect(()=>{let a=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),t},v0=1,nV=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:a,...r}=t,n=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:v0++,l=this.toasts.find(o=>o.id===n),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),l?this.toasts=this.toasts.map(o=>o.id===n?(this.publish({...o,...t,id:n,title:a}),{...o,...t,id:n,dismissible:i,title:a}):o):this.addToast({title:a,...r,dismissible:i,id:n}),n},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(a=>a({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let a;s.loading!==void 0&&(a=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let r=t instanceof Promise?t:t(),n=a!==void 0,l,i=r.then(async c=>{if(l=["resolve",c],Fe.isValidElement(c))n=!1,this.create({id:a,type:"default",message:c});else if(iV(c)&&!c.ok){n=!1;let d=typeof s.error=="function"?await s.error(`HTTP error! status: ${c.status}`):s.error,u=typeof s.description=="function"?await s.description(`HTTP error! status: ${c.status}`):s.description;this.create({id:a,type:"error",message:d,description:u})}else if(s.success!==void 0){n=!1;let d=typeof s.success=="function"?await s.success(c):s.success,u=typeof s.description=="function"?await s.description(c):s.description;this.create({id:a,type:"success",message:d,description:u})}}).catch(async c=>{if(l=["reject",c],s.error!==void 0){n=!1;let d=typeof s.error=="function"?await s.error(c):s.error,u=typeof s.description=="function"?await s.description(c):s.description;this.create({id:a,type:"error",message:d,description:u})}}).finally(()=>{var c;n&&(this.dismiss(a),a=void 0),(c=s.finally)==null||c.call(s)}),o=()=>new Promise((c,d)=>i.then(()=>l[0]==="reject"?d(l[1]):c(l[1])).catch(d));return typeof a!="string"&&typeof a!="number"?{unwrap:o}:Object.assign(a,{unwrap:o})},this.custom=(t,s)=>{let a=(s==null?void 0:s.id)||v0++;return this.create({jsx:t(a),id:a,...s}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},pr=new nV,lV=(t,s)=>{let a=(s==null?void 0:s.id)||v0++;return pr.addToast({title:t,...s,id:a}),a},iV=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",oV=lV,cV=()=>pr.toasts,dV=()=>pr.getActiveToasts(),Ka=Object.assign(oV,{success:pr.success,info:pr.info,warning:pr.warning,error:pr.error,custom:pr.custom,message:pr.message,promise:pr.promise,dismiss:pr.dismiss,loading:pr.loading},{getHistory:cV,getToasts:dV});function mV(t,{insertAt:s}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",s==="top"&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}mV(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Tu(t){return t.label!==void 0}var uV=3,xV="32px",hV="16px",Jj=4e3,pV=356,fV=14,gV=20,vV=200;function hn(...t){return t.filter(Boolean).join(" ")}function wV(t){let[s,a]=t.split("-"),r=[];return s&&r.push(s),a&&r.push(a),r}var yV=t=>{var s,a,r,n,l,i,o,c,d,u,x;let{invert:p,toast:h,unstyled:y,interacting:f,setHeights:v,visibleToasts:w,heights:g,index:j,toasts:N,expanded:E,removeToast:C,defaultRichColors:k,closeButton:A,style:T,cancelButtonStyle:M,actionButtonStyle:X,className:ne="",descriptionClassName:Q="",duration:oe,position:ge,gap:me,loadingIcon:H,expandByDefault:L,classNames:he,icons:ie,closeButtonAriaLabel:ke="Close toast",pauseWhenPageIsHidden:V}=t,[O,Y]=Fe.useState(null),[W,ue]=Fe.useState(null),[U,z]=Fe.useState(!1),[te,se]=Fe.useState(!1),[J,je]=Fe.useState(!1),[b,S]=Fe.useState(!1),[D,R]=Fe.useState(!1),[F,I]=Fe.useState(0),[ce,de]=Fe.useState(0),ve=Fe.useRef(h.duration||oe||Jj),_e=Fe.useRef(null),ze=Fe.useRef(null),be=j===0,Me=j+1<=w,Je=h.type,vt=h.dismissible!==!1,Le=h.className||"",Ae=h.descriptionClassName||"",Ee=Fe.useMemo(()=>g.findIndex(xt=>xt.toastId===h.id)||0,[g,h.id]),Se=Fe.useMemo(()=>{var xt;return(xt=h.closeButton)!=null?xt:A},[h.closeButton,A]),B=Fe.useMemo(()=>h.duration||oe||Jj,[h.duration,oe]),Ye=Fe.useRef(0),Ne=Fe.useRef(0),rt=Fe.useRef(0),Be=Fe.useRef(null),[We,ft]=ge.split("-"),He=Fe.useMemo(()=>g.reduce((xt,Wt,qt)=>qt>=Ee?xt:xt+Wt.height,0),[g,Ee]),Ke=rV(),Oe=h.invert||p,Ze=Je==="loading";Ne.current=Fe.useMemo(()=>Ee*me+He,[Ee,He]),Fe.useEffect(()=>{ve.current=B},[B]),Fe.useEffect(()=>{z(!0)},[]),Fe.useEffect(()=>{let xt=ze.current;if(xt){let Wt=xt.getBoundingClientRect().height;return de(Wt),v(qt=>[{toastId:h.id,height:Wt,position:h.position},...qt]),()=>v(qt=>qt.filter(bs=>bs.toastId!==h.id))}},[v,h.id]),Fe.useLayoutEffect(()=>{if(!U)return;let xt=ze.current,Wt=xt.style.height;xt.style.height="auto";let qt=xt.getBoundingClientRect().height;xt.style.height=Wt,de(qt),v(bs=>bs.find(Us=>Us.toastId===h.id)?bs.map(Us=>Us.toastId===h.id?{...Us,height:qt}:Us):[{toastId:h.id,height:qt,position:h.position},...bs])},[U,h.title,h.description,v,h.id]);let it=Fe.useCallback(()=>{se(!0),I(Ne.current),v(xt=>xt.filter(Wt=>Wt.toastId!==h.id)),setTimeout(()=>{C(h)},vV)},[h,C,v,Ne]);Fe.useEffect(()=>{if(h.promise&&Je==="loading"||h.duration===1/0||h.type==="loading")return;let xt;return E||f||V&&Ke?(()=>{if(rt.current<Ye.current){let Wt=new Date().getTime()-Ye.current;ve.current=ve.current-Wt}rt.current=new Date().getTime()})():ve.current!==1/0&&(Ye.current=new Date().getTime(),xt=setTimeout(()=>{var Wt;(Wt=h.onAutoClose)==null||Wt.call(h,h),it()},ve.current)),()=>clearTimeout(xt)},[E,f,h,Je,V,Ke,it]),Fe.useEffect(()=>{h.delete&&it()},[it,h.delete]);function dt(){var xt,Wt,qt;return ie!=null&&ie.loading?Fe.createElement("div",{className:hn(he==null?void 0:he.loader,(xt=h==null?void 0:h.classNames)==null?void 0:xt.loader,"sonner-loader"),"data-visible":Je==="loading"},ie.loading):H?Fe.createElement("div",{className:hn(he==null?void 0:he.loader,(Wt=h==null?void 0:h.classNames)==null?void 0:Wt.loader,"sonner-loader"),"data-visible":Je==="loading"},H):Fe.createElement(Qz,{className:hn(he==null?void 0:he.loader,(qt=h==null?void 0:h.classNames)==null?void 0:qt.loader),visible:Je==="loading"})}return Fe.createElement("li",{tabIndex:0,ref:ze,className:hn(ne,Le,he==null?void 0:he.toast,(s=h==null?void 0:h.classNames)==null?void 0:s.toast,he==null?void 0:he.default,he==null?void 0:he[Je],(a=h==null?void 0:h.classNames)==null?void 0:a[Je]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:k,"data-styled":!(h.jsx||h.unstyled||y),"data-mounted":U,"data-promise":!!h.promise,"data-swiped":D,"data-removed":te,"data-visible":Me,"data-y-position":We,"data-x-position":ft,"data-index":j,"data-front":be,"data-swiping":J,"data-dismissible":vt,"data-type":Je,"data-invert":Oe,"data-swipe-out":b,"data-swipe-direction":W,"data-expanded":!!(E||L&&U),style:{"--index":j,"--toasts-before":j,"--z-index":N.length-j,"--offset":`${te?F:Ne.current}px`,"--initial-height":L?"auto":`${ce}px`,...T,...h.style},onDragEnd:()=>{je(!1),Y(null),Be.current=null},onPointerDown:xt=>{Ze||!vt||(_e.current=new Date,I(Ne.current),xt.target.setPointerCapture(xt.pointerId),xt.target.tagName!=="BUTTON"&&(je(!0),Be.current={x:xt.clientX,y:xt.clientY}))},onPointerUp:()=>{var xt,Wt,qt,bs;if(b||!vt)return;Be.current=null;let Us=Number(((xt=ze.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ss=Number(((Wt=ze.current)==null?void 0:Wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ls=new Date().getTime()-((qt=_e.current)==null?void 0:qt.getTime()),$e=O==="x"?Us:Ss,we=Math.abs($e)/Ls;if(Math.abs($e)>=gV||we>.11){I(Ne.current),(bs=h.onDismiss)==null||bs.call(h,h),ue(O==="x"?Us>0?"right":"left":Ss>0?"down":"up"),it(),S(!0),R(!1);return}je(!1),Y(null)},onPointerMove:xt=>{var Wt,qt,bs,Us;if(!Be.current||!vt||((Wt=window.getSelection())==null?void 0:Wt.toString().length)>0)return;let Ss=xt.clientY-Be.current.y,Ls=xt.clientX-Be.current.x,$e=(qt=t.swipeDirections)!=null?qt:wV(ge);!O&&(Math.abs(Ls)>1||Math.abs(Ss)>1)&&Y(Math.abs(Ls)>Math.abs(Ss)?"x":"y");let we={x:0,y:0};O==="y"?($e.includes("top")||$e.includes("bottom"))&&($e.includes("top")&&Ss<0||$e.includes("bottom")&&Ss>0)&&(we.y=Ss):O==="x"&&($e.includes("left")||$e.includes("right"))&&($e.includes("left")&&Ls<0||$e.includes("right")&&Ls>0)&&(we.x=Ls),(Math.abs(we.x)>0||Math.abs(we.y)>0)&&R(!0),(bs=ze.current)==null||bs.style.setProperty("--swipe-amount-x",`${we.x}px`),(Us=ze.current)==null||Us.style.setProperty("--swipe-amount-y",`${we.y}px`)}},Se&&!h.jsx?Fe.createElement("button",{"aria-label":ke,"data-disabled":Ze,"data-close-button":!0,onClick:Ze||!vt?()=>{}:()=>{var xt;it(),(xt=h.onDismiss)==null||xt.call(h,h)},className:hn(he==null?void 0:he.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},(l=ie==null?void 0:ie.close)!=null?l:aV):null,h.jsx||m.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:Fe.createElement(Fe.Fragment,null,Je||h.icon||h.promise?Fe.createElement("div",{"data-icon":"",className:hn(he==null?void 0:he.icon,(i=h==null?void 0:h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||dt():null,h.type!=="loading"?h.icon||(ie==null?void 0:ie[Je])||Kz(Je):null):null,Fe.createElement("div",{"data-content":"",className:hn(he==null?void 0:he.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},Fe.createElement("div",{"data-title":"",className:hn(he==null?void 0:he.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?Fe.createElement("div",{"data-description":"",className:hn(Q,Ae,he==null?void 0:he.description,(d=h==null?void 0:h.classNames)==null?void 0:d.description)},typeof h.description=="function"?h.description():h.description):null),m.isValidElement(h.cancel)?h.cancel:h.cancel&&Tu(h.cancel)?Fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||M,onClick:xt=>{var Wt,qt;Tu(h.cancel)&&vt&&((qt=(Wt=h.cancel).onClick)==null||qt.call(Wt,xt),it())},className:hn(he==null?void 0:he.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,m.isValidElement(h.action)?h.action:h.action&&Tu(h.action)?Fe.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||X,onClick:xt=>{var Wt,qt;Tu(h.action)&&((qt=(Wt=h.action).onClick)==null||qt.call(Wt,xt),!xt.defaultPrevented&&it())},className:hn(he==null?void 0:he.actionButton,(x=h==null?void 0:h.classNames)==null?void 0:x.actionButton)},h.action.label):null))};function Kj(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function jV(t,s){let a={};return[t,s].forEach((r,n)=>{let l=n===1,i=l?"--mobile-offset":"--offset",o=l?hV:xV;function c(d){["top","right","bottom","left"].forEach(u=>{a[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?a[`${i}-${d}`]=o:a[`${i}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(o)}),a}m.forwardRef(function(t,s){let{invert:a,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:l,closeButton:i,className:o,offset:c,mobileOffset:d,theme:u="light",richColors:x,duration:p,style:h,visibleToasts:y=uV,toastOptions:f,dir:v=Kj(),gap:w=fV,loadingIcon:g,icons:j,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:E}=t,[C,k]=Fe.useState([]),A=Fe.useMemo(()=>Array.from(new Set([r].concat(C.filter(V=>V.position).map(V=>V.position)))),[C,r]),[T,M]=Fe.useState([]),[X,ne]=Fe.useState(!1),[Q,oe]=Fe.useState(!1),[ge,me]=Fe.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=Fe.useRef(null),L=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),he=Fe.useRef(null),ie=Fe.useRef(!1),ke=Fe.useCallback(V=>{k(O=>{var Y;return(Y=O.find(W=>W.id===V.id))!=null&&Y.delete||pr.dismiss(V.id),O.filter(({id:W})=>W!==V.id)})},[]);return Fe.useEffect(()=>pr.subscribe(V=>{if(V.dismiss){k(O=>O.map(Y=>Y.id===V.id?{...Y,delete:!0}:Y));return}setTimeout(()=>{b1.flushSync(()=>{k(O=>{let Y=O.findIndex(W=>W.id===V.id);return Y!==-1?[...O.slice(0,Y),{...O[Y],...V},...O.slice(Y+1)]:[V,...O]})})})}),[]),Fe.useEffect(()=>{if(u!=="system"){me(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?me("dark"):me("light")),typeof window>"u")return;let V=window.matchMedia("(prefers-color-scheme: dark)");try{V.addEventListener("change",({matches:O})=>{me(O?"dark":"light")})}catch{V.addListener(({matches:Y})=>{try{me(Y?"dark":"light")}catch(W){console.error(W)}})}},[u]),Fe.useEffect(()=>{C.length<=1&&ne(!1)},[C]),Fe.useEffect(()=>{let V=O=>{var Y,W;n.every(ue=>O[ue]||O.code===ue)&&(ne(!0),(Y=H.current)==null||Y.focus()),O.code==="Escape"&&(document.activeElement===H.current||(W=H.current)!=null&&W.contains(document.activeElement))&&ne(!1)};return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[n]),Fe.useEffect(()=>{if(H.current)return()=>{he.current&&(he.current.focus({preventScroll:!0}),he.current=null,ie.current=!1)}},[H.current]),Fe.createElement("section",{ref:s,"aria-label":`${N} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((V,O)=>{var Y;let[W,ue]=V.split("-");return C.length?Fe.createElement("ol",{key:V,dir:v==="auto"?Kj():v,tabIndex:-1,ref:H,className:o,"data-sonner-toaster":!0,"data-theme":ge,"data-y-position":W,"data-lifted":X&&C.length>1&&!l,"data-x-position":ue,style:{"--front-toast-height":`${((Y=T[0])==null?void 0:Y.height)||0}px`,"--width":`${pV}px`,"--gap":`${w}px`,...h,...jV(c,d)},onBlur:U=>{ie.current&&!U.currentTarget.contains(U.relatedTarget)&&(ie.current=!1,he.current&&(he.current.focus({preventScroll:!0}),he.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,he.current=U.relatedTarget)},onMouseEnter:()=>ne(!0),onMouseMove:()=>ne(!0),onMouseLeave:()=>{Q||ne(!1)},onDragEnd:()=>ne(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||oe(!0)},onPointerUp:()=>oe(!1)},C.filter(U=>!U.position&&O===0||U.position===V).map((U,z)=>{var te,se;return Fe.createElement(yV,{key:U.id,icons:j,index:z,toast:U,defaultRichColors:x,duration:(te=f==null?void 0:f.duration)!=null?te:p,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:a,visibleToasts:y,closeButton:(se=f==null?void 0:f.closeButton)!=null?se:i,interacting:Q,position:V,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:ke,toasts:C.filter(J=>J.position==U.position),heights:T.filter(J=>J.position==U.position),setHeights:M,expandByDefault:l,gap:w,loadingIcon:g,expanded:X,pauseWhenPageIsHidden:E,swipeDirections:t.swipeDirections})})):null}))});const NV=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(""),[i,o]=m.useState("all"),[c,d]=m.useState(1),[u,x]=m.useState(null),[p,h]=m.useState(!1),[y,f]=m.useState({date:new Date().toISOString().split("T")[0],amount:"",type:"salary"}),[v,w]=m.useState(!1),[g,j]=m.useState([]),[N,E]=m.useState(!1),[C,k]=m.useState(!1),[A,T]=m.useState(null),[M,X]=m.useState(!1),[ne,Q]=m.useState([]),[oe,ge]=m.useState(0),me=["January","February","March","April","May","June","July","August","September","October","November","December"],H=new Date().getMonth()+1,L=new Date().getFullYear(),[he,ie]=m.useState(!1),[ke,V]=m.useState(H),[O,Y]=m.useState(L),W=10,ue=["all","january","february","march","april","may","june","july","august","september","october","november","december"],U=Se=>Se?Se.startsWith("Photos/")||Se.startsWith("Photos\\")?`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${Se.replace(/\\/g,"/")}`:`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}/${Se}`:"/api/placeholder/40/40",z=Se=>{if(!Se)return"N/A";try{let B;if(Se instanceof Date)B=Se;else if(typeof Se=="string")B=new Date(Se);else return"N/A";return isNaN(B.getTime())?"N/A":wt(B,"MM/dd/yyyy")}catch(B){return console.warn("Error formatting date:",Se,B),"N/A"}},te=Se=>typeof Se=="number"?Se:parseFloat(String(Se))||0;m.useEffect(()=>{se()},[]),m.useEffect(()=>{ke!==null&&O!==null&&se()},[ke,O]),m.useEffect(()=>{if(g.length>0){let Se=g;ke!==null&&O!==null&&(Se=g.filter(B=>{const Ye=new Date(B.payment_date),Ne=Ye.getMonth()+1,rt=Ye.getFullYear();return Ne===ke&&rt===O})),Q(Se)}else Q([])},[g,ke,O]),m.useEffect(()=>{console.log(" Filter changed:",{filterMonth:ke,filterYear:O,monthName:ke!==null?me[ke]:"All",totalDoctors:t.length,filteredCount:t.filter(Se=>{let B=!0;if(ke!==null&&O!==null&&Se.join_date){const Ye=new Date(Se.join_date),Ne=new Date(O,ke-1,31);B=Ye<=Ne,console.log(`Doctor ${Se.name}: join_date=${Se.join_date}, joinDate=${Ye.toDateString()}, selectedDate=${Ne.toDateString()}, matches=${B}`)}return B}).length})},[ke,O,t]);const se=async()=>{try{r(!0),console.log(" Fetching doctors with salary information..."),console.log(" Filter Month/Year:",ke,O);const Se=ke,B=O;console.log(" API Month/Year:",Se,B);const Ye=await qj.getAllDoctorsWithSalary(Se,B);console.log(" Doctors fetched:",Ye),Ye&&Ye.length>0&&Ye.forEach(Ne=>{console.log(` Doctor ${Ne.name}:`,{id:Ne.id,join_date:Ne.join_date,join_date_type:typeof Ne.join_date,formatted_date:z(Ne.join_date),advance_amount:Ne.advance_amount||0})}),s(Ye||[]),r(!1)}catch(Se){console.error("Error fetching doctors:",Se),Ka.error("Failed to fetch doctor data"),s([]),r(!1)}},J=t.filter(Se=>{const B=Se.name.toLowerCase().includes(n.toLowerCase())||Se.id.toLowerCase().includes(n.toLowerCase());let Ye=!0;if(ke!==null&&O!==null&&Se.join_date){const Ne=new Date(Se.join_date),rt=new Date(O,ke-1,31);Ye=Ne<=rt}return B&&Ye}).sort((Se,B)=>{const Ye=Be=>{const We=Be.match(/DOC(\d+)/);return We?parseInt(We[1],10):0},Ne=Ye(Se.id),rt=Ye(B.id);return Ne-rt});J.length;const je=J.reduce((Se,B)=>Se+te(B.salary)+te(B.carry_forward||0),0),b=J.reduce((Se,B)=>Se+te(B.total_paid)+te(B.advance_amount||0),0),S=je-b,D=J.filter(Se=>Se.status==="Active").length,R=(c-1)*W,F=R+W,I=J.slice(R,F),ce=Math.ceil(J.length/W),de=()=>{const B=[["S.No","Doctor ID","Doctor Name","Joining Date","Salary","Advance","Carry Forward","Total Paid","Balance","Status"].join(","),...J.map((We,ft)=>{const He=te(We.total_paid)+te(We.advance_amount||0),Ke=te(We.salary)+te(We.carry_forward||0)-He;return[ft+1,We.id,We.name,z(We.join_date),We.salary||"0",te(We.advance_amount||0).toString(),te(We.carry_forward||0).toString(),He.toString(),Ke.toString(),Ke>0?"Pending":"Paid"].map(Oe=>`"${String(Oe).replace(/"/g,'""')}"`).join(",")})].join(`
`),Ye=new Blob([B],{type:"text/csv"}),Ne=window.URL.createObjectURL(Ye),rt=document.createElement("a");rt.href=Ne;let Be="doctor-salary";ke!==null&&O!==null&&(Be+=`-${me[ke-1]}-${O}`),Be+=`-${new Date().toISOString().split("T")[0]}.csv`,rt.download=Be,rt.click(),window.URL.revokeObjectURL(Ne)},ve=async()=>{try{r(!0);const Se=ke!==null?ke:new Date().getMonth()+1,B=O!==null?O:new Date().getFullYear(),Ne=await(await fetch("http://localhost:4000/api/doctor-salaries/save-monthly-records",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:Se,year:B})})).json();Ne.success?(Ka.success(`Monthly records saved successfully for ${me[Se-1]} ${B}!`,{description:`${Ne.recordsProcessed||0} doctor records processed${Ne.carryForwardUpdates?`, ${Ne.carryForwardUpdates} with carry-forward`:""}`}),Ne.carryForwardUpdates>0&&setTimeout(()=>{Ka.info(`${Ne.carryForwardUpdates} doctors have balance amounts`,{description:"These will automatically carry forward to the next month when you save records",duration:5e3})},1e3),se()):Ka.error("Failed to save monthly records",{description:Ne.message||"Please try again"})}catch(Se){console.error("Error saving monthly records:",Se),Ka.error("Failed to save monthly records",{description:"Please check your connection and try again"})}finally{r(!1)}},_e=Se=>{x(Se),h(!0),f({date:new Date().toISOString().split("T")[0],amount:"",type:"salary"}),Je(Se.id)},ze=()=>{const Se=ne.reduce((B,Ye)=>B+(parseFloat(Ye.payment_amount)||0),0);return console.log("Monthly total calculation:",{filteredPayments:ne.length,total:Se}),Se},be=()=>{if(!u)return 0;const Se=te(u.advance_amount||0);return console.log("Advance amount calculation:",{doctorId:u.id,advanceAmount:Se,rawValue:u.advance_amount}),Se},Me=()=>{const Se=ze(),B=be(),Ye=Se+B;return console.log("Total paid calculation:",{monthlyTotal:Se,advanceAmount:B,totalPaid:Ye}),Ye},Je=async Se=>{E(!0);try{const Ye=await(await fetch(`http://localhost:4000/api/doctor-salaries/${Se}/history`)).json();Ye.success?j(Ye.data||[]):j([])}catch(B){console.error("Error fetching payment history:",B),j([])}finally{E(!1)}},vt=Se=>{T(Se),k(!0)},Le=async()=>{if(A)try{X(!0);const B=await(await fetch(`http://localhost:4000/api/doctor-salaries/payment/${A.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();B.success?(Ka.success("Payment record deleted successfully"),u&&Je(u.id),se(),k(!1),T(null)):Ka.error(B.message||"Failed to delete payment record")}catch(Se){console.error("Error deleting payment:",Se),Ka.error("Failed to delete payment record")}finally{X(!1)}},Ae=async()=>{if(!u||!y.amount){Ka.error("Please fill all required fields");return}w(!0);try{await qj.recordPayment({doctorId:u.id,amount:parseFloat(y.amount),date:y.date,type:y.type,payment_mode:"Bank Transfer"}),Ka.success("Payment recorded successfully"),f({date:new Date().toISOString().split("T")[0],amount:"",type:"salary"}),se(),u&&Je(u.id)}catch(Se){console.error("Error recording payment:",Se),Ka.error("Failed to record payment")}finally{w(!1)}},Ee=async()=>{try{const Se=ke!==null?ke:new Date().getMonth()+1,B=O!==null?O:new Date().getFullYear(),Ne=await(await fetch(`http://localhost:4000/api/doctor-salaries/carry-forward/${Se}/${B}`)).json();if(Ne.success&&Ne.data.length>0){const rt=Ne.totalCarryForward.toFixed(2);Ka.info(`Carry Forward Available for ${me[Se-1]} ${B}`,{description:`${Ne.data.length} doctors have ${parseFloat(rt).toLocaleString()} total carry forward amount`,duration:4e3})}}catch(Se){console.error("Error checking carry forward:",Se)}};return m.useEffect(()=>{t.length>0&&Ee()},[ke,O]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Doctor Salary Management"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsxs(P,{onClick:ve,disabled:a,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-3 sm:px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",children:[e.jsx(Sl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Save Monthly"}),e.jsx("span",{className:"sm:hidden",children:"Save"})]}),e.jsx(Ht.MonthYear,{text:`Doctor Salary (${me[(ke||1)-1]} ${O})`,onClick:()=>ie(!0)}),e.jsxs(P,{onClick:de,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-3 sm:px-4 py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Active Doctors"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:D}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"On duty"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Salary"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:["",je.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(cs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Monthly"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Total Paid"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:["",b.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Xs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Completed"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Xs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Pending"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:["",S.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Due"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search doctors by name or ID...",value:n,onChange:Se=>l(Se.target.value),className:"pl-10 bg-white/80 border-gray-200 focus:border-blue-500 focus:ring-blue-500 rounded-lg"})]})}),e.jsxs(At,{value:i,onValueChange:o,children:[e.jsx(Et,{className:"w-full sm:w-48 bg-white/80 border-gray-200 focus:border-blue-500 focus:ring-blue-500 rounded-lg",children:e.jsx(_t,{placeholder:"Select month"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Months"}),ue.slice(1).map(Se=>e.jsx(Pe,{value:Se,children:Se.charAt(0).toUpperCase()+Se.slice(1)},Se))]})]})]})}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-100",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Salary Management (",J.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[600px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"S.No"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Profile"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Joining Date"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Doctor ID"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Doctor Name"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Salary"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Advance"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Carry Forward"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Total Paid"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Balance"}),e.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-center py-4 px-6 text-sm font-semibold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{children:a?e.jsx("tr",{children:e.jsx("td",{colSpan:12,className:"text-center p-8",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading..."})]})})}):I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:12,className:"text-center p-8 text-gray-500",children:"No doctors found"})}):I.map((Se,B)=>{const Ye=te(Se.total_paid)+te(Se.advance_amount||0),Ne=te(Se.salary)+te(Se.carry_forward||0)-Ye,rt=R+B+1;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("td",{className:"py-4 px-6 text-sm font-medium text-gray-900",children:rt}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 ring-2 ring-blue-100",children:e.jsx("img",{src:U(Se.photo),alt:Se.name,className:"w-full h-full object-cover",onError:Be=>{const We=Be.target;We.src="/api/placeholder/40/40"}})})})}),e.jsx("td",{className:"py-4 px-6 text-sm font-medium text-gray-600",children:z(Se.join_date)}),e.jsx("td",{className:"py-4 px-6 text-sm font-medium text-blue-600",children:Se.id}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:Se.name})}),e.jsxs("td",{className:"py-4 px-6 text-sm font-medium text-green-600",children:["",te(Se.salary).toLocaleString()]}),e.jsxs("td",{className:"py-4 px-6 text-sm font-medium text-orange-600",children:["",te(Se.advance_amount||0).toLocaleString()]}),e.jsxs("td",{className:"py-4 px-6 text-sm font-medium text-purple-600",children:["",te(Se.carry_forward||0).toLocaleString()]}),e.jsxs("td",{className:"py-4 px-6 text-sm font-medium text-blue-600",children:["",(te(Se.total_paid)+te(Se.advance_amount||0)).toLocaleString()]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:`text-sm font-medium ${Ne>0?"text-red-600":"text-green-600"}`,children:["",Ne.toLocaleString()]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(kt,{className:`text-xs ${Ne>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:Ne>0?"Pending":"Paid"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsx(P,{size:"sm",variant:"outline",onClick:()=>_e(Se),className:"action-btn-lead action-btn-add h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Record Payment",children:e.jsx(ts,{className:"h-3 w-3"})})})})]},Se.id)})})]})}),J.length>W&&e.jsx("div",{className:"px-4 sm:px-6 py-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",Math.min(R+1,J.length)," to ",Math.min(F,J.length)," of ",J.length," doctors"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>d(Se=>Math.max(Se-1,1)),disabled:c===1,className:"modern-btn modern-btn-secondary text-xs px-2 py-1 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",c," of ",ce]}),e.jsx("button",{onClick:()=>d(Se=>Math.min(Se+1,ce)),disabled:c===ce,className:"modern-btn modern-btn-secondary text-xs px-2 py-1 disabled:opacity-50",children:"Next"})]})]})})]})]})}),e.jsx($s,{open:he,onOpenChange:ie,selectedMonth:ke||H,selectedYear:O||L,onMonthChange:V,onYearChange:Y,onApply:()=>{ie(!1)},title:"Select Month & Year",description:"Filter doctors by join date",previewText:"doctors"}),p&&u&&zr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{zIndex:9999,position:"fixed",top:0,left:0,right:0,bottom:0},onClick:()=>h(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:Se=>Se.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white shadow-lg overflow-hidden",children:u.photo?e.jsx("img",{src:U(u.photo),alt:u.name,className:"w-full h-full object-cover",onError:Se=>{const B=Se.target;B.src="/api/placeholder/40/40"}}):e.jsx("div",{className:"w-full h-full bg-blue-100 flex items-center justify-center",children:e.jsx(Rt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx(kt,{className:"bg-green-100 text-green-800 border-2 border-white shadow-sm text-xs",children:"Active"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(ts,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Dr. ",u.name]})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Record Payment Session"}),e.jsx("span",{className:"font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-lg border border-blue-200",children:"New Transaction"})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Doctor Information"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-4 lg:grid-cols-3 lg:gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 sm:p-4 rounded-xl border border-blue-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-blue-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-blue-700 uppercase tracking-wide",children:"Full Name"})})]}),e.jsx("p",{className:"text-xl sm:text-lg font-bold text-blue-900 ml-0",children:u.name})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-4 rounded-xl border border-green-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-green-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white font-bold text-base sm:text-sm",children:"ID"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Doctor ID"})})]}),e.jsx("p",{className:"text-xl sm:text-lg font-bold text-green-900 ml-0",children:u.id})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 sm:p-4 rounded-xl border border-purple-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-purple-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(fa,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Specialization"})})]}),e.jsx("p",{className:"text-xl sm:text-lg font-bold text-purple-900 ml-0",children:u.specialization||"Neurology"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 sm:p-4 rounded-xl border border-orange-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-orange-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(cs,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-orange-700 uppercase tracking-wide",children:"Salary"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-orange-900 ml-0",children:["",te(u.salary).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 sm:p-4 rounded-xl border border-purple-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-purple-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white font-bold text-base sm:text-sm",children:""})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-purple-700 uppercase tracking-wide",children:"Advance Available"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-purple-900 ml-0",children:["",te(u.advance_amount||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 sm:p-4 rounded-xl border border-blue-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-blue-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Xs,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-blue-700 uppercase tracking-wide",children:"Total Paid"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-blue-900 ml-0",children:["",te(u.total_paid).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 sm:p-4 rounded-xl border border-red-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-8 sm:h-8 bg-red-500 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx(Qs,{className:"h-5 w-5 sm:h-4 sm:w-4 text-white"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm sm:text-xs font-semibold text-red-700 uppercase tracking-wide",children:"Balance Due"})})]}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-red-900 ml-0",children:["",(te(u.salary)-te(u.total_paid)).toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(us,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Record New Payment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-4 rounded-xl border border-blue-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-blue-600 mb-2 uppercase tracking-wide",children:"Payment Date *"}),e.jsx(Ve,{type:"date",value:y.date,onChange:Se=>f(B=>({...B,date:Se.target.value})),className:"w-full border-blue-200 focus:border-blue-400 focus:ring-blue-400"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-4 rounded-xl border border-green-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-green-600 mb-2 uppercase tracking-wide",children:"Amount () *"}),e.jsx(Ve,{type:"number",placeholder:"Enter payment amount",value:y.amount,onChange:Se=>f(B=>({...B,amount:Se.target.value})),className:"w-full border-green-200 focus:border-green-400 focus:ring-green-400"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl border border-purple-100",children:[e.jsx(ae,{className:"block text-sm font-medium text-purple-600 mb-2 uppercase tracking-wide",children:"Payment Type *"}),e.jsxs(At,{value:y.type,onValueChange:Se=>f(B=>({...B,type:Se})),children:[e.jsx(Et,{className:"w-full border-purple-200 focus:border-purple-400",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"salary",children:"Salary"}),e.jsx(Pe,{value:"advance",children:"Advance"}),e.jsx(Pe,{value:"bonus",children:"Bonus"}),e.jsx(Pe,{value:"incentive",children:"Incentive"})]})]})]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx(P,{onClick:Ae,disabled:v||!y.amount||!y.date,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 text-lg font-semibold shadow-lg",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Recording Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"h-5 w-5 mr-2"}),"Record Payment"]})})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-3 sm:mb-4 md:mb-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Payment History (",ne.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200",children:[e.jsx(Pt,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:ke!==null&&O!==null?`${me[ke-1]} ${O}`:"All Months"})]})]}),N?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"Loading payment history..."})]}):ne.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(ts,{className:"h-12 w-12 mx-auto mb-4 text-slate-300"}),e.jsxs("p",{children:["No payment records found",ke!==null&&O!==null?` for ${me[ke-1]} ${O}`:""]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-4 rounded-xl border border-green-100 mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 mb-4 text-center text-sm sm:text-base",children:["Payment Calculation",ke!==null&&O!==null?` for ${me[ke-1]} ${O}`:""]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white p-4 sm:p-3 rounded-lg border border-blue-200 text-center",children:[e.jsx("p",{className:"text-sm sm:text-sm text-gray-600 mb-2 sm:mb-1 font-medium",children:"Monthly Payment"}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-blue-600",children:["",ze().toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-4 sm:p-3 rounded-lg border border-orange-200 text-center",children:[e.jsx("p",{className:"text-sm sm:text-sm text-gray-600 mb-2 sm:mb-1 font-medium",children:"Advance Amount"}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-orange-600",children:["",be().toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-4 sm:p-3 rounded-lg border border-green-200 text-center",children:[e.jsx("p",{className:"text-sm sm:text-sm text-gray-600 mb-2 sm:mb-1 font-medium",children:"Total Paid"}),e.jsxs("p",{className:"text-xl sm:text-lg font-bold text-green-600",children:["",Me().toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsxs("div",{className:"flex flex-col sm:hidden gap-3 items-center text-base",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Monthly Payment:"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:["",ze().toLocaleString("en-IN")]})]}),e.jsx("div",{className:"text-2xl text-gray-400",children:"+"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Advance Amount:"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",be().toLocaleString("en-IN")]})]}),e.jsx("div",{className:"text-2xl text-gray-400",children:"="}),e.jsxs(kt,{className:"bg-green-100 text-green-800 text-lg px-4 py-2 font-bold",children:["",Me().toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-center gap-2 text-sm",children:[e.jsxs("span",{className:"font-semibold text-blue-600",children:["",ze().toLocaleString("en-IN")]}),e.jsx("span",{className:"text-gray-500",children:"+"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["",be().toLocaleString("en-IN")]}),e.jsx("span",{className:"text-gray-500",children:"="}),e.jsxs(kt,{className:"bg-green-100 text-green-800 text-lg px-3 py-1 font-bold",children:["",Me().toLocaleString("en-IN")]})]}),e.jsx("p",{className:"text-center text-xs text-gray-500 mt-3 sm:mt-2",children:"Monthly Payment + Advance = Total Paid"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"S.No"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Amount ()"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Payment Mode"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Notes"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ne.map((Se,B)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:B+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:new Date(Se.payment_date).toLocaleDateString("en-IN")}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-center",children:["",parseFloat(Se.payment_amount||0).toLocaleString("en-IN")]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(kt,{variant:"outline",className:`
                                  ${Se.type==="salary"?"border-blue-200 text-blue-700 bg-blue-50":""}
                                  ${Se.type==="advance"?"border-orange-200 text-orange-700 bg-orange-50":""}
                                  ${Se.type==="bonus"?"border-green-200 text-green-700 bg-green-50":""}
                                  ${Se.type==="incentive"?"border-purple-200 text-purple-700 bg-purple-50":""}
                                `,children:Se.type||"salary"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:Se.payment_mode||"Bank Transfer"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center",children:Se.notes||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 text-center",children:[new Date(Se.created_at).toLocaleDateString("en-IN")," ",new Date(Se.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(P,{size:"sm",variant:"outline",onClick:()=>vt(Se),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete payment record",children:e.jsx(mt,{className:"h-4 w-4 sm:h-4 sm:w-4"})})})]},Se.id))})]})})]})]})]})})]})}),document.body),zr.createPortal(e.jsx("div",{style:{zIndex:10001},children:e.jsx($t,{open:C,onOpenChange:k,children:e.jsxs(Ot,{className:"crm-modal-container",style:{zIndex:10001},onOpenAutoFocus:Se=>Se.preventDefault(),children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Payment Record"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this payment record? This action cannot be undone."})]})]})}),A&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Payment Details"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Date: ",new Date(A.payment_date).toLocaleDateString("en-IN")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Amount: ",parseFloat(A.payment_amount||0).toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Type: ",A.type||"salary"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Mode: ",A.payment_mode||"Bank Transfer"]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{k(!1),T(null)},disabled:M,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:Le,disabled:M,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:M?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Payment"]})})]})]})})}),document.body)]})},Li="http://localhost:4000/api";class $i{static async getAll(){try{const a=await(await fetch(`${Li}/doctor-advances`)).json();if(!a.success)throw new Error(a.message||"Failed to fetch doctor advances");return a.data}catch(s){throw console.error("Error fetching doctor advances:",s),s}}static async getById(s){try{const r=await(await fetch(`${Li}/doctor-advances/${s}`)).json();if(!r.success)throw new Error(r.message||"Failed to fetch doctor advance");return r.data}catch(a){throw console.error("Error fetching doctor advance:",a),a}}static async getByDoctorId(s){try{const r=await(await fetch(`${Li}/doctor-advances/doctor/${s}`)).json();if(!r.success)throw new Error(r.message||"Failed to fetch doctor advances");return r.data||[]}catch(a){throw console.error("Error fetching doctor advances by doctor ID:",a),a}}static async create(s){try{const r=await(await fetch(`${Li}/doctor-advances`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(!r.success)throw new Error(r.message||"Failed to create doctor advance");return r.data}catch(a){throw console.error("Error creating doctor advance:",a),a}}static async update(s,a){try{const n=await(await fetch(`${Li}/doctor-advances/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();if(!n.success)throw new Error(n.message||"Failed to update doctor advance");return n.data}catch(r){throw console.error("Error updating doctor advance:",r),r}}static async delete(s){try{const r=await(await fetch(`${Li}/doctor-advances/${s}`,{method:"DELETE"})).json();if(!r.success)throw new Error(r.message||"Failed to delete doctor advance")}catch(a){throw console.error("Error deleting doctor advance:",a),a}}static async getDoctorsList(){try{const a=await(await fetch(`${Li}/doctors-list`)).json();if(!a.success)throw new Error(a.message||"Failed to fetch doctors list");return a.data}catch(s){throw console.error("Error fetching doctors list:",s),s}}}const bV=()=>{console.log(" DoctorAdvancePage component is rendering...");const t=["January","February","March","April","May","June","July","August","September","October","November","December"],s=new Date().getMonth()+1,a=new Date().getFullYear(),[r,n]=m.useState([]),[l,i]=m.useState([]),[o,c]=m.useState(""),[d,u]=m.useState(!0),[x,p]=m.useState([]),[h,y]=m.useState([]),[f,v]=m.useState(s),[w,g]=m.useState(a),[j,N]=m.useState(!1),[E,C]=m.useState(s),[k,A]=m.useState(a),[T,M]=m.useState(!1),[X,ne]=m.useState(!1),[Q,oe]=m.useState(null),[ge,me]=m.useState([]),[H,L]=m.useState([]),[he,ie]=m.useState(!1),[ke,V]=m.useState(null),[O,Y]=m.useState(!1),[W,ue]=m.useState(new Date().getMonth()+1),[U,z]=m.useState(new Date().getFullYear()),[te,se]=m.useState(""),[J,je]=m.useState(""),[b,S]=m.useState(new Date().toISOString().split("T")[0]),[D,R]=m.useState(!1);m.useEffect(()=>{I()},[]),m.useEffect(()=>{if(!o.trim())i(r);else{const Le=r.filter(Ae=>Ae.name.toLowerCase().includes(o.toLowerCase())||Ae.id.toLowerCase().includes(o.toLowerCase())||Ae.specialization.toLowerCase().includes(o.toLowerCase())||Ae.department.toLowerCase().includes(o.toLowerCase()));i(Le)}},[r,o]),m.useEffect(()=>{if(console.log("=== FILTERING ADVANCES ==="),console.log("Doctor advances count:",ge.length),console.log("Selected month:",W),console.log("Selected year:",U),ge.length>0){const Le=ge.filter(Ee=>{console.log("Processing advance:",Ee);let Se;if(Ee.date.includes("/")){const[rt,Be,We]=Ee.date.split("/").map(ft=>parseInt(ft));Se=new Date(We,Be-1,rt),console.log(`Parsed DD/MM/YYYY: ${rt}/${Be}/${We} -> ${Se}`)}else Se=new Date(Ee.date),console.log(`Parsed ISO: ${Ee.date} -> ${Se}`);const B=Se.getMonth()+1,Ye=Se.getFullYear();console.log(`Advance date: ${Ee.date} -> Month: ${B}, Year: ${Ye}`),console.log(`Comparing with selected: Month: ${W}, Year: ${U}`);const Ne=B===W&&Ye===U;return console.log(`Matches: ${Ne}`),Ne});console.log("=== FILTER RESULTS ==="),console.log(`Found ${Le.length} matching advances:`,Le);const Ae=Le.reduce((Ee,Se)=>Ee+Se.amount,0);console.log(`Total amount: ${Ae}`),L(Le)}else console.log("No doctor advances to filter"),L([])},[ge,W,U]),m.useEffect(()=>{if(console.log("=== FILTERING ALL ADVANCES FOR STATS ==="),console.log("All advances count:",x.length),console.log("All advances data:",x),console.log("Filter month (0-11):",E,"Filter year:",k),console.log("Current month (0-11):",s,"Current year:",a),x.length>0){const Le=E!==null?E:s,Ae=k!==null?k:a;console.log("Target month (0-11):",Le,"Target year:",Ae);const Ee=x.filter(B=>{console.log("Processing advance for stats:",B);let Ye;if(B.date&&B.date.includes("/")){const[We,ft,He]=B.date.split("/").map(Ke=>parseInt(Ke));Ye=new Date(He,ft-1,We),console.log(`Stats - Parsed DD/MM/YYYY: ${We}/${ft}/${He} -> ${Ye}`)}else if(B.date)Ye=new Date(B.date),console.log(`Stats - Parsed ISO: ${B.date} -> ${Ye}`);else return console.log("Stats - No date found for advance:",B),!1;const Ne=Ye.getMonth()+1,rt=Ye.getFullYear();console.log(`Stats - Advance date: ${B.date} -> Month: ${Ne}, Year: ${rt}`),console.log(`Stats - Comparing with target: Month: ${Le}, Year: ${Ae}`);const Be=Ne===Le&&rt===Ae;return console.log(`Stats - Matches: ${Be}`),Be});console.log("=== STATS FILTER RESULTS ==="),console.log(`Found ${Ee.length} matching advances for ${t[Le]} ${Ae}:`,Ee);const Se=Ee.reduce((B,Ye)=>{const Ne=parseFloat(String(Ye.amount))||0;return console.log(`Adding amount: ${Ye.amount} -> ${Ne}`),B+Ne},0);console.log(`Total amount for stats: ${Se}`),y(Ee)}else console.log("Stats - No advances to filter"),y([])},[x,E,k,s,a]);const F=Le=>{if(!Le)return"/api/placeholder/40/40";const Ae="http://localhost:4000/api".replace("/api","")||"http://localhost:4000";return Le.startsWith("Photos/")||Le.startsWith("Photos\\")?`${Ae}/${Le.replace(/\\/g,"/")}`:`${Ae}/${Le}`},I=async()=>{try{u(!0),console.log(" Starting to load data..."),console.log(" Fetching doctors from API...");const Le=await gt.getAllDoctors();console.log(" Raw doctors data received:",Le);const Ae=Le.filter(Ee=>Ee.status==="Active"||Ee.status==="active").map(Ee=>({...Ee,join_date:(()=>{try{if(Ee.join_date){const Se=new Date(Ee.join_date);return isNaN(Se.getTime())?null:Se}return null}catch(Se){return console.warn("Failed to parse join_date for doctor:",Ee.id,Se),null}})()}));console.log(" Filtered active doctors:",Ae),n(Ae);try{console.log(" Fetching advances from API...");const Ee=await $i.getAll();console.log(" Advances data received:",Ee),p(Ee||[])}catch(Ee){console.error("Error loading advances:",Ee),p([])}}catch(Le){console.error("Error loading data:",Le),Te({title:"Error",description:"Failed to load doctor data",variant:"destructive"})}finally{u(!1)}},ce=async Le=>{console.log("Opening view modal for doctor:",Le),oe(Le);const Ae=new Date,Ee=Ae.getMonth()+1,Se=Ae.getFullYear();console.log("Setting modal to current month:",Ee,"year:",Se),ue(Ee),z(Se),ne(!0);try{console.log(`Loading advances for doctor: ${Le.id}`);const B=await $i.getByDoctorId(Le.id);console.log(`Found ${B.length} advances for doctor ${Le.id}:`,B),me(B);const Ye=B.filter(Ne=>{let rt;if(Ne.date.includes("/")){const[He,Ke,Oe]=Ne.date.split("/").map(Ze=>parseInt(Ze));rt=new Date(Oe,Ke-1,He)}else rt=new Date(Ne.date);const Be=rt.getMonth()+1,We=rt.getFullYear();console.log("Advance:",Ne.date,"Month:",Be,"Year:",We);const ft=Be===Ee&&We===Se;return console.log("Matches current month/year:",ft),ft});console.log(`Filtered ${Ye.length} advances for current month ${Ee}/${Se}:`,Ye),L(Ye)}catch(B){console.error("Error loading doctor advances:",B),me([]),L([]),Te({title:"Error",description:"Failed to load doctor advances",variant:"destructive"})}},de=Le=>{console.log("Opening add advance modal for doctor:",Le),oe(Le),M(!0)},ve=()=>{M(!1),oe(null),se(""),je(""),S(new Date().toISOString().split("T")[0])},_e=()=>{ne(!1),oe(null),me([]),L([])},ze=Le=>{V(Le),ie(!0)},be=async()=>{if(ke){Y(!0);try{if(await $i.delete(ke.id),Te({title:"Success",description:"Advance record deleted successfully",variant:"default"}),Q){const Le=await $i.getByDoctorId(Q.id);me(Le)}try{const Le=await $i.getAll();p(Le||[])}catch(Le){console.error("Error reloading advances:",Le)}ie(!1),V(null)}catch(Le){console.error("Error deleting advance:",Le),Te({title:"Error",description:"Failed to delete advance record",variant:"destructive"})}finally{Y(!1)}}},Me=async()=>{if(!Q||!te||!b){Te({title:"Validation Error",description:"Please fill all required fields",variant:"destructive"});return}try{R(!0);const Le={doctor_id:Q.id,doctor_name:Q.name,date:b,amount:parseFloat(te),reason:J};console.log("Sending advance data:",Le),await $i.create(Le),Te({title:"Success",description:`Advance of ${te} added for Dr. ${Q.name}`,variant:"default"});try{const Ae=await $i.getAll();p(Ae||[])}catch(Ae){console.error("Error reloading advances:",Ae)}se(""),je(""),S(new Date().toISOString().split("T")[0]),M(!1)}catch(Le){console.error("Error adding advance:",Le),Te({title:"Error",description:"Failed to add advance",variant:"destructive"})}finally{R(!1)}},Je=Le=>Le==null||isNaN(Number(Le))?"0":`${Number(Le).toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})}`,vt=Le=>new Date(Le).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"});return d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600",children:"Loading doctor advances..."})]})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(cs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Doctor Advance Management"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:d}),e.jsx(Ht.MonthYear,{onClick:()=>N(!0),text:E!==null&&k!==null?`${t[E-1]} ${k}`:`${t[f-1]} ${w}`}),(E!==s||k!==a)&&e.jsxs(P,{onClick:()=>{C(s),A(a),v(s),g(a)},variant:"outline",className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx("span",{className:"hidden sm:inline",children:"Reset"}),e.jsx("span",{className:"sm:hidden",children:""})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Active Doctors"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:r.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(rs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Advances"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:h.length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(It,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Records"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(It,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Total Amount"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:Je(h.reduce((Le,Ae)=>{const Ee=Number(Ae.amount);return Le+(isNaN(Ee)?0:Ee)},0))}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(cs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Advanced"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"})}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by doctor name, ID, specialization, or department...",value:o,onChange:Le=>c(Le.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})})})}),l.length===0?e.jsx(Ie,{children:e.jsxs(Re,{className:"p-12 text-center",children:[e.jsx(rs,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No Active Doctors Found"}),e.jsx("p",{className:"text-slate-500 mb-4",children:o?"No doctors match your search criteria.":"No active doctors available in the system."})]})}):e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(rs,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Active Doctors List (",l.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Doctors (",l.length,")"]})]})}),e.jsx(Re,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Doctor ID"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Name"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsx(os,{children:l.map((Le,Ae)=>{const Ee=Ae+1;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Ee}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full overflow-hidden bg-gray-100 ring-2 ring-blue-100",children:e.jsx("img",{src:F(Le.photo),alt:Le.name,className:"w-full h-full object-cover",onError:Se=>{const B=Se.target;B.src="/api/placeholder/40/40"}})})})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:Le.id}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm",children:[e.jsx("div",{className:"font-medium text-slate-800",children:Le.name}),e.jsx("div",{className:"text-xs text-gray-500",children:Le.specialization})]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>ce(Le),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Doctor Details",children:[e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]}),e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>de(Le),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Doctor",children:[e.jsx(an,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]})]})})]},Le.id)})})]})})})]}),T&&Q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:ve,children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:Le=>Le.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-100 ring-2 ring-blue-100",children:e.jsx("img",{src:F(Q.photo),alt:Q.name,className:"w-full h-full object-cover",onError:Le=>{const Ae=Le.target;Ae.src="/api/placeholder/40/40"}})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-800",children:["Add Advance - Dr. ",Q.name]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["ID: ",Q.id]})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:ve,className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]}),e.jsxs(Ie,{children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"text-lg flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5 text-blue-600"}),"Add New Advance"]})}),e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Amount () *"}),e.jsx(Ve,{type:"number",placeholder:"Enter advance amount",value:te,onChange:Le=>se(Le.target.value),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Date *"}),e.jsx(Ve,{type:"date",value:b,onChange:Le=>S(Le.target.value),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reason"}),e.jsx(As,{placeholder:"Enter reason for advance (optional)",value:J,onChange:Le=>je(Le.target.value),className:"w-full min-h-[80px]"})]}),e.jsx(P,{onClick:Me,disabled:D||!te||!b,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"h-4 w-4 mr-2"}),"Add Advance"]})})]})]})]})})}),X&&Q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:_e,children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:Le=>Le.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full overflow-hidden bg-gray-100 ring-2 sm:ring-4 ring-white shadow-lg",children:e.jsx("img",{src:F(Q.photo),alt:Q.name,className:"w-full h-full object-cover",onError:Le=>{const Ae=Le.target;Ae.src="/api/placeholder/40/40"}})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx(kt,{className:"bg-green-100 text-green-800 border-2 border-white shadow-sm text-xs",children:"Active"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(rs,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Dr. ",Q.name]})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-600",children:[new Date(U,W-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})," Total:"]}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:(()=>{const Le=H.reduce((Ae,Ee)=>{const Se=typeof Ee.amount=="string"?parseFloat(Ee.amount):Ee.amount;return console.log("Adding to total:",Ae,"+",Se,"=",Ae+Se),Ae+Se},0);return console.log("=== HEADER TOTAL CALCULATION ==="),console.log("Filtered advances:",H),console.log("Total calculated:",Le),Je(Le)})()})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:_e,className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(rs,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Doctor Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:Q.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-bold text-xs sm:text-sm",children:"ID"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Doctor ID"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Q.id})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(It,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Specialization"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Q.specialization||"General"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Salary"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Je(Q.salary||0)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Join Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Q.join_date?vt(Q.join_date.toString()):"Not available"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-bold text-xs sm:text-sm",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Status"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Q.status})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Advance Records (",H.length,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:W,onChange:Le=>ue(parseInt(Le.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]}),e.jsx("select",{value:U,onChange:Le=>z(parseInt(Le.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:5},(Le,Ae)=>{const Ee=new Date().getFullYear()-2+Ae;return e.jsx("option",{value:Ee,children:Ee},Ee)})})]})]}),H.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(cs,{className:"h-12 w-12 text-slate-300 mx-auto mb-3"}),e.jsxs("p",{className:"text-slate-500",children:["No advance records found for ",new Date(U,W-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"S No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"ID Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map((Le,Ae)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Ae+1}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-blue-600",children:Le.doctor_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(Le.date).toLocaleDateString("en-IN")}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs",children:e.jsx("div",{className:"truncate",title:Le.reason||"No reason provided",children:Le.reason||"No reason provided"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx(kt,{className:"bg-green-100 text-green-800 font-semibold",children:Je(Le.amount)})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ze(Le),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete advance record",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})]},Le.id||Ae))})]})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-bold text-gray-900",children:["Total for ",new Date(U,W-1).toLocaleDateString("en-US",{month:"long",year:"numeric"}),":"]}),e.jsx(kt,{className:"bg-blue-100 text-blue-800 text-lg px-4 py-2 font-bold",children:Je(H.reduce((Le,Ae)=>{const Ee=typeof Ae.amount=="string"?parseFloat(Ae.amount):Ae.amount;return Le+Ee},0))})]})})})]})]})]})})]})}),e.jsx($s,{open:j,onOpenChange:N,selectedMonth:f,selectedYear:w,onMonthChange:v,onYearChange:g,onApply:()=>{C(f),A(w),N(!1)},title:"Select Month & Year",description:"Filter doctor advances by specific month and year",previewText:"advances"}),e.jsx($t,{open:he,onOpenChange:ie,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Advance Record"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this advance record? This action cannot be undone."})]})]})}),ke&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",ke.amount]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:new Date(ke.date).toLocaleDateString()})]}),ke.reason&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:ke.reason})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{ie(!1),V(null)},disabled:O,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:be,disabled:O,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:O?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Advance Record"]})})]})]})})]})})},Ui="http://localhost:4000/api";class Jr{static async getAll(){try{const a=await(await fetch(`${Ui}/staff-advances`)).json();if(!a.success)throw new Error(a.message||"Failed to fetch staff advances");return a.data}catch(s){throw console.error("Error fetching staff advances:",s),s}}static async getById(s){try{const r=await(await fetch(`${Ui}/staff-advances/${s}`)).json();if(!r.success)throw new Error(r.message||"Failed to fetch staff advance");return r.data}catch(a){throw console.error("Error fetching staff advance:",a),a}}static async getByStaffId(s){try{const r=await(await fetch(`${Ui}/staff-advances/staff/${s}`)).json();if(!r.success)throw new Error(r.message||"Failed to fetch staff advances");return r.data||[]}catch(a){throw console.error("Error fetching staff advances by staff ID:",a),a}}static async create(s){try{const r=await(await fetch(`${Ui}/staff-advances`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(!r.success)throw new Error(r.message||"Failed to create staff advance");return r.data}catch(a){throw console.error("Error creating staff advance:",a),a}}static async update(s,a){try{const n=await(await fetch(`${Ui}/staff-advances/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();if(!n.success)throw new Error(n.message||"Failed to update staff advance");return n.data}catch(r){throw console.error("Error updating staff advance:",r),r}}static async delete(s){try{const r=await(await fetch(`${Ui}/staff-advances/${s}`,{method:"DELETE"})).json();if(!r.success)throw new Error(r.message||"Failed to delete staff advance")}catch(a){throw console.error("Error deleting staff advance:",a),a}}static async getStaffList(){try{const a=await(await fetch(`${Ui}/staff-list`)).json();if(!a.success)throw new Error(a.message||"Failed to fetch staff list");return a.data}catch(s){throw console.error("Error fetching staff list:",s),s}}}const SV=({isOpen:t,onClose:s,onSuccess:a,staff:r,editData:n})=>{const[l,i]=m.useState({staff_id:"",staff_name:"",date:new Date().toISOString().split("T")[0],amount:"",reason:""}),[o,c]=m.useState(!1);m.useEffect(()=>{t&&i(n?{staff_id:n.staff_id,staff_name:n.staff_name,date:n.date,amount:n.amount,reason:n.reason||""}:{staff_id:"",staff_name:"",date:new Date().toISOString().split("T")[0],amount:"",reason:""})},[t,n]);const d=p=>{const h=r.find(y=>y.staff_id===p);h&&i(y=>({...y,staff_id:p,staff_name:h.staff_name}))},u=async p=>{if(p.preventDefault(),!l.staff_id||!l.staff_name||!l.date||!l.amount){Ka.error("Please fill in all required fields");return}c(!0);try{const h={...l,amount:typeof l.amount=="string"?parseFloat(l.amount):l.amount};n?(await Jr.update(n.id,h),Ka.success("Staff advance updated successfully!")):(await Jr.create(h),Ka.success("Staff advance created successfully!")),a(),s()}catch(h){console.error("Error saving staff advance:",h),Ka.error(h instanceof Error?h.message:"Failed to save staff advance")}finally{c(!1)}},x=()=>{o||s()};return e.jsx($t,{open:t,onOpenChange:x,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsx(Bt,{className:"editpopup form crm-modal-title text-xl font-semibold text-slate-800 flex items-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(an,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),"Edit Staff Advance"]}):e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Add Staff Advance"]})})}),e.jsx("form",{onSubmit:u,className:"editpopup form crm-edit-form",children:e.jsxs("div",{className:"editpopup form crm-edit-form-grid",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"staff",className:"editpopup form crm-edit-form-label required flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),"Select Staff"]}),e.jsxs(At,{value:l.staff_id,onValueChange:d,disabled:o,children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Choose a staff member"})}),e.jsx(Dt,{children:r.map(p=>e.jsx(Pe,{value:p.staff_id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:p.staff_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",p.staff_id,")"]}),p.role&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-1 rounded",children:p.role})]})},p.staff_id))})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"date",className:"editpopup form crm-edit-form-label required flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Date"]}),e.jsx(Ve,{id:"date",type:"date",value:l.date,onChange:p=>i(h=>({...h,date:p.target.value})),disabled:o,required:!0,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"amount",className:"editpopup form crm-edit-form-label required flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Amount ()"]}),e.jsx(Ve,{id:"amount",type:"number",value:l.amount,onChange:p=>i(h=>({...h,amount:p.target.value})),placeholder:"Enter advance amount",min:"0",step:"0.01",disabled:o,required:!0,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"reason",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Reason (Optional)"]}),e.jsx(As,{id:"reason",value:l.reason,onChange:p=>i(h=>({...h,reason:p.target.value})),placeholder:"Enter reason for advance (optional)",rows:3,disabled:o,className:"editpopup form crm-edit-form-textarea"})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:x,disabled:o,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:o||!l.staff_id||!l.date||!l.amount,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",onClick:u,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),n?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),n?"Update Advance":"Create Advance"]})})]})]})})},CV=()=>{js(),console.log(" StaffAdvancePage component is rendering...");const t=Oe=>Oe?`${"http://localhost:4000/api".replace("/api","")||"http://localhost:4000"}${Oe}`:void 0,s=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date().getMonth()+1,r=new Date().getFullYear(),[n,l]=m.useState([]),[i,o]=m.useState([]),[c,d]=m.useState(""),[u,x]=m.useState(!0),[p,h]=m.useState([]),[y,f]=m.useState([]),[v,w]=m.useState(a),[g,j]=m.useState(r),[N,E]=m.useState(!1),[C,k]=m.useState(a),[A,T]=m.useState(r),[M,X]=m.useState(!1),[ne,Q]=m.useState(!1),[oe,ge]=m.useState(null),[me,H]=m.useState([]),[L,he]=m.useState([]),[ie,ke]=m.useState(new Date().getMonth()+1),[V,O]=m.useState(new Date().getFullYear()),[Y,W]=m.useState(""),[ue,U]=m.useState(""),[z,te]=m.useState(new Date().toISOString().split("T")[0]),[se,J]=m.useState(!1),[je,b]=m.useState(!1),[S,D]=m.useState(null),[R,F]=m.useState([]),[I,ce]=m.useState(!1),[de,ve]=m.useState(null);m.useEffect(()=>{Je()},[]);const _e=Oe=>{const Ze=Oe.replace(/\D/g,"");return`STF${(parseInt(Ze,10)||0).toString().padStart(3,"0")}`},ze=Oe=>Oe.sort((Ze,it)=>{const dt=qt=>{const bs=qt.replace(/\D/g,"");return parseInt(bs,10)||0},xt=dt(Ze.id),Wt=dt(it.id);return xt-Wt});m.useEffect(()=>{let Oe;c.trim()?Oe=n.filter(it=>it.name.toLowerCase().includes(c.toLowerCase())||it.id.toLowerCase().includes(c.toLowerCase())||it.role&&it.role.toLowerCase().includes(c.toLowerCase())||it.department&&it.department.toLowerCase().includes(c.toLowerCase())):Oe=[...n];const Ze=ze(Oe);o(Ze)},[c,n]),m.useEffect(()=>{be()},[C,A,p]);const be=()=>{let Oe=[...p];C!==null&&A!==null&&(Oe=Oe.filter(Ze=>{const it=new Date(Ze.date);return it.getMonth()===C-1&&it.getFullYear()===A})),f(Oe)},Me=Oe=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Oe),Je=async()=>{try{x(!0),console.log(" Loading staff and advance data...");const Ze=(await gt.getAllStaff()).filter(xt=>xt.status==="Active").map(xt=>({id:xt.id,name:xt.name,phone:xt.phone,photo:xt.photo,role:xt.role,department:xt.department,status:xt.status})),it=ze(Ze);l(it),o(it);const dt=it.map(xt=>({staff_id:xt.id,staff_name:xt.name,phone:xt.phone,photo:xt.photo,role:xt.role,department:xt.department,status:xt.status}));F(dt);try{const xt=await Jr.getAll();h(xt||[])}catch(xt){console.error("Error loading staff advances:",xt),h([])}}catch(Oe){console.error("Error loading data:",Oe),Te({title:"Error",description:"Failed to load staff data",variant:"destructive"})}finally{x(!1)}},vt=async Oe=>{console.log("Opening view modal for staff:",Oe),ge(Oe);const Ze=new Date,it=Ze.getMonth()+1,dt=Ze.getFullYear();console.log("Setting modal to current month:",it,"year:",dt),ke(it),O(dt),Q(!0);try{console.log(`Loading advances for staff: ${Oe.id}`);const xt=await Jr.getByStaffId(Oe.id);console.log("Raw advances data:",xt);const Wt=xt.filter(qt=>{const bs=new Date(qt.date),Us=bs.getMonth()+1,Ss=bs.getFullYear();return console.log(`Advance date: ${qt.date}, month: ${Us}, year: ${Ss}, target: ${it}/${dt}`),Us===it&&Ss===dt});console.log(`Filtered ${Wt.length} advances for current month ${it}/${dt}:`,Wt),he(Wt)}catch(xt){console.error("Error loading staff advances:",xt),H([]),he([]),Te({title:"Error",description:"Failed to load staff advances",variant:"destructive"})}},Le=Oe=>{console.log("Opening add advance modal for staff:",Oe),ge(Oe),X(!0)},Ae=()=>{X(!1),ge(null),W(""),U(""),te(new Date().toISOString().split("T")[0])},Ee=()=>{Q(!1),ge(null),H([]),he([])},Se=async()=>{if(!oe||!Y||!z){Te({title:"Validation Error",description:"Please fill all required fields",variant:"destructive"});return}try{J(!0);const Oe={staff_id:oe.id,staff_name:oe.name,date:z,amount:parseFloat(Y),reason:ue};console.log("Sending advance data:",Oe),await Jr.create(Oe),Te({title:"Success",description:`Advance of ${Y} added for ${oe.name}`,variant:"default"});try{const Ze=await Jr.getAll();h(Ze||[])}catch(Ze){console.error("Error reloading advances:",Ze)}W(""),U(""),te(new Date().toISOString().split("T")[0]),X(!1),ge(null)}catch(Oe){console.error("Error adding advance:",Oe),Te({title:"Error",description:"Failed to add advance",variant:"destructive"})}finally{J(!1)}},B=Oe=>{ve(Oe),ce(!0)},Ye=async()=>{if(de)try{if(await Jr.delete(de.id),Te({title:"Success",description:"Advance record deleted successfully",variant:"default"}),ce(!1),ve(null),oe){const it=(await Jr.getByStaffId(oe.id)).filter(dt=>{const xt=new Date(dt.date);return xt.getMonth()+1===ie&&xt.getFullYear()===V});he(it)}const Oe=await Jr.getAll();h(Oe||[])}catch(Oe){console.error("Error deleting advance:",Oe),Te({title:"Error",description:"Failed to delete advance record",variant:"destructive"})}},Ne=()=>{b(!1),D(null)},rt=async()=>{try{const Oe=await Jr.getAll();h(Oe||[])}catch(Oe){console.error("Error reloading advances:",Oe)}if(oe&&ne)try{const Ze=(await Jr.getByStaffId(oe.id)).filter(it=>{const dt=new Date(it.date);return dt.getMonth()+1===ie&&dt.getFullYear()===V});he(Ze)}catch(Oe){console.error("Error reloading staff advances:",Oe)}},Be=async(Oe,Ze)=>{if(console.log("Filtering by:",Oe,Ze),ke(Oe),O(Ze),oe)try{const dt=(await Jr.getByStaffId(oe.id)).filter(xt=>{const Wt=new Date(xt.date);return Wt.getMonth()+1===Oe&&Wt.getFullYear()===Ze});console.log(`Filtered ${dt.length} advances for ${Oe}/${Ze}:`,dt),he(dt)}catch(it){console.error("Error filtering advances:",it)}},We=i.length,ft=y.length,He=y.reduce((Oe,Ze)=>Oe+(Number(Ze.amount)||0),0),Ke=new Date().toLocaleDateString("en-IN");return u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600",children:"Loading staff advances..."})]})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(cs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Staff Advance"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`${s[(C||1)-1]} ${A}`,onClick:()=>E(!0)})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Active Staff"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:We}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available staff"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(rs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Total Advances"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:ft}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(It,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[s[(C||1)-1]," ",A]})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(It,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Amount"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:Me(He)}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(cs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Advance payments"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-purple",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-purple-900 mb-1",children:Ke}),e.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Data refresh"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-purple",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),!u&&e.jsxs(Ie,{className:"overflow-hidden",children:[e.jsx(Zt,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs(Es,{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[e.jsx(rs,{className:"h-5 w-5 text-blue-600"}),"Staff Members (",i.length,")"]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Ve,{placeholder:"Search staff...",value:c,onChange:Oe=>d(Oe.target.value),className:"pl-9"})]})]})}),e.jsx(Re,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Photo"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Staff ID"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Name"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsx(os,{children:i.map((Oe,Ze)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Ze+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(Qn,{className:"h-10 w-10",children:[e.jsx(Nl,{src:t(Oe.photo)}),e.jsx(Zn,{className:"bg-blue-100 text-blue-600 text-xs",children:Oe.name.split(" ").map(it=>it[0]).join("")})]})})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:_e(Oe.id)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm",children:e.jsx("div",{className:"font-medium text-slate-800",children:Oe.name})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>vt(Oe),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Staff Details",children:[e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]}),e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>Le(Oe),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Add Advance",children:[e.jsx(an,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]})]})})]},Oe.id||Ze))})]})})})]}),M&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:Ae,children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:Oe=>Oe.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Qn,{className:"h-12 w-12",children:[e.jsx(Nl,{src:t(oe.photo)}),e.jsx(Zn,{className:"bg-blue-100 text-blue-600",children:oe.name.split(" ").map(Oe=>Oe[0]).join("")})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-800",children:["Add Advance - ",oe.name]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["ID: ",oe.id]})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:Ae,className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]}),e.jsxs(Ie,{children:[e.jsx(Zt,{children:e.jsxs(Es,{className:"text-lg flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5 text-blue-600"}),"Add New Advance"]})}),e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Amount () *"}),e.jsx(Ve,{type:"number",placeholder:"Enter advance amount",value:Y,onChange:Oe=>W(Oe.target.value),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Date *"}),e.jsx(Ve,{type:"date",value:z,onChange:Oe=>te(Oe.target.value),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reason"}),e.jsx(As,{placeholder:"Enter reason for advance (optional)",value:ue,onChange:Oe=>U(Oe.target.value),className:"w-full min-h-[80px]"})]}),e.jsx(P,{onClick:Se,disabled:se||!Y||!z,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:se?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sl,{className:"h-4 w-4 mr-2"}),"Add Advance"]})})]})]})]})})}),ne&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:Ee,children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:Oe=>Oe.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600",children:oe.photo?e.jsx("img",{src:t(oe.photo),alt:oe.name||"Profile",className:"w-full h-full object-cover",onError:Oe=>{const it=Oe.target.parentElement;it&&(it.innerHTML=`<div class="w-full h-full flex items-center justify-center"><span class="text-lg font-semibold text-white">${(oe.name||"S").charAt(0).toUpperCase()}</span></div>`)}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-semibold text-white",children:(oe.name||"S").charAt(0).toUpperCase()})})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:"bg-green-100 text-green-800 border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full",children:oe.status||"Active"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 lg:h-6 lg:w-6 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:oe.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-base lg:text-lg mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Staff ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:_e(oe.id)})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:Ee,className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(rs,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Staff Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4 mb-3 sm:mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(rs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"FULL NAME"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:oe.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-bold text-xs sm:text-sm",children:"ID"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"STAFF ID"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:_e(oe.id)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(dc,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"ROLE"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:oe.role})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-orange-600 font-bold text-xs sm:text-sm",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"SALARY"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",oe.salary?new Intl.NumberFormat("en-IN").format(Number(oe.salary)):"15,000"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"JOIN DATE"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:oe.join_date?new Date(oe.join_date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"20 Mar 2025"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-bold text-xs sm:text-sm",children:""})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"STATUS"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:oe.status||"Active"})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(It,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Advance Records (",L.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:ie,onChange:Oe=>Be(parseInt(Oe.target.value),V),className:"px-3 py-1 border border-gray-300 rounded-md text-sm bg-white",children:s.map((Oe,Ze)=>e.jsx("option",{value:Ze+1,children:Oe},Ze))}),e.jsx("select",{value:V,onChange:Oe=>Be(ie,parseInt(Oe.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm bg-white",children:[2023,2024,2025,2026].map(Oe=>e.jsx("option",{value:Oe,children:Oe},Oe))})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"S No"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Staff ID"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 bg-gray-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(It,{className:"h-8 w-8 text-gray-400"}),e.jsxs("span",{children:["No advance records found for ",s[ie-1]," ",V]})]})})}):L.map((Oe,Ze)=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-colors border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-gray-900",children:Ze+1}),e.jsx("td",{className:"px-4 py-3 text-center text-sm font-semibold text-blue-600",children:_e(Oe.staff_id)}),e.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-900",children:new Date(Oe.date).toLocaleDateString("en-IN")}),e.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-600 max-w-xs",children:e.jsx("div",{className:"truncate",title:Oe.reason||"No reason provided",children:Oe.reason||"No reason provided"})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:Me(Oe.amount)})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>B(Oe),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0 inline-flex items-center justify-center",title:"Delete advance record",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})]},Oe.id||Ze))})]})}),L.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 rounded-lg border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-bold text-xs",children:"#"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-blue-600 uppercase tracking-wide",children:"Total Records"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:L.length})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 rounded-lg border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(cs,{className:"h-3 w-3 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-600 uppercase tracking-wide",children:"Total Amount"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:Me(L.reduce((Oe,Ze)=>Oe+(Number(Ze.amount)||0),0))})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 rounded-lg border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Pt,{className:"h-3 w-3 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-purple-600 uppercase tracking-wide",children:"Period"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[s[ie-1]," ",V]})]})]})})]})})]})]})})]})}),e.jsx(SV,{isOpen:je,onClose:Ne,onSuccess:rt,staff:R,editData:S}),e.jsx($s,{open:N,onOpenChange:E,selectedMonth:v,selectedYear:g,onMonthChange:w,onYearChange:j,onApply:()=>{k(v),T(g),E(!1)},title:"Select Month & Year",description:"Filter staff advances by specific month and year",previewText:"advances"}),e.jsx($t,{open:I,onOpenChange:ce,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Staff Advance"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this staff advance? This action cannot be undone."})]})]})}),de&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:de.staff_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Amount: ",de.amount]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Date: ",new Date(de.date).toLocaleDateString()]})]}),de.reason&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Reason: ",de.reason]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{ce(!1),ve(null)},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",onClick:Ye,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Advance"]})]})]})})]})})};var WC="AlertDialog",[kV,CY]=Pl(WC,[WS]),Ml=WS(),HC=t=>{const{__scopeAlertDialog:s,...a}=t,r=Ml(s);return e.jsx(i3,{...r,...a,modal:!0})};HC.displayName=WC;var EV="AlertDialogTrigger",GC=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=Ml(a);return e.jsx(o3,{...n,...r,ref:s})});GC.displayName=EV;var DV="AlertDialogPortal",qC=t=>{const{__scopeAlertDialog:s,...a}=t,r=Ml(s);return e.jsx(c3,{...r,...a})};qC.displayName=DV;var AV="AlertDialogOverlay",JC=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=Ml(a);return e.jsx(sv,{...n,...r,ref:s})});JC.displayName=AV;var wc="AlertDialogContent",[_V,PV]=kV(wc),TV=OE("AlertDialogContent"),KC=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,children:r,...n}=t,l=Ml(a),i=m.useRef(null),o=Gs(s,i),c=m.useRef(null);return e.jsx(AR,{contentName:wc,titleName:XC,docsSlug:"alert-dialog",children:e.jsx(_V,{scope:a,cancelRef:c,children:e.jsxs(av,{role:"alertdialog",...l,...n,ref:o,onOpenAutoFocus:ps(n.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(TV,{children:r}),e.jsx(MV,{contentRef:i})]})})})});KC.displayName=wc;var XC="AlertDialogTitle",QC=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=Ml(a);return e.jsx(rv,{...n,...r,ref:s})});QC.displayName=XC;var ZC="AlertDialogDescription",e6=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=Ml(a);return e.jsx(nv,{...n,...r,ref:s})});e6.displayName=ZC;var FV="AlertDialogAction",t6=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=Ml(a);return e.jsx(lv,{...n,...r,ref:s})});t6.displayName=FV;var s6="AlertDialogCancel",a6=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,{cancelRef:n}=PV(s6,a),l=Ml(a),i=Gs(s,n);return e.jsx(lv,{...l,...r,ref:i})});a6.displayName=s6;var MV=({contentRef:t})=>{const s=`\`${wc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wc}\` by passing a \`${ZC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},IV=HC,RV=GC,OV=qC,r6=JC,n6=KC,l6=t6,i6=a6,o6=QC,c6=e6;const LV=IV,$V=RV,UV=OV,d6=m.forwardRef(({className:t,...s},a)=>e.jsx(r6,{className:bt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));d6.displayName=r6.displayName;const m6=m.forwardRef(({className:t,...s},a)=>e.jsxs(UV,{children:[e.jsx(d6,{}),e.jsx(n6,{ref:a,className:bt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));m6.displayName=n6.displayName;const u6=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col space-y-2 text-center sm:text-left",t),...s});u6.displayName="AlertDialogHeader";const x6=({className:t,...s})=>e.jsx("div",{className:bt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});x6.displayName="AlertDialogFooter";const h6=m.forwardRef(({className:t,...s},a)=>e.jsx(o6,{ref:a,className:bt("text-lg font-semibold",t),...s}));h6.displayName=o6.displayName;const p6=m.forwardRef(({className:t,...s},a)=>e.jsx(c6,{ref:a,className:bt("text-sm text-muted-foreground",t),...s}));p6.displayName=c6.displayName;const f6=m.forwardRef(({className:t,...s},a)=>e.jsx(l6,{ref:a,className:bt(om(),t),...s}));f6.displayName=l6.displayName;const g6=m.forwardRef(({className:t,...s},a)=>e.jsx(i6,{ref:a,className:bt(om({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));g6.displayName=i6.displayName;const BV=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(""),[n,l]=m.useState(""),[i,o]=m.useState(""),[c,d]=m.useState([]),[u,x]=m.useState(1),[p]=m.useState(10),[h,y]=m.useState(!0);m.useEffect(()=>{f()},[]),m.useEffect(()=>{v()},[t,a,n,i]);const f=async()=>{try{y(!0);const A=await gt.getDeletedDoctors();console.log("Loaded deleted doctors:",A),s(A)}catch(A){console.error("Error loading deleted doctors:",A),Te({title:"Error",description:"Failed to load deleted doctors. Please try again.",variant:"destructive"})}finally{y(!1)}},v=()=>{let A=t;a&&(A=A.filter(T=>T.name.toLowerCase().includes(a.toLowerCase())||T.id.toLowerCase().includes(a.toLowerCase())||T.phone&&T.phone.includes(a))),n&&(A=A.filter(T=>wt(new Date(T.deletedAt),"yyyy-MM-dd")===n)),i&&i!=="all"&&(A=A.filter(T=>T.deletedBy.toLowerCase().includes(i.toLowerCase()))),d(A),x(1)},w=async A=>{try{await gt.restoreDoctor(A),await f(),Te({title:"Doctor Restored",description:"Doctor has been restored successfully."})}catch(T){console.error("Error restoring doctor:",T),Te({title:"Error",description:"Failed to restore doctor. Please try again.",variant:"destructive"})}},g=A=>wt(new Date(A),"dd/MM/yyyy"),j=()=>[...new Set(t.map(T=>T.deletedBy))].sort(),N=Math.ceil(c.length/p),E=(u-1)*p,C=E+p,k=c.slice(E,C);return h?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-lg",children:"Loading deleted doctors..."})})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Deleted Doctors"})})]}),e.jsx("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:h,disabled:h})})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Total Deleted"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:t.length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(mt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Removed"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(mt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Deleted Today"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:t.filter(A=>{const T=new Date(A.deletedAt),M=new Date;return T.toDateString()===M.toDateString()}).length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Pt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Pt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Recent (7 days)"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:t.filter(A=>{const T=new Date(A.deletedAt),M=new Date;return M.setDate(M.getDate()-7),T>=M}).length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"This week"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Can Restore"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:t.length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"search",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{id:"search",placeholder:"Search by name, ID, or phone...",value:a,onChange:A=>r(A.target.value),className:"pl-10 bg-white/80 border-gray-200 focus:border-blue-500 focus:ring-blue-500 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"date-filter",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Date Deleted"}),e.jsx(Ve,{id:"date-filter",type:"date",value:n,onChange:A=>l(A.target.value),className:"bg-white/80 border-gray-200 focus:border-blue-500 focus:ring-blue-500 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx(ae,{htmlFor:"deleted-by",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Deleted By"}),e.jsxs("select",{id:"deleted-by",value:i,onChange:A=>o(A.target.value),className:"w-full bg-white/80 border border-gray-200 focus:border-blue-500 focus:ring-blue-500 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"all",children:"All users"}),j().map(A=>e.jsx("option",{value:A,children:A},A))]})]}),e.jsxs("div",{children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Clear Filters"}),e.jsx(P,{variant:"outline",onClick:()=>{r(""),l(""),o("")},className:"modern-btn modern-btn-secondary w-full text-xs sm:text-sm px-2 py-1",children:"Clear All"})]})]})}),e.jsxs("div",{className:"crm-table-container",children:[e.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Deleted Doctors (",c.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Rt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Page ",u," of ",N]})]})]})}),e.jsx("div",{className:"p-4 sm:p-6",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mt,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No deleted doctors found"}),e.jsx("p",{className:"text-muted-foreground",children:a||n||i?"Try adjusting your search criteria":"No doctors have been deleted yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{children:[e.jsx(re,{className:"text-center",children:"S No"}),e.jsx(re,{className:"text-center",children:"Doctor ID"}),e.jsx(re,{className:"text-center",children:"Name"}),e.jsx(re,{className:"text-center",children:"Phone"}),e.jsx(re,{className:"text-center",children:"Date Deleted"}),e.jsx(re,{className:"text-center",children:"Deleted By"}),e.jsx(re,{className:"text-center",children:"Status"}),e.jsx(re,{className:"text-center",children:"Actions"})]})}),e.jsx(os,{children:k.map((A,T)=>e.jsxs(nt,{className:"hover:bg-muted/50",children:[e.jsx(q,{className:"text-center",children:(u-1)*p+T+1}),e.jsx(q,{className:"font-medium text-center",children:A.id}),e.jsx(q,{className:"font-medium text-center",children:A.name}),e.jsx(q,{className:"text-center",children:A.phone}),e.jsx(q,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2 text-muted-foreground"}),g(A.deletedAt)]})}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:"outline",children:A.deletedBy})}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:"destructive",children:"Deleted"})}),e.jsx(q,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs($t,{children:[e.jsx(FR,{asChild:!0,children:e.jsx(P,{variant:"outline",size:"sm",children:e.jsx(vs,{className:"w-4 h-4"})})}),e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(vs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsxs(Bt,{className:"editpopup form dialog-title",children:["Doctor Details - ",A.name]}),e.jsxs(Vt,{className:"editpopup form dialog-description",children:["Complete information for deleted doctor ",A.id]})]})]})}),e.jsxs("div",{className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Name"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.name})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4"}),"Specialization"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.specialization||"N/A"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Phone"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.phone})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Email"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.email||"N/A"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Department"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.department||"N/A"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Joining Date"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.joinDate||A.join_date?g(A.joinDate||A.join_date):"N/A"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(mt,{className:"h-4 w-4"}),"Deleted Date"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:g(A.deletedAt)})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Deleted By"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.deletedBy})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4"}),"Address"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:A.address||"N/A"})})]}),A.photo&&e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Photo"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border flex justify-center",children:e.jsx("img",{src:A.photo,alt:A.name,className:"w-24 h-24 rounded-full object-cover border-2 border-gray-200"})})]})]})]})]}),e.jsxs(LV,{children:[e.jsx($V,{asChild:!0,children:e.jsx(P,{variant:"outline",size:"sm",className:"text-success hover:text-success hover:bg-success/10",children:e.jsx(Ir,{className:"w-4 h-4"})})}),e.jsxs(m6,{children:[e.jsxs(u6,{children:[e.jsx(h6,{children:"Restore Doctor?"}),e.jsxs(p6,{children:["This will restore ",A.name," (",A.id,") back to the active doctor list. The doctor will be available for normal operations again."]})]}),e.jsxs(x6,{children:[e.jsx(g6,{children:"Cancel"}),e.jsx(f6,{onClick:()=>w(A.id),className:"bg-success text-success-foreground hover:bg-success/90",children:"Restore Doctor"})]})]})]})]})})]},A.id))})]})}),N>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",E+1," to ",Math.min(C,c.length)," of ",c.length," entries"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>x(A=>Math.max(A-1,1)),disabled:u===1,className:"action-btn-lead",children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700 font-medium",children:["Page ",u," of ",N]}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>x(A=>Math.min(A+1,N)),disabled:u===N,className:"action-btn-lead",children:"Next"})]})]})]})})]})]})})};let kY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const zV=()=>{js("Medicine Management");const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(!0),[i,o]=m.useState(0),[c,d]=m.useState([]),[u,x]=m.useState([]);Fe.useEffect(()=>{(async()=>{i>0&&console.log("Refreshing data...");try{const B=(await ms(async()=>{const{DatabaseService:We}=await Promise.resolve().then(()=>xs);return{DatabaseService:We}},void 0)).DatabaseService,[Ye,Ne,rt,Be]=await Promise.all([B.getAllMedicineProducts(),B.getAllMedicineCategories(),B.getAllMedicineSuppliers(),B.getAllDoctors()]);s(Ye.map(We=>({...We,id:We.id.toString(),createdAt:We.created_at||We.createdAt||"",price:We.price||0,quantity:We.quantity||0,current_stock:We.current_stock||We.quantity||0,used_stock:We.used_stock||0}))),d(Ne.filter(We=>We.status==="active")),x(rt.filter(We=>We.status==="active")),r(Be||[])}catch{}finally{l(!1)}})()},[i]),Fe.useEffect(()=>{const B=setInterval(()=>{o(Ye=>Ye+1)},3e4);return()=>clearInterval(B)},[]);const p=Fe.useCallback(()=>{l(!0),o(B=>B+1)},[]),[h,y]=m.useState(!1),[f,v]=m.useState(null),[w,g]=m.useState(!1),[j,N]=m.useState(null),[E,C]=m.useState(!1),[k,A]=m.useState(null),[T,M]=m.useState(!1),[X,ne]=m.useState(""),[Q,oe]=m.useState("all"),[ge,me]=m.useState("all"),[H,L]=m.useState({name:"",category:"",manufacturer:"",supplier:"",batch_number:"",expiry_date:"",quantity:0,price:0,status:"active",description:""}),he=["January","February","March","April","May","June","July","August","September","October","November","December"],ie=new Date().getFullYear(),[ke,V]=m.useState(new Date().getMonth()+1),[O,Y]=m.useState(ie),[W,ue]=m.useState(!1),[U,z]=m.useState(new Date().getMonth()+1),[te,se]=m.useState(ie),{toast:J}=ya();Fe.useCallback(async()=>{try{l(!0);const B=U,Ye=te,Ne=X,rt=Q,Be=ge,ft=await(await ms(async()=>{const{DatabaseService:He}=await Promise.resolve().then(()=>xs);return{DatabaseService:He}},void 0)).DatabaseService.getAllMedicineProducts();s(ft.map(He=>({...He,id:He.id.toString(),createdAt:He.created_at||He.createdAt||"",price:He.price||0,quantity:He.quantity||0,current_stock:He.current_stock||He.quantity||0,used_stock:He.used_stock||0}))),z(B),se(Ye),ne(Ne),oe(rt),me(Be),J({title:"Success",description:"Data refreshed successfully"})}catch(B){console.error("Refresh error:",B),J({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{l(!1)}},[U,te,X,Q,ge,J]);const je=B=>{if(!B)return"No Category";const Ye=c.map(We=>We.name),Ne=Ye.find(We=>We===B);if(Ne)return Ne;const rt=Ye.find(We=>We.toLowerCase()===B.toLowerCase());if(rt)return rt;const Be=Ye.find(We=>We.toLowerCase().includes(B.toLowerCase())||B.toLowerCase().includes(We.toLowerCase()));return Be||B},b=B=>{if(!B||B.trim()==="")return"No Supplier";const Ye=u.map(We=>We.name),Ne=Ye.find(We=>We===B);if(Ne)return Ne;const rt=Ye.find(We=>We.toLowerCase()===B.toLowerCase());if(rt)return rt;const Be=Ye.find(We=>We.toLowerCase().includes(B.toLowerCase())||B.toLowerCase().includes(We.toLowerCase()));return Be||B},S=async B=>{try{if(c.length===0||u.length===0){J({title:"Loading...",description:"Please wait for categories and suppliers to load",variant:"default"});return}console.log("Editing medicine:",B),console.log("Available categories:",c.map(Ke=>Ke.name)),console.log("Available suppliers:",u.map(Ke=>Ke.name));const Ye=c.map(Ke=>Ke.name);let Ne=B.category||"";if(Ne){if(console.log("Original category:",Ne),!Ye.find(Oe=>Oe===Ne)){const Oe=Ye.find(Ze=>Ze.toLowerCase()===Ne.toLowerCase());if(Oe)Ne=Oe;else{const Ze=Ye.find(it=>it.toLowerCase().includes(Ne.toLowerCase())||Ne.toLowerCase().includes(it.toLowerCase()));Ze&&(Ne=Ze)}}console.log("Selected category:",Ne)}const rt=u.map(Ke=>Ke.name);let Be=B.supplier||"";if(Be){if(console.log("Original supplier:",Be),!rt.find(Oe=>Oe===Be)){const Oe=rt.find(Ze=>Ze.toLowerCase()===Be.toLowerCase());if(Oe)Be=Oe;else{const Ze=rt.find(it=>it.toLowerCase().includes(Be.toLowerCase())||Be.toLowerCase().includes(it.toLowerCase()));Ze&&(Be=Ze)}}console.log("Selected supplier:",Be)}const We=B.purchase_date||B.createdAt||"";let ft=B.expiry_date||"";if(ft)try{if(/^\d{4}-\d{2}-\d{2}$/.test(ft))console.log("Expiry date already in correct format:",ft);else{let Ke=null;if(/^\d{2}\/\d{2}\/\d{4}$/.test(ft)){const Oe=ft.split("/");Ke=new Date(parseInt(Oe[2]),parseInt(Oe[1])-1,parseInt(Oe[0]))}else/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(ft)?Ke=new Date(ft):Ke=new Date(ft);Ke&&!isNaN(Ke.getTime())?(ft=Ke.toISOString().split("T")[0],console.log("Converted expiry date to:",ft)):(console.log("Could not parse expiry date:",B.expiry_date),ft="")}}catch(Ke){console.error("Error parsing expiry date:",Ke),ft=""}console.log("Original expiry_date:",B.expiry_date),console.log("Formatted expiry_date:",ft);const He={name:B.name||"",category:Ne,manufacturer:B.manufacturer||"",supplier:Be,batch_number:B.batch_number||"",expiry_date:ft,quantity:B.quantity||0,price:B.price||0,status:B.status||"active",description:B.description||""};console.log("Setting form data:",He),v(B),L(He),y(!0)}catch(Ye){console.error("Error preparing edit form:",Ye),J({title:"Error",description:"Failed to load medicine data for editing",variant:"destructive"})}},D=B=>{A(B),C(!0)},R=B=>{N(B),g(!0)},F=async()=>{if(!H.name){J({title:"Error",description:"Please enter a medicine name",variant:"destructive"});return}try{const B=(await ms(async()=>{const{DatabaseService:Ye}=await Promise.resolve().then(()=>xs);return{DatabaseService:Ye}},void 0)).DatabaseService;f?(await B.updateMedicineProduct(f.id,{name:H.name,category:H.category,manufacturer:H.manufacturer,supplier:H.supplier,batch_number:H.batch_number,expiry_date:H.expiry_date,quantity:H.quantity,price:H.price,status:H.status,description:H.description}),J({title:"Success",description:"Medicine updated successfully"})):(await B.addMedicineProduct({name:H.name,category:H.category,manufacturer:H.manufacturer,supplier:H.supplier,batch_number:H.batch_number,expiry_date:H.expiry_date,quantity:H.quantity,price:H.price,status:H.status,description:H.description}),J({title:"Success",description:"Medicine added successfully"})),p(),L({name:"",category:"",manufacturer:"",supplier:"",batch_number:"",expiry_date:"",quantity:0,price:0,status:"active",description:""}),y(!1),v(null)}catch{J({title:"Error",description:`Failed to ${f?"update":"add"} medicine`,variant:"destructive"})}},I=async()=>{if(j)try{M(!0),await(await ms(async()=>{const{DatabaseService:Ye}=await Promise.resolve().then(()=>xs);return{DatabaseService:Ye}},void 0)).DatabaseService.deleteMedicineProduct(j.id),p(),g(!1),N(null),J({title:"Success",description:"Medicine deleted successfully"})}catch{J({title:"Error",description:"Failed to delete medicine",variant:"destructive"})}finally{M(!1)}},ce=()=>{try{const B=["S No","Date","Medicine Name","Category","Manufacturer","Supplier","Batch Number","Expiry Date","Quantity","Price","Status"],Ye=de.map((Ke,Oe)=>{const Ze=Ke.createdAt;let it="";if(Ze){let dt;if(Ze.includes("T")?dt=new Date(Ze):/^\d{4}-\d{2}-\d{2}$/.test(Ze)&&(dt=new Date(Ze+"T00:00:00")),dt&&!isNaN(dt.getTime())){const xt=String(dt.getDate()).padStart(2,"0"),Wt=String(dt.getMonth()+1).padStart(2,"0"),qt=dt.getFullYear();it=`${xt}/${Wt}/${qt}`}else it=Ze}return[Oe+1,it,`"${Ke.name}"`,`"${je(Ke.category)}"`,`"${Ke.manufacturer||""}"`,`"${b(Ke.supplier)}"`,`"${Ke.batch_number||""}"`,Ke.expiry_date||"",Ke.quantity,`${Ke.price}`,Ke.status.charAt(0).toUpperCase()+Ke.status.slice(1)]}),Ne=de.reduce((Ke,Oe)=>Ke+(Oe.quantity||0),0),rt=de.reduce((Ke,Oe)=>Ke+(Oe.price||0)*(Oe.quantity||0),0),Be=["","","TOTALS","","","","","",Ne,`${rt.toFixed(2)}`,`${de.length} medicines`],We=[B,...Ye,[],Be].map(Ke=>Array.isArray(Ke)?Ke.join(","):Ke).join(`
`),ft=new Blob([We],{type:"text/csv;charset=utf-8;"}),He=document.createElement("a");if(He.download!==void 0){const Ke=URL.createObjectURL(ft);He.setAttribute("href",Ke);let it=`medicines-${new Date().toISOString().split("T")[0]}`;U!==null&&te!==null&&(it+=`-${he[U]}-${te}`),Q!=="all"&&(it+=`-${Q}`),ge!=="all"&&(it+=`-${ge}`),X&&(it+="-filtered"),He.setAttribute("download",`${it}.csv`),He.style.visibility="hidden",document.body.appendChild(He),He.click(),document.body.removeChild(He),J({title:"Success",description:`CSV exported successfully! ${de.length} medicines exported.`})}}catch(B){console.error("Export error:",B),J({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},de=t.filter(B=>{var Be,We,ft,He;const Ye=((Be=B.name)==null?void 0:Be.toLowerCase().includes(X.toLowerCase()))||((We=B.category)==null?void 0:We.toLowerCase().includes(X.toLowerCase()))||((ft=B.manufacturer)==null?void 0:ft.toLowerCase().includes(X.toLowerCase()))||((He=B.supplier)==null?void 0:He.toLowerCase().includes(X.toLowerCase()));let Ne=!0;Q!=="all"&&(Ne=B.status===Q);let rt=!0;if(ge!=="all"&&(rt=B.category===ge),U!==null&&te!==null){const Ke=B.createdAt;if(!Ke)return!1;let Oe;if(Ke.includes("T"))Oe=new Date(Ke);else if(/^\d{4}-\d{2}-\d{2}$/.test(Ke))Oe=new Date(Ke+"T00:00:00");else return!1;return isNaN(Oe.getTime())?!1:Ye&&Ne&&rt&&Oe.getMonth()===U-1&&Oe.getFullYear()===te}return Ye&&Ne&&rt}).sort((B,Ye)=>{const Ne=parseInt(B.id)||0,rt=parseInt(Ye.id)||0;return Ne-rt}),[ve,_e]=m.useState(1),ze=10,be=Math.ceil(de.length/ze),Me=de.slice((ve-1)*ze,ve*ze),Je=()=>_e(B=>Math.max(1,B-1)),vt=()=>_e(B=>Math.min(be,B+1));Fe.useEffect(()=>{_e(1)},[X,t.length]);const Le=de.length,Ae=de.filter(B=>B.status==="active").length,Ee=de.filter(B=>B.status==="inactive").length,Se=de.filter(B=>B.quantity<=10).length;return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl p-4 sm:p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Xa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Medicine Management"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`${he[(U||1)-1]} ${te}`,onClick:()=>ue(!0)}),e.jsxs(P,{onClick:ce,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>{L({name:"",category:"",manufacturer:"",supplier:"",batch_number:"",expiry_date:"",quantity:0,price:0,status:"active",description:""}),y(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Medicine"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Medicines"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:Le}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Jt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"All medicines"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Xa,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Medicines"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:Ae}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Low Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:Se}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ri,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Need restock"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ri,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:Ee}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(va,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Disabled"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(va,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search medicines by name, category, manufacturer, or supplier...",value:X,onChange:B=>ne(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-full sm:w-auto min-w-[160px]",children:e.jsxs(At,{value:ge,onValueChange:me,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"All Categories"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Categories"}),c.map(B=>e.jsx(Pe,{value:B.name,children:B.name},B.id))]})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[140px]",children:e.jsxs(At,{value:Q,onValueChange:oe,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})}),e.jsxs("button",{onClick:()=>{ne(""),me("all"),oe("all")},className:"global-btn global-btn-secondary flex-shrink-0 text-xs sm:text-sm px-3 sm:px-4 py-2",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear Filters"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})]})}),e.jsx($s,{open:W,onOpenChange:ue,selectedMonth:ke,selectedYear:O,onMonthChange:V,onYearChange:Y,onApply:()=>{z(ke),se(O),ue(!1)},title:"Select Month & Year",description:"Filter medicines by specific month and year",previewText:"medicines"}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Xa,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Medicines List (",de.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Medicines (",de.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"crm-table",children:[e.jsx(is,{children:e.jsxs(nt,{className:"crm-table-header-row",children:[e.jsx(re,{className:"crm-table-header-cell text-center",children:"S No"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{children:[e.jsx("span",{className:"hidden sm:inline",children:"Purchase Date"}),e.jsx("span",{className:"sm:hidden",children:"Date"})]})]})}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Medicine Name"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:e.jsxs("span",{children:[e.jsx("span",{className:"hidden sm:inline",children:"Category"}),e.jsx("span",{className:"sm:hidden",children:"Cat"})]})}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Manufacturer"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:e.jsxs("span",{children:[e.jsx("span",{className:"hidden sm:inline",children:"Supplier"}),e.jsx("span",{className:"sm:hidden",children:"Sup"})]})}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Quantity"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Price"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Status"}),e.jsx(re,{className:"crm-table-header-cell text-center",children:"Actions"})]})}),e.jsxs(os,{children:[Me.map((B,Ye)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ve-1)*ze+Ye+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const Ne=B.createdAt;if(!Ne)return"";let rt;if(Ne.includes("T"))rt=new Date(Ne);else if(/^\d{4}-\d{2}-\d{2}$/.test(Ne))rt=new Date(Ne+"T00:00:00");else return Ne;if(isNaN(rt.getTime()))return Ne;const Be=String(rt.getDate()).padStart(2,"0"),We=String(rt.getMonth()+1).padStart(2,"0"),ft=rt.getFullYear();return`${Be}/${We}/${ft}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm max-w-[200px] truncate",children:B.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:je(B.category)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:B.manufacturer||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b(B.supplier)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx("span",{className:B.quantity<=10?"text-red-600 font-medium":"text-green-600 font-medium",children:B.quantity})}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",B.price]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:B.status==="active"?"default":"secondary",className:`
                        ${B.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:B.status.charAt(0).toUpperCase()+B.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>D(B),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Details",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>S(B),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Medicine",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>R(B),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Medicine",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},B.id)),Me.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:10,className:"text-center py-8 text-muted-foreground",children:"No medicines found"})})]})]})}),be>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(ve-1)*ze+1," to ",Math.min(ve*ze,de.length)," of ",de.length," medicines"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:Je,disabled:ve===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(be,5)},(B,Ye)=>{let Ne;return be<=5||ve<=3?Ne=Ye+1:ve>=be-2?Ne=be-4+Ye:Ne=ve-2+Ye,e.jsx(P,{variant:ve===Ne?"default":"outline",size:"sm",onClick:()=>_e(Ne),className:bt("crm-pagination-btn",ve===Ne&&"crm-pagination-btn-active"),children:Ne},Ne)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:vt,disabled:ve===be,className:"crm-pagination-btn",children:"Next"})]})]})]})]}),e.jsx($t,{open:h,onOpenChange:y,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsxs("div",{className:"editpopup form crm-modal-header-content",children:[e.jsx("div",{className:"editpopup form crm-modal-icon",children:f?e.jsx(Ds,{className:"h-5 w-5 text-blue-600"}):e.jsx(us,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"editpopup form crm-modal-title-section",children:[e.jsx(Bt,{className:"editpopup form crm-modal-title",children:f?"Edit Medicine":"Add New Medicine"}),e.jsx(Vt,{className:"editpopup form crm-modal-description",children:f?"Update medicine information":"Enter the details for the new medicine"})]})]})}),e.jsxs("form",{onSubmit:B=>{B.preventDefault(),F()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Xa,{className:"h-4 w-4"}),"Medicine Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:H.name,onChange:B=>L({...H,name:B.target.value}),placeholder:"Enter medicine name",required:!0,className:"editpopup form crm-edit-form-input"},`name-${(f==null?void 0:f.id)||"new"}-${H.name}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"category",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category"]}),e.jsxs(At,{value:H.category,onValueChange:B=>L({...H,category:B}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select category"})}),e.jsx(Dt,{children:c.map(B=>e.jsx(Pe,{value:B.name,children:B.name},B.id))})]},`category-${(f==null?void 0:f.id)||"new"}-${H.category}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"manufacturer",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Manufacturer"]}),e.jsx(Ve,{id:"manufacturer",value:H.manufacturer,onChange:B=>L({...H,manufacturer:B.target.value}),placeholder:"Enter manufacturer",className:"editpopup form crm-edit-form-input"},`manufacturer-${(f==null?void 0:f.id)||"new"}-${H.manufacturer}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"supplier",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Supplier ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:H.supplier,onValueChange:B=>L({...H,supplier:B}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select supplier"})}),e.jsx(Dt,{children:u.map(B=>e.jsx(Pe,{value:B.name,children:B.name},B.id))})]},`supplier-${(f==null?void 0:f.id)||"new"}-${H.supplier}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"batch_number",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Batch Number"]}),e.jsx(Ve,{id:"batch_number",value:H.batch_number,onChange:B=>L({...H,batch_number:B.target.value}),placeholder:"Enter batch number",className:"editpopup form crm-edit-form-input"},`batch-number-${(f==null?void 0:f.id)||"new"}-${H.batch_number}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"expiry_date",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Expiry Date"]}),e.jsx(Ve,{id:"expiry_date",type:"date",value:H.expiry_date,onChange:B=>L({...H,expiry_date:B.target.value}),className:"editpopup form crm-edit-form-input"},`expiry-date-${(f==null?void 0:f.id)||"new"}-${H.expiry_date}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"quantity",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4"}),"Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"quantity",type:"number",min:"0",value:H.quantity,onChange:B=>L({...H,quantity:parseInt(B.target.value)||0}),placeholder:"Enter quantity",required:!0,className:"editpopup form crm-edit-form-input"},`quantity-${(f==null?void 0:f.id)||"new"}-${H.quantity}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"price",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ai,{className:"h-4 w-4"}),"Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"price",type:"number",min:"0",step:"0.01",value:H.price,onChange:B=>L({...H,price:parseFloat(B.target.value)||0}),placeholder:"Enter price",required:!0,className:"editpopup form crm-edit-form-input"},`price-${(f==null?void 0:f.id)||"new"}-${H.price}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:H.status,onValueChange:B=>L({...H,status:B}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]},`status-${(f==null?void 0:f.id)||"new"}-${H.status}`)]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group md:col-span-2",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:H.description,onChange:B=>L({...H,description:B.target.value}),placeholder:"Enter description (optional)",rows:3,className:"editpopup form crm-edit-form-textarea"},`description-${(f==null?void 0:f.id)||"new"}-${H.description.slice(0,10)}`)]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{y(!1),v(null),L({name:"",category:"",manufacturer:"",supplier:"",batch_number:"",expiry_date:"",quantity:0,price:0,status:"active",description:""})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(Xa,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),f?"Update Medicine":"Add Medicine"]})]})]})]})}),k&&E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(Xa,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${k.status==="active"&&(k.quantity||0)>10?"bg-green-100 text-green-800":(k.quantity||0)<=10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:k.status==="active"&&(k.quantity||0)>10?"In Stock":(k.quantity||0)<=10?"Low Stock":"Out of Stock"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:k.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Medicine ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:typeof k.id=="number"?`MD${String(k.id).padStart(4,"0")}`:typeof k.id=="string"&&/^\d+$/.test(k.id)?`MD${k.id.padStart(4,"0")}`:k.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>C(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Xa,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Medicine Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Xa,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Medicine Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:k.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:je(k.category)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:b(k.supplier)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ai,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Price"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",k.price||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Purchase Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:k.purchase_date||"Not specified"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Expiry Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:k.expiry_date?(()=>{try{const B=new Date(k.expiry_date);return isNaN(B.getTime())?k.expiry_date:B.toLocaleDateString("en-GB")}catch{return k.expiry_date||"Not specified"}})():"Not specified"})]})]})}),k.manufacturer&&e.jsx("div",{className:"bg-gradient-to-br from-teal-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-teal-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-teal-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-teal-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-teal-600 uppercase tracking-wide",children:"Manufacturer"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:k.manufacturer})]})]})}),k.batch_number&&e.jsx("div",{className:"bg-gradient-to-br from-pink-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-pink-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-pink-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-pink-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-pink-600 uppercase tracking-wide",children:"Batch Number"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:k.batch_number})]})]})})]}),k.description&&e.jsxs("div",{className:"mt-4 p-3 sm:p-4 bg-gradient-to-br from-gray-50 to-white rounded-lg border border-gray-100",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-2",children:"Description"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-900",children:k.description})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Stock Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(tn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:k.quantity||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Total Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-red-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-red-600",children:"0"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-red-600 uppercase tracking-wide",children:"Used Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Or,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:k.quantity||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Available"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-purple-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${k.status==="active"&&(k.quantity||0)>10?"bg-green-100 text-green-800":(k.quantity||0)<=10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:k.status==="active"&&(k.quantity||0)>10?"In Stock":(k.quantity||0)<=10?"Low Stock":"Out of Stock"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-purple-600 uppercase tracking-wide mt-2",children:"Status"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(wr,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Stock History"}),e.jsx("p",{className:"text-gray-500",children:"No stock movement history recorded yet for this medicine"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Stock movement tracking will appear here"})]})]})})]})}),e.jsx($t,{open:w,onOpenChange:g,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Medicine"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this medicine? This action cannot be undone."})]})]})}),j&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:j.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:j.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Stock: ",j.quantity," units"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:j.supplier})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{g(!1),N(null)},disabled:T,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:I,disabled:T,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:T?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Medicine"]})})]})]})})]})})};let DY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const VV=()=>{const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const D=await gt.getAllMedicineCategories();s(D)}catch{}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const D=setInterval(()=>{l(R=>R+1)},3e4);return()=>clearInterval(D)},[]),Fe.useCallback(()=>{r(!0),l(D=>D+1)},[]);const[i,o]=m.useState(!1),[c,d]=m.useState(null),[u,x]=m.useState(null),[p,h]=m.useState(!1),[y,f]=m.useState(null),[v,w]=m.useState(!1),[g,j]=m.useState(""),[N,E]=m.useState("all"),[C,k]=m.useState({name:"",description:"",status:"active"}),A=["January","February","March","April","May","June","July","August","September","October","November","December"],T=new Date().getFullYear(),[M,X]=m.useState(new Date().getMonth()),[ne,Q]=m.useState(T),[oe,ge]=m.useState(!1),[me,H]=m.useState(new Date().getMonth()),[L,he]=m.useState(T),{toast:ie}=ya();Fe.useCallback(async()=>{try{r(!0);const D=me,R=L,F=g,I=N,ce=await gt.getAllMedicineCategories();s(ce),H(D),he(R),j(F),E(I),ie({title:"Success",description:"Data refreshed successfully"})}catch(D){console.error("Refresh error:",D),ie({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[me,L,g,N,ie]);const ke=D=>{d(D),k({name:D.name,description:D.description,status:D.status}),o(!0)},V=D=>{x(D)},O=D=>{f(D),h(!0)},Y=async D=>{if(D.preventDefault(),!C.name.trim()){ie({title:"Validation Error",description:"Category name is required",variant:"destructive"});return}try{if(w(!0),c)await gt.updateMedicineCategory(c.id,{name:C.name.trim(),description:C.description.trim(),status:C.status,updated_at:new Date().toISOString()}),s(t.map(R=>R.id===c.id?{...R,...C,status:C.status,updated_at:new Date().toISOString()}:R)),ie({title:"Success",description:"Category updated successfully"});else{const R=await gt.addMedicineCategory({name:C.name.trim(),description:C.description.trim(),status:C.status,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});s([...t,R]),ie({title:"Success",description:"Category created successfully"})}o(!1),d(null),k({name:"",description:"",status:"active"})}catch{ie({title:"Error",description:c?"Failed to update category":"Failed to create category",variant:"destructive"})}finally{w(!1)}},W=async()=>{if(y)try{w(!0),await gt.deleteMedicineCategory(y.id),s(t.filter(D=>D.id!==y.id)),h(!1),f(null),ie({title:"Success",description:"Category deleted successfully"})}catch{ie({title:"Error",description:"Failed to delete category",variant:"destructive"})}finally{w(!1)}},ue=()=>{try{const D=["S No","Date","Category Name","Description","Status"],R=U.map((de,ve)=>{const _e=de.created_at;let ze="";if(_e){let be;if(_e.includes("T")?be=new Date(_e):/^\d{4}-\d{2}-\d{2}$/.test(_e)&&(be=new Date(_e+"T00:00:00")),be&&!isNaN(be.getTime())){const Me=String(be.getDate()).padStart(2,"0"),Je=String(be.getMonth()+1).padStart(2,"0"),vt=be.getFullYear();ze=`${Me}/${Je}/${vt}`}else ze=_e}return[ve+1,ze,`"${de.name}"`,`"${de.description||""}"`,de.status.charAt(0).toUpperCase()+de.status.slice(1)]}),F=[D,...R].map(de=>de.join(",")).join(`
`),I=new Blob([F],{type:"text/csv;charset=utf-8;"}),ce=document.createElement("a");if(ce.download!==void 0){const de=URL.createObjectURL(I);ce.setAttribute("href",de);let ze=`medicine-categories-${new Date().toISOString().split("T")[0]}`;me!==null&&L!==null&&(ze+=`-${A[me]}-${L}`),N!=="all"&&(ze+=`-${N}`),g&&(ze+="-filtered"),ce.setAttribute("download",`${ze}.csv`),ce.style.visibility="hidden",document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),ie({title:"Success",description:`CSV exported successfully! ${U.length} categories exported.`})}}catch(D){console.error("Export error:",D),ie({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},U=t.filter(D=>{var I,ce;const R=((I=D.name)==null?void 0:I.toLowerCase().includes(g.toLowerCase()))||((ce=D.description)==null?void 0:ce.toLowerCase().includes(g.toLowerCase()));let F=!0;if(N!=="all"&&(F=D.status===N),me!==null&&L!==null){const de=D.created_at;if(!de)return!1;let ve;if(de.includes("T"))ve=new Date(de);else if(/^\d{4}-\d{2}-\d{2}$/.test(de))ve=new Date(de+"T00:00:00");else return!1;return isNaN(ve.getTime())?!1:R&&F&&ve.getMonth()===me&&ve.getFullYear()===L}return R&&F}).sort((D,R)=>{const F=D.id||0,I=R.id||0;return F-I}),[z,te]=m.useState(1),se=10,J=Math.ceil(U.length/se),je=U.slice((z-1)*se,z*se),b=()=>te(D=>Math.max(1,D-1)),S=()=>te(D=>Math.min(J,D+1));return Fe.useEffect(()=>{te(1)},[g,t.length]),a?e.jsx("div",{className:"crm-page-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsxs("div",{className:"crm-page-bg",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Medicine Categories"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:me!==null&&L!==null?`${A[me]} ${L}`:`${A[M]} ${ne}`,onClick:()=>ge(!0)}),e.jsxs(P,{onClick:ue,className:"global-btn global-btn-primary flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>{k({name:"",description:"",status:"active"}),o(!0)},className:"global-btn global-btn-primary flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:U.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ds,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Groups"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:U.filter(D=>D.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"With Description"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:U.filter(D=>D.description&&D.description.length>0).length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Detailed"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:U.filter(D=>D.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Disabled"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search categories by name or description...",value:g,onChange:D=>j(D.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:N,onValueChange:E,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})}),g&&e.jsx(P,{onClick:()=>j(""),variant:"outline",size:"sm",className:"px-3",children:"Clear"})]})}),e.jsx($s,{open:oe,onOpenChange:ge,selectedMonth:M,selectedYear:ne,onMonthChange:X,onYearChange:Q,onApply:()=>{H(M),he(ne),ge(!1)},title:"Select Month & Year",description:"Filter categories by specific month and year",previewText:"categories"}),e.jsx(Ie,{className:"crm-table-card",children:e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"crm-table-header",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(ds,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"crm-table-title-text",children:["Categories List (",U.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Categories (",U.length,")"]})]})}),e.jsx("div",{className:"crm-table-container",children:e.jsxs(ls,{className:"crm-table",children:[e.jsx(is,{children:e.jsxs(nt,{className:"crm-table-header-row",children:[e.jsx(re,{className:"crm-table-head",children:"S No"}),e.jsx(re,{className:"crm-table-head",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"crm-table-head",children:"Category Name"}),e.jsx(re,{className:"crm-table-head",children:"Description"}),e.jsx(re,{className:"crm-table-head",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[je.map((D,R)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(z-1)*se+R+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const F=D.created_at;if(!F)return"";let I;if(F.includes("T"))I=new Date(F);else if(/^\d{4}-\d{2}-\d{2}$/.test(F))I=new Date(F+"T00:00:00");else return F;if(isNaN(I.getTime()))return F;const ce=String(I.getDate()).padStart(2,"0"),de=String(I.getMonth()+1).padStart(2,"0"),ve=I.getFullYear();return`${ce}/${de}/${ve}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:D.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-[300px] truncate",children:D.description||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:D.status==="active"?"default":"secondary",className:`
                            ${D.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                          `,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{onClick:()=>V(D),variant:"outline",size:"sm",className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Category",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{onClick:()=>ke(D),variant:"outline",size:"sm",className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Category",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{onClick:()=>O(D),variant:"outline",size:"sm",className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Category",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},D.id)),je.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No categories found"})})]})]})})]})}),J>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(z-1)*se+1," to ",Math.min(z*se,U.length)," of ",U.length," categories"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:b,disabled:z===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(J,5)},(D,R)=>{let F;return J<=5||z<=3?F=R+1:z>=J-2?F=J-4+R:F=z-2+R,e.jsx(P,{variant:z===F?"default":"outline",size:"sm",onClick:()=>te(F),className:"crm-pagination-page-btn",children:F},F)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:S,disabled:z===J,className:"crm-pagination-btn",children:"Next"})]})]})]}),e.jsx($t,{open:i,onOpenChange:o,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsxs("div",{className:"editpopup form crm-modal-header-content",children:[e.jsx("div",{className:"editpopup form crm-modal-icon",children:c?e.jsx(Ds,{className:"h-5 w-5 text-blue-600"}):e.jsx(us,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"editpopup form crm-modal-title-section",children:[e.jsx(Bt,{className:"editpopup form crm-modal-title",children:c?"Edit Category":"Add New Category"}),e.jsx(Vt,{className:"editpopup form crm-modal-description",children:c?"Update the category information below":"Fill in the details to create a new category"})]})]})}),e.jsxs("form",{onSubmit:Y,className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 sm:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:C.name,onChange:D=>k({...C,name:D.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:C.status,onValueChange:D=>k({...C,status:D}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:C.description,onChange:D=>k({...C,description:D.target.value}),placeholder:"Enter category description (optional)",className:"editpopup form crm-edit-form-textarea min-h-[100px]",rows:4})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{o(!1),d(null),k({name:"",description:"",status:"active"})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:v,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:v?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),c?"Updating...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),c?"Update Category":"Add Category"]})})]})]})]})}),e.jsx($t,{open:!!u,onOpenChange:()=>x(null),children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[500px]",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header text-center",children:e.jsxs("div",{className:"editpopup form crm-modal-header-content flex-col",children:[e.jsx("div",{className:"editpopup form crm-modal-icon mx-auto mb-4 bg-blue-100",children:e.jsx(vs,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form crm-modal-title-section",children:[e.jsx(Bt,{className:"editpopup form crm-modal-title text-lg font-semibold text-gray-900",children:"Category Details"}),e.jsx(Vt,{className:"editpopup form crm-modal-description text-sm text-gray-600 mt-2",children:"View complete category information"})]})]})}),u&&e.jsxs("div",{className:"editpopup form crm-edit-form-content space-y-4",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Category Name"]}),e.jsx("div",{className:"editpopup form crm-edit-form-input p-3 bg-gray-50 rounded border text-sm",children:u.name})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),"Description"]}),e.jsx("div",{className:"editpopup form crm-edit-form-input p-3 bg-gray-50 rounded border text-sm",children:u.description||"No description provided"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsx("div",{className:"editpopup form crm-edit-form-input p-3 bg-gray-50 rounded border",children:e.jsx(kt,{variant:u.status==="active"?"default":"secondary",children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Created Date"]}),e.jsx("div",{className:"editpopup form crm-edit-form-input p-3 bg-gray-50 rounded border text-sm",children:(()=>{const D=u.created_at;if(!D)return"Unknown";const R=new Date(D);return isNaN(R.getTime())?D:R.toLocaleDateString()})()})]})]})]}),e.jsx(zt,{className:"editpopup form dialog-footer flex justify-center pt-4 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:e.jsxs(P,{onClick:()=>x(null),className:"editpopup form footer-button-cancel modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Close"]})})]})}),e.jsx($t,{open:p,onOpenChange:h,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this category? This action cannot be undone."})]})]})}),y&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:y.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",y.status]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{h(!1),f(null)},disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:W,disabled:v,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:v?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Category"]})})]})]})})]})};let _Y=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};function Fu(t){if(!t)return"-";const s=new Date(t);if(!isNaN(s.getTime())){const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[a,r,n]=t.split("-");return`${n.padStart(2,"0")}/${r.padStart(2,"0")}/${a}`}return t}const YV=()=>{js("Medicine Stock Management");const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(!0),[i,o]=m.useState(!0),[c,d]=m.useState(0);Fe.useEffect(()=>{(async()=>{c>0&&console.log("Refreshing data...");try{const Ae=await gt.getAllMedicineProducts();s(Ae);try{const Ee=await gt.getAllDoctors();r(Ee)}catch(Ee){console.error("Error loading doctors:",Ee)}finally{l(!1)}}catch{}finally{o(!1)}})()},[c]),Fe.useEffect(()=>{const Ae=setInterval(()=>{d(Ee=>Ee+1)},3e4);return()=>clearInterval(Ae)},[]);const u=Fe.useCallback(()=>{o(!0),d(Ae=>Ae+1)},[]),[x,p]=m.useState(null),[h,y]=m.useState(null),[f,v]=m.useState(!1),[w,g]=m.useState(""),[j,N]=m.useState("all"),[E,C]=m.useState("all"),[k,A]=m.useState(0),[T,M]=m.useState(10),[X,ne]=m.useState("in_stock"),[Q,oe]=m.useState(0),[ge,me]=m.useState(0),H=["January","February","March","April","May","June","July","August","September","October","November","December"],L=new Date().getFullYear(),[he,ie]=m.useState(new Date().getMonth()+1),[ke,V]=m.useState(L),[O,Y]=m.useState(!1),[W,ue]=m.useState(new Date().getMonth()+1),[U,z]=m.useState(L),{toast:te}=ya(),se=Ae=>{const Ee=Ae.current_stock||Ae.quantity||0,Se=Ae.used_stock||0;return Ee-Se};Fe.useEffect(()=>{if(x){const Ae=se(x);me(Ae-Q)}},[Q,x]);const J=t.map(Ae=>{const Ee=Ae.minStock||10;let Se="in_stock";return Ae.expiry_date&&new Date(Ae.expiry_date)<new Date?Se="expired":Ae.quantity===0||Ae.current_stock===0?Se="out_of_stock":(Ae.quantity<=Ee||Ae.current_stock&&Ae.current_stock<=Ee)&&(Se="low_stock"),{id:Ae.id,name:Ae.name,category:Ae.category,supplier:Ae.supplier,quantity:Ae.quantity||Ae.current_stock||0,minStock:Ee,expiry_date:Ae.expiry_date,purchase_date:Ae.purchase_date,price:Ae.price,status:Se,current_stock:Ae.current_stock,used_stock:Ae.used_stock,balance_stock:Ae.balance_stock,stock_status:Ae.stock_status}});Fe.useCallback(async()=>{try{o(!0);const Ae=W,Ee=U,Se=w,B=j,Ye=E,Ne=await gt.getAllMedicineProducts();s(Ne),ue(Ae),z(Ee),g(Se),N(B),C(Ye),te({title:"Success",description:"Data refreshed successfully"})}catch(Ae){console.error("Refresh error:",Ae),te({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{o(!1)}},[W,U,w,j,E,te]);const je=Ae=>{p(Ae),A(Ae.quantity),M(Ae.minStock),ne(Ae.status),oe(0),me(se(Ae))},b=Ae=>{y(Ae)},S=async()=>{if(!x)return;console.log("Edit item:",x),console.log("Edit used stock:",Q),console.log("Edit status:",X);const Ae=se(x);if(console.log("Available balance:",Ae),Q>Ae){console.log("Validation failed: Used stock exceeds available balance"),te({title:"Error",description:`Cannot use more than available balance stock (${Ae})`,variant:"destructive"});return}if(Q<0){console.log("Validation failed: Used stock is negative"),te({title:"Error",description:"Used stock cannot be negative",variant:"destructive"});return}console.log("Starting save operation..."),v(!0);try{const Ee=x.used_stock||0,Se=Ee+Q;if(console.log("Current used stock:",Ee),console.log("New total used stock:",Se),Q>0){console.log("Adding stock history record...");try{await gt.addMedicineStockHistoryRecord({product_id:x.id,stock_change:Q,stock_type:"used",current_stock_before:(x.current_stock||x.quantity||0)-Ee,current_stock_after:(x.current_stock||x.quantity||0)-Se,update_date:new Date().toISOString().split("T")[0],description:`Stock usage: ${Q} units used`}),console.log("Stock history record added successfully")}catch(Ye){console.warn("History record creation failed, but continuing with stock update:",Ye)}}console.log("Updating medicine stock...");const B={used_stock:Se,stock_status:X,last_update:new Date().toISOString().slice(0,19).replace("T"," ")};console.log("Update data:",B),await gt.updateMedicineProduct(x.id,B),console.log("Medicine stock updated successfully"),te({title:"Success",description:"Stock updated successfully",variant:"default"}),console.log("Closing edit popup..."),p(null),console.log("Refreshing data..."),u(),console.log("Data refresh completed")}catch(Ee){console.error("Error saving stock:",Ee),te({title:"Error",description:`Failed to save stock changes: ${Ee.message||Ee}`,variant:"destructive"})}finally{console.log("Save operation finished, setting submitting to false"),v(!1)}},D=Ae=>{switch(Ae){case"in_stock":return"default";case"low_stock":return"secondary";case"out_of_stock":return"destructive";case"expired":return"secondary";default:return"default"}},R=()=>{try{const Ae=["S No","ID No","Product Name","Category","Current Stock","Used Stock","Balance Stock","Status","Last Update"],Ee=I.map((Ne,rt)=>{const Be=typeof Ne.id=="number"?`MD${Ne.id.toString().padStart(4,"0")}`:typeof Ne.id=="string"&&/^\d+$/.test(Ne.id)?`MD${Ne.id.padStart(4,"0")}`:Ne.id,We=Fu(Ne.purchase_date);return[rt+1,Be,`"${Ne.name}"`,`"${Ne.category}"`,Ne.quantity,Ne.used_stock||0,Ne.balance_stock||Ne.quantity,Ne.status.replace(/[-_]/g," ").charAt(0).toUpperCase()+Ne.status.replace(/[-_]/g," ").slice(1),We]}),Se=[Ae,...Ee].map(Ne=>Ne.join(",")).join(`
`),B=new Blob([Se],{type:"text/csv;charset=utf-8;"}),Ye=document.createElement("a");if(Ye.download!==void 0){const Ne=URL.createObjectURL(B);Ye.setAttribute("href",Ne);let We=`medicine-stock-${new Date().toISOString().split("T")[0]}`;W!==null&&U!==null&&(We+=`-${H[W-1]}-${U}`),j!=="all"&&(We+=`-${j}`),E!=="all"&&(We+=`-${E}`),w&&(We+="-filtered"),Ye.setAttribute("download",`${We}.csv`),Ye.style.visibility="hidden",document.body.appendChild(Ye),Ye.click(),document.body.removeChild(Ye),te({title:"Success",description:`CSV exported successfully! ${I.length} items exported.`})}}catch(Ae){console.error("Export error:",Ae),te({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},F=Array.from(new Set(J.map(Ae=>Ae.category))).filter(Boolean),I=J.filter(Ae=>{const Ee=Ae.name.toLowerCase().includes(w.toLowerCase())||Ae.category.toLowerCase().includes(w.toLowerCase())||Ae.supplier.toLowerCase().includes(w.toLowerCase()),Se=j==="all"||Ae.status===j,B=E==="all"||Ae.category===E;if(W!==null&&U!==null){const Ye=Ae.purchase_date;if(!Ye)return!1;const Ne=new Date(Ye);return isNaN(Ne.getTime())?!1:Ee&&Se&&B&&Ne.getMonth()===W-1&&Ne.getFullYear()===U}return Ee&&Se&&B}).sort((Ae,Ee)=>{const Se=B=>{if(typeof B=="number")return B;if(typeof B=="string"){const Ye=B.match(/\d+/);return Ye?parseInt(Ye[0],10):0}return 0};return Se(Ae.id)-Se(Ee.id)}),[ce,de]=m.useState(1),ve=10,_e=Math.ceil(I.length/ve),ze=I.slice((ce-1)*ve,ce*ve),be=()=>de(Ae=>Math.max(1,Ae-1)),Me=()=>de(Ae=>Math.min(_e,Ae+1));Fe.useEffect(()=>{de(1)},[w,t.length,j,E]),J.reduce((Ae,Ee)=>Ae+Ee.quantity*parseFloat(Ee.price.toString()),0);const Je=J.filter(Ae=>Ae.status==="in_stock").length,vt=J.filter(Ae=>Ae.status==="low_stock").length,Le=J.filter(Ae=>Ae.status==="out_of_stock").length;return J.filter(Ae=>Ae.status==="expired").length,i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl p-4 sm:p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsxs("div",{className:"crm-page-bg",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Medicine Stock Management"})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{text:`${H[(W||1)-1]} ${U}`,onClick:()=>Y(!0)}),e.jsxs(P,{onClick:R,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"In Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:Je}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Jt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Jt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Low Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:vt}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(va,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Warning"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(va,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Out of Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:Le}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Critical"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:J.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Catalog"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search medicines by name, category, or supplier...",value:w,onChange:Ae=>g(Ae.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-40",children:e.jsxs(At,{value:j,onValueChange:N,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"in_stock",children:"In Stock"}),e.jsx(Pe,{value:"low_stock",children:"Low Stock"}),e.jsx(Pe,{value:"out_of_stock",children:"Out of Stock"}),e.jsx(Pe,{value:"expired",children:"Expired"})]})]})}),e.jsx("div",{className:"w-full sm:w-40",children:e.jsxs(At,{value:E,onValueChange:C,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Categories"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Categories"}),F.map(Ae=>e.jsx(Pe,{value:Ae,children:Ae},Ae))]})]})})]})}),e.jsx($s,{open:O,onOpenChange:Y,selectedMonth:he,selectedYear:ke,onMonthChange:ie,onYearChange:V,onApply:()=>{ue(he),z(ke),Y(!1)},title:"Select Month & Year",description:"Filter stock items by specific month and year",previewText:"stock items"}),e.jsx(Ie,{className:"crm-table-card",children:e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"crm-table-header",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"crm-table-title-text",children:["Stock Inventory (",I.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Stock (",I.length,")"]})]})}),e.jsx("div",{className:"crm-table-container",children:e.jsxs(ls,{className:"crm-table",children:[e.jsx(is,{children:e.jsxs(nt,{className:"crm-table-header-row",children:[e.jsx(re,{className:"crm-table-head",children:"S No"}),e.jsx(re,{className:"crm-table-head",children:"ID No"}),e.jsx(re,{className:"crm-table-head",children:"Product"}),e.jsx(re,{className:"crm-table-head",children:"Category"}),e.jsx(re,{className:"crm-table-head",children:"Stock Value"}),e.jsx(re,{className:"crm-table-head",children:"Used Stock"}),e.jsx(re,{className:"crm-table-head",children:"Balance Stock"}),e.jsx(re,{className:"crm-table-head",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Last Update"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[ze.map((Ae,Ee)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ce-1)*ve+Ee+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:typeof Ae.id=="number"?`MD${Ae.id.toString().padStart(4,"0")}`:typeof Ae.id=="string"&&/^\d+$/.test(Ae.id)?`MD${Ae.id.padStart(4,"0")}`:Ae.id}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:Ae.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Ae.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Ae.quantity}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Ae.used_stock??"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Ae.balance_stock??"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:D(Ae.status),children:Ae.status.replace(/[-_]/g," ").charAt(0).toUpperCase()+Ae.status.replace(/[-_]/g," ").slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Fu(Ae.purchase_date)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>b(Ae),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Stock Details",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>je(Ae),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Stock",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},Ae.id)),ze.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:10,className:"text-center py-8 text-muted-foreground",children:"No stock items found"})})]})]})})]})}),_e>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(ce-1)*ve+1," to ",Math.min(ce*ve,I.length)," of ",I.length," medicines"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:be,disabled:ce===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(_e,5)},(Ae,Ee)=>{let Se;return _e<=5||ce<=3?Se=Ee+1:ce>=_e-2?Se=_e-4+Ee:Se=ce-2+Ee,e.jsx(P,{variant:ce===Se?"default":"outline",size:"sm",onClick:()=>de(Se),className:"crm-pagination-page-btn",children:Se},Se)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:Me,disabled:ce===_e,className:"crm-pagination-btn",children:"Next"})]})]})]}),e.jsx($t,{open:!!x,onOpenChange:()=>p(null),children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsxs("div",{className:"editpopup form crm-modal-header-content",children:[e.jsx("div",{className:"editpopup form crm-modal-icon",children:e.jsx(Ds,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"editpopup form crm-modal-title-section",children:[e.jsx(Bt,{className:"editpopup form crm-modal-title",children:"Edit Medicine Stock"}),e.jsx(Vt,{className:"editpopup form crm-modal-description",children:"Update stock quantities and settings"})]})]})}),x&&e.jsxs("div",{className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Product"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("div",{className:"text-sm font-medium text-blue-900",children:x.name})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(tn,{className:"h-4 w-4"}),"Current Stock"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-blue-600",children:x.current_stock||x.quantity||0})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4"}),"Available Balance"]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-green-600",children:se(x)})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cr,{className:"h-4 w-4"}),"Additional Used Stock"]}),e.jsx(Ve,{type:"number",min:0,max:se(x),value:Q,onChange:Ae=>{let Ee=Number(Ae.target.value);const Se=se(x);Ee<0&&(Ee=0),Ee>Se&&(Ee=Se,console.warn(`Cannot use more than available balance stock (${Se})`)),oe(Ee)},className:"editpopup form crm-edit-form-input text-center"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Maximum available: ",se(x)," units"]}),e.jsxs("div",{className:"text-xs text-blue-600",children:["Enter additional stock to mark as used (will be added to current used stock: ",x.used_stock||0,")"]}),Q>se(x)&&e.jsx("div",{className:"text-xs text-red-500",children:"Cannot exceed available balance stock"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Balance After Edit"]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"text-lg font-bold text-yellow-700",children:[ge," units"]})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Stock Status"]}),e.jsxs(At,{value:X,onValueChange:Ae=>ne(Ae),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"in_stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"In Stock"]})}),e.jsx(Pe,{value:"low_stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Low Stock"]})}),e.jsx(Pe,{value:"out_of_stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Out of Stock"]})}),e.jsx(Pe,{value:"expired",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),"Expired"]})})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>p(null),disabled:f,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{onClick:S,disabled:f,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:f?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>y(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:Ae=>Ae.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(Xa,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${h.status==="in_stock"?"bg-green-100 text-green-800":h.status==="low_stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:h.status.replace(/[-_]/g," ").charAt(0).toUpperCase()+h.status.replace(/[-_]/g," ").slice(1)})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:h.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Medicine ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:typeof h.id=="number"?`MD${h.id.toString().padStart(4,"0")}`:typeof h.id=="string"&&/^\d+$/.test(h.id)?`MD${h.id.padStart(4,"0")}`:h.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>y(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Xa,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Product Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Xa,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Medicine Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:h.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:h.category})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:h.supplier||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Price"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",h.price||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(gr,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Purchase Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Fu(h.purchase_date)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Expiry Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Fu(h.expiry_date)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Stock Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(tn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:h.quantity||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Total Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-red-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-red-600",children:h.used_stock||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-red-600 uppercase tracking-wide",children:"Used Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Or,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:h.balance_stock??(h.quantity||0)-(h.used_stock||0)}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Available"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-purple-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${h.status==="in_stock"?"bg-green-100 text-green-800":h.status==="low_stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:h.status.replace(/[-_]/g," ").charAt(0).toUpperCase()+h.status.replace(/[-_]/g," ").slice(1)}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-purple-600 uppercase tracking-wide mt-1",children:"Status"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(wr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Stock Movement History"]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"S NO"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Stock Change"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Type"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Stock After"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Description"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Action"})]})}),e.jsx(os,{children:e.jsx(nt,{children:e.jsx(q,{colSpan:7,className:"text-center py-12 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(wr,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No stock history recorded yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Stock movement tracking will appear here"})]})]})})})})]})})]})]})})]})})]})};let TY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};function Xj(t){if(!t)return"-";const s=new Date(t);if(!isNaN(s.getTime())){const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[a,r,n]=t.split("-");return`${n.padStart(2,"0")}/${r.padStart(2,"0")}/${a}`}return t}const WV=[{value:"upi",label:"UPI"},{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"neft",label:"NEFT"}],HV=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(!0),[i,o]=m.useState(!0),[c,d]=m.useState(0);Fe.useEffect(()=>{(async()=>{c>0&&console.log("Refreshing data...");try{const Be=await gt.getAllMedicineProducts();s(Be);try{const We=await gt.getAllDoctors();r(We)}catch(We){console.error("Error loading doctors:",We)}finally{l(!1)}}catch{}finally{o(!1)}})()},[c]),Fe.useEffect(()=>{const Be=setInterval(()=>{d(We=>We+1)},3e4);return()=>clearInterval(Be)},[]);const u=Fe.useCallback(()=>{o(!0),d(Be=>Be+1)},[]),[x,p]=m.useState(!1),[h,y]=m.useState(""),[f,v]=m.useState("all"),[w,g]=m.useState(!1),[j,N]=m.useState(null),[E,C]=m.useState([]),[k,A]=m.useState(!1),[T,M]=m.useState(null),[X,ne]=m.useState(""),[Q,oe]=m.useState(""),[ge,me]=m.useState(""),[H,L]=m.useState(""),[he,ie]=m.useState(""),[ke,V]=m.useState(""),[O,Y]=m.useState("pending"),W=["January","February","March","April","May","June","July","August","September","October","November","December"],ue=new Date().getFullYear(),[U,z]=m.useState(new Date().getMonth()+1),[te,se]=m.useState(ue),[J,je]=m.useState(!1),[b,S]=m.useState(new Date().getMonth()+1),[D,R]=m.useState(ue),{toast:F}=ya();Fe.useCallback(async()=>{try{o(!0);const Be=b,We=D,ft=h,He=f,Ke=await gt.getAllMedicineProducts();s(Ke),S(Be),R(We),y(ft),v(He),F({title:"Success",description:"Data refreshed successfully"})}catch(Be){console.error("Refresh error:",Be),F({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{o(!1)}},[b,D,h,f,F]);const I=async Be=>{try{N(Be);const We=await gt.getMedicineSettlementHistory(Be.id);We.sort((ft,He)=>ft.payment_date?He.payment_date?new Date(ft.payment_date).getTime()-new Date(He.payment_date).getTime():1:-1),C(We),g(!0)}catch(We){console.error("Error loading settlement history:",We),F({title:"Error",description:"Failed to load settlement history",variant:"destructive"})}},ce=Be=>{M(Be),ne(Be.purchase_date||""),oe(Be.payment_type||""),Y(Be.payment_status||"pending");const We=Number(Be.purchase_amount||0),ft=Number(Be.settlement_amount||0),He=Number(Be.balance_amount||0);me(ft.toString()),L(We.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2})),ie(He.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2})),V(""),A(!0)},de=async()=>{if(!T){A(!1);return}try{p(!0);const Be={purchase_date:X,payment_type:Q,payment_status:O};await gt.updateMedicineProduct(T.id,Be);const We=Number(ke);if(We>0){const ft={product_id:T.id,product_name:T.name,category:T.category,supplier:T.supplier,amount:We,payment_date:X,payment_type:Q,description:`Payment for ${T.name}`};await gt.addMedicineSettlementRecord(ft)}F({title:"Success",description:"Transaction updated successfully"}),A(!1),u()}catch(Be){console.error("Error saving transaction:",Be),F({title:"Error",description:"Failed to save transaction",variant:"destructive"})}finally{p(!1)}},ve=Be=>{let We=Be.target.value.replace(/[^\d.]/g,""),ft=Number(We);if((isNaN(ft)||ft<0)&&(ft=0),T){const He=Number(T.purchase_amount||0),Ke=Number(T.settlement_amount||0),Oe=He-Ke;ft>Oe&&(F({title:"Error",description:"Amount Payment cannot exceed the Balance Amount.",variant:"destructive"}),ft=Oe),V(ft.toString());const Ze=Ke+ft,it=He-Ze;me(Ze.toString()),ie(it.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}))}else V(ft.toString())},_e=async Be=>{if(window.confirm("Are you sure you want to delete this settlement record?"))try{p(!0);const We=E[Be];We&&We.id&&(await gt.deleteMedicineSettlementRecord(We.id),F({title:"Success",description:"Settlement record deleted successfully"}),C(ft=>{const He=[...ft];return He.splice(Be,1),He}),u())}catch(We){console.error("Error deleting settlement:",We),F({title:"Error",description:"Failed to delete settlement record",variant:"destructive"})}finally{p(!1)}},ze=Be=>{switch(Be){case"completed":return"default";case"pending":return"destructive";case"cancelled":return"secondary";default:return"default"}},be=()=>{try{const Be=["S No","ID No","Product Name","Category","Supplier","Quantity","Rate","Purchase Amount","Settlement Amount","Balance Amount","Status","Payment Type"],We=Me.map((Oe,Ze)=>{var bs;const it=typeof Oe.id=="number"?`MD${Oe.id.toString().padStart(4,"0")}`:(bs=Oe.id)!=null&&bs.toString().startsWith("MD")?Oe.id:`MD${Oe.id}`,dt=Number(Oe.purchase_amount||0),xt=Number(Oe.settlement_amount||0),Wt=Number(Oe.balance_amount||0),qt=Oe.payment_status||"pending";return[Ze+1,it,`"${Oe.name}"`,`"${Oe.category}"`,`"${Oe.supplier||"-"}"`,Oe.quantity,`${Number(Oe.price).toFixed(2)}`,`${dt.toFixed(2)}`,`${xt.toFixed(2)}`,`${Wt.toFixed(2)}`,qt.charAt(0).toUpperCase()+qt.slice(1),Oe.payment_type||"-"]}),ft=[Be,...We].map(Oe=>Oe.join(",")).join(`
`),He=new Blob([ft],{type:"text/csv;charset=utf-8;"}),Ke=document.createElement("a");if(Ke.download!==void 0){const Oe=URL.createObjectURL(He);Ke.setAttribute("href",Oe);let dt=`medicine-accounts-${new Date().toISOString().split("T")[0]}`;b!==null&&D!==null&&(dt+=`-${W[b-1]}-${D}`),f!=="all"&&(dt+=`-${f}`),h&&(dt+="-filtered"),Ke.setAttribute("download",`${dt}.csv`),Ke.style.visibility="hidden",document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),F({title:"Success",description:`CSV exported successfully! ${Me.length} transactions exported.`})}}catch(Be){console.error("Export error:",Be),F({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},Me=t.filter(Be=>{const We=Be.payment_status||"pending",ft=(Be.name||"").toLowerCase().includes(h.toLowerCase())||(Be.category||"").toLowerCase().includes(h.toLowerCase())||(Be.supplier||"").toLowerCase().includes(h.toLowerCase()),He=f==="all"||We===f;if(b!==null&&D!==null){const Ke=Be.purchase_date;if(!Ke)return!1;const Oe=new Date(Ke);return isNaN(Oe.getTime())?!1:ft&&He&&Oe.getMonth()===b-1&&Oe.getFullYear()===D}return ft&&He}),[Je,vt]=m.useState(1),Le=10,Ae=Math.ceil(Me.length/Le),Ee=Me.slice((Je-1)*Le,Je*Le),Se=()=>vt(Be=>Math.max(1,Be-1)),B=()=>vt(Be=>Math.min(Ae,Be+1));Fe.useEffect(()=>{vt(1)},[h,t.length,f]);let Ye=0,Ne=0,rt=0;return t.forEach(Be=>{const We=Number(Be.purchase_amount||0),ft=Number(Be.settlement_amount||0),He=Number(Be.balance_amount||0);Ye+=We,Ne+=ft,rt+=He}),i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl p-4 sm:p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsxs("div",{className:"crm-page-bg",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Medicine Accounts"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:i}),e.jsx(Ht.MonthYear,{onClick:()=>je(!0),text:b!==null&&D!==null?`${W[b-1]} ${D}`:`${W[U-1]} ${te}`}),e.jsxs(P,{onClick:be,className:"global-btn global-btn-primary flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Purchase"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:["",Ye.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Incoming"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Settlement"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:["",Ne.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Completed"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Balance Amount"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:["",rt.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(cs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Pending"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-purple",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-700 mb-1 truncate",children:"Active Doctors"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-purple-900 mb-1",children:n?"...":a.filter(Be=>Be.is_active!==!1).length}),e.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-purple",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search transactions by name, category, or supplier...",value:h,onChange:Be=>y(Be.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-40",children:e.jsxs(At,{value:f,onValueChange:v,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"completed",children:"Completed"}),e.jsx(Pe,{value:"pending",children:"Pending"}),e.jsx(Pe,{value:"cancelled",children:"Cancelled"})]})]})})]})}),e.jsx($s,{open:J,onOpenChange:je,selectedMonth:U,selectedYear:te,onMonthChange:z,onYearChange:se,onApply:()=>{S(U),R(te),je(!1)},title:"Select Month & Year",description:"Filter accounts by specific month and year",previewText:"transactions"}),e.jsx(Ie,{className:"crm-table-card",children:e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"crm-table-header",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(ts,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"crm-table-title-text",children:["Transaction History (",Me.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Transactions (",Me.length,")"]})]})}),e.jsx("div",{className:"crm-table-container",children:e.jsxs(ls,{className:"crm-table",children:[e.jsx(is,{children:e.jsxs(nt,{className:"crm-table-header-row",children:[e.jsx(re,{className:"crm-table-head",children:"S No"}),e.jsx(re,{className:"crm-table-head",children:"ID No"}),e.jsx(re,{className:"crm-table-head",children:"Product Name"}),e.jsx(re,{className:"crm-table-head",children:"Category"}),e.jsx(re,{className:"crm-table-head",children:"Supplier"}),e.jsx(re,{className:"crm-table-head",children:"Quantity"}),e.jsx(re,{className:"crm-table-head",children:"Rate"}),e.jsx(re,{className:"crm-table-head",children:"Purchase Amount"}),e.jsx(re,{className:"crm-table-head",children:"Settlement Amount"}),e.jsx(re,{className:"crm-table-head",children:"Balance Amount"}),e.jsx(re,{className:"crm-table-head",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Payment Type"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[Ee.map((Be,We)=>{var dt;const ft=Be.payment_status||"pending",He=Number(Be.purchase_amount||0),Ke=Number(Be.settlement_amount||0),Oe=Number(Be.balance_amount||0),Ze=(Je-1)*Le+We+1,it=typeof Be.id=="number"?`MD${Be.id.toString().padStart(4,"0")}`:(dt=Be.id)!=null&&dt.toString().startsWith("MD")?Be.id:`MD${Be.id}`;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Ze}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:it}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:Be.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Be.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Be.supplier}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Be.quantity}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",Number(Be.price).toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:["",He.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",Ke.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",Oe.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:ze(ft),children:ft.charAt(0).toUpperCase()+ft.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Be.payment_type||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>I(Be),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Settlement History",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ce(Be),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Transaction",children:e.jsx(Kn,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},Be.id)}),Ee.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:13,className:"text-center py-8 text-muted-foreground",children:"No transactions found"})})]})]})})]})}),Ae>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(Je-1)*Le+1," to ",Math.min(Je*Le,Me.length)," of ",Me.length," transactions"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:Se,disabled:Je===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(Ae,5)},(Be,We)=>{let ft;return Ae<=5||Je<=3?ft=We+1:Je>=Ae-2?ft=Ae-4+We:ft=Je-2+We,e.jsx(P,{variant:Je===ft?"default":"outline",size:"sm",onClick:()=>vt(ft),className:"crm-pagination-page-btn",children:ft},ft)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:B,disabled:Je===Ae,className:"crm-pagination-btn",children:"Next"})]})]})]}),w&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:Be=>Be.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx(Wn,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${j.status==="paid"?"bg-green-100 text-green-800":j.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j.status?j.status.charAt(0).toUpperCase()+j.status.slice(1):"Pending"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(ts,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:j.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Product ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:j.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>g(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Product Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Product Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:j.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:j.category})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:j.supplier})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Unit Price"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",j.price||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(tn,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Quantity"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:j.quantity||0})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Expiry Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Xj(j.expiry_date)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Account Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Wn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:["",j.total_amount?Number(j.total_amount).toLocaleString("en-IN"):"0"]}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Total Amount"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(so,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:["",j.paid_amount?Number(j.paid_amount).toLocaleString("en-IN"):"0"]}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Amount Paid"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-red-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600"})}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-red-600",children:["",j.pending_amount?Number(j.pending_amount).toLocaleString("en-IN"):"0"]}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-red-600 uppercase tracking-wide",children:"Pending"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-purple-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${j.status==="paid"?"bg-green-100 text-green-800":j.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j.status?j.status.charAt(0).toUpperCase()+j.status.slice(1):"Pending"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-purple-600 uppercase tracking-wide mt-1",children:"Status"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(wr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Payment History"]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[50px]",children:"S NO"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[90px]",children:"Payment Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[90px]",children:"Amount Paid"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[90px]",children:"Payment Type"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[100px]",children:"Description"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[70px]",children:"Action"})]})}),e.jsx(os,{children:E.length===0?e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-12 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(ts,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No payment records found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Payment history will appear here"})]})]})})}):E.map((Be,We)=>{const ft=Xj(Be.payment_date);return e.jsxs(nt,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(q,{className:"text-center font-medium text-xs sm:text-sm",children:We+1}),e.jsx(q,{className:"text-center text-xs sm:text-sm",children:ft}),e.jsxs(q,{className:"text-center font-bold text-green-600 text-xs sm:text-sm",children:["",Number(Be.amount||0).toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx(q,{className:"text-center text-xs sm:text-sm",children:e.jsx(kt,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:Be.payment_type||"Cash"})}),e.jsx(q,{className:"text-center text-xs sm:text-sm",children:Be.description||"-"}),e.jsx(q,{className:"text-center",children:e.jsx(P,{variant:"outline",size:"sm",className:"h-7 w-7 sm:h-8 sm:w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300",title:"Delete Payment Record",onClick:()=>_e(We),disabled:x,children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})})]},We)})})]})})]})]})})]})}),e.jsx($t,{open:k,onOpenChange:A,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsxs("div",{className:"editpopup form crm-modal-header-content",children:[e.jsx("div",{className:"editpopup form crm-modal-icon",children:e.jsx(Kn,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"editpopup form crm-modal-title-section",children:[e.jsx(Bt,{className:"editpopup form crm-modal-title",children:"Edit Transaction"}),e.jsx(Vt,{className:"editpopup form crm-modal-description",children:"Update payment details and settlement information"})]})]})}),e.jsxs("form",{onSubmit:Be=>{Be.preventDefault(),de()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Xa,{className:"h-4 w-4"}),"Product"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("div",{className:"text-sm font-medium text-blue-900",children:(T==null?void 0:T.name)||"Medicine"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editDate",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Date"]}),e.jsx(Ve,{id:"editDate",type:"date",value:X,onChange:Be=>ne(Be.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editPaymentType",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Payment Type"]}),e.jsxs(At,{value:Q,onValueChange:oe,children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsx(Dt,{children:WV.map(Be=>e.jsx(Pe,{value:Be.value,children:Be.label},Be.value))})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4"}),"Purchase Amount"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-blue-600",children:H})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Wn,{className:"h-4 w-4"}),"Settlement Amount"]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-green-600",children:ge})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editAmountPayment",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Amount Payment"]}),e.jsx(Ve,{id:"editAmountPayment",type:"number",min:0,max:T?Number(T.price||0)*Number(T.quantity||0):void 0,value:ke,onChange:ve,placeholder:"Enter new payment amount",className:"editpopup form crm-edit-form-input text-center"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enter the amount you want to pay now."})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(so,{className:"h-4 w-4"}),"Balance Amount"]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-yellow-700",children:he})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Transaction Status"]}),e.jsxs(At,{value:O,onValueChange:Be=>Y(Be),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"pending",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Pending"]})}),e.jsx(Pe,{value:"completed",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Completed"]})}),e.jsx(Pe,{value:"cancelled",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Cancelled"]})})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>A(!1),disabled:x,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:x,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:x?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})})]})]})]})})]})};let MY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const Qj=()=>{var F;js("Grocery Management");const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const ce=await(await ms(async()=>{const{DatabaseService:de}=await Promise.resolve().then(()=>xs);return{DatabaseService:de}},void 0)).DatabaseService.getAllGroceryProducts();s(ce.map(de=>({...de,id:de.id.toString(),createdAt:de.created_at||de.createdAt||"",purchaseDate:de.purchase_date||de.purchaseDate||""})))}catch{}finally{r(!1)}})()},[n]);const[i,o]=m.useState([]),[c,d]=m.useState([]);Fe.useEffect(()=>{(async()=>{try{const I=(await ms(async()=>{const{DatabaseService:ve}=await Promise.resolve().then(()=>xs);return{DatabaseService:ve}},void 0)).DatabaseService,[ce,de]=await Promise.all([I.getAllGroceryCategories(),I.getAllGrocerySuppliers()]);o(ce),d(de)}catch{}})()},[n]),Fe.useEffect(()=>{const ce=setTimeout(async()=>{if(!(i.length===0||c.length===0||t.length===0))try{const de=(await ms(async()=>{const{DatabaseService:_e}=await Promise.resolve().then(()=>xs);return{DatabaseService:_e}},void 0)).DatabaseService;let ve=!1;for(const _e of t){let ze=!1,be={};const Me=i.find(vt=>vt.status==="active"&&(vt.name.toLowerCase().includes(_e.category.toLowerCase())||_e.category.toLowerCase().includes(vt.name.toLowerCase())));Me&&Me.name!==_e.category&&(be.category=Me.name,ze=!0);const Je=c.find(vt=>vt.status==="active"&&(vt.name.toLowerCase().includes(_e.supplier.toLowerCase())||_e.supplier.toLowerCase().includes(vt.name.toLowerCase())));Je&&Je.name!==_e.supplier&&(be.supplier=Je.name,ze=!0),ze&&(await de.updateGroceryProduct(_e.id,be),ve=!0)}ve&&setTimeout(()=>{u()},500)}catch(de){console.error("Auto-fix names error:",de)}},1e3);return()=>clearTimeout(ce)},[i,c,t]),Fe.useEffect(()=>{const I=setInterval(()=>{l(ce=>ce+1)},3e4);return()=>clearInterval(I)},[]);const u=Fe.useCallback(()=>{r(!0),l(I=>I+1)},[]),[x,p]=m.useState(!1),[h,y]=m.useState(null),[f,v]=m.useState(!1),[w,g]=m.useState(null),[j,N]=m.useState(!1),[E,C]=m.useState(""),[k,A]=m.useState("all"),[T,M]=m.useState({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]}),X=["January","February","March","April","May","June","July","August","September","October","November","December"],ne=new Date().getFullYear(),[Q,oe]=m.useState(new Date().getMonth()+1),[ge,me]=m.useState(ne),[H,L]=m.useState(!1),[he,ie]=m.useState(new Date().getMonth()+1),[ke,V]=m.useState(ne),O=I=>{y(I),M({name:I.name,description:I.description,category:I.category,supplier:I.supplier,price:I.price.toString(),quantity:I.quantity.toString(),purchaseDate:I.purchaseDate||I.createdAt||new Date().toISOString().split("T")[0]}),p(!0)},{toast:Y}=ya();Fe.useCallback(async()=>{try{r(!0);const I=he,ce=ke,de=E,ve=k,_e=(await ms(async()=>{const{DatabaseService:Je}=await Promise.resolve().then(()=>xs);return{DatabaseService:Je}},void 0)).DatabaseService,[ze,be,Me]=await Promise.all([_e.getAllGroceryProducts(),_e.getAllGroceryCategories(),_e.getAllGrocerySuppliers()]);s(ze.map(Je=>({...Je,id:Je.id.toString(),createdAt:Je.created_at||Je.createdAt||"",purchaseDate:Je.purchase_date||Je.purchaseDate||""}))),o(be),d(Me),ie(I),V(ce),C(de),A(ve),Y({title:"Success",description:"Data refreshed successfully"})}catch(I){console.error("Refresh error:",I),Y({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[he,ke,E,k,Y]);const W=async()=>{if(!T.name||!T.category||!T.supplier||!T.price||!T.quantity||!T.purchaseDate){Y({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}try{const I=(await ms(async()=>{const{DatabaseService:de}=await Promise.resolve().then(()=>xs);return{DatabaseService:de}},void 0)).DatabaseService,ce=parseInt(T.quantity);h?(await I.updateGroceryProduct(h.id,{name:T.name,description:T.description,category:T.category,supplier:T.supplier,price:parseFloat(T.price),quantity:ce,current_stock:ce,status:"active",purchaseDate:T.purchaseDate}),Y({title:"Success",description:"Product updated successfully"})):(await I.addGroceryProduct({name:T.name,description:T.description,category:T.category,supplier:T.supplier,price:parseFloat(T.price),quantity:ce,current_stock:ce,status:"active",purchaseDate:T.purchaseDate}),Y({title:"Success",description:"Product added successfully"})),u(),M({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]}),p(!1),y(null)}catch{Y({title:"Error",description:`Failed to ${h?"update":"add"} product`,variant:"destructive"})}},ue=async I=>{g(I),v(!0)},U=async()=>{if(w)try{N(!0),await(await ms(async()=>{const{DatabaseService:ce}=await Promise.resolve().then(()=>xs);return{DatabaseService:ce}},void 0)).DatabaseService.deleteGroceryProduct(w.id),u(),v(!1),g(null),Y({title:"Success",description:"Product deleted successfully"})}catch{Y({title:"Error",description:"Failed to delete product",variant:"destructive"})}finally{N(!1)}},z=()=>{try{const I=["S No","Date","Name","Category","Supplier","Price","Quantity","Status","Description"],ce=te.map((ze,be)=>{const Me=ze.purchaseDate||ze.createdAt;let Je="";if(Me){let vt;if(Me.includes("T")?vt=new Date(Me):/^\d{4}-\d{2}-\d{2}$/.test(Me)&&(vt=new Date(Me+"T00:00:00")),vt&&!isNaN(vt.getTime())){const Le=String(vt.getDate()).padStart(2,"0"),Ae=String(vt.getMonth()+1).padStart(2,"0"),Ee=vt.getFullYear();Je=`${Le}/${Ae}/${Ee}`}else Je=Me}return[be+1,Je,`"${ze.name}"`,`"${ze.category}"`,`"${ze.supplier}"`,`${ze.price.toLocaleString("en-IN")}`,ze.quantity,ze.status.charAt(0).toUpperCase()+ze.status.slice(1),`"${ze.description||""}"`]}),de=[I,...ce].map(ze=>ze.join(",")).join(`
`),ve=new Blob([de],{type:"text/csv;charset=utf-8;"}),_e=document.createElement("a");if(_e.download!==void 0){const ze=URL.createObjectURL(ve);_e.setAttribute("href",ze);let Je=`grocery-products-${new Date().toISOString().split("T")[0]}`;he!==null&&ke!==null&&(Je+=`-${X[he]}-${ke}`),k!=="all"&&(Je+=`-${k}`),E&&(Je+="-filtered"),_e.setAttribute("download",`${Je}.csv`),_e.style.visibility="hidden",document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),Y({title:"Success",description:`CSV exported successfully! ${te.length} products exported.`})}}catch(I){console.error("Export error:",I),Y({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},te=t.filter(I=>{var ve,_e,ze;const ce=((ve=I.name)==null?void 0:ve.toLowerCase().includes(E.toLowerCase()))||((_e=I.category)==null?void 0:_e.toLowerCase().includes(E.toLowerCase()))||((ze=I.supplier)==null?void 0:ze.toLowerCase().includes(E.toLowerCase()));let de=!0;if(k!=="all"&&(k==="low-stock"?de=I.quantity<10:de=I.status===k),he!==null&&ke!==null){const be=I.purchaseDate||I.createdAt;if(!be)return!1;let Me;if(be.includes("T"))Me=new Date(be);else if(/^\d{4}-\d{2}-\d{2}$/.test(be))Me=new Date(be+"T00:00:00");else return!1;return isNaN(Me.getTime())?!1:ce&&de&&Me.getMonth()===he-1&&Me.getFullYear()===ke}return ce&&de}).sort((I,ce)=>{const de=parseInt(I.id)||0,ve=parseInt(ce.id)||0;return de-ve}),[se,J]=m.useState(1),je=10,b=Math.ceil(te.length/je),S=te.slice((se-1)*je,se*je),D=()=>J(I=>Math.max(1,I-1)),R=()=>J(I=>Math.min(b,I+1));return Fe.useEffect(()=>{J(1)},[E,t.length]),a?e.jsx("div",{className:"crm-page-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(gr,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Grocery Management"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsx(Ht.MonthYear,{onClick:()=>L(!0),text:X[Q-1]}),e.jsxs(P,{onClick:z,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered products to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>{M({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]}),p(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Product"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:te.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(gr,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:te.filter(I=>I.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In stock"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Low Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:te.filter(I=>I.quantity<10).length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Urgent"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:te.filter(I=>I.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Discontinued"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search products by name, category, or supplier...",value:E,onChange:I=>C(I.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:k,onValueChange:A,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"}),e.jsx(Pe,{value:"low-stock",children:"Low Stock"}),e.jsx("div",{className:"px-2 py-1 border-t border-gray-200",children:e.jsxs(P,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>{A("all"),C(""),ie(new Date().getMonth()+1),V(new Date().getFullYear()),oe(new Date().getMonth()+1),me(new Date().getFullYear())},children:[e.jsx(es,{className:"h-3 w-3 mr-2"}),"Reset All Filters"]})})]})]})})]})}),e.jsx($s,{open:H,onOpenChange:L,selectedMonth:Q,selectedYear:ge,onMonthChange:oe,onYearChange:me,onApply:()=>{ie(Q),V(ge),L(!1)},title:"Select Month & Year",description:"Filter products by specific month and year",previewText:"products"}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(gr,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Products List (",te.length,")"]}),e.jsxs("span",{className:"sm:hidden",children:["Products (",te.length,")"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1200px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Category"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Supplier"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Price"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Quantity"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsxs(os,{children:[S.map((I,ce)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(se-1)*je+ce+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const de=I.purchaseDate||I.createdAt;if(!de)return"";let ve;if(de.includes("T"))ve=new Date(de);else if(/^\d{4}-\d{2}-\d{2}$/.test(de))ve=new Date(de+"T00:00:00");else return de;if(isNaN(ve.getTime()))return de;const _e=String(ve.getDate()).padStart(2,"0"),ze=String(ve.getMonth()+1).padStart(2,"0"),be=ve.getFullYear();return`${_e}/${ze}/${be}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:I.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:I.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:I.supplier}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",I.price.toLocaleString("en-IN")]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:I.quantity}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:I.status==="active"?"default":"secondary",className:`
                        ${I.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:I.status.charAt(0).toUpperCase()+I.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>O(I),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Product",children:e.jsx(Ds,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ue(I),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Product",children:e.jsx(mt,{className:"h-4 w-4 sm:h-4 sm:w-4"})})]})})]},I.id)),S.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No products found"})})]})]})}),b>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(se-1)*je+1," to ",Math.min(se*je,te.length)," of ",te.length," products"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:D,disabled:se===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(b,5)},(I,ce)=>{let de;return b<=5||se<=3?de=ce+1:se>=b-2?de=b-4+ce:de=se-2+ce,e.jsx(P,{variant:se===de?"default":"outline",size:"sm",onClick:()=>J(de),className:"h-8 w-8 p-0",children:de},de)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:R,disabled:se===b,className:"h-8 px-3",children:"Next"})]})]})]}),e.jsx($t,{open:x,onOpenChange:p,children:e.jsxs(Ot,{className:"editpopup form crm-modal-container sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"editpopup form crm-modal-header",children:e.jsxs("div",{className:"editpopup form crm-modal-header-content",children:[e.jsx("div",{className:"editpopup form crm-modal-icon",children:h?e.jsx(Ds,{className:"h-5 w-5 text-blue-600"}):e.jsx(us,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"editpopup form crm-modal-title-section",children:[e.jsx(Bt,{className:"editpopup form crm-modal-title",children:h?"Edit Product":"Add New Product"}),e.jsx(Vt,{className:"editpopup form crm-modal-description",children:h?"Update product information":"Enter the details for the new grocery product"})]})]})}),e.jsxs("form",{onSubmit:I=>{I.preventDefault(),W()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:T.name,onChange:I=>M({...T,name:I.target.value}),placeholder:"Enter product name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"category",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:T.category,onValueChange:I=>M({...T,category:I}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select category"})}),e.jsx(Dt,{children:(()=>{const I=i.filter(ce=>ce.status==="active");return I.length===0?e.jsx(Pe,{value:"__no_category__",disabled:!0,children:"No Categories Found"}):I.filter(ce=>ce.name&&ce.name!=="").map(ce=>e.jsx(Pe,{value:ce.name,children:ce.name},ce.id||ce.name))})()})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"supplier",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(mm,{className:"h-4 w-4"}),"Supplier ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:T.supplier,onValueChange:I=>M({...T,supplier:I}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select supplier"})}),e.jsx(Dt,{children:(()=>{const I=c.filter(ce=>ce.status==="active");return I.length===0?e.jsx(Pe,{value:"__no_supplier__",disabled:!0,children:"No Suppliers Found"}):I.filter(ce=>ce.name&&ce.name!=="").map(ce=>e.jsx(Pe,{value:ce.name,children:ce.name},ce.id||ce.name))})()})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"price",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"price",type:"number",step:"0.01",value:T.price,onChange:I=>M({...T,price:I.target.value}),placeholder:"Enter price",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"quantity",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4"}),"Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"quantity",type:"number",value:T.quantity,onChange:I=>M({...T,quantity:I.target.value}),placeholder:"Enter quantity",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"purchaseDate",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Purchase Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"purchaseDate",type:"date",value:T.purchaseDate,onChange:I=>M({...T,purchaseDate:I.target.value}),placeholder:"Select purchase date",className:"editpopup form crm-edit-form-input",required:!0})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:T.description,onChange:I=>M({...T,description:I.target.value}),placeholder:"Enter product description (optional)",className:"editpopup form crm-edit-form-textarea",rows:3})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{p(!1),y(null),M({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(gr,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),h?"Update Product":"Add Product"]})]})]})]})}),e.jsx($t,{open:f,onOpenChange:v,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Product"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this product? This action cannot be undone."})]})]})}),w&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:w.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mm,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:w.supplier})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["",(F=w.price)==null?void 0:F.toLocaleString("en-IN")]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{v(!1),g(null)},disabled:j,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:U,disabled:j,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:j?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Product"]})})]})]})})]})})};let RY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const GV=()=>{js("Grocery Categories");const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const S=await(await ms(async()=>{const{DatabaseService:D}=await Promise.resolve().then(()=>xs);return{DatabaseService:D}},void 0)).DatabaseService.getAllGroceryCategories();s(S.map(D=>({...D,id:D.id.toString(),createdAt:D.created_at||D.createdAt||""})))}catch{}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const b=setInterval(()=>{l(S=>S+1)},3e4);return()=>clearInterval(b)},[]);const i=Fe.useCallback(()=>{r(!0),l(b=>b+1)},[]),[o,c]=m.useState(!1),[d,u]=m.useState(null),[x,p]=m.useState(!1),[h,y]=m.useState(null),[f,v]=m.useState(!1),[w,g]=m.useState(""),[j,N]=m.useState("all"),[E,C]=m.useState({name:"",description:"",status:"active"}),k=["January","February","March","April","May","June","July","August","September","October","November","December"],A=new Date().getFullYear(),[T,M]=m.useState(new Date().getMonth()+1),[X,ne]=m.useState(A),[Q,oe]=m.useState(!1),[ge,me]=m.useState(new Date().getMonth()+1),[H,L]=m.useState(A),he=b=>{u(b),C({name:b.name,description:b.description,status:b.status}),c(!0)},{toast:ie}=ya();Fe.useCallback(async()=>{try{r(!0);const b=ge,S=H,D=w,R=j,I=await(await ms(async()=>{const{DatabaseService:ce}=await Promise.resolve().then(()=>xs);return{DatabaseService:ce}},void 0)).DatabaseService.getAllGroceryCategories();s(I.map(ce=>({...ce,id:ce.id.toString(),createdAt:ce.created_at||ce.createdAt||""}))),me(b),L(S),g(D),N(R),ie({title:"Success",description:"Data refreshed successfully"})}catch(b){console.error("Refresh error:",b),ie({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[ge,H,w,j,ie]);const ke=async()=>{if(!E.name){ie({title:"Error",description:"Please enter a category name",variant:"destructive"});return}try{const b=(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService;d?(await b.updateGroceryCategory(d.id,{name:E.name,description:E.description,status:E.status}),ie({title:"Success",description:"Category updated successfully"})):(await b.addGroceryCategory({name:E.name,description:E.description,status:E.status}),ie({title:"Success",description:"Category added successfully"})),i(),C({name:"",description:"",status:"active"}),c(!1),u(null)}catch{ie({title:"Error",description:`Failed to ${d?"update":"add"} category`,variant:"destructive"})}},V=async b=>{y(b),p(!0)},O=async()=>{if(h)try{v(!0),await(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService.deleteGroceryCategory(h.id),i(),p(!1),y(null),ie({title:"Success",description:"Category deleted successfully"})}catch{ie({title:"Error",description:"Failed to delete category",variant:"destructive"})}finally{v(!1)}},Y=()=>{try{const b=["S No","Date","Category Name","Description","Status"],S=W.map((I,ce)=>{const de=I.createdAt;let ve="";if(de){let _e;if(de.includes("T")?_e=new Date(de):/^\d{4}-\d{2}-\d{2}$/.test(de)&&(_e=new Date(de+"T00:00:00")),_e&&!isNaN(_e.getTime())){const ze=String(_e.getDate()).padStart(2,"0"),be=String(_e.getMonth()+1).padStart(2,"0"),Me=_e.getFullYear();ve=`${ze}/${be}/${Me}`}else ve=de}return[ce+1,ve,`"${I.name}"`,`"${I.description||""}"`,I.status.charAt(0).toUpperCase()+I.status.slice(1)]}),D=[b,...S].map(I=>I.join(",")).join(`
`),R=new Blob([D],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");if(F.download!==void 0){const I=URL.createObjectURL(R);F.setAttribute("href",I);let ve=`grocery-categories-${new Date().toISOString().split("T")[0]}`;ge!==null&&H!==null&&(ve+=`-${k[ge]}-${H}`),j!=="all"&&(ve+=`-${j}`),w&&(ve+="-filtered"),F.setAttribute("download",`${ve}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F),ie({title:"Success",description:`CSV exported successfully! ${W.length} categories exported.`})}}catch(b){console.error("Export error:",b),ie({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},W=t.filter(b=>{var R,F;const S=((R=b.name)==null?void 0:R.toLowerCase().includes(w.toLowerCase()))||((F=b.description)==null?void 0:F.toLowerCase().includes(w.toLowerCase()));let D=!0;if(j!=="all"&&(D=b.status===j),ge!==null&&H!==null){const I=b.createdAt;if(!I)return!1;let ce;if(I.includes("T"))ce=new Date(I);else if(/^\d{4}-\d{2}-\d{2}$/.test(I))ce=new Date(I+"T00:00:00");else return!1;return isNaN(ce.getTime())?!1:S&&D&&ce.getMonth()===ge-1&&ce.getFullYear()===H}return S&&D}).sort((b,S)=>{const D=parseInt(b.id)||0,R=parseInt(S.id)||0;return D-R}),[ue,U]=m.useState(1),z=10,te=Math.ceil(W.length/z),se=W.slice((ue-1)*z,ue*z),J=()=>U(b=>Math.max(1,b-1)),je=()=>U(b=>Math.min(te,b+1));return Fe.useEffect(()=>{U(1)},[w,t.length]),a?e.jsx("div",{className:"crm-page-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Grocery Categories "})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsx(Ht.MonthYear,{onClick:()=>oe(!0),text:k[T-1]}),e.jsxs(P,{onClick:Y,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered categories to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>{C({name:"",description:"",status:"active"}),c(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:W.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:W.filter(b=>b.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In treatment"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Critical Cases"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:W.filter(b=>b.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Urgent care"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:W.filter(b=>b.description&&b.description.length>0).length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search categories by name or description...",value:w,onChange:b=>g(b.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:j,onValueChange:N,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"}),e.jsx("div",{className:"px-2 py-1 border-t border-gray-200",children:e.jsxs(P,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>{N("all"),g(""),me(new Date().getMonth()+1),L(new Date().getFullYear()),M(new Date().getMonth()+1),ne(new Date().getFullYear())},children:[e.jsx(es,{className:"h-3 w-3 mr-2"}),"Reset All Filters"]})})]})]})})]})}),e.jsx($s,{open:Q,onOpenChange:oe,selectedMonth:T,selectedYear:X,onMonthChange:M,onYearChange:ne,onApply:()=>{me(T),L(X),oe(!1)},title:"Select Month & Year",description:"Filter categories by specific month and year",previewText:"categories"}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(ds,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Categories List (",W.length,")"]}),e.jsxs("span",{className:"sm:hidden",children:["Categories (",W.length,")"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1000px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Category Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Description"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsxs(os,{children:[se.map((b,S)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ue-1)*z+S+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const D=b.createdAt;if(!D)return"";let R;if(D.includes("T"))R=new Date(D);else if(/^\d{4}-\d{2}-\d{2}$/.test(D))R=new Date(D+"T00:00:00");else return D;if(isNaN(R.getTime()))return D;const F=String(R.getDate()).padStart(2,"0"),I=String(R.getMonth()+1).padStart(2,"0"),ce=R.getFullYear();return`${F}/${I}/${ce}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:b.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-[300px] truncate",children:b.description||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:b.status==="active"?"default":"secondary",className:`
                        ${b.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>he(b),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Category",children:e.jsx(Ds,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>V(b),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Category",children:e.jsx(mt,{className:"h-4 w-4 sm:h-4 sm:w-4"})})]})})]},b.id)),se.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No categories found"})})]})]})}),te>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(ue-1)*z+1," to ",Math.min(ue*z,W.length)," of ",W.length," categories"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:J,disabled:ue===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(te,5)},(b,S)=>{let D;return te<=5||ue<=3?D=S+1:ue>=te-2?D=te-4+S:D=ue-2+S,e.jsx(P,{variant:ue===D?"default":"outline",size:"sm",onClick:()=>U(D),className:"h-8 w-8 p-0",children:D},D)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:je,disabled:ue===te,className:"h-8 px-3",children:"Next"})]})]})]}),e.jsx($t,{open:o,onOpenChange:c,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:d?"Edit Category":"Add New Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:d?"Update category information":"Enter the details for the new grocery category"})]})]})}),e.jsxs("form",{onSubmit:b=>{b.preventDefault(),ke()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:E.name,onChange:b=>C({...E,name:b.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:E.description,onChange:b=>C({...E,description:b.target.value}),placeholder:"Enter category description (optional)",className:"editpopup form crm-edit-form-textarea",rows:3})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:E.status,onValueChange:b=>C({...E,status:b}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{c(!1),u(null),C({name:"",description:"",status:"active"})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),d?"Update Category":"Add Category"]})]})]})]})}),e.jsx($t,{open:x,onOpenChange:p,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this category? This action cannot be undone."})]})]})}),h&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:h.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:h.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",h.status]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{p(!1),y(null)},disabled:f,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:O,disabled:f,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:f?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Category"]})})]})]})})]})})};let LY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const qV=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const S=await(await ms(async()=>{const{DatabaseService:D}=await Promise.resolve().then(()=>xs);return{DatabaseService:D}},void 0)).DatabaseService.getAllGrocerySuppliers();s(S.map(D=>({...D,id:D.id.toString(),createdAt:D.created_at||D.createdAt||""})))}catch{}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const b=setInterval(()=>{l(S=>S+1)},3e4);return()=>clearInterval(b)},[]);const i=Fe.useCallback(()=>{r(!0),l(b=>b+1)},[]),[o,c]=m.useState(!1),[d,u]=m.useState(null),[x,p]=m.useState(!1),[h,y]=m.useState(null),[f,v]=m.useState(!1),[w,g]=m.useState(""),[j,N]=m.useState("all"),[E,C]=m.useState({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"}),k=["January","February","March","April","May","June","July","August","September","October","November","December"],A=new Date().getFullYear(),[T,M]=m.useState(new Date().getMonth()+1),[X,ne]=m.useState(A),[Q,oe]=m.useState(!1),[ge,me]=m.useState(new Date().getMonth()+1),[H,L]=m.useState(A),he=b=>{u(b),C({name:b.name,contact_person:b.contact_person,email:b.email,phone:b.phone,address:b.address,status:b.status}),c(!0)},{toast:ie}=ya();Fe.useCallback(async()=>{try{r(!0);const b=ge,S=H,D=w,R=j,I=await(await ms(async()=>{const{DatabaseService:ce}=await Promise.resolve().then(()=>xs);return{DatabaseService:ce}},void 0)).DatabaseService.getAllGrocerySuppliers();s(I.map(ce=>({...ce,id:ce.id.toString(),createdAt:ce.created_at||ce.createdAt||""}))),me(b),L(S),g(D),N(R),ie({title:"Success",description:"Data refreshed successfully"})}catch(b){console.error("Refresh error:",b),ie({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[ge,H,w,j,ie]);const ke=async()=>{if(!E.name||!E.contact_person||!E.email||!E.phone){ie({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}try{const b=(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService;d?(await b.updateGrocerySupplier(d.id,{name:E.name,contact_person:E.contact_person,email:E.email,phone:E.phone,address:E.address,status:E.status}),ie({title:"Success",description:"Supplier updated successfully"})):(await b.addGrocerySupplier({name:E.name,contact_person:E.contact_person,email:E.email,phone:E.phone,address:E.address,status:E.status}),ie({title:"Success",description:"Supplier added successfully"})),i(),C({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"}),c(!1),u(null)}catch{ie({title:"Error",description:`Failed to ${d?"update":"add"} supplier`,variant:"destructive"})}},V=async b=>{y(b),p(!0)},O=async()=>{if(h)try{v(!0),await(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService.deleteGrocerySupplier(h.id),i(),p(!1),y(null),ie({title:"Success",description:"Supplier deleted successfully"})}catch{ie({title:"Error",description:"Failed to delete supplier",variant:"destructive"})}finally{v(!1)}},Y=()=>{try{const b=["S No","Date","Company Name","Contact Person","Email","Phone","Address","Status"],S=W.map((I,ce)=>{const de=I.createdAt;let ve="";if(de){let _e;if(de.includes("T")?_e=new Date(de):/^\d{4}-\d{2}-\d{2}$/.test(de)&&(_e=new Date(de+"T00:00:00")),_e&&!isNaN(_e.getTime())){const ze=String(_e.getDate()).padStart(2,"0"),be=String(_e.getMonth()+1).padStart(2,"0"),Me=_e.getFullYear();ve=`${ze}/${be}/${Me}`}else ve=de}return[ce+1,ve,`"${I.name}"`,`"${I.contact_person}"`,`"${I.email}"`,`"${I.phone}"`,`"${I.address||""}"`,I.status.charAt(0).toUpperCase()+I.status.slice(1)]}),D=[b,...S].map(I=>I.join(",")).join(`
`),R=new Blob([D],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");if(F.download!==void 0){const I=URL.createObjectURL(R);F.setAttribute("href",I);let ve=`grocery-suppliers-${new Date().toISOString().split("T")[0]}`;ge!==null&&H!==null&&(ve+=`-${k[ge-1]}-${H}`),j!=="all"&&(ve+=`-${j}`),w&&(ve+="-filtered"),F.setAttribute("download",`${ve}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F),ie({title:"Success",description:`CSV exported successfully! ${W.length} suppliers exported.`})}}catch(b){console.error("Export error:",b),ie({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},W=t.filter(b=>{var R,F,I,ce;const S=((R=b.name)==null?void 0:R.toLowerCase().includes(w.toLowerCase()))||((F=b.contact_person)==null?void 0:F.toLowerCase().includes(w.toLowerCase()))||((I=b.email)==null?void 0:I.toLowerCase().includes(w.toLowerCase()))||((ce=b.phone)==null?void 0:ce.toLowerCase().includes(w.toLowerCase()));let D=!0;if(j!=="all"&&(D=b.status===j),ge!==null&&H!==null){const de=b.createdAt;if(!de)return!1;let ve;if(de.includes("T"))ve=new Date(de);else if(/^\d{4}-\d{2}-\d{2}$/.test(de))ve=new Date(de+"T00:00:00");else return!1;return isNaN(ve.getTime())?!1:S&&D&&ve.getMonth()===ge-1&&ve.getFullYear()===H}return S&&D}).sort((b,S)=>{const D=parseInt(b.id)||0,R=parseInt(S.id)||0;return D-R}),[ue,U]=m.useState(1),z=10,te=Math.ceil(W.length/z),se=W.slice((ue-1)*z,ue*z),J=()=>U(b=>Math.max(1,b-1)),je=()=>U(b=>Math.min(te,b+1));return Fe.useEffect(()=>{U(1)},[w,t.length]),a?e.jsx("div",{className:"crm-page-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Ta,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Grocery Suppliers"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsx(Ht.MonthYear,{onClick:()=>oe(!0),text:k[T-1]}),e.jsxs(P,{onClick:Y,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered suppliers to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>{C({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"}),c(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Supplier"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Suppliers"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:W.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Ta,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Suppliers"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:W.filter(b=>b.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In service"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Critical Cases"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:W.filter(b=>b.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Inactive"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:W.filter(b=>b.email&&b.phone).length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search suppliers by name, contact person, email, or phone...",value:w,onChange:b=>g(b.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:j,onValueChange:N,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"}),e.jsx("div",{className:"px-2 py-1 border-t border-gray-200",children:e.jsxs(P,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>{N("all"),g(""),me(new Date().getMonth()),L(new Date().getFullYear()),M(new Date().getMonth()),ne(new Date().getFullYear())},children:[e.jsx(es,{className:"h-3 w-3 mr-2"}),"Reset All Filters"]})})]})]})})]})}),e.jsx($s,{open:Q,onOpenChange:oe,selectedMonth:T,selectedYear:X,onMonthChange:M,onYearChange:ne,onApply:()=>{me(T),L(X),oe(!1)},title:"Select Month & Year",description:"Filter suppliers by specific month and year",previewText:"suppliers"}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(Ta,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Suppliers List (",W.length,")"]}),e.jsxs("span",{className:"sm:hidden",children:["Suppliers (",W.length,")"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1200px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Company Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Contact Person"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Email"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Phone"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Address"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsxs(os,{children:[se.map((b,S)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ue-1)*z+S+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const D=b.createdAt;if(!D)return"";let R;if(D.includes("T"))R=new Date(D);else if(/^\d{4}-\d{2}-\d{2}$/.test(D))R=new Date(D+"T00:00:00");else return D;if(isNaN(R.getTime()))return D;const F=String(R.getDate()).padStart(2,"0"),I=String(R.getMonth()+1).padStart(2,"0"),ce=R.getFullYear();return`${F}/${I}/${ce}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:b.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b.contact_person}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ia,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:b.email})]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ps,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:b.phone})]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap max-w-[200px] truncate",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(mr,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:b.address||"-"})]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:b.status==="active"?"default":"secondary",className:`
                        ${b.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>he(b),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Supplier",children:e.jsx(Ds,{className:"h-4 w-4 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>V(b),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Supplier",children:e.jsx(mt,{className:"h-4 w-4 sm:h-4 sm:w-4"})})]})})]},b.id)),se.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"No suppliers found"})})]})]})}),te>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(ue-1)*z+1," to ",Math.min(ue*z,W.length)," of ",W.length," suppliers"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:J,disabled:ue===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(te,5)},(b,S)=>{let D;return te<=5||ue<=3?D=S+1:ue>=te-2?D=te-4+S:D=ue-2+S,e.jsx(P,{variant:ue===D?"default":"outline",size:"sm",onClick:()=>U(D),className:"h-8 w-8 p-0",children:D},D)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:je,disabled:ue===te,className:"h-8 px-3",children:"Next"})]})]})]}),e.jsx($t,{open:o,onOpenChange:c,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Ta,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:d?"Edit Supplier":"Add New Supplier"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:d?"Update supplier information":"Enter the details for the new grocery supplier"})]})]})}),e.jsxs("form",{onSubmit:b=>{b.preventDefault(),ke()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:E.name,onChange:b=>C({...E,name:b.target.value}),placeholder:"Enter company name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"contact_person",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),"Contact Person ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"contact_person",value:E.contact_person,onChange:b=>C({...E,contact_person:b.target.value}),placeholder:"Enter contact person name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"email",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"email",type:"email",value:E.email,onChange:b=>C({...E,email:b.target.value}),placeholder:"Enter email address",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"phone",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"phone",value:E.phone,onChange:b=>C({...E,phone:b.target.value}),placeholder:"Enter phone number",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group md:col-span-2",children:[e.jsxs(ae,{htmlFor:"address",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4"}),"Address"]}),e.jsx(As,{id:"address",value:E.address,onChange:b=>C({...E,address:b.target.value}),placeholder:"Enter company address (optional)",className:"editpopup form crm-edit-form-textarea",rows:3})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:E.status,onValueChange:b=>C({...E,status:b}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{c(!1),u(null),C({name:"",contact_person:"",email:"",phone:"",address:"",status:"active"})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(Ta,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),d?"Update Supplier":"Add Supplier"]})]})]})]})}),e.jsx($t,{open:x,onOpenChange:p,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Supplier"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this supplier? This action cannot be undone."})]})]})}),h&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mm,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:h.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:h.contact_person})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:h.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:h.phone})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{p(!1),y(null)},disabled:f,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:O,disabled:f,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:f?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Supplier"]})})]})]})})]})})};let UY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const JV=()=>{js("Grocery Stock Management");const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(!0),[i,o]=m.useState(0);Fe.useEffect(()=>{(async()=>{i>0&&console.log("Refreshing data...");try{const K=(await ms(async()=>{const{DatabaseService:ee}=await Promise.resolve().then(()=>xs);return{DatabaseService:ee}},void 0)).DatabaseService,De=await K.getAllGroceryProducts();s(De.map(ee=>({...ee,id:ee.id.toString(),productName:ee.name,currentStock:ee.current_stock||ee.quantity||0,usedStock:ee.used_stock||0,lastUpdate:ee.created_at||ee.last_update||"",purchaseDate:ee.purchase_date||ee.created_at||"",grId:`GR${ee.id.toString().padStart(4,"0")}`,category:ee.category||"N/A",supplier:ee.supplier||"N/A",price:ee.price||0,unit:ee.unit||"pcs",status:(()=>{const G=ee.current_stock||ee.quantity||0,le=ee.used_stock||0,fe=G-le;return fe<=0?"out-of-stock":fe<=10?"low-stock":"in-stock"})()})));const _=await K.getAllGroceryCategories();r(_.filter(ee=>ee.status==="active"))}catch(K){console.error("Error loading grocery stock:",K),s([]),r([])}finally{l(!1)}})()},[i]),Fe.useEffect(()=>{const K=setInterval(()=>{o(De=>De+1)},3e4);return()=>clearInterval(K)},[]);const c=Fe.useCallback(()=>{l(!0),o(K=>K+1)},[]),[d,u]=m.useState(!1),[x,p]=m.useState(null),[h,y]=m.useState(!1),[f,v]=m.useState(null),[w,g]=m.useState(!1),[j,N]=m.useState(null),[E,C]=m.useState(0),[k,A]=m.useState("in-stock"),[T,M]=m.useState(0),[X,ne]=m.useState(!1),[Q,oe]=m.useState(null),[ge,me]=m.useState([]),[H,L]=m.useState(!1),[he,ie]=m.useState(null),[ke,V]=m.useState(!1),[O,Y]=m.useState(!1),[W,ue]=m.useState(""),[U,z]=m.useState("all"),[te,se]=m.useState("all"),[J,je]=m.useState({productName:"",category:"",currentStock:0,usedStock:0,unit:"pcs",supplier:"",price:0}),b=["January","February","March","April","May","June","July","August","September","October","November","December"],S=new Date().getFullYear(),[D,R]=m.useState(new Date().getMonth()+1),[F,I]=m.useState(S),[ce,de]=m.useState(!1),[ve,_e]=m.useState(new Date().getMonth()+1),[ze,be]=m.useState(S),{toast:Me}=ya(),Je=K=>{if(!K)return"N/A";const De=new Date(K);if(!isNaN(De.getTime())){const _=String(De.getDate()).padStart(2,"0"),ee=String(De.getMonth()+1).padStart(2,"0"),G=De.getFullYear();return`${_}/${ee}/${G}`}if(/^\d{4}-\d{2}-\d{2}$/.test(K)){const[_,ee,G]=K.split("-");return`${G.padStart(2,"0")}/${ee.padStart(2,"0")}/${_}`}return K},vt=Fe.useCallback(async()=>{try{l(!0);const K=ve,De=ze,_=W,ee=U,G=te,le=(await ms(async()=>{const{DatabaseService:Ue}=await Promise.resolve().then(()=>xs);return{DatabaseService:Ue}},void 0)).DatabaseService,fe=await le.getAllGroceryProducts();s(fe.map(Ue=>({...Ue,id:Ue.id.toString(),productName:Ue.name,currentStock:Ue.current_stock||Ue.quantity||0,usedStock:Ue.used_stock||0,lastUpdate:Ue.created_at||Ue.last_update||"",purchaseDate:Ue.purchase_date||Ue.created_at||"",grId:`GR${Ue.id.toString().padStart(4,"0")}`,category:Ue.category||"N/A",supplier:Ue.supplier||"N/A",price:Ue.price||0,unit:Ue.unit||"pcs",status:(()=>{const at=Ue.current_stock||Ue.quantity||0,Ge=Ue.used_stock||0,Xe=at-Ge;return Xe<=0?"out-of-stock":Xe<=10?"low-stock":"in-stock"})()})));const ye=await le.getAllGroceryCategories();r(ye.filter(Ue=>Ue.status==="active")),_e(K),be(De),ue(_),z(ee),se(G),Me({title:"Success",description:"Data refreshed successfully"})}catch(K){console.error("Refresh error:",K),Me({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{l(!1)}},[ve,ze,W,U,te,Me]),Le=K=>{p(K),C(0),A(K.status),M(K.currentStock-K.usedStock),u(!0)},Ae=K=>K.currentStock-K.usedStock;Fe.useEffect(()=>{if(x){const K=x.currentStock-x.usedStock;M(K-E)}},[E,x]);const Ee=()=>{u(!1),p(null),C(0),A("in-stock"),M(0),je({productName:"",category:"",currentStock:0,usedStock:0,unit:"pcs",supplier:"",price:0})},Se=async K=>{try{console.log("Opening view modal for product:",K),console.log("Product properties:",{id:K.id,productName:K.productName,category:K.category,currentStock:K.currentStock,usedStock:K.usedStock,unit:K.unit,supplier:K.supplier,price:K.price,grId:K.grId}),oe(K),ne(!0),V(!0);const De=await rt(K.id);console.log("Loaded stock history:",De),me(De),V(!1)}catch(De){console.error("Error loading stock history:",De),V(!1),Me({title:"Error",description:"Failed to load product details",variant:"destructive"})}},B=(K,De)=>{if(console.log(" DEBUGGING USED STOCK CALCULATION"),console.log("History received:",K),console.log("Current used stock:",De),!K||K.length===0)return console.log(" No history found, returning current used stock:",De),De;const _=K.filter(G=>G.stock_after!==void 0&&G.stock_after!==null).map(G=>Number(G.stock_after));if(console.log(" Stock After values extracted:",_),_.length===0)return console.log(" No valid stock_after values found, returning current used stock:",De),De;const ee=_.reduce((G,le)=>(console.log(` Adding ${le} to sum (current sum: ${G})`),G+le),0);return console.log(" Final calculated total used stock:",ee),console.log(" END DEBUGGING"),ee},Ye=K=>{ie(K),L(!0)},Ne=async()=>{if(!(!he||!Q))try{const K=(await ms(async()=>{const{DatabaseService:G}=await Promise.resolve().then(()=>xs);return{DatabaseService:G}},void 0)).DatabaseService,De=he.stock_change||0,_=he.stock_type;if(await K.deleteGroceryStockHistoryRecord(he.id),_==="used"&&De>0){const le=(await K.getAllGroceryProducts()).find(fe=>fe.id.toString()===Q.id.toString());if(le){const fe=le.used_stock||0,ye=Math.max(0,fe-De);await K.updateGroceryStock(Q.id,{used_stock:ye,stock_status:ye===0?"in-stock":le.current_stock-ye<=10?"low-stock":"in-stock",last_update:new Date().toISOString().slice(0,19).replace("T"," ")}),console.log(`Deleted stock history: Reduced used_stock by ${De} units`),console.log(`New used_stock: ${ye}`)}}else if(_==="added"&&De>0){const le=(await K.getAllGroceryProducts()).find(fe=>fe.id.toString()===Q.id.toString());if(le){const fe=le.current_stock||0,ye=Math.max(0,fe-De);await K.updateGroceryStock(Q.id,{current_stock:ye,stock_status:ye===0?"out-of-stock":ye<=10?"low-stock":"in-stock",last_update:new Date().toISOString().slice(0,19).replace("T"," ")}),console.log(`Deleted stock history: Reduced current_stock by ${De} units`),console.log(`New current_stock: ${ye}`)}}Me({title:"Success",description:"Stock history record deleted and stock adjusted successfully",variant:"default"});const ee=await rt(Q.id);me(ee),await vt()}catch(K){console.error("Error deleting stock history:",K),Me({title:"Error",description:"Failed to delete stock history record",variant:"destructive"})}finally{L(!1),ie(null)}},rt=async K=>{try{console.log("Fetching stock history for product ID:",K);const _=await(await ms(async()=>{const{DatabaseService:ee}=await Promise.resolve().then(()=>xs);return{DatabaseService:ee}},void 0)).DatabaseService.getGroceryStockHistory(K);return console.log("Received history data:",_),_||[]}catch(De){return console.error("Error fetching stock history:",De),Me({title:"Warning",description:"Could not load stock history",variant:"destructive"}),[]}},Be=K=>{const De=(K.currentStock||0)-(K.usedStock||0);return De<=0?"out-of-stock":De<=10?"low-stock":"in-stock"},We=()=>{ne(!1),oe(null),me([]),V(!1)},ft=K=>{v(K),y(!0)},He=async()=>{if(!J.productName){Me({title:"Error",description:"Please enter a product name",variant:"destructive"});return}try{Y(!0);const K=(await ms(async()=>{const{DatabaseService:De}=await Promise.resolve().then(()=>xs);return{DatabaseService:De}},void 0)).DatabaseService;if(x){const De=x.currentStock,_=x.usedStock;await K.updateGroceryStock(x.id,{name:J.productName,category:J.category,current_stock:J.currentStock,used_stock:J.usedStock,unit:J.unit,supplier:J.supplier,price:J.price,last_update:new Date().toISOString().slice(0,19).replace("T"," ")});const ee=J.currentStock-De,G=J.usedStock-_;ee!==0&&await K.addGroceryStockHistoryRecord({product_id:x.id,stock_change:Math.abs(ee),stock_type:ee>0?"added":"adjusted",current_stock_before:De,current_stock_after:J.currentStock,update_date:new Date().toISOString().slice(0,19).replace("T"," "),description:`Stock ${ee>0?"added":"reduced"} - Manual Update`}),G!==0&&await K.addGroceryStockHistoryRecord({product_id:x.id,stock_change:Math.abs(G),stock_type:"used",current_stock_before:_,current_stock_after:J.usedStock,update_date:new Date().toISOString().slice(0,19).replace("T"," "),description:`Used stock ${G>0?"increased":"decreased"} - Manual Update`}),Me({title:"Success",description:"Stock updated successfully with history record",variant:"default"})}else{const De=await K.addGroceryProduct({name:J.productName,category:J.category,current_stock:J.currentStock,used_stock:J.usedStock,unit:J.unit,supplier:J.supplier,price:J.price,purchase_date:new Date().toISOString().slice(0,10),created_at:new Date().toISOString().slice(0,19).replace("T"," ")});J.currentStock>0&&await K.addGroceryStockHistoryRecord({product_id:De.id||De.insertId,stock_change:J.currentStock,stock_type:"added",current_stock_before:0,current_stock_after:J.currentStock,update_date:new Date().toISOString().slice(0,19).replace("T"," "),description:"Initial stock - Product Created"}),J.usedStock>0&&await K.addGroceryStockHistoryRecord({product_id:De.id||De.insertId,stock_change:J.usedStock,stock_type:"used",current_stock_before:0,current_stock_after:J.usedStock,update_date:new Date().toISOString().slice(0,19).replace("T"," "),description:"Initial used stock - Product Created"}),Me({title:"Success",description:"Stock added successfully with history record",variant:"default"})}await vt(),je({productName:"",category:"",currentStock:0,usedStock:0,unit:"pcs",supplier:"",price:0}),u(!1),p(null)}catch(K){console.error(`Error ${x?"updating":"adding"} stock:`,K),Me({title:"Error",description:`Failed to ${x?"update":"add"} stock. Please try again.`,variant:"destructive"})}finally{Y(!1)}},Ke=async()=>{if(f)try{Y(!0),await(await ms(async()=>{const{DatabaseService:De}=await Promise.resolve().then(()=>xs);return{DatabaseService:De}},void 0)).DatabaseService.deleteGroceryProduct(f.id),c(),y(!1),v(null),Me({title:"Success",description:"Stock deleted successfully"})}catch{Me({title:"Error",description:"Failed to delete stock",variant:"destructive"})}finally{Y(!1)}},Oe=()=>{try{const K=["S No","Date","GR ID","Product Name","Category","Current Stock","Used Stock","Balance","Unit","Supplier","Price","Status"],De=Ze.map((le,fe)=>{const ye=le.lastUpdate;let Ue="";if(ye){let Ge;if(ye.includes("T")?Ge=new Date(ye):/^\d{4}-\d{2}-\d{2}$/.test(ye)&&(Ge=new Date(ye+"T00:00:00")),Ge&&!isNaN(Ge.getTime())){const Xe=String(Ge.getDate()).padStart(2,"0"),tt=String(Ge.getMonth()+1).padStart(2,"0"),yt=Ge.getFullYear();Ue=`${Xe}/${tt}/${yt}`}else Ue=ye}const at=le.currentStock-le.usedStock;return[fe+1,Ue,le.grId,`"${le.productName}"`,`"${le.category}"`,le.currentStock,le.usedStock,at,le.unit,`"${le.supplier}"`,le.price,le.status.charAt(0).toUpperCase()+le.status.slice(1).replace("-"," ")]}),_=[K,...De].map(le=>le.join(",")).join(`
`),ee=new Blob([_],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a");if(G.download!==void 0){const le=URL.createObjectURL(ee);G.setAttribute("href",le);let Ue=`grocery-stock-${new Date().toISOString().split("T")[0]}`;ve!==null&&ze!==null&&(Ue+=`-${b[ve]}-${ze}`),U!=="all"&&(Ue+=`-${U}`),te!=="all"&&(Ue+=`-${te}`),W&&(Ue+="-filtered"),G.setAttribute("download",`${Ue}.csv`),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G),Me({title:"Success",description:`CSV exported successfully! ${Ze.length} products exported.`})}}catch(K){console.error("Export error:",K),Me({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},Ze=t.filter(K=>{var G,le,fe,ye;const De=((G=K.productName)==null?void 0:G.toLowerCase().includes(W.toLowerCase()))||((le=K.grId)==null?void 0:le.toLowerCase().includes(W.toLowerCase()))||((fe=K.category)==null?void 0:fe.toLowerCase().includes(W.toLowerCase()))||((ye=K.supplier)==null?void 0:ye.toLowerCase().includes(W.toLowerCase()));let _=!0;U!=="all"&&(_=K.category===U);let ee=!0;if(te!=="all"&&(ee=K.status===te),ve!==null&&ze!==null){const Ue=K.lastUpdate;if(!Ue)return!1;let at;if(Ue.includes("T"))at=new Date(Ue);else if(/^\d{4}-\d{2}-\d{2}$/.test(Ue))at=new Date(Ue+"T00:00:00");else return!1;return isNaN(at.getTime())?!1:De&&_&&ee&&at.getMonth()===ve-1&&at.getFullYear()===ze}return De&&_&&ee}).sort((K,De)=>{const _=parseInt(K.id)||0,ee=parseInt(De.id)||0;return _-ee}),[it,dt]=m.useState(1),xt=10,Wt=Math.ceil(Ze.length/xt),qt=Ze.slice((it-1)*xt,it*xt),bs=()=>dt(K=>Math.max(1,K-1)),Us=()=>dt(K=>Math.min(Wt,K+1));Fe.useEffect(()=>{dt(1)},[W,t.length]);const Ss=Ze.length,Ls=Ze.filter(K=>K.status==="in-stock").length,$e=Ze.filter(K=>K.status==="low-stock").length,we=Ze.filter(K=>K.status==="out-of-stock").length;return n?e.jsx("div",{className:"crm-page-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsxs("div",{className:"crm-page-bg",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Grocery Stock"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:n}),e.jsx(Ht.MonthYear,{onClick:()=>de(!0),text:b[D-1]}),e.jsxs(P,{onClick:Oe,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>{je({productName:"",category:"",currentStock:0,usedStock:0,unit:"pcs",supplier:"",price:0}),u(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Stock"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"In Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:Ls}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Low Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:$e}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(va,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Running Low"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(va,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Out of Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:we}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(ri,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Not Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(ri,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:Ss}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(Jt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"All Products"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Jt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search by product name, GR ID, category, or supplier...",value:W,onChange:K=>ue(K.target.value),className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:U,onValueChange:z,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Categories"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Categories"}),a.map(K=>e.jsx(Pe,{value:K.name,children:K.name},K.id))]})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:te,onValueChange:se,children:[e.jsx(Et,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"in-stock",children:"In Stock"}),e.jsx(Pe,{value:"low-stock",children:"Low Stock"}),e.jsx(Pe,{value:"out-of-stock",children:"Out of Stock"})]})]})})]})]})}),e.jsx($s,{open:ce,onOpenChange:de,selectedMonth:D,selectedYear:F,onMonthChange:R,onYearChange:I,onApply:()=>{_e(D),be(F),de(!1)},title:"Select Month & Year",description:"Filter stock by specific month and year",previewText:"products"}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Stock List (",Ze.length,")"]}),e.jsxs("span",{className:"sm:hidden",children:["Stock (",Ze.length,")"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1200px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"S No"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"GR ID"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Product Name"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Category"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Current Stock"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Used Stock"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Balance"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Status"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[qt.map((K,De)=>{const _=K.currentStock-K.usedStock;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(it-1)*xt+De+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Je(K.lastUpdate)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:K.grId}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm max-w-[200px] truncate",children:K.productName}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:K.category}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:[K.currentStock," ",K.unit]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:[K.usedStock," ",K.unit]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("span",{className:_===0?"text-red-600 font-medium":_<=5?"text-orange-600 font-medium":"text-green-600 font-medium",children:[_," ",K.unit]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:K.status==="in-stock"?"default":K.status==="low-stock"?"secondary":"destructive",className:`
                          ${K.status==="in-stock"?"bg-green-100 text-green-800 hover:bg-green-200":K.status==="low-stock"?"bg-orange-100 text-orange-800 hover:bg-orange-200":"bg-red-100 text-red-800 hover:bg-red-200"}
                        `,children:K.status==="in-stock"?"In Stock":K.status==="low-stock"?"Low Stock":"Out of Stock"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>Se(K),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Details with Glass Morphism",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>Le(K),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Stock",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ft(K),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Stock",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},K.id)}),qt.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:10,className:"text-center py-8 text-muted-foreground",children:"No stock items found"})})]})]})}),Wt>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(it-1)*xt+1," to ",Math.min(it*xt,Ze.length)," of ",Ze.length," products"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:bs,disabled:it===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Wt,5)},(K,De)=>{let _;return Wt<=5||it<=3?_=De+1:it>=Wt-2?_=Wt-4+De:_=it-2+De,e.jsx(P,{variant:it===_?"default":"outline",size:"sm",onClick:()=>dt(_),className:"h-8 w-8 p-0",children:_},_)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:Us,disabled:it===Wt,className:"h-8 px-3",children:"Next"})]})]})]}),e.jsx($t,{open:d,onOpenChange:u,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:x?"Edit Stock":"Add New Stock"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:x?"Update stock information and status":"Enter the details for the new stock item"})]})]})}),x?e.jsxs("div",{className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Product"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("div",{className:"text-sm font-medium text-blue-900",children:x.productName})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(tn,{className:"h-4 w-4"}),"Current Stock"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-blue-600",children:x.currentStock})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4"}),"Available Balance"]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-green-600",children:Ae(x)})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cr,{className:"h-4 w-4"}),"Additional Used Stock"]}),e.jsx(Ve,{type:"number",min:0,max:Ae(x),value:E,onChange:K=>{let De=Number(K.target.value);const _=Ae(x);De<0&&(De=0),De>_&&(De=_,console.warn(`Cannot use more than available balance stock (${_})`)),C(De)},className:"editpopup form crm-edit-form-input text-center"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Maximum available: ",Ae(x)," units"]}),e.jsxs("div",{className:"text-xs text-blue-600",children:["Enter additional stock to mark as used (will be added to current used stock: ",x.usedStock,")"]}),E>Ae(x)&&e.jsx("div",{className:"text-xs text-red-500",children:"Cannot exceed available balance stock"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Balance After Edit"]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"text-lg font-bold text-yellow-700",children:[T," ",(x==null?void 0:x.unit)||"units"]})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Stock Status"]}),e.jsxs(At,{value:k,onValueChange:K=>A(K),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"in-stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"In Stock"]})}),e.jsx(Pe,{value:"low-stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Low Stock"]})}),e.jsx(Pe,{value:"out-of-stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Out of Stock"]})})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:Ee,disabled:O,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{onClick:async()=>{if(!x)return Ee();console.log("Edit item:",x),console.log("Edit used stock:",E),console.log("Edit status:",k);const K=Ae(x);if(console.log("Available balance:",K),E>K){console.log("Validation failed: Used stock exceeds available balance"),Me({title:"Error",description:`Cannot use more than available balance stock (${K})`,variant:"destructive"});return}if(E<0){console.log("Validation failed: Used stock is negative"),Me({title:"Error",description:"Used stock cannot be negative",variant:"destructive"});return}console.log("Starting save operation..."),Y(!0);try{const De=(await ms(async()=>{const{DatabaseService:le}=await Promise.resolve().then(()=>xs);return{DatabaseService:le}},void 0)).DatabaseService,_=x.usedStock||0,ee=_+E;console.log("Current used stock:",_),console.log("New total used stock:",ee),E>0&&(console.log("Adding stock history record..."),await De.addGroceryStockHistoryRecord({product_id:x.id,stock_change:E,stock_type:"used",current_stock_before:x.currentStock-_,current_stock_after:x.currentStock-ee,update_date:new Date().toISOString().split("T")[0],description:`Stock usage: ${E} units used`}),console.log("Stock history record added successfully")),console.log("Updating grocery stock...");const G={used_stock:ee,stock_status:k,last_update:new Date().toISOString().slice(0,19).replace("T"," ")};console.log("Update data:",G),await De.updateGroceryStock(x.id,G),console.log("Grocery stock updated successfully"),Me({title:"Success",description:"Stock updated successfully",variant:"default"}),console.log("Closing edit popup..."),Ee(),console.log("Refreshing data..."),await vt(),console.log("Data refresh completed")}catch(De){console.error("Error saving stock:",De),Me({title:"Error",description:`Failed to save stock changes: ${De.message||De}`,variant:"destructive"})}finally{console.log("Save operation finished, setting submitting to false"),Y(!1)}},disabled:O,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-3 w-3 sm:h-4 sm:w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})})]})]}):e.jsxs("form",{onSubmit:K=>{K.preventDefault(),He()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"productName",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(fn,{className:"h-4 w-4"}),"Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"productName",value:J.productName,onChange:K=>je({...J,productName:K.target.value}),placeholder:"Enter product name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"category",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category"]}),e.jsxs(At,{value:J.category,onValueChange:K=>je({...J,category:K}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select category"})}),e.jsx(Dt,{children:a.map(K=>e.jsx(Pe,{value:K.name,children:K.name},K.id))})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"unit",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cr,{className:"h-4 w-4"}),"Unit"]}),e.jsxs(At,{value:J.unit,onValueChange:K=>je({...J,unit:K}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select unit"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"pcs",children:"Pieces"}),e.jsx(Pe,{value:"kg",children:"Kilograms"}),e.jsx(Pe,{value:"g",children:"Grams"}),e.jsx(Pe,{value:"l",children:"Liters"}),e.jsx(Pe,{value:"ml",children:"Milliliters"}),e.jsx(Pe,{value:"box",children:"Box"}),e.jsx(Pe,{value:"pack",children:"Pack"})]})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"currentStock",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(tn,{className:"h-4 w-4"}),"Current Stock"]}),e.jsx(Ve,{id:"currentStock",type:"number",min:"0",value:J.currentStock,onChange:K=>je({...J,currentStock:parseInt(K.target.value)||0}),placeholder:"Enter current stock",className:"editpopup form crm-edit-form-input text-center",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"usedStock",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cr,{className:"h-4 w-4"}),"Used Stock"]}),e.jsx(Ve,{id:"usedStock",type:"number",min:"0",max:J.currentStock,value:J.usedStock,onChange:K=>{let De=parseInt(K.target.value)||0;De<0&&(De=0),De>J.currentStock&&(De=J.currentStock),je({...J,usedStock:De})},placeholder:"Enter used stock",className:"editpopup form crm-edit-form-input text-center"})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"price",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Price"]}),e.jsx(Ve,{id:"price",type:"number",min:"0",step:"0.01",value:J.price,onChange:K=>je({...J,price:parseFloat(K.target.value)||0}),placeholder:"Enter price",className:"editpopup form crm-edit-form-input text-center"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"supplier",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Supplier"]}),e.jsx(Ve,{id:"supplier",value:J.supplier,onChange:K=>je({...J,supplier:K.target.value}),placeholder:"Enter supplier name",className:"editpopup form crm-edit-form-input"})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:Ee,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Add Stock"]})]})]})]})}),w&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>g(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx(fn,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${j.status==="in-stock"?"bg-green-100 text-green-800":j.status==="low-stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j.status==="in-stock"?"In Stock":j.status==="low-stock"?"Low Stock":"Out of Stock"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:j.productName})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Grocery ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:j.grId})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>g(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(fn,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Product Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(fn,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Product Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:j.productName})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:j.category})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:j.supplier})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Price per Unit"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",j.price]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Or,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Unit"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:j.unit})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(gr,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Purchase Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Je(j.purchaseDate)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-teal-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-teal-100 sm:col-span-2 lg:col-span-1",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-teal-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-teal-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-teal-600 uppercase tracking-wide",children:"Last Update"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Je(j.lastUpdate)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Stock Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(tn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:j.currentStock||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Current Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-red-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-red-600",children:j.usedStock||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-red-600 uppercase tracking-wide",children:"Used Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Or,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:(j.currentStock||0)-(j.usedStock||0)}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Available"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-purple-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(ri,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${j.status==="in-stock"?"bg-green-100 text-green-800":j.status==="low-stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j.status==="in-stock"?"In Stock":j.status==="low-stock"?"Low Stock":"Out of Stock"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-purple-600 uppercase tracking-wide mt-1",children:"Status"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(wr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Stock Movement History"]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[50px]",children:"S NO"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[80px]",children:"Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[90px]",children:"Stock Change"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[70px]",children:"Type"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[80px]",children:"Stock After"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[100px]",children:"Description"}),e.jsx(re,{className:"text-center font-semibold text-gray-700 min-w-[70px]",children:"Action"})]})}),e.jsx(os,{children:e.jsx(nt,{children:e.jsx(q,{colSpan:7,className:"text-center py-12 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(wr,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No stock history recorded yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Stock movement tracking will appear here"})]})]})})})})]})})]})]})})]})}),e.jsx($t,{open:h,onOpenChange:y,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Stock"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this stock? This action cannot be undone."})]})]})}),f&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fn,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:f.productName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:f.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["GR ID: ",f.grId]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:f.supplier})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{y(!1),v(null)},disabled:O,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:Ke,disabled:O,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:O?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Stock"]})})]})]})})]}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:We,children:Q?e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(fn,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${Be(Q)==="in-stock"?"bg-green-100 text-green-800":Be(Q)==="low-stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:Be(Q).replace("-"," ").replace(/\b\w/g,K=>K.toUpperCase())})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(fn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:(Q==null?void 0:Q.productName)||"Product Name"})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Product ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:(Q==null?void 0:Q.grId)||(Q==null?void 0:Q.id)||"N/A"})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:We,className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(fn,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Product Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(fn,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Product Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:(Q==null?void 0:Q.productName)||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:(Q==null?void 0:Q.category)||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:(Q==null?void 0:Q.supplier)||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Unit Price"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",(Q==null?void 0:Q.price)||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Or,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Unit"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:(Q==null?void 0:Q.unit)||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Purchase Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Je(Q==null?void 0:Q.purchaseDate)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Stock Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(tn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:(Q==null?void 0:Q.currentStock)||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Total Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-red-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-red-600",children:B(ge,(Q==null?void 0:Q.usedStock)||0)}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-red-600 uppercase tracking-wide",children:"Used Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center col-span-2 md:col-span-1",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:((Q==null?void 0:Q.currentStock)||0)-((Q==null?void 0:Q.usedStock)||0)}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Available Stock"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(wr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Stock Movement History"]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"S NO"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Change"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Type"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Stock After"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Description"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Action"})]})}),e.jsx(os,{children:ke?e.jsx(nt,{children:e.jsx(q,{colSpan:7,className:"text-center py-12 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Loading stock history..."})]})})}):ge.length===0?e.jsx(nt,{children:e.jsx(q,{colSpan:7,className:"text-center py-12 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(wr,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No stock movement records found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Stock history will appear here"})]})]})})}):ge.map((K,De)=>{const _=(()=>{const ee=new Date(K.update_date);if(isNaN(ee.getTime()))return K.update_date;const G=String(ee.getDate()).padStart(2,"0"),le=String(ee.getMonth()+1).padStart(2,"0"),fe=ee.getFullYear();return`${G}/${le}/${fe}`})();return e.jsxs(nt,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(q,{className:"text-center font-medium",children:De+1}),e.jsx(q,{className:"text-center",children:_}),e.jsx(q,{className:"text-center",children:e.jsxs("span",{className:K.stock_type==="used"?"text-red-600":"text-green-600",children:[K.stock_type==="used"?"-":"+",K.stock_change]})}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:K.stock_type==="used"?"destructive":"default",className:"capitalize",children:K.stock_type})}),e.jsx(q,{className:"text-center font-bold text-blue-600",children:K.current_stock_after}),e.jsx(q,{className:"text-center",children:K.description||"-"}),e.jsx(q,{className:"text-center",children:e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Ye(K),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete this history record",children:e.jsx(mt,{className:"h-3 w-3"})})})]},K.id||De)})})]})})]})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{children:"Loading product details..."})]})}),e.jsx($t,{open:H,onOpenChange:L,children:e.jsxs(Ot,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs(Bt,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ri,{className:"h-5 w-5"}),"Delete Stock History Record"]}),e.jsx(Vt,{children:"Are you sure you want to delete this stock history record? This action will also adjust the product's current stock values and cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(P,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),e.jsx(P,{variant:"destructive",onClick:Ne,children:"Delete Record"})]})]})})]})};let zY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};function Zj(t){if(!t)return"-";const s=new Date(t);if(!isNaN(s.getTime())){const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[a,r,n]=t.split("-");return`${n.padStart(2,"0")}/${r.padStart(2,"0")}/${a}`}return t}const KV=[{value:"upi",label:"UPI"},{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"neft",label:"NEFT"}],XV=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const B=await gt.getAllGroceryProducts();s(B)}catch{}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const B=setInterval(()=>{l(Ye=>Ye+1)},3e4);return()=>clearInterval(B)},[]);const i=Fe.useCallback(()=>{r(!0),l(B=>B+1)},[]),[o,c]=m.useState(!1),[d,u]=m.useState(""),[x,p]=m.useState("all"),[h,y]=m.useState(!1),[f,v]=m.useState(null),[w,g]=m.useState([]),[j,N]=m.useState(!1),[E,C]=m.useState(null),[k,A]=m.useState(""),[T,M]=m.useState(""),[X,ne]=m.useState(""),[Q,oe]=m.useState(""),[ge,me]=m.useState(""),[H,L]=m.useState(""),[he,ie]=m.useState("pending"),ke=["January","February","March","April","May","June","July","August","September","October","November","December"],V=new Date().getFullYear(),[O,Y]=m.useState(new Date().getMonth()+1),[W,ue]=m.useState(V),[U,z]=m.useState(!1),[te,se]=m.useState(new Date().getMonth()+1),[J,je]=m.useState(V),{toast:b}=ya();Fe.useCallback(async()=>{try{r(!0);const B=te,Ye=J,Ne=d,rt=x,Be=await gt.getAllGroceryProducts();s(Be),se(B),je(Ye),u(Ne),p(rt),b({title:"Success",description:"Data refreshed successfully"})}catch(B){console.error("Refresh error:",B),b({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[te,J,d,x,b]);const S=async B=>{try{v(B);const Ye=await gt.getGrocerySettlementHistory(B.id);Ye.sort((Ne,rt)=>Ne.payment_date?rt.payment_date?new Date(Ne.payment_date).getTime()-new Date(rt.payment_date).getTime():1:-1),g(Ye),y(!0)}catch(Ye){console.error("Error loading settlement history:",Ye),b({title:"Error",description:"Failed to load settlement history",variant:"destructive"})}},D=B=>{C(B),A(B.purchase_date||""),M(B.payment_type||""),ie(B.payment_status||"pending");const Ye=Number(B.purchase_amount||0),Ne=Number(B.settlement_amount||0),rt=Number(B.balance_amount||0);ne(Ne.toString()),oe(Ye.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2})),me(rt.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2})),L(""),N(!0)},R=async()=>{if(!E){N(!1);return}try{c(!0);const B={purchase_date:k,payment_type:T,payment_status:he};await gt.updateGroceryProduct(E.id,B);const Ye=Number(H);if(Ye>0){const Ne={product_id:E.id,product_name:E.name,category:E.category,supplier:E.supplier,amount:Ye,payment_date:k,payment_type:T,description:`Payment for ${E.name}`};await gt.addGrocerySettlementRecord(Ne)}b({title:"Success",description:"Transaction updated successfully"}),N(!1),i()}catch(B){console.error("Error saving transaction:",B),b({title:"Error",description:"Failed to save transaction",variant:"destructive"})}finally{c(!1)}},F=B=>{let Ye=B.target.value.replace(/[^\d.]/g,""),Ne=Number(Ye);if((isNaN(Ne)||Ne<0)&&(Ne=0),E){const rt=Number(E.purchase_amount||0),Be=Number(E.settlement_amount||0),We=rt-Be;Ne>We&&(b({title:"Error",description:"Amount Payment cannot exceed the Balance Amount.",variant:"destructive"}),Ne=We),L(Ne.toString());const ft=Be+Ne,He=rt-ft;ne(ft.toString()),me(He.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}))}else L(Ne.toString())},I=async B=>{if(window.confirm("Are you sure you want to delete this settlement record?"))try{c(!0);const Ye=w[B];Ye&&Ye.id&&(await gt.deleteGrocerySettlementRecord(Ye.id),b({title:"Success",description:"Settlement record deleted successfully"}),g(Ne=>{const rt=[...Ne];return rt.splice(B,1),rt}),i())}catch(Ye){console.error("Error deleting settlement:",Ye),b({title:"Error",description:"Failed to delete settlement record",variant:"destructive"})}finally{c(!1)}},ce=B=>{switch(B){case"completed":return"default";case"pending":return"destructive";case"cancelled":return"secondary";default:return"default"}},de=()=>{try{const B=["S No","ID No","Product Name","Category","Supplier","Quantity","Rate","Purchase Amount","Settlement Amount","Balance Amount","Status","Payment Type"],Ye=ve.map((We,ft)=>{var dt;const He=typeof We.id=="number"?`GR${We.id.toString().padStart(4,"0")}`:(dt=We.id)!=null&&dt.toString().startsWith("GR")?We.id:`GR${We.id}`,Ke=Number(We.purchase_amount||0),Oe=Number(We.settlement_amount||0),Ze=Number(We.balance_amount||0),it=We.payment_status||"pending";return[ft+1,He,`"${We.name}"`,`"${We.category}"`,`"${We.supplier||"-"}"`,We.quantity,`${Number(We.price).toFixed(2)}`,`${Ke.toFixed(2)}`,`${Oe.toFixed(2)}`,`${Ze.toFixed(2)}`,it.charAt(0).toUpperCase()+it.slice(1),We.payment_type||"-"]}),Ne=[B,...Ye].map(We=>We.join(",")).join(`
`),rt=new Blob([Ne],{type:"text/csv;charset=utf-8;"}),Be=document.createElement("a");if(Be.download!==void 0){const We=URL.createObjectURL(rt);Be.setAttribute("href",We);let Ke=`grocery-accounts-${new Date().toISOString().split("T")[0]}`;te!==null&&J!==null&&(Ke+=`-${ke[te]}-${J}`),x!=="all"&&(Ke+=`-${x}`),d&&(Ke+="-filtered"),Be.setAttribute("download",`${Ke}.csv`),Be.style.visibility="hidden",document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),b({title:"Success",description:`CSV exported successfully! ${ve.length} transactions exported.`})}}catch(B){console.error("Export error:",B),b({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},ve=t.filter(B=>{const Ye=B.payment_status||"pending",Ne=(B.name||"").toLowerCase().includes(d.toLowerCase())||(B.category||"").toLowerCase().includes(d.toLowerCase())||(B.supplier||"").toLowerCase().includes(d.toLowerCase()),rt=x==="all"||Ye===x;if(te!==null&&J!==null){const Be=B.purchase_date;if(!Be)return!1;const We=new Date(Be);return isNaN(We.getTime())?!1:Ne&&rt&&We.getMonth()===te-1&&We.getFullYear()===J}return Ne&&rt}),[_e,ze]=m.useState(1),be=10,Me=Math.ceil(ve.length/be),Je=ve.slice((_e-1)*be,_e*be),vt=()=>ze(B=>Math.max(1,B-1)),Le=()=>ze(B=>Math.min(Me,B+1));Fe.useEffect(()=>{ze(1)},[d,t.length,x]);let Ae=0,Ee=0,Se=0;return t.forEach(B=>{const Ye=Number(B.purchase_amount||0),Ne=Number(B.settlement_amount||0),rt=Number(B.balance_amount||0);Ae+=Ye,Ee+=Ne,Se+=rt}),a?e.jsx("div",{className:"crm-page-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(es,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading..."})]})})})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Grocery Accounts"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsx(Ht.MonthYear,{onClick:()=>z(!0),text:ke[O-1]}),e.jsxs(P,{onClick:de,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Purchase"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:["",Ae.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"All Purchases"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Settlement"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:["",Ee.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(va,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Completed"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(va,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Balance Amount"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:["",Se.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(It,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Pending"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(It,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{placeholder:"Search transactions by name, category, or supplier...",value:d,onChange:B=>u(B.target.value),className:"pl-10 border-gray-300 focus:border-green-500 focus:ring-green-500"})]})}),e.jsx("div",{className:"w-full sm:w-40",children:e.jsxs(At,{value:x,onValueChange:p,children:[e.jsx(Et,{className:"border-gray-300 focus:border-green-500 focus:ring-green-500",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"completed",children:"Completed"}),e.jsx(Pe,{value:"pending",children:"Pending"}),e.jsx(Pe,{value:"cancelled",children:"Cancelled"})]})]})})]})}),e.jsx($s,{open:U,onOpenChange:z,selectedMonth:O,selectedYear:W,onMonthChange:Y,onYearChange:ue,onApply:()=>{se(O),je(W),z(!1)},title:"Select Month & Year",description:"Filter accounts by specific month and year",previewText:"transactions"}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-xl shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center text-base sm:text-lg font-semibold text-gray-900",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Transaction History (",ve.length,")"]}),e.jsxs("span",{className:"sm:hidden",children:["Transactions (",ve.length,")"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1600px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"S No"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"ID No"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Product Name"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Category"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Supplier"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Quantity"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Rate"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Purchase Amount"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Settlement Amount"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Balance Amount"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Payment Type"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[Je.map((B,Ye)=>{var Ke;const Ne=B.payment_status||"pending",rt=Number(B.purchase_amount||0),Be=Number(B.settlement_amount||0),We=Number(B.balance_amount||0),ft=(_e-1)*be+Ye+1,He=typeof B.id=="number"?`GR${B.id.toString().padStart(4,"0")}`:(Ke=B.id)!=null&&Ke.toString().startsWith("GR")?B.id:`GR${B.id}`;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:ft}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:He}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:B.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:B.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:B.supplier}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:B.quantity}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",Number(B.price).toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:["",rt.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",Be.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",We.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:ce(Ne),children:Ne.charAt(0).toUpperCase()+Ne.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:B.payment_type||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>S(B),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Settlement History",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>D(B),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Transaction",children:e.jsx(Kn,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},B.id)}),Je.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:13,className:"text-center py-8 text-muted-foreground",children:"No transactions found"})})]})]})}),Me>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(_e-1)*be+1," to ",Math.min(_e*be,ve.length)," of ",ve.length," transactions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:vt,disabled:_e===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(Me,5)},(B,Ye)=>{let Ne;return Me<=5||_e<=3?Ne=Ye+1:_e>=Me-2?Ne=Me-4+Ye:Ne=_e-2+Ye,e.jsx(P,{variant:_e===Ne?"default":"outline",size:"sm",onClick:()=>ze(Ne),className:"h-8 w-8 p-0",children:Ne},Ne)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:Le,disabled:_e===Me,className:"h-8 px-3",children:"Next"})]})]})]}),h&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>y(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx(Wn,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${f.status==="paid"?"bg-green-100 text-green-800":f.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:f.status?f.status.charAt(0).toUpperCase()+f.status.slice(1):"Pending"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(ts,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:f.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Product ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:f.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>y(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(fn,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Product Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(fn,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Product Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:f.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:f.category})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:f.supplier})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Unit Price"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",f.price||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(tn,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Quantity"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:f.quantity||0})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(gr,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Purchase Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Zj(f.purchase_date)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Account Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Wn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:["",f.total_amount?Number(f.total_amount).toLocaleString("en-IN"):(Number(f.price||0)*Number(f.quantity||0)).toLocaleString("en-IN")]}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Purchase Amount"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(so,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:["",f.settlement_amount?Number(f.settlement_amount).toLocaleString("en-IN"):"0"]}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Settlement Amount"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-red-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600"})}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-red-600",children:["",f.balance_amount?Number(f.balance_amount).toLocaleString("en-IN"):(Number(f.price||0)*Number(f.quantity||0)-Number(f.settlement_amount||0)).toLocaleString("en-IN")]}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-red-600 uppercase tracking-wide",children:"Balance Amount"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-purple-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${f.status==="paid"?"bg-green-100 text-green-800":f.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:f.status?f.status.charAt(0).toUpperCase()+f.status.slice(1):"Pending"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-purple-600 uppercase tracking-wide mt-1",children:"Status"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(wr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Settlement History"]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"S NO"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Payment Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Amount Paid"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Payment Type"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Action"})]})}),e.jsx(os,{children:w.length===0?e.jsx(nt,{children:e.jsx(q,{colSpan:5,className:"text-center py-12 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(ts,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No payment records found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Payment history will appear here"})]})]})})}):w.map((B,Ye)=>{const Ne=Zj(B.payment_date);return e.jsxs(nt,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(q,{className:"text-center font-medium",children:Ye+1}),e.jsx(q,{className:"text-center",children:Ne}),e.jsxs(q,{className:"text-center font-bold text-green-600",children:["",Number(B.amount||0).toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:B.payment_type||"Cash"})}),e.jsx(q,{className:"text-center",children:e.jsx(P,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300",title:"Delete Payment Record",onClick:()=>I(Ye),disabled:o,children:e.jsx(mt,{className:"h-4 w-4"})})})]},Ye)})})]})})]})]})})]})}),e.jsx($t,{open:j,onOpenChange:N,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Transaction"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update payment details and settlement information"})]})]})}),e.jsxs("form",{onSubmit:B=>{B.preventDefault(),R()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4"}),"Product"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("div",{className:"text-sm font-medium text-blue-900",children:(E==null?void 0:E.name)||"Product"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editDate",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Date"]}),e.jsx(Ve,{id:"editDate",type:"date",value:k,onChange:B=>A(B.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editPaymentType",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Payment Type"]}),e.jsxs(At,{value:T,onValueChange:M,children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsx(Dt,{children:KV.map(B=>e.jsx(Pe,{value:B.value,children:B.label},B.value))})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4"}),"Purchase Amount"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-blue-600",children:Q})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Wn,{className:"h-4 w-4"}),"Settlement Amount"]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-green-600",children:X})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editAmountPayment",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(so,{className:"h-4 w-4"}),"Amount Payment"]}),e.jsx(Ve,{id:"editAmountPayment",type:"number",min:0,max:E?Number(E.price||0)*Number(E.quantity||0):void 0,value:H,onChange:F,placeholder:"Enter new payment amount",className:"editpopup form crm-edit-form-input text-center"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enter the amount you want to pay now."})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Balance Amount"]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-yellow-700",children:ge})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Transaction Status"]}),e.jsxs(At,{value:he,onValueChange:B=>ie(B),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"pending",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Pending"]})}),e.jsx(Pe,{value:"completed",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Completed"]})}),e.jsx(Pe,{value:"cancelled",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Cancelled"]})})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>N(!1),disabled:o,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:o,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:o?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})})]})]})]})})]})})};let YY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const QV=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const I=await(await ms(async()=>{const{DatabaseService:ce}=await Promise.resolve().then(()=>xs);return{DatabaseService:ce}},void 0)).DatabaseService.getAllGeneralProducts();s(I.map(ce=>({...ce,id:ce.id.toString(),createdAt:ce.created_at||ce.createdAt||"",purchaseDate:ce.purchase_date||ce.purchaseDate||""})))}catch{}finally{r(!1)}})()},[n]);const[i,o]=m.useState([]),[c,d]=m.useState([]);Fe.useEffect(()=>{(async()=>{try{const F=(await ms(async()=>{const{DatabaseService:de}=await Promise.resolve().then(()=>xs);return{DatabaseService:de}},void 0)).DatabaseService,[I,ce]=await Promise.all([F.getAllGeneralCategories(),F.getAllGeneralSuppliers()]);o(I),d(ce)}catch{}})()},[n]),Fe.useEffect(()=>{const I=setTimeout(async()=>{if(!(i.length===0||c.length===0||t.length===0))try{const ce=(await ms(async()=>{const{DatabaseService:ve}=await Promise.resolve().then(()=>xs);return{DatabaseService:ve}},void 0)).DatabaseService;let de=!1;for(const ve of t){let _e=!1,ze={};const be=i.find(Je=>Je.status==="active"&&(Je.name.toLowerCase().includes(ve.category.toLowerCase())||ve.category.toLowerCase().includes(Je.name.toLowerCase())));be&&be.name!==ve.category&&(ze.category=be.name,_e=!0);const Me=c.find(Je=>Je.status==="active"&&(Je.name.toLowerCase().includes(ve.supplier.toLowerCase())||ve.supplier.toLowerCase().includes(Je.name.toLowerCase())));Me&&Me.name!==ve.supplier&&(ze.supplier=Me.name,_e=!0),_e&&(await ce.updateGeneralProduct(ve.id,ze),de=!0)}de&&setTimeout(()=>{u()},500)}catch(ce){console.error("Auto-fix names error:",ce)}},1e3);return()=>clearTimeout(I)},[i,c,t]),Fe.useEffect(()=>{const F=setInterval(()=>{l(I=>I+1)},3e4);return()=>clearInterval(F)},[]);const u=Fe.useCallback(()=>{r(!0),l(F=>F+1)},[]),[x,p]=m.useState(!1),[h,y]=m.useState(null),[f,v]=m.useState(!1),[w,g]=m.useState(null),[j,N]=m.useState(!1),[E,C]=m.useState(""),[k,A]=m.useState("all"),[T,M]=m.useState({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]}),X=["January","February","March","April","May","June","July","August","September","October","November","December"],ne=new Date().getFullYear(),[Q,oe]=m.useState(new Date().getMonth()+1),[ge,me]=m.useState(ne),[H,L]=m.useState(!1),[he,ie]=m.useState(new Date().getMonth()+1),[ke,V]=m.useState(ne),O=F=>{y(F),M({name:F.name,description:F.description,category:F.category,supplier:F.supplier,price:F.price.toString(),quantity:F.quantity.toString(),purchaseDate:F.purchaseDate||F.createdAt||new Date().toISOString().split("T")[0]}),p(!0)},{toast:Y}=ya();Fe.useCallback(async()=>{try{r(!0);const F=he,I=ke,ce=E,de=k,ve=(await ms(async()=>{const{DatabaseService:Me}=await Promise.resolve().then(()=>xs);return{DatabaseService:Me}},void 0)).DatabaseService,[_e,ze,be]=await Promise.all([ve.getAllGeneralProducts(),ve.getAllGeneralCategories(),ve.getAllGeneralSuppliers()]);s(_e.map(Me=>({...Me,id:Me.id.toString(),createdAt:Me.created_at||Me.createdAt||"",purchaseDate:Me.purchase_date||Me.purchaseDate||""}))),o(ze),d(be),ie(F),V(I),C(ce),A(de),Y({title:"Success",description:"Data refreshed successfully"})}catch(F){console.error("Refresh error:",F),Y({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[he,ke,E,k,Y]);const W=async()=>{if(!T.name||!T.category||!T.supplier||!T.price||!T.quantity||!T.purchaseDate){Y({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}try{const F=(await ms(async()=>{const{DatabaseService:ce}=await Promise.resolve().then(()=>xs);return{DatabaseService:ce}},void 0)).DatabaseService,I=parseInt(T.quantity);h?(await F.updateGeneralProduct(h.id,{name:T.name,description:T.description,category:T.category,supplier:T.supplier,price:parseFloat(T.price),quantity:I,current_stock:I,status:"active",purchaseDate:T.purchaseDate}),Y({title:"Success",description:"Product updated successfully"})):(await F.addGeneralProduct({name:T.name,description:T.description,category:T.category,supplier:T.supplier,price:parseFloat(T.price),quantity:I,current_stock:I,status:"active",purchaseDate:T.purchaseDate}),Y({title:"Success",description:"Product added successfully"})),u(),M({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]}),p(!1),y(null)}catch{Y({title:"Error",description:`Failed to ${h?"update":"add"} product`,variant:"destructive"})}},ue=async F=>{g(F),v(!0)},U=async()=>{if(w)try{N(!0),await(await ms(async()=>{const{DatabaseService:I}=await Promise.resolve().then(()=>xs);return{DatabaseService:I}},void 0)).DatabaseService.deleteGeneralProduct(w.id),u(),v(!1),g(null),Y({title:"Success",description:"Product deleted successfully"})}catch{Y({title:"Error",description:"Failed to delete product",variant:"destructive"})}finally{N(!1)}},z=()=>{try{const F=["S No","Date","Name","Category","Supplier","Price","Quantity","Status","Description"],I=te.map((_e,ze)=>{const be=_e.purchaseDate||_e.createdAt;let Me="";if(be){let Je;if(be.includes("T")?Je=new Date(be):/^\d{4}-\d{2}-\d{2}$/.test(be)&&(Je=new Date(be+"T00:00:00")),Je&&!isNaN(Je.getTime())){const vt=String(Je.getDate()).padStart(2,"0"),Le=String(Je.getMonth()+1).padStart(2,"0"),Ae=Je.getFullYear();Me=`${vt}/${Le}/${Ae}`}else Me=be}return[ze+1,Me,`"${_e.name}"`,`"${_e.category}"`,`"${_e.supplier}"`,`${_e.price.toLocaleString("en-IN")}`,_e.quantity,_e.status.charAt(0).toUpperCase()+_e.status.slice(1),`"${_e.description||""}"`]}),ce=[F,...I].map(_e=>_e.join(",")).join(`
`),de=new Blob([ce],{type:"text/csv;charset=utf-8;"}),ve=document.createElement("a");if(ve.download!==void 0){const _e=URL.createObjectURL(de);ve.setAttribute("href",_e);let Me=`general-products-${new Date().toISOString().split("T")[0]}`;he!==null&&ke!==null&&(Me+=`-${X[he]}-${ke}`),k!=="all"&&(Me+=`-${k}`),E&&(Me+="-filtered"),ve.setAttribute("download",`${Me}.csv`),ve.style.visibility="hidden",document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),Y({title:"Success",description:`CSV exported successfully! ${te.length} products exported.`})}}catch(F){console.error("Export error:",F),Y({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},te=t.filter(F=>{var de,ve,_e;const I=((de=F.name)==null?void 0:de.toLowerCase().includes(E.toLowerCase()))||((ve=F.category)==null?void 0:ve.toLowerCase().includes(E.toLowerCase()))||((_e=F.supplier)==null?void 0:_e.toLowerCase().includes(E.toLowerCase()));let ce=!0;if(k!=="all"&&(k==="low-stock"?ce=F.quantity<10:ce=F.status===k),he!==null&&ke!==null){const ze=F.purchaseDate||F.createdAt;if(!ze)return!1;let be;if(ze.includes("T"))be=new Date(ze);else if(/^\d{4}-\d{2}-\d{2}$/.test(ze))be=new Date(ze+"T00:00:00");else return!1;return isNaN(be.getTime())?!1:I&&ce&&be.getMonth()===he-1&&be.getFullYear()===ke}return I&&ce}).sort((F,I)=>{const ce=parseInt(F.id)||0,de=parseInt(I.id)||0;return ce-de}),[se,J]=m.useState(1),je=10,b=Math.ceil(te.length/je),S=te.slice((se-1)*je,se*je),D=()=>J(F=>Math.max(1,F-1)),R=()=>J(F=>Math.min(b,F+1));return Fe.useEffect(()=>{J(1)},[E,t.length]),a?e.jsx(Gr,{message:"Loading general management data..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"General Products"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsxs(P,{type:"button",onClick:z,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered products to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsx(Ht.MonthYear,{onClick:()=>L(!0),text:X[Q-1]}),e.jsxs(P,{type:"button",onClick:()=>{M({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]}),p(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Product"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:te.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In inventory"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Jt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:te.filter(F=>F.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Low Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:te.filter(F=>F.quantity<10).length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Need restock"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:te.filter(F=>F.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Discontinued"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name, category, or supplier...",value:E,onChange:F=>C(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:k,onValueChange:A,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"}),e.jsx(Pe,{value:"low-stock",children:"Low Stock"}),e.jsx("div",{className:"px-2 py-1 border-t border-gray-200",children:e.jsxs(P,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>{A("all"),C(""),ie(new Date().getMonth()),V(new Date().getFullYear()),oe(new Date().getMonth()),me(new Date().getFullYear())},children:[e.jsx(bl,{className:"h-3 w-3 mr-2"}),"Reset All Filters"]})})]})]})})]})}),e.jsx($s,{open:H,onOpenChange:L,selectedMonth:Q,selectedYear:ge,onMonthChange:oe,onYearChange:me,onApply:()=>{ie(Q),V(ge),L(!1)},title:"Select Month & Year",description:"Filter products by specific month and year",previewText:"products"}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Jt,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Products List (",te.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Products (",te.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1200px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Category"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Supplier"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Price"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsxs(os,{children:[S.map((F,I)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(se-1)*je+I+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const ce=F.purchaseDate||F.createdAt;if(!ce)return"";let de;if(ce.includes("T"))de=new Date(ce);else if(/^\d{4}-\d{2}-\d{2}$/.test(ce))de=new Date(ce+"T00:00:00");else return ce;if(isNaN(de.getTime()))return ce;const ve=String(de.getDate()).padStart(2,"0"),_e=String(de.getMonth()+1).padStart(2,"0"),ze=de.getFullYear();return`${ve}/${_e}/${ze}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:F.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:F.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:F.supplier}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",F.price.toLocaleString("en-IN")]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:F.status==="active"?"default":"secondary",className:`
                        ${F.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:F.status.charAt(0).toUpperCase()+F.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>O(F),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Product",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ue(F),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Product",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},F.id)),S.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No products found"})})]})]})}),b>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(se-1)*je+1," to ",Math.min(se*je,te.length)," of ",te.length," products"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:D,disabled:se===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(b,5)},(F,I)=>{let ce;return b<=5||se<=3?ce=I+1:se>=b-2?ce=b-4+I:ce=se-2+I,e.jsx(P,{variant:se===ce?"default":"outline",size:"sm",onClick:()=>J(ce),className:"h-8 w-8 p-0",children:ce},ce)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:R,disabled:se===b,className:"h-8 px-3",children:"Next"})]})]})]})]}),e.jsx($t,{open:x,onOpenChange:p,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:h?"Edit Product":"Add New Product"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:h?"Update product information":"Enter the details for the new general product"})]})]})}),e.jsxs("form",{onSubmit:F=>{F.preventDefault(),W()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:T.name,onChange:F=>M({...T,name:F.target.value}),placeholder:"Enter product name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"category",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:T.category,onValueChange:F=>M({...T,category:F}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select category"})}),e.jsx(Dt,{children:(()=>{const F=i.filter(I=>I.status==="active");return F.length===0?e.jsx(Pe,{value:"__no_category__",disabled:!0,children:"No Categories Found"}):F.filter(I=>I.name&&I.name!=="").map(I=>e.jsx(Pe,{value:I.name,children:I.name},I.id||I.name))})()})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"supplier",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Supplier ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:T.supplier,onValueChange:F=>M({...T,supplier:F}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select supplier"})}),e.jsx(Dt,{children:(()=>{const F=c.filter(I=>I.status==="active");return F.length===0?e.jsx(Pe,{value:"__no_supplier__",disabled:!0,children:"No Suppliers Found"}):F.filter(I=>I.name&&I.name!=="").map(I=>e.jsx(Pe,{value:I.name,children:I.name},I.id||I.name))})()})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"price",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"price",type:"number",step:"0.01",value:T.price,onChange:F=>M({...T,price:F.target.value}),placeholder:"Enter price",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"quantity",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4"}),"Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"quantity",type:"number",value:T.quantity,onChange:F=>M({...T,quantity:F.target.value}),placeholder:"Enter quantity",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"purchaseDate",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Purchase Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"purchaseDate",type:"date",value:T.purchaseDate,onChange:F=>M({...T,purchaseDate:F.target.value}),placeholder:"Select purchase date",className:"editpopup form crm-edit-form-input",required:!0})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:T.description,onChange:F=>M({...T,description:F.target.value}),placeholder:"Enter product description (optional)",className:"editpopup form crm-edit-form-textarea",rows:3})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{p(!1),y(null),M({name:"",description:"",category:"",supplier:"",price:"",quantity:"",purchaseDate:new Date().toISOString().split("T")[0]})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(gr,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),h?"Update Product":"Add Product"]})]})]})]})}),e.jsx($t,{open:f,onOpenChange:v,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Product"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this product? This action cannot be undone."})]})]})}),w&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Category: ",w.category]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Supplier: ",w.supplier]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Price: ",w.price.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Quantity: ",w.quantity]})]}),w.description&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:w.description})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{v(!1),g(null)},disabled:j,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:U,disabled:j,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:j?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Product"]})})]})]})})]})})};let HY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};const ZV=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const R=await(await ms(async()=>{const{DatabaseService:F}=await Promise.resolve().then(()=>xs);return{DatabaseService:F}},void 0)).DatabaseService.getAllGeneralCategories();s(R.map(F=>({...F,id:F.id.toString(),createdAt:F.created_at||F.createdAt||"",productCount:F.productCount||0})))}catch(D){console.error("Error loading categories:",D)}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const D=setInterval(()=>{l(R=>R+1)},3e4);return()=>clearInterval(D)},[]),Fe.useCallback(()=>{r(!0),l(D=>D+1)},[]);const[i,o]=m.useState(!1),[c,d]=m.useState(null),[u,x]=m.useState(null),[p,h]=m.useState(!1),[y,f]=m.useState(null),[v,w]=m.useState(!1),[g,j]=m.useState(""),[N,E]=m.useState("all"),[C,k]=m.useState({name:"",description:"",status:"active"}),A=["January","February","March","April","May","June","July","August","September","October","November","December"],T=new Date().getFullYear(),[M,X]=m.useState(new Date().getMonth()+1),[ne,Q]=m.useState(T),[oe,ge]=m.useState(!1),[me,H]=m.useState(new Date().getMonth()+1),[L,he]=m.useState(T),{toast:ie}=ya();Fe.useCallback(async()=>{try{r(!0);const D=me,R=L,F=g,I=N,de=await(await ms(async()=>{const{DatabaseService:ve}=await Promise.resolve().then(()=>xs);return{DatabaseService:ve}},void 0)).DatabaseService.getAllGeneralCategories();s(de.map(ve=>({...ve,id:ve.id.toString(),createdAt:ve.created_at||ve.createdAt||"",productCount:ve.productCount||0}))),H(D),he(R),j(F),E(I),ie({title:"Success",description:"Data refreshed successfully"})}catch(D){console.error("Refresh error:",D),ie({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[me,L,g,N,ie]);const ke=D=>{d(D),k({name:D.name,description:D.description,status:D.status}),o(!0)},V=D=>{x(D)},O=D=>{f(D),h(!0)},Y=async D=>{if(D.preventDefault(),!C.name.trim()){ie({title:"Validation Error",description:"Category name is required",variant:"destructive"});return}try{w(!0);const R=(await ms(async()=>{const{DatabaseService:F}=await Promise.resolve().then(()=>xs);return{DatabaseService:F}},void 0)).DatabaseService;if(c)await R.updateGeneralCategory(c.id,{name:C.name.trim(),description:C.description.trim(),status:C.status}),s(t.map(F=>F.id===c.id?{...F,...C,status:C.status}:F)),ie({title:"Success",description:"Category updated successfully"});else{const F=await R.addGeneralCategory({name:C.name.trim(),description:C.description.trim(),status:C.status});s([...t,{...F,id:F.id.toString(),createdAt:F.created_at||new Date().toISOString(),productCount:0}]),ie({title:"Success",description:"Category added successfully"})}k({name:"",description:"",status:"active"}),o(!1),d(null)}catch(R){console.error("Submit error:",R),ie({title:"Error",description:`Failed to ${c?"update":"add"} category`,variant:"destructive"})}finally{w(!1)}},W=async()=>{if(y)try{w(!0),await(await ms(async()=>{const{DatabaseService:R}=await Promise.resolve().then(()=>xs);return{DatabaseService:R}},void 0)).DatabaseService.deleteGeneralCategory(y.id),s(t.filter(R=>R.id!==y.id)),h(!1),f(null),ie({title:"Success",description:"Category deleted successfully"})}catch(D){console.error("Delete error:",D),ie({title:"Error",description:"Failed to delete category",variant:"destructive"})}finally{w(!1)}},ue=()=>{try{const D=["S No","Date","Name","Description","Status","Product Count"],R=U.map((de,ve)=>{const _e=de.createdAt;let ze="";if(_e){let be;if(_e.includes("T")?be=new Date(_e):/^\d{4}-\d{2}-\d{2}$/.test(_e)&&(be=new Date(_e+"T00:00:00")),be&&!isNaN(be.getTime())){const Me=String(be.getDate()).padStart(2,"0"),Je=String(be.getMonth()+1).padStart(2,"0"),vt=be.getFullYear();ze=`${Me}/${Je}/${vt}`}else ze=_e}return[ve+1,ze,`"${de.name}"`,`"${de.description||""}"`,de.status.charAt(0).toUpperCase()+de.status.slice(1),de.productCount||0]}),F=[D,...R].map(de=>de.join(",")).join(`
`),I=new Blob([F],{type:"text/csv;charset=utf-8;"}),ce=document.createElement("a");if(ce.download!==void 0){const de=URL.createObjectURL(I);ce.setAttribute("href",de);let ze=`general-categories-${new Date().toISOString().split("T")[0]}`;me!==null&&L!==null&&(ze+=`-${A[me]}-${L}`),N!=="all"&&(ze+=`-${N}`),g&&(ze+="-filtered"),ce.setAttribute("download",`${ze}.csv`),ce.style.visibility="hidden",document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),ie({title:"Success",description:`CSV exported successfully! ${U.length} categories exported.`})}}catch(D){console.error("Export error:",D),ie({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},U=t.filter(D=>{var I,ce;const R=((I=D.name)==null?void 0:I.toLowerCase().includes(g.toLowerCase()))||((ce=D.description)==null?void 0:ce.toLowerCase().includes(g.toLowerCase()));let F=!0;if(N!=="all"&&(F=D.status===N),me!==null&&L!==null){const de=D.createdAt;if(!de)return!1;let ve;if(de.includes("T"))ve=new Date(de);else if(/^\d{4}-\d{2}-\d{2}$/.test(de))ve=new Date(de+"T00:00:00");else return!1;return isNaN(ve.getTime())?!1:R&&F&&ve.getMonth()===me-1&&ve.getFullYear()===L}return R&&F}).sort((D,R)=>{const F=parseInt(D.id)||0,I=parseInt(R.id)||0;return F-I}),[z,te]=m.useState(1),se=10,J=Math.ceil(U.length/se),je=U.slice((z-1)*se,z*se),b=()=>te(D=>Math.max(1,D-1)),S=()=>te(D=>Math.min(J,D+1));return Fe.useEffect(()=>{te(1)},[g,t.length]),a?e.jsx(Gr,{message:"Loading general categories data..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"General Categories"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsxs(P,{onClick:ue,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered categories to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsx(Ht.MonthYear,{onClick:()=>ge(!0),text:A[M-1]}),e.jsxs(P,{onClick:()=>{k({name:"",description:"",status:"active"}),o(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:U.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:U.filter(D=>D.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In use"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Total Products"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:U.reduce((D,R)=>D+(R.productCount||0),0)}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Categorized"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:U.filter(D=>D.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Disabled"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories by name or description...",value:g,onChange:D=>j(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:N,onValueChange:E,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})})]})}),e.jsx($s,{open:oe,onOpenChange:ge,selectedMonth:M,selectedYear:ne,onMonthChange:X,onYearChange:Q,onApply:()=>{H(M),he(ne),ge(!1)},title:"Select Month & Year",description:"Filter categories by specific month and year",previewText:"categories"}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(ds,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Categories List (",U.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Categories (",U.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Category Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Description"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Product Count"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsxs(os,{children:[je.map((D,R)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(z-1)*se+R+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const F=D.createdAt;if(!F)return"";let I;if(F.includes("T"))I=new Date(F);else if(/^\d{4}-\d{2}-\d{2}$/.test(F))I=new Date(F+"T00:00:00");else return F;if(isNaN(I.getTime()))return F;const ce=String(I.getDate()).padStart(2,"0"),de=String(I.getMonth()+1).padStart(2,"0"),ve=I.getFullYear();return`${ce}/${de}/${ve}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:D.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm",children:e.jsx("div",{className:"max-w-xs truncate",title:D.description,children:D.description||"No description"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:D.status==="active"?"default":"secondary",className:`
                        ${D.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:D.productCount||0}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>V(D),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Category",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ke(D),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Category",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>O(D),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Category",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},D.id)),je.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No categories found"})})]})]})}),J>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(z-1)*se+1," to ",Math.min(z*se,U.length)," of ",U.length," categories"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:b,disabled:z===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(J,5)},(D,R)=>{let F;return J<=5||z<=3?F=R+1:z>=J-2?F=J-4+R:F=z-2+R,e.jsx(P,{variant:z===F?"default":"outline",size:"sm",onClick:()=>te(F),className:"h-8 w-8 p-0",children:F},F)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:S,disabled:z===J,className:"h-8 px-3",children:"Next"})]})]})]})]}),e.jsx($t,{open:i,onOpenChange:o,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:c?"Edit Category":"Add New Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:c?"Update category information":"Enter the details for the new category"})]})]})}),e.jsxs("form",{onSubmit:Y,className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:C.name,onChange:D=>k({...C,name:D.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:C.description,onChange:D=>k({...C,description:D.target.value}),placeholder:"Enter category description (optional)",className:"editpopup form crm-edit-form-textarea",rows:3})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:C.status,onValueChange:D=>k({...C,status:D}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{o(!1),d(null),k({name:"",description:"",status:"active"})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:v,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:v?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),c?"Updating...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),c?"Update Category":"Add Category"]})})]})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-4xl bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl flex flex-col",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6 flex-shrink-0",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm sm:text-base md:text-lg lg:text-xl",children:(u.name||"C").charAt(0).toUpperCase()})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Category Details"})]}),e.jsx("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:e.jsx("span",{className:"text-gray-600",children:"Complete category information and details"})})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>x(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",style:{scrollbarWidth:"thin",scrollbarColor:"#60a5fa #dbeafe"},children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),"Category Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 rounded-lg border border-blue-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-blue-700 block",children:"Category Name"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:u.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 rounded-lg border border-purple-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-purple-700 block",children:"Status"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold",children:e.jsx(kt,{variant:u.status==="active"?"default":"secondary",className:`
                                ${u.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}
                              `,children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 rounded-lg border border-green-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Pt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-green-700 block",children:"Created Date"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:u.createdAt?(()=>{const D=u.createdAt;let R;if(D.includes("T")?R=new Date(D):/^\d{4}-\d{2}-\d{2}$/.test(D)&&(R=new Date(D+"T00:00:00")),R&&!isNaN(R.getTime())){const F=String(R.getDate()).padStart(2,"0"),I=String(R.getMonth()+1).padStart(2,"0"),ce=R.getFullYear();return`${F}/${I}/${ce}`}return D})():"Unknown"})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-green-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Description & Details"]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white p-3 sm:p-4 rounded-lg border border-gray-200",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 block mb-2",children:"Category Description"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-900 leading-relaxed",children:u.description||"No description provided for this category."})]}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-3 sm:p-4 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-orange-700 block",children:"Product Count"}),e.jsxs("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:[u.productCount||0," products associated"]})]})]})})]})]})]})]})}),e.jsx($t,{open:p,onOpenChange:h,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this category? This action cannot be undone."})]})]})}),y&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:y.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",y.status]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:[y.productCount||0," products"]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{h(!1),f(null)},disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:W,disabled:v,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:v?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Category"]})})]})]})})]})})},eY=()=>{js();const{toast:t}=ya(),[s,a]=m.useState([]),[r,n]=m.useState(!0),[l,i]=m.useState(!1),[o,c]=m.useState(!1),[d,u]=m.useState(null),[x,p]=m.useState(null),[h,y]=m.useState(""),[f,v]=m.useState("all"),[w,g]=m.useState(!1),[j,N]=m.useState(null),[E,C]=m.useState({name:"",contactPerson:"",email:"",phone:"",address:"",status:"active"}),k=["January","February","March","April","May","June","July","August","September","October","November","December"],A=new Date().getFullYear(),[T,M]=m.useState(new Date().getMonth()+1),[X,ne]=m.useState(A),[Q,oe]=m.useState(!1),[ge,me]=m.useState(new Date().getMonth()+1),[H,L]=m.useState(A),he=async()=>{n(!0);try{const b=await(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService.getAllGeneralSuppliers();a(b.map(S=>({...S,id:S.id.toString(),contactPerson:S.contact_person||S.contactPerson||"",createdAt:S.created_at||S.createdAt||""})))}catch{t({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{n(!1)}};Fe.useEffect(()=>{(async()=>{try{const b=await(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService.getAllGeneralSuppliers();a(b.map(S=>({...S,id:S.id.toString(),contactPerson:S.contact_person||S.contactPerson||"",createdAt:S.created_at||S.createdAt||""})))}catch{}finally{n(!1)}})()},[]);const ie=()=>{const b=["S No","Date","Company Name","Contact Person","Email","Phone","Address","Status"],S=W.map((I,ce)=>{const de=I.createdAt;let ve="";if(de){let _e;if(de.includes("T")?_e=new Date(de):/^\d{4}-\d{2}-\d{2}$/.test(de)&&(_e=new Date(de+"T00:00:00")),_e&&!isNaN(_e.getTime())){const ze=String(_e.getDate()).padStart(2,"0"),be=String(_e.getMonth()+1).padStart(2,"0"),Me=_e.getFullYear();ve=`${ze}/${be}/${Me}`}}return[ce+1,ve,I.name,I.contactPerson,I.email,I.phone,I.address,I.status.charAt(0).toUpperCase()+I.status.slice(1)]}),D=[b,...S].map(I=>I.map(ce=>`"${ce}"`).join(",")).join(`
`),R=new Blob([D],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");if(F.download!==void 0){const I=URL.createObjectURL(R);F.setAttribute("href",I);const ce=ge!==null&&H!==null?`${k[ge]}_${H}`:`${k[T]}_${X}`;F.setAttribute("download",`general_suppliers_${ce}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F)}},ke=async()=>{if(!E.name||!E.contactPerson||!E.email||!E.phone){t({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}i(!0);try{const b=(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService;if(d){const S=await b.updateGeneralSupplier(d.id,{name:E.name,contactPerson:E.contactPerson,email:E.email,phone:E.phone,address:E.address,status:E.status});a(s.map(D=>D.id===d.id?{...D,...S,id:D.id,contactPerson:S.contact_person||S.contactPerson||"",createdAt:S.created_at||S.createdAt||""}:D)),t({title:"Success",description:"Supplier updated successfully"})}else{const S=await b.addGeneralSupplier({name:E.name,contactPerson:E.contactPerson,email:E.email,phone:E.phone,address:E.address,status:E.status});a([{...S,id:S.id.toString(),contactPerson:S.contact_person||S.contactPerson||"",createdAt:S.created_at||S.createdAt||""},...s]),t({title:"Success",description:"Supplier added successfully"})}C({name:"",contactPerson:"",email:"",phone:"",address:"",status:"active"}),c(!1),u(null),he()}catch{t({title:"Error",description:d?"Failed to update supplier":"Failed to add supplier",variant:"destructive"})}finally{i(!1)}},V=b=>{u(b),C({name:b.name,contactPerson:b.contactPerson,email:b.email,phone:b.phone,address:b.address,status:b.status}),c(!0)},O=b=>{N(b),g(!0)},Y=async()=>{if(j){i(!0);try{await(await ms(async()=>{const{DatabaseService:S}=await Promise.resolve().then(()=>xs);return{DatabaseService:S}},void 0)).DatabaseService.deleteGeneralSupplier(j.id),a(s.filter(S=>S.id!==j.id)),t({title:"Success",description:"Supplier deleted successfully"}),g(!1),N(null)}catch{t({title:"Error",description:"Failed to delete supplier",variant:"destructive"})}finally{i(!1)}}},W=s.filter(b=>{var R,F,I;const S=((R=b.name)==null?void 0:R.toLowerCase().includes(h.toLowerCase()))||((F=b.contactPerson)==null?void 0:F.toLowerCase().includes(h.toLowerCase()))||((I=b.email)==null?void 0:I.toLowerCase().includes(h.toLowerCase())),D=f==="all"||b.status===f;if(ge!==null&&H!==null){const ce=b.createdAt;if(!ce)return!1;let de;if(ce.includes("T"))de=new Date(ce);else if(/^\d{4}-\d{2}-\d{2}$/.test(ce))de=new Date(ce+"T00:00:00");else return!1;return isNaN(de.getTime())?!1:S&&D&&de.getMonth()===ge-1&&de.getFullYear()===H}return S&&D}).sort((b,S)=>parseInt(b.id)-parseInt(S.id)),[ue,U]=m.useState(1),z=10,te=Math.ceil(W.length/z),se=W.slice((ue-1)*z,ue*z),J=()=>U(b=>Math.max(1,b-1)),je=()=>U(b=>Math.min(te,b+1));return Fe.useEffect(()=>{U(1)},[h,f,s.length]),r?e.jsx(Gr,{message:"Loading general suppliers data..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Ta,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"General Suppliers"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{window.location.reload()},loading:r}),e.jsxs(P,{onClick:ie,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered suppliers to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsx(Ht.MonthYear,{onClick:()=>oe(!0),text:ge!==null&&H!==null?`${k[ge-1]} ${H}`:`${k[T-1]} ${X}`}),e.jsxs(P,{onClick:()=>{C({name:"",contactPerson:"",email:"",phone:"",address:"",status:"active"}),u(null),c(!0)},className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Supplier"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Suppliers"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:W.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Ta,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Suppliers"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:W.filter(b=>b.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"In service"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Email Contacts"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:W.filter(b=>b.email&&b.email.trim()!=="").length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ia,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"With email"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ia,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Suppliers"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:W.filter(b=>b.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Qs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Disabled"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Qs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search suppliers by name, contact person, or email...",value:h,onChange:b=>y(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:f,onValueChange:v,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})})]})}),e.jsx($s,{open:Q,onOpenChange:oe,selectedMonth:T,selectedYear:X,onMonthChange:M,onYearChange:ne,onApply:()=>{me(T),L(X),oe(!1)},title:"Select Month & Year",description:"Filter suppliers by specific month and year",previewText:"suppliers"}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Ta,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Suppliers List (",W.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Suppliers (",W.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1200px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Company"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Contact Person"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Contact Info"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Address"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsxs(os,{children:[se.map((b,S)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(ue-1)*z+S+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const D=b.createdAt;if(!D)return"";let R;if(D.includes("T"))R=new Date(D);else if(/^\d{4}-\d{2}-\d{2}$/.test(D))R=new Date(D+"T00:00:00");else return D;if(isNaN(R.getTime()))return D;const F=String(R.getDate()).padStart(2,"0"),I=String(R.getMonth()+1).padStart(2,"0"),ce=R.getFullYear();return`${F}/${I}/${ce}`})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:b.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:b.contactPerson}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs justify-center",children:[e.jsx(ia,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[120px]",children:b.email})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs justify-center",children:[e.jsx(Ps,{className:"w-3 h-3"}),e.jsx("span",{children:b.phone})]})]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap max-w-[150px] truncate",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs justify-center",children:[e.jsx(mr,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:b.address})]})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:b.status==="active"?"default":"secondary",className:`
                        ${b.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>p(b),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Supplier",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>V(b),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Supplier",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>O(b),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Supplier",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},b.id)),se.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No suppliers found"})})]})]})}),te>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(ue-1)*z+1," to ",Math.min(ue*z,W.length)," of ",W.length," suppliers"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:J,disabled:ue===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(te,5)},(b,S)=>{let D;return te<=5||ue<=3?D=S+1:ue>=te-2?D=te-4+S:D=ue-2+S,e.jsx(P,{variant:ue===D?"default":"outline",size:"sm",onClick:()=>U(D),className:"h-8 w-8 p-0",children:D},D)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:je,disabled:ue===te,className:"h-8 px-3",children:"Next"})]})]})]})]}),e.jsx($t,{open:o,onOpenChange:c,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Ta,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:d?"Edit Supplier":"Add New Supplier"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:d?"Update supplier information":"Enter the details for the new supplier"})]})]})}),e.jsxs("form",{onSubmit:b=>{b.preventDefault(),ke()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:E.name,onChange:b=>C({...E,name:b.target.value}),placeholder:"Enter company name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"contactPerson",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),"Contact Person ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"contactPerson",value:E.contactPerson,onChange:b=>C({...E,contactPerson:b.target.value}),placeholder:"Enter contact person name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"email",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"email",type:"email",value:E.email,onChange:b=>C({...E,email:b.target.value}),placeholder:"Enter email address",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"phone",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"phone",value:E.phone,onChange:b=>C({...E,phone:b.target.value}),placeholder:"Enter phone number",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group md:col-span-2",children:[e.jsxs(ae,{htmlFor:"address",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(mr,{className:"h-4 w-4"}),"Address"]}),e.jsx(As,{id:"address",value:E.address,onChange:b=>C({...E,address:b.target.value}),placeholder:"Enter company address (optional)",className:"editpopup form crm-edit-form-textarea",rows:3})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:E.status,onValueChange:b=>C({...E,status:b}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{c(!1),u(null),C({name:"",contactPerson:"",email:"",phone:"",address:"",status:"active"})},className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",disabled:l,children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),d?"Updating...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ta,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),d?"Update Supplier":"Add Supplier"]})})]})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>p(null),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-4xl bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl flex flex-col",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6 flex-shrink-0",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-green-500 to-blue-600",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm sm:text-base md:text-lg lg:text-xl",children:(x.name||"S").charAt(0).toUpperCase()})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Supplier Details"})]}),e.jsx("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:e.jsx("span",{className:"text-gray-600",children:"Complete supplier information and details"})})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>p(null),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",style:{scrollbarWidth:"thin",scrollbarColor:"#60a5fa #dbeafe"},children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),"Supplier Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 rounded-lg border border-blue-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ta,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-blue-700 block",children:"Company Name"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:x.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 rounded-lg border border-purple-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-purple-700 block",children:"Status"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold",children:e.jsx(kt,{variant:x.status==="active"?"default":"secondary",className:`
                                ${x.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}
                              `,children:x.status.charAt(0).toUpperCase()+x.status.slice(1)})})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 rounded-lg border border-green-200 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Pt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-green-700 block",children:"Created Date"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:x.createdAt?(()=>{const b=x.createdAt;let S;if(b.includes("T")?S=new Date(b):/^\d{4}-\d{2}-\d{2}$/.test(b)&&(S=new Date(b+"T00:00:00")),S&&!isNaN(S.getTime())){const D=String(S.getDate()).padStart(2,"0"),R=String(S.getMonth()+1).padStart(2,"0"),F=S.getFullYear();return`${D}/${R}/${F}`}return b})():"Unknown"})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-green-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-3 sm:p-4 rounded-lg border border-orange-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-orange-700 block",children:"Contact Person"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:x.contactPerson||"Not specified"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ps,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-blue-700 block",children:"Phone Number"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900",children:x.phone||"Not specified"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(ia,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-purple-700 block",children:"Email Address"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 truncate",children:x.email||"Not specified"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(mr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-green-700 block",children:"Address"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-900 leading-relaxed",children:x.address||"Not specified"})]})]})})]})]})]})]})}),e.jsx($t,{open:w,onOpenChange:g,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Supplier"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this supplier? This action cannot be undone."})]})]})}),j&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:j.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:j.contactPerson})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600 capitalize",children:j.status})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{g(!1),N(null)},disabled:l,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:Y,disabled:l,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:l?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Supplier"]})})]})]})})]})})},tY=()=>{js();const{toast:t}=ya(),s=we=>{if(!we)return"N/A";const K=new Date(we);if(!isNaN(K.getTime())){const De=String(K.getDate()).padStart(2,"0"),_=String(K.getMonth()+1).padStart(2,"0"),ee=K.getFullYear();return`${De}/${_}/${ee}`}if(/^\d{4}-\d{2}-\d{2}$/.test(we)){const[De,_,ee]=we.split("-");return`${ee.padStart(2,"0")}/${_.padStart(2,"0")}/${De}`}return we},a=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new Date().getFullYear(),[n,l]=m.useState(new Date().getMonth()+1),[i,o]=m.useState(r),[c,d]=m.useState(!1),[u,x]=m.useState(new Date().getMonth()+1),[p,h]=m.useState(r),[y,f]=m.useState(!0),[v,w]=m.useState(!1),[g,j]=m.useState(!1),[N,E]=m.useState(""),[C,k]=m.useState("all"),[A,T]=m.useState(!1),[M,X]=m.useState(null),[ne,Q]=m.useState(!1),[oe,ge]=m.useState(null),[me,H]=m.useState([]),[L,he]=m.useState(!1),[ie,ke]=m.useState(null),[V,O]=m.useState({gpId:"",productName:"",category:"",currentStock:0,usedStock:0,unit:"",supplier:"",price:0,status:"in-stock"}),[Y,W]=m.useState([]),[ue,U]=m.useState([]),[z,te]=m.useState(0),se=async()=>{f(!0);try{const we=(await ms(async()=>{const{DatabaseService:_}=await Promise.resolve().then(()=>xs);return{DatabaseService:_}},void 0)).DatabaseService,K=await we.getAllGeneralProducts();W(K.map(_=>({..._,id:_.id.toString(),createdAt:_.created_at||_.createdAt||"",purchaseDate:_.purchase_date||_.purchaseDate||""})));const De=await we.getAllGeneralCategories();U(De.filter(_=>_.status==="active"))}catch{W([]),U([]),t({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{f(!1)}};Fe.useEffect(()=>{se()},[z]);const J=()=>{const we=["S No","Date","Product Name","Category","Current Stock","Used Stock","Available","Unit","Price","Supplier","Status"],K=Me.map((G,le)=>{const fe=s(G.purchaseDate);return[le+1,fe,G.productName,G.category,G.currentStock,G.usedStock,G.currentStock-G.usedStock,G.unit,`${G.price}`,G.supplier,G.status.replace("-"," ").replace(/\b\w/g,ye=>ye.toUpperCase())]}),De=[we,...K].map(G=>G.map(le=>`"${le}"`).join(",")).join(`
`),_=new Blob([De],{type:"text/csv;charset=utf-8;"}),ee=document.createElement("a");if(ee.download!==void 0){const G=URL.createObjectURL(_);ee.setAttribute("href",G);const le=u!==null&&p!==null?`${a[u]}_${p}`:`${a[n]}_${i}`;ee.setAttribute("download",`general_stock_${le}.csv`),ee.style.visibility="hidden",document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)}},[je,b]=m.useState(null),[S,D]=m.useState([]);async function R(we){try{return await(await ms(async()=>{const{DatabaseService:_}=await Promise.resolve().then(()=>xs);return{DatabaseService:_}},void 0)).DatabaseService.getStockHistory(we)||[]}catch(K){return console.error("Error fetching stock history:",K),[]}}const F=async we=>{try{ge(we);const K=await R(we.id);H(K),Q(!0)}catch(K){console.error("Error loading stock history:",K),t({title:"Error",description:"Failed to load stock history",variant:"destructive"})}},I=we=>{ke(we),he(!0)},ce=async()=>{if(!(!ie||!oe))try{const we=(await ms(async()=>{const{DatabaseService:le}=await Promise.resolve().then(()=>xs);return{DatabaseService:le}},void 0)).DatabaseService,K=ie.stock_change||0,De=ie.stock_type;if(await we.deleteStockHistoryRecord(ie.id),De==="used"&&K>0){const fe=(await we.getAllGeneralProducts()).find(ye=>ye.id.toString()===oe.id.toString());if(fe){const ye=fe.used_stock||0,Ue=Math.max(0,ye-K);await we.updateGeneralStock(oe.id,{used_stock:Ue,stock_status:Ue===0?"in-stock":fe.current_stock-Ue<=10?"low-stock":"in-stock",last_update:new Date().toISOString().slice(0,19).replace("T"," ")}),console.log(`Deleted stock history: Reduced used_stock by ${K} units`),console.log(`New used_stock: ${Ue}`)}}else if(De==="added"&&K>0){const fe=(await we.getAllGeneralProducts()).find(ye=>ye.id.toString()===oe.id.toString());if(fe){const ye=fe.current_stock||0,Ue=Math.max(0,ye-K);await we.updateGeneralStock(oe.id,{current_stock:Ue,stock_status:Ue===0?"out-of-stock":Ue<=10?"low-stock":"in-stock",last_update:new Date().toISOString().slice(0,19).replace("T"," ")}),console.log(`Deleted stock history: Reduced current_stock by ${K} units`),console.log(`New current_stock: ${Ue}`)}}t({title:"Success",description:"Stock history record deleted and stock adjusted successfully",variant:"default"});const _=await R(oe.id);H(_),await se();const G=(await we.getAllGeneralProducts()).find(le=>le.id.toString()===oe.id.toString());G&&ge({...oe,currentStock:G.current_stock||0,usedStock:G.used_stock||0,status:G.stock_status||"in-stock"})}catch(we){console.error("Error deleting stock history record:",we),t({title:"Error",description:"Failed to delete stock history record",variant:"destructive"})}finally{he(!1),ke(null)}},de=Y.map(we=>({id:we.id,gpId:we.gp_id||"",productName:we.name,category:we.category,currentStock:we.current_stock??we.quantity,usedStock:we.used_stock??0,unit:we.unit??"",lastUpdate:we.last_update||we.createdAt,purchaseDate:we.purchase_date||we.purchaseDate||"",supplier:we.supplier,status:we.stock_status||(we.status==="active"?"in-stock":"inactive"),price:we.price})),[ve,_e]=m.useState("all"),ze=we=>we.currentStock-we.usedStock===0?"out-of-stock":we.currentStock-we.usedStock<=5?"low-stock":"in-stock",be=we=>{switch(we){case"in-stock":return"default";case"low-stock":return"destructive";case"out-of-stock":return"secondary";default:return"default"}},Me=de.filter(we=>{var ee,G,le;const K=((ee=we.productName)==null?void 0:ee.toLowerCase().includes(N.toLowerCase()))||((G=we.category)==null?void 0:G.toLowerCase().includes(N.toLowerCase()))||((le=we.supplier)==null?void 0:le.toLowerCase().includes(N.toLowerCase())),De=C==="all"||ze(we)===C,_=ve==="all"||we.category===ve;if(u!==null&&p!==null){const fe=we.purchaseDate;if(!fe)return!1;let ye;if(fe.includes("T"))ye=new Date(fe);else if(/^\d{4}-\d{2}-\d{2}$/.test(fe))ye=new Date(fe+"T00:00:00");else return!1;return isNaN(ye.getTime())?!1:K&&De&&_&&ye.getMonth()===u-1&&ye.getFullYear()===p}return K&&De&&_}).sort((we,K)=>parseInt(we.id)-parseInt(K.id)),Je=we=>{bs(we)},vt=we=>{X(we),T(!0)},Le=async()=>{if(M){w(!0);try{await(await ms(async()=>{const{DatabaseService:K}=await Promise.resolve().then(()=>xs);return{DatabaseService:K}},void 0)).DatabaseService.deleteGeneralProduct(M.id),t({title:"Success",description:"Stock item deleted successfully"}),T(!1),X(null),se()}catch{t({title:"Error",description:"Failed to delete stock item",variant:"destructive"})}finally{w(!1)}}},[Ae,Ee]=m.useState(1),Se=10,B=Math.ceil(Me.length/Se),Ye=Me.slice((Ae-1)*Se,Ae*Se),Ne=()=>Ee(we=>Math.max(1,we-1)),rt=()=>Ee(we=>Math.min(B,we+1));Fe.useEffect(()=>{Ee(1)},[N,C,de.length]);const Be=Me.reduce((we,K)=>we+K.currentStock*K.price,0),We=Me.filter(we=>ze(we)==="low-stock").length,ft=Me.filter(we=>ze(we)==="out-of-stock").length,He=Me.filter(we=>ze(we)==="in-stock").length;Me.length;const[Ke,Oe]=m.useState(null),[Ze,it]=m.useState(0),[dt,xt]=m.useState("in-stock"),[Wt,qt]=m.useState("");Fe.useEffect(()=>{Ke?(async()=>{const we=await Us(Ke);qt(we-Ze)})():qt("")},[Ke,Ze]);function bs(we){Oe(we),it(0),xt(we.status)}async function Us(we){return we.currentStock-we.usedStock}function Ss(we){return we.currentStock-we.usedStock}function Ls(){Oe(null)}async function $e(){if(console.log("saveEdit function called"),!Ke)return console.log("No edit item found, closing popup"),Ls();console.log("Edit item:",Ke),console.log("Edit used stock:",Ze),console.log("Edit status:",dt);const we=Ss(Ke);if(console.log("Available balance:",we),Ze>we){console.log("Validation failed: Used stock exceeds available balance"),t({title:"Error",description:`Cannot use more than available balance stock (${we})`,variant:"destructive"});return}if(Ze<0){console.log("Validation failed: Used stock is negative"),t({title:"Error",description:"Used stock cannot be negative",variant:"destructive"});return}console.log("Starting save operation..."),w(!0);try{const K=(await ms(async()=>{const{DatabaseService:G}=await Promise.resolve().then(()=>xs);return{DatabaseService:G}},void 0)).DatabaseService,De=Ke.usedStock||0,_=De+Ze;console.log("Current used stock:",De),console.log("New total used stock:",_),Ze>0&&(console.log("Adding stock history record..."),await K.addStockHistoryRecord({product_id:Ke.id,stock_change:Ze,stock_type:"used",current_stock_before:Ke.currentStock-De,current_stock_after:Ke.currentStock-_,update_date:new Date().toISOString().split("T")[0],description:`Stock usage: ${Ze} units used`}),console.log("Stock history record added successfully")),console.log("Updating general stock...");const ee={used_stock:_,stock_status:dt,last_update:new Date().toISOString().slice(0,19).replace("T"," ")};console.log("Update data:",ee),await K.updateGeneralStock(Ke.id,ee),console.log("General stock updated successfully"),t({title:"Success",description:"Stock updated successfully",variant:"default"}),console.log("Closing edit popup..."),Ls(),console.log("Refreshing data..."),await se(),console.log("Data refresh completed")}catch(K){console.error("Error saving stock:",K),t({title:"Error",description:`Failed to save stock changes: ${K.message||K}`,variant:"destructive"})}finally{console.log("Save operation finished, setting submitting to false"),w(!1)}}return y?e.jsx(Gr,{message:"Loading general stock data..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"General Stock Management"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:y}),e.jsxs(P,{onClick:J,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",title:"Export filtered stock items to CSV",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsx(Ht.MonthYear,{onClick:()=>d(!0),text:u!==null&&p!==null?`${a[u-1]} ${p}`:`${a[n-1]} ${i}`})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"In Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:He}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Jt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Jt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Low Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:We}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(ri,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Warning"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(ri,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Out of Stock"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:ft}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(va,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Critical"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(va,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Value"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:["",Be.toFixed(2)]}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Inventory"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name, category, or supplier...",value:N,onChange:we=>E(we.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:C,onValueChange:k,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"All Status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"in-stock",children:"In Stock"}),e.jsx(Pe,{value:"low-stock",children:"Low Stock"}),e.jsx(Pe,{value:"out-of-stock",children:"Out of Stock"})]})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(At,{value:ve,onValueChange:_e,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"All Categories"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Categories"}),ue.map(we=>e.jsx(Pe,{value:we.name,children:we.name},we.id))]})]})})]})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Jt,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Stock Inventory (",Me.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Stock (",Me.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1400px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"GP ID"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Product Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Category"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Current Stock"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Used Stock"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Available"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Unit"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Price"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsxs(os,{children:[Ye.map((we,K)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(Ae-1)*Se+K+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap font-medium",children:we.gpId}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:we.productName}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:we.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:we.currentStock}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:we.usedStock}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap font-medium",children:we.currentStock-we.usedStock}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:we.unit}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",we.price]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:be(ze(we)),className:`
                        ${ze(we)==="in-stock"?"bg-green-100 text-green-800 hover:bg-green-200":ze(we)==="low-stock"?"bg-orange-100 text-orange-800 hover:bg-orange-200":"bg-red-100 text-red-800 hover:bg-red-200"}
                      `,children:ze(we).replace("-"," ").replace(/\b\w/g,De=>De.toUpperCase())})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>F(we),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Stock History",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>Je(we),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Stock",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>vt(we),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Stock",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},we.id)),Ye.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:11,className:"text-center py-8 text-muted-foreground",children:"No stock items found"})})]})]})}),B>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(Ae-1)*Se+1," to ",Math.min(Ae*Se,Me.length)," of ",Me.length," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:Ne,disabled:Ae===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(B,5)},(we,K)=>{let De;return B<=5||Ae<=3?De=K+1:Ae>=B-2?De=B-4+K:De=Ae-2+K,e.jsx(P,{variant:Ae===De?"default":"outline",size:"sm",onClick:()=>Ee(De),className:"h-8 w-8 p-0",children:De},De)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:rt,disabled:Ae===B,className:"h-8 px-3",children:"Next"})]})]})]})]}),e.jsx($s,{open:c,onOpenChange:d,selectedMonth:n,selectedYear:i,onMonthChange:l,onYearChange:o,onApply:()=>{x(n),h(i),d(!1)},title:"Select Month & Year",description:"Filter stock data by month and year",previewText:"stock data"}),ne&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>Q(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:we=>we.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx(Jt,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${ze(oe)==="in-stock"?"bg-green-100 text-green-800":ze(oe)==="low-stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:ze(oe).replace("-"," ").replace(/\b\w/g,we=>we.toUpperCase())})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:oe.productName})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Product ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:oe.gpId||oe.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>Q(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Product Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Product Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:oe.productName})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:oe.category})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ha,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:oe.supplier||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-orange-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-600 uppercase tracking-wide",children:"Unit Price"}),e.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:["",oe.price||0]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Or,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Unit"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:oe.unit})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-red-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-red-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-red-600 uppercase tracking-wide",children:"Purchase Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:s(oe.purchaseDate)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Stock Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(tn,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:oe.currentStock||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Total Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-red-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(va,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-red-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-red-600",children:oe.usedStock||0}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-red-600 uppercase tracking-wide",children:"Used Stock"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center col-span-2 md:col-span-1",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:(oe.currentStock||0)-(oe.usedStock||0)}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Available Stock"})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(wr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Stock Movement History"]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"S NO"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Date"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Change"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Type"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Stock After"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Description"}),e.jsx(re,{className:"text-center font-semibold text-gray-700",children:"Action"})]})}),e.jsx(os,{children:me.length===0?e.jsx(nt,{children:e.jsx(q,{colSpan:7,className:"text-center py-12 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(wr,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No stock movement records found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Stock history will appear here"})]})]})})}):me.map((we,K)=>{const De=(()=>{const _=new Date(we.update_date);if(isNaN(_.getTime()))return we.update_date;const ee=String(_.getDate()).padStart(2,"0"),G=String(_.getMonth()+1).padStart(2,"0"),le=_.getFullYear();return`${ee}/${G}/${le}`})();return e.jsxs(nt,{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsx(q,{className:"text-center font-medium",children:K+1}),e.jsx(q,{className:"text-center",children:De}),e.jsx(q,{className:"text-center",children:e.jsxs("span",{className:we.stock_type==="used"?"text-red-600":"text-green-600",children:[we.stock_type==="used"?"-":"+",we.stock_change]})}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:we.stock_type==="used"?"destructive":"default",className:"capitalize",children:we.stock_type})}),e.jsx(q,{className:"text-center font-bold text-blue-600",children:we.current_stock_after}),e.jsx(q,{className:"text-center",children:we.description||"-"}),e.jsx(q,{className:"text-center",children:e.jsx(P,{variant:"outline",size:"sm",onClick:()=>I(we),className:"action-btn-lead action-btn-delete h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 hover:border-red-300",title:"Delete Stock History Record",disabled:v,children:e.jsx(mt,{className:"h-3 w-3"})})})]},we.id||K)})})]})})]})]})})]})}),e.jsx($t,{open:!!je,onOpenChange:()=>b(null),children:e.jsxs(Ot,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsx(Ut,{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(vs,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(Bt,{className:"text-xl font-bold text-gray-900",children:"Stock Item Details"}),e.jsx(Vt,{className:"text-gray-600 mt-1",children:"View detailed information about this stock item"})]})]})}),je&&e.jsxs("div",{className:"space-y-6 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"Product Name"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"font-semibold text-gray-900",children:je.productName})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"GP ID"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"font-semibold text-gray-900",children:je.gpId||"N/A"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"Category"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"font-semibold text-gray-900",children:je.category})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"Supplier"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"font-semibold text-gray-900",children:je.supplier||"N/A"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"Price"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsxs("p",{className:"font-semibold text-gray-900",children:["",je.price||0]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"Unit"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"font-semibold text-gray-900",children:je.unit})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"Purchase Date"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("p",{className:"font-semibold text-gray-900",children:s(je.purchaseDate)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx(kt,{variant:be(ze(je)),className:`
                        ${ze(je)==="in-stock"?"bg-green-100 text-green-800 hover:bg-green-200":ze(je)==="low-stock"?"bg-orange-100 text-orange-800 hover:bg-orange-200":"bg-red-100 text-red-800 hover:bg-red-200"}
                      `,children:ze(je).replace("-"," ").replace(/\b\w/g,we=>we.toUpperCase())})})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stock Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:je.currentStock||0}),e.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Total Stock"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:je.usedStock||0}),e.jsx("div",{className:"text-sm font-medium text-red-600",children:"Used Stock"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(je.currentStock||0)-(je.usedStock||0)}),e.jsx("div",{className:"text-sm font-medium text-green-600",children:"Available"})]})]})]}),S.length>0&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stock Movement History"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ls,{children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50",children:[e.jsx(re,{className:"text-center",children:"Date"}),e.jsx(re,{className:"text-center",children:"Change"}),e.jsx(re,{className:"text-center",children:"Type"}),e.jsx(re,{className:"text-center",children:"Stock After"}),e.jsx(re,{className:"text-center",children:"Description"})]})}),e.jsx(os,{children:S.slice(0,5).map((we,K)=>{const De=(()=>{const _=new Date(we.update_date);if(isNaN(_.getTime()))return we.update_date;const ee=String(_.getDate()).padStart(2,"0"),G=String(_.getMonth()+1).padStart(2,"0"),le=_.getFullYear();return`${ee}-${G}-${le}`})();return e.jsxs(nt,{children:[e.jsx(q,{className:"text-center",children:De}),e.jsx(q,{className:"text-center",children:e.jsxs("span",{className:we.stock_type==="used"?"text-red-600":"text-green-600",children:[we.stock_type==="used"?"-":"+",we.stock_change]})}),e.jsx(q,{className:"text-center",children:e.jsx(kt,{variant:we.stock_type==="used"?"destructive":"default",children:we.stock_type})}),e.jsx(q,{className:"text-center",children:we.current_stock_after}),e.jsx(q,{className:"text-center",children:we.description||"-"})]},we.id||K)})})]}),S.length>5&&e.jsxs("p",{className:"text-sm text-gray-500 text-center mt-2",children:["Showing recent 5 entries of ",S.length," total"]})]})]}),S.length===0&&e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Jt,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Stock History"}),e.jsx("p",{className:"text-gray-500",children:"No stock movement history recorded yet for this product"})]})})]}),e.jsx(zt,{className:"px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:e.jsx(P,{type:"button",variant:"outline",onClick:()=>b(null),className:"w-full sm:w-auto",children:"Close"})})]})}),e.jsx($t,{open:Ke!==null,onOpenChange:Ls,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Stock"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update stock information and status"})]})]})}),Ke&&e.jsxs("div",{className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Product"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("div",{className:"text-sm font-medium text-blue-900",children:Ke.productName})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(tn,{className:"h-4 w-4"}),"Current Stock"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-blue-600",children:Ke.currentStock})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Or,{className:"h-4 w-4"}),"Available Balance"]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-green-600",children:Ss(Ke)})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cr,{className:"h-4 w-4"}),"Used Stock"]}),e.jsx(Ve,{type:"number",min:0,max:Ss(Ke),value:Ze,onChange:we=>{let K=Number(we.target.value);const De=Ss(Ke);K<0&&(K=0),K>De&&(K=De,console.warn(`Cannot use more than available balance stock (${De})`)),it(K)},className:"editpopup form crm-edit-form-input text-center"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Maximum available: ",Ss(Ke)," units"]}),Ze>Ss(Ke)&&e.jsx("div",{className:"text-xs text-red-500",children:"Cannot exceed available balance stock"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Balance After Edit"]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"text-lg font-bold text-yellow-700",children:[Wt," ",(Ke==null?void 0:Ke.unit)||"units"]})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Stock Status"]}),e.jsxs(At,{value:dt,onValueChange:we=>xt(we),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"in-stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"In Stock"]})}),e.jsx(Pe,{value:"low-stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Low Stock"]})}),e.jsx(Pe,{value:"out-of-stock",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Out of Stock"]})})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:Ls,disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{onClick:$e,disabled:v,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-3 w-3 sm:h-4 sm:w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})})]})]})]})}),e.jsx($t,{open:A,onOpenChange:T,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Stock Item"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this stock item? This action cannot be undone."})]})]})}),M&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:M.productName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:M.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:M.gpId})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tn,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:[M.currentStock," ",M.unit]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["",M.price]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600 capitalize",children:M.status})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{T(!1),X(null)},disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:Le,disabled:v,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:v?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Item"]})})]})]})}),e.jsx($t,{open:L,onOpenChange:he,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Stock History Record"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this stock movement record? This action cannot be undone."})]})]})}),ie&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:(()=>{const we=new Date(ie.update_date);if(isNaN(we.getTime()))return ie.update_date;const K=String(we.getDate()).padStart(2,"0"),De=String(we.getMonth()+1).padStart(2,"0"),_=we.getFullYear();return`${K}/${De}/${_}`})()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600 capitalize",children:ie.stock_type})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:[ie.stock_type==="used"?"-":"+",ie.stock_change," units"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r2,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:ie.description||"No description"})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{he(!1),ke(null)},disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:ce,disabled:v,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:v?e.jsxs(e.Fragment,{children:[e.jsx(bl,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Record"]})})]})]})})]})})};let qY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};function eN(t){if(!t)return"-";const s=new Date(t);if(!isNaN(s.getTime())){const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[a,r,n]=t.split("-");return`${n.padStart(2,"0")}/${r.padStart(2,"0")}/${a}`}return t}const sY=[{value:"upi",label:"UPI"},{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"neft",label:"NEFT"}],aY=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const He=await gt.getAllGeneralProducts();s(He)}catch{}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const He=setInterval(()=>{l(Ke=>Ke+1)},3e4);return()=>clearInterval(He)},[]);const i=Fe.useCallback(()=>{r(!0),l(He=>He+1)},[]),[o,c]=m.useState(!1),[d,u]=m.useState(""),[x,p]=m.useState("all"),[h,y]=m.useState(!1),[f,v]=m.useState(null),[w,g]=m.useState(-1),[j,N]=m.useState(!1),[E,C]=m.useState(null),[k,A]=m.useState([]),[T,M]=m.useState(!1),[X,ne]=m.useState(null),[Q,oe]=m.useState(""),[ge,me]=m.useState(""),[H,L]=m.useState(""),[he,ie]=m.useState(""),[ke,V]=m.useState(""),[O,Y]=m.useState(""),[W,ue]=m.useState("pending"),U=["January","February","March","April","May","June","July","August","September","October","November","December"],z=new Date().getFullYear(),[te,se]=m.useState(new Date().getMonth()+1),[J,je]=m.useState(z),[b,S]=m.useState(!1),[D,R]=m.useState(new Date().getMonth()+1),[F,I]=m.useState(z),{toast:ce}=ya();Fe.useCallback(async()=>{try{r(!0);const He=D,Ke=F,Oe=d,Ze=x,it=await gt.getAllGeneralProducts();s(it),R(He),I(Ke),u(Oe),p(Ze),ce({title:"Success",description:"Data refreshed successfully"})}catch(He){console.error("Refresh error:",He),ce({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[D,F,d,x,ce]);const de=async He=>{try{C(He);const Ke=await gt.getSettlementHistory(He.id);Ke.sort((Oe,Ze)=>Oe.payment_date?Ze.payment_date?new Date(Oe.payment_date).getTime()-new Date(Ze.payment_date).getTime():1:-1),A(Ke),N(!0)}catch(Ke){console.error("Error loading settlement history:",Ke),ce({title:"Error",description:"Failed to load settlement history",variant:"destructive"})}},ve=He=>{ne(He),oe(He.purchase_date||""),me(He.payment_type||""),ue(He.payment_status||"pending");const Ke=Number(He.purchase_amount||0),Oe=Number(He.settlement_amount||0),Ze=Number(He.balance_amount||0);L(Oe.toString()),ie(Ke.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2})),V(Ze.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2})),Y(""),M(!0)},_e=async()=>{if(!X){M(!1);return}try{c(!0);const He={purchase_date:Q,payment_type:ge,payment_status:W};await gt.updateGeneralProduct(X.id,He);const Ke=Number(O);if(Ke>0){const Oe={product_id:X.id,product_name:X.name,category:X.category,supplier:X.supplier,amount:Ke,payment_date:Q,payment_type:ge,description:`Payment for ${X.name}`};await gt.addSettlementRecord(Oe)}ce({title:"Success",description:"Transaction updated successfully"}),M(!1),i()}catch(He){console.error("Error saving transaction:",He),ce({title:"Error",description:"Failed to save transaction",variant:"destructive"})}finally{c(!1)}},ze=He=>{let Ke=He.target.value.replace(/[^\d.]/g,""),Oe=Number(Ke);if((isNaN(Oe)||Oe<0)&&(Oe=0),X){const Ze=Number(X.purchase_amount||0),it=Number(X.settlement_amount||0),dt=Ze-it;Oe>dt&&(ce({title:"Error",description:"Amount Payment cannot exceed the Balance Amount.",variant:"destructive"}),Oe=dt),Y(Oe.toString());const xt=it+Oe,Wt=Ze-xt;L(xt.toString()),V(Wt.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}))}else Y(Oe.toString())},be=He=>{const Ke=k[He];v(Ke),g(He),y(!0)},Me=async()=>{if(!(!f||w===-1))try{c(!0),f.id&&(await gt.deleteSettlementRecord(f.id),ce({title:"Success",description:"Settlement record deleted successfully"}),A(He=>{const Ke=[...He];return Ke.splice(w,1),Ke}),i(),y(!1),v(null),g(-1))}catch(He){console.error("Error deleting settlement:",He),ce({title:"Error",description:"Failed to delete settlement record",variant:"destructive"})}finally{c(!1)}},Je=He=>{switch(He){case"completed":return"default";case"pending":return"destructive";case"cancelled":return"secondary";default:return"default"}},vt=()=>{try{const He=["S No","ID No","Product Name","Category","Supplier","Quantity","Rate","Purchase Amount","Settlement Amount","Balance Amount","Status","Payment Type"],Ke=Le.map((dt,xt)=>{var Ls;const Wt=typeof dt.id=="number"?`GN${dt.id.toString().padStart(4,"0")}`:(Ls=dt.id)!=null&&Ls.toString().startsWith("GN")?dt.id:`GN${dt.id}`,qt=Number(dt.purchase_amount||0),bs=Number(dt.settlement_amount||0),Us=Number(dt.balance_amount||0),Ss=dt.payment_status||"pending";return[xt+1,Wt,`"${dt.name}"`,`"${dt.category}"`,`"${dt.supplier||"-"}"`,dt.quantity,`${Number(dt.price).toFixed(2)}`,`${qt.toFixed(2)}`,`${bs.toFixed(2)}`,`${Us.toFixed(2)}`,Ss.charAt(0).toUpperCase()+Ss.slice(1),dt.payment_type||"-"]}),Oe=[He,...Ke].map(dt=>dt.join(",")).join(`
`),Ze=new Blob([Oe],{type:"text/csv;charset=utf-8;"}),it=document.createElement("a");if(it.download!==void 0){const dt=URL.createObjectURL(Ze);it.setAttribute("href",dt);let qt=`general-accounts-${new Date().toISOString().split("T")[0]}`;D!==null&&F!==null&&(qt+=`-${U[D-1]}-${F}`),x!=="all"&&(qt+=`-${x}`),d&&(qt+="-filtered"),it.setAttribute("download",`${qt}.csv`),it.style.visibility="hidden",document.body.appendChild(it),it.click(),document.body.removeChild(it),ce({title:"Success",description:`CSV exported successfully! ${Le.length} transactions exported.`})}}catch(He){console.error("Export error:",He),ce({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},Le=t.filter(He=>{const Ke=He.payment_status||"pending",Oe=(He.name||"").toLowerCase().includes(d.toLowerCase())||(He.category||"").toLowerCase().includes(d.toLowerCase())||(He.supplier||"").toLowerCase().includes(d.toLowerCase()),Ze=x==="all"||Ke===x;if(D!==null&&F!==null){const it=He.purchase_date;if(!it)return!1;const dt=new Date(it);return isNaN(dt.getTime())?!1:Oe&&Ze&&dt.getMonth()===D-1&&dt.getFullYear()===F}return Oe&&Ze}),[Ae,Ee]=m.useState(1),Se=10,B=Math.ceil(Le.length/Se),Ye=Le.slice((Ae-1)*Se,Ae*Se),Ne=()=>Ee(He=>Math.max(1,He-1)),rt=()=>Ee(He=>Math.min(B,He+1));Fe.useEffect(()=>{Ee(1)},[d,t.length,x]);let Be=0,We=0,ft=0;return t.forEach(He=>{const Ke=Number(He.purchase_amount||0),Oe=Number(He.settlement_amount||0),Ze=Number(He.balance_amount||0);Be+=Ke,We+=Oe,ft+=Ze}),a?e.jsx(Gr,{message:"Loading general accounts data..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"General Accounts"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()},loading:a}),e.jsx(Ht.MonthYear,{onClick:()=>S(!0),text:D!==null&&F!==null?`${U[D-1].slice(0,3)} ${String(F).slice(-2)}`:`${U[te-1].slice(0,3)} ${String(J).slice(-2)}`}),e.jsxs(P,{onClick:vt,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Purchase"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:["",Be.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Purchase Amount"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Total Settlement"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:["",We.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(cs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Settlement Amount"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(cs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Balance Due"}),e.jsxs("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:["",ft.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(va,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Balance Amount"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(va,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Total Transactions"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:Le.length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(It,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Records"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(It,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search transactions by name, category, or supplier...",value:d,onChange:He=>u(He.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:x,onValueChange:p,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"completed",children:"Completed"}),e.jsx(Pe,{value:"pending",children:"Pending"}),e.jsx(Pe,{value:"cancelled",children:"Cancelled"})]})]})})]})}),e.jsx($s,{open:b,onOpenChange:S,selectedMonth:te,selectedYear:J,onMonthChange:se,onYearChange:je,onApply:()=>{R(te),I(J),S(!1)},title:"Select Month & Year",description:"Filter accounts by specific month and year",previewText:"transactions"}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(ts,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Transaction History (",Le.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Transactions (",Le.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[1600px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"ID No"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Product Name"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Category"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Supplier"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Quantity"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Rate"}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(ns,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Purchase Amount"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Settlement Amount"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(va,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Balance Amount"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(ts,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Payment Type"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("span",{children:"Actions"})})]})}),e.jsxs(os,{children:[Ye.map((He,Ke)=>{var qt;const Oe=He.payment_status||"pending",Ze=Number(He.purchase_amount||0),it=Number(He.settlement_amount||0),dt=Number(He.balance_amount||0),xt=(Ae-1)*Se+Ke+1,Wt=typeof He.id=="number"?`GN${He.id.toString().padStart(4,"0")}`:(qt=He.id)!=null&&qt.toString().startsWith("GN")?He.id:`GN${He.id}`;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:xt}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Wt}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:He.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:He.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:He.supplier}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:He.quantity}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",Number(He.price).toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:["",Ze.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",it.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:["",dt.toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:Je(Oe),children:Oe.charAt(0).toUpperCase()+Oe.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:He.payment_type||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>de(He),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Settlement History",children:e.jsx(vs,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ve(He),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Transaction",children:e.jsx(Kn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},He.id)}),Ye.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:13,className:"text-center py-8 text-muted-foreground",children:"No transactions found"})})]})]})}),B>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-gray-50/50 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(Ae-1)*Se+1," to ",Math.min(Ae*Se,Le.length)," of ",Le.length," transactions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:Ne,disabled:Ae===1,className:"h-8 px-3",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(B,5)},(He,Ke)=>{let Oe;return B<=5||Ae<=3?Oe=Ke+1:Ae>=B-2?Oe=B-4+Ke:Oe=Ae-2+Ke,e.jsx(P,{variant:Ae===Oe?"default":"outline",size:"sm",onClick:()=>Ee(Oe),className:"h-8 w-8 p-0",children:Oe},Oe)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:rt,disabled:Ae===B,className:"h-8 px-3",children:"Next"})]})]})]})]}),E&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:He=>He.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(Wn,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:"border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full bg-green-100 text-green-800",children:"Active"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Jt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:E.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Product ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:typeof E.id=="number"?`PR${E.id.toString().padStart(4,"0")}`:typeof E.id=="string"&&/^\d+$/.test(E.id)?`PR${E.id.padStart(4,"0")}`:E.id})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>N(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Product Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Jt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Product Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:E.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ns,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:E.category})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(It,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Supplier"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:E.supplier||"N/A"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Purchase Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:eN(E.purchase_date)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(so,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Settlement Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(wr,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:k.length}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Total Payments"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(cs,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:["",k.reduce((He,Ke)=>He+Number(Ke.amount||0),0).toLocaleString("en-IN",{minimumFractionDigits:2})]}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Total Amount"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-purple-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(st,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsx("div",{className:"text-xs px-2 py-1 rounded-full font-medium bg-green-100 text-green-800",children:"Active Account"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-purple-600 uppercase tracking-wide mt-2",children:"Status"})]})]})]}),k.length>0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Wn,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Payment History (",k.length,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"S.No"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Payment Date"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Amount Paid"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Payment Type"}),e.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Action"})]})}),e.jsx("tbody",{children:k.map((He,Ke)=>{const Oe=eN(He.payment_date);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-white/50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-gray-900 font-medium",children:Ke+1}),e.jsx("td",{className:"py-3 px-4 text-gray-900",children:Oe}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:"text-green-600 font-semibold",children:["",Number(He.amount||0).toLocaleString("en-IN",{minimumFractionDigits:2})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(kt,{variant:"outline",className:"text-xs",children:He.payment_type||"Not specified"})}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-colors shadow-sm",title:"Delete Payment",onClick:()=>be(Ke),disabled:o,children:e.jsx(mt,{className:"w-4 h-4"})})})]},Ke)})})]})})]}),k.length===0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(so,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Payment Records"}),e.jsx("p",{className:"text-gray-500",children:"No settlement history available for this product"})]})]})})]})}),e.jsx($t,{open:T,onOpenChange:M,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(ts,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Transaction"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update payment details and settlement information"})]})]})}),e.jsxs("form",{onSubmit:He=>{He.preventDefault(),_e()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Product"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("div",{className:"text-sm font-medium text-blue-900",children:(X==null?void 0:X.name)||"Product"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editDate",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Date"]}),e.jsx(Ve,{id:"editDate",type:"date",value:Q,onChange:He=>oe(He.target.value),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editPaymentType",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Payment Type"]}),e.jsxs(At,{value:ge,onValueChange:me,children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select payment type"})}),e.jsx(Dt,{children:sY.map(He=>e.jsx(Pe,{value:He.value,children:He.label},He.value))})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Purchase Amount"]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-blue-600",children:he})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Wn,{className:"h-4 w-4"}),"Settlement Amount"]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-green-600",children:H})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editAmountPayment",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(so,{className:"h-4 w-4"}),"Amount Payment"]}),e.jsx(Ve,{id:"editAmountPayment",type:"number",min:0,max:X?Number(X.price||0)*Number(X.quantity||0):void 0,value:O,onChange:ze,placeholder:"Enter new payment amount",className:"editpopup form crm-edit-form-input text-center"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enter the amount you want to pay now."})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),"Balance Amount"]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsx("div",{className:"text-lg font-bold text-yellow-700",children:ke})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Transaction Status"]}),e.jsxs(At,{value:W,onValueChange:He=>ue(He),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"pending",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Pending"]})}),e.jsx(Pe,{value:"completed",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Completed"]})}),e.jsx(Pe,{value:"cancelled",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Cancelled"]})})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>M(!1),disabled:o,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:o,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:o?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})})]})]})]})}),e.jsx($t,{open:h,onOpenChange:y,children:e.jsxs(Ot,{className:"sm:max-w-md",children:[e.jsxs(Ut,{children:[e.jsxs("div",{className:"icon-title-container",children:[e.jsx(mt,{className:"w-6 h-6 text-red-600"}),e.jsx(Bt,{className:"text-red-700",children:"Delete Settlement Record"})]}),e.jsx(Vt,{className:"text-center text-gray-600",children:"This action will permanently remove the settlement record from accounts."})]}),e.jsx("div",{className:"staff-details-section",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx(Wn,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"detail-label",children:"Transaction ID:"}),e.jsx("span",{className:"detail-value",children:f==null?void 0:f.id})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx(Jt,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"detail-label",children:"Product:"}),e.jsx("span",{className:"detail-value",children:f==null?void 0:f.product_name})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx(Pt,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"detail-label",children:"Date:"}),e.jsx("span",{className:"detail-value",children:f==null?void 0:f.purchase_date})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx(cs,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"detail-label",children:"Settlement Amount:"}),e.jsxs("span",{className:"detail-value",children:["",f==null?void 0:f.settlement_amount]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx(ts,{className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"detail-label",children:"Payment Type:"}),e.jsx("span",{className:"detail-value",children:f==null?void 0:f.payment_type})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx(st,{className:"w-4 h-4 text-teal-600"}),e.jsx("span",{className:"detail-label",children:"Status:"}),e.jsx("span",{className:"detail-value",children:f==null?void 0:f.status})]})]})}),e.jsxs(zt,{className:"gap-3",children:[e.jsxs(P,{variant:"outline",onClick:()=>{y(!1),v(null),g(-1)},disabled:o,className:"flex-1",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx(P,{variant:"destructive",onClick:Me,disabled:o,className:"flex-1 bg-red-600 hover:bg-red-700",children:o?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"w-4 h-4 mr-2"}),"Delete Record"]})})]})]})})]})})},rY=()=>{js();const[t,s]=Fe.useState([]),[a,r]=Fe.useState(!0),[n,l]=Fe.useState(null),[i,o]=Fe.useState(!1),[c,d]=Fe.useState(!1),[u,x]=Fe.useState(!1),[p,h]=Fe.useState(null),[y,f]=Fe.useState(null),[v,w]=Fe.useState(!1),[g,j]=Fe.useState(""),[N,E]=Fe.useState(1),[C,k]=Fe.useState({name:"",description:"",status:"active"}),{toast:A}=ya(),T=10;Fe.useEffect(()=>{M()},[]);const M=async()=>{try{r(!0),l(null);const ie=await gt.getAllLeadCategories(),ke=Array.isArray(ie)?ie.map(V=>({...V,status:(V==null?void 0:V.status)||"inactive"})):[];s(ke)}catch(ie){console.error("Error fetching categories:",ie),l("Failed to connect to the server. Please ensure the backend server is running on port 4000."),s([]),A({title:"Connection Error",description:"Failed to connect to the server. Please check if the backend is running.",variant:"destructive"})}finally{r(!1)}},X=async()=>{if(!C.name){A({title:"Error",description:"Please enter a category name",variant:"destructive"});return}try{w(!0),await gt.addLeadCategory({name:C.name,description:C.description,status:C.status}),M(),k({name:"",description:"",status:"active"}),o(!1),A({title:"Success",description:"Category added successfully"})}catch{A({title:"Error",description:"Failed to add category",variant:"destructive"})}finally{w(!1)}},ne=ie=>{h(ie.id),k({name:ie.name,description:ie.description,status:ie.status}),d(!0)},Q=async()=>{if(!C.name||!p){A({title:"Error",description:"Please enter a category name",variant:"destructive"});return}try{w(!0);const ie=t.find(O=>O.id===p);if(!ie){A({title:"Error",description:"Category not found",variant:"destructive"});return}const ke=ie.name,V=await gt.updateLeadCategory(p,{name:C.name,description:C.description,status:C.status});try{ke&&ke!==C.name&&await gt.updateLeadCategoryReferences(ke,C.name),s(O=>O.map(Y=>Y.id===p?V:Y)),d(!1),h(null),k({name:"",description:"",status:"active"}),window.dispatchEvent(new CustomEvent("leadCategoryUpdated",{detail:{oldName:ke,newName:C.name}})),A({title:"Success",description:"Category updated successfully and all related leads have been updated"})}catch(O){console.error("Error updating category references:",O),A({title:"Warning",description:"Category updated but some references may not have been updated",variant:"destructive"})}}catch{A({title:"Error",description:"Failed to update category",variant:"destructive"})}finally{w(!1)}},oe=async ie=>{try{w(!0),await gt.deleteLeadCategory(ie),M(),x(!1),f(null),A({title:"Success",description:"Category deleted successfully"})}catch{A({title:"Error",description:"Failed to delete category",variant:"destructive"})}finally{w(!1)}},ge=t.filter(ie=>ie.name.toLowerCase().includes(g.toLowerCase())||ie.description.toLowerCase().includes(g.toLowerCase())),me=Math.ceil(ge.length/T),H=(N-1)*T,L=H+T,he=ge.slice(H,L);return Fe.useEffect(()=>{E(1)},[g]),Fe.useEffect(()=>{console.log("Categories Data:",{totalCategories:t.length,categories:t,timestamp:new Date().toISOString()})},[t]),Fe.useEffect(()=>{console.log("Categories State:",{filtered:{total:ge.length,data:ge},paginated:{currentPage:N,itemsPerPage:T,total:he.length,data:he},timestamp:new Date().toISOString()})},[ge,he,N]),a?e.jsx(Gr,{message:"Loading lead categories..."}):n?e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Lead Categories"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Connection Error"})]})]})}),e.jsxs(Ie,{className:"p-8 text-center border-red-200 bg-red-50",children:[e.jsx("div",{className:"text-red-700 text-lg font-medium mb-2",children:"Connection Error"}),e.jsx("div",{className:"text-red-600 mb-4",children:n}),e.jsx(P,{onClick:M,variant:"outline",className:"global-btn",children:"Try Again"})]})]})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Lead Categories"})})]}),e.jsxs("div",{className:"flex flex-row gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:M,loading:a,disabled:a}),e.jsxs(P,{onClick:()=>o(!0),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:t.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"All categories"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(ds,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:t.filter(ie=>ie.status==="active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Operational"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Categories"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:t.filter(ie=>ie.status==="inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(Rt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Disabled"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Filtered Results"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:ge.length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(fs,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Current view"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(fs,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories by name or description...",value:g,onChange:ie=>j(ie.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})})})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(ds,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Categories List (",ge.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Categories (",ge.length,")"]})]})}),e.jsxs(Re,{className:"p-0",children:[e.jsx($t,{open:i,onOpenChange:o,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(cy,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Add New Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Create a new lead category to organize your leads"})]})]})}),e.jsxs("form",{onSubmit:ie=>{ie.preventDefault(),X()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:C.name,onChange:ie=>k({...C,name:ie.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:C.description,onChange:ie=>k({...C,description:ie.target.value}),placeholder:"Enter category description (optional)",className:"editpopup form crm-edit-form-input",rows:3})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:C.status,onValueChange:ie=>k({...C,status:ie}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{o(!1),k({name:"",description:"",status:"active"})},disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:v,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:v?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(cy,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Add Category"]})})]})]})]})}),e.jsx($t,{open:c,onOpenChange:d,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Ds,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update the details for this category"})]})]})}),e.jsxs("form",{onSubmit:ie=>{ie.preventDefault(),Q()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"edit-name",value:C.name,onChange:ie=>k({...C,name:ie.target.value}),placeholder:"Enter category name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"edit-description",value:C.description,onChange:ie=>k({...C,description:ie.target.value}),placeholder:"Enter category description (optional)",className:"editpopup form crm-edit-form-input",rows:3})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"edit-status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:C.status,onValueChange:ie=>k({...C,status:ie}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{d(!1),h(null),k({name:"",description:"",status:"active"})},disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:v,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:v?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Update Category"]})})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Category Name"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Description"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Created Date"}),e.jsx("span",{className:"sm:hidden",children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[he.map((ie,ke)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:H+ke+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:ie.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm",children:e.jsx("div",{className:"max-w-[120px] sm:max-w-[200px] truncate",title:ie.description,children:ie.description||"-"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:(ie==null?void 0:ie.status)==="active"?"default":"secondary",className:`
                        ${(ie==null?void 0:ie.status)==="active"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}
                      `,children:((ie==null?void 0:ie.status)||"inactive").charAt(0).toUpperCase()+((ie==null?void 0:ie.status)||"inactive").slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(()=>{const V=ie.createdAt;if(!V)return"-";const O=new Date(V);if(!isNaN(O.getTime())){const Y=String(O.getDate()).padStart(2,"0"),W=String(O.getMonth()+1).padStart(2,"0"),ue=O.getFullYear();return`${Y}/${W}/${ue}`}if(V.includes("-")){const[Y,W,ue]=V.split("-");if(Y&&W&&ue&&Y.length===4)return`${ue.padStart(2,"0")}/${W.padStart(2,"0")}/${Y}`}return V})()}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ne(ie),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Category",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>{f(ie),x(!0)},className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Category",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},ie.id)),he.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No categories found"})})]})]})})]})]}),me>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",H+1," to ",Math.min(L,ge.length)," of ",ge.length," categories"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>E(ie=>Math.max(ie-1,1)),disabled:N===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(me,5)},(ie,ke)=>{let V;return me<=5||N<=3?V=ke+1:N>=me-2?V=me-4+ke:V=N-2+ke,e.jsx(P,{variant:N===V?"default":"outline",size:"sm",onClick:()=>E(V),className:"crm-pagination-page-btn",children:V},V)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>E(ie=>Math.min(ie+1,me)),disabled:N===me,className:"crm-pagination-btn",children:"Next"})]})]}),e.jsx($t,{open:u,onOpenChange:x,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Category"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this category? This action cannot be undone."})]})]})}),y&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:y.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:y.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",y.status||"inactive"]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{x(!1),f(null)},disabled:v,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:()=>y&&oe(y.id),disabled:v,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:v?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Category"]})})]})]})})]})})},nY=()=>{js(),al();const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(!1),[i,o]=m.useState(""),[c,d]=m.useState("All"),[u,x]=m.useState(1),p=10,[h,y]=m.useState(!1),[f,v]=m.useState(!1),[w,g]=m.useState(!1),[j,N]=m.useState(null),[E,C]=m.useState(null),[k,A]=m.useState(!1),T=new Date,M=T.getMonth()+1,X=T.getFullYear(),[ne,Q]=m.useState(M),[oe,ge]=m.useState(X),[me,H]=m.useState(M),[L,he]=m.useState(X),ie=["January","February","March","April","May","June","July","August","September","October","November","December"],[ke,V]=m.useState({name:"",date:wt(new Date,"yyyy-MM-dd"),category:"",contactNumber:"",reminderDate:"",status:"Reminder",description:""});m.useEffect(()=>{O(),Y()},[]);const O=async()=>{try{l(!0);const S=await gt.getAllLeads();s(S||[])}catch(S){console.error("Error loading leads:",S),Te({title:"Error",description:"Failed to load leads",variant:"destructive"})}finally{l(!1)}},Y=async()=>{try{const S=await gt.getAllLeadCategories();r(S||[])}catch(S){console.error("Error loading categories:",S)}},W=t.filter(S=>{const D=!i||S.name.toLowerCase().includes(i.toLowerCase())||S.contactNumber.includes(i)||S.category.toLowerCase().includes(i.toLowerCase()),R=c==="All"||S.status===c;let F=!0;if(me!==null&&L!==null){const I=new Date(S.date);F=I.getMonth()===me-1&&I.getFullYear()===L}return D&&R&&F}).sort((S,D)=>parseInt(S.id)-parseInt(D.id)),ue=Math.ceil(W.length/p),U=async()=>{if(!ke.name||!ke.contactNumber||!ke.category){Te({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}A(!0);try{j?(await gt.updateLead(j.id,ke),Te({title:"Success",description:"Lead updated successfully"})):(await gt.addLead(ke),Te({title:"Success",description:"Lead added successfully"})),y(!1),N(null),J(),await O()}catch(S){console.error("Error saving lead:",S),Te({title:"Error",description:"Failed to save lead",variant:"destructive"})}finally{A(!1)}},z=S=>{N(S),V({name:S.name,date:S.date,category:S.category,contactNumber:S.contactNumber,reminderDate:S.reminderDate,status:S.status,description:S.description||""}),y(!0)},te=async S=>{C(S),g(!0)},se=async()=>{if(E)try{A(!0),await gt.deleteLead(E.id),Te({title:"Success",description:"Lead deleted successfully"}),await O(),g(!1),C(null)}catch(S){console.error("Error deleting lead:",S),Te({title:"Error",description:"Failed to delete lead",variant:"destructive"})}finally{A(!1)}},J=()=>{V({name:"",date:wt(new Date,"yyyy-MM-dd"),category:"",contactNumber:"",reminderDate:"",status:"Reminder",description:""})},je=S=>{if(!S)return"";try{return wt(new Date(S),"dd/MM/yyyy")}catch{return S}},b=()=>{const S=["S No","Date","Name","Contact","Reminder Date","Category","Status","Description"],D=W.map((ve,_e)=>[_e+1,je(ve.date),ve.name,ve.contactNumber,je(ve.reminderDate),ve.category,ve.status,ve.description||""]),R=[S.join(","),...D.map(ve=>ve.map(_e=>`"${_e}"`).join(","))].join(`
`),F=new Blob([R],{type:"text/csv;charset=utf-8;"}),I=window.URL.createObjectURL(F),ce=document.createElement("a");ce.href=I;let de="leads-list";me!==null&&L!==null&&(de+=`_${ie[me-1]}_${L}`),c!=="All"&&(de+=`_${c.toLowerCase()}`),de+=".csv",ce.download=de,ce.click(),window.URL.revokeObjectURL(I)};return n?e.jsx("div",{className:"crm-page-bg",children:e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsx(Ie,{className:"crm-loading-card",children:e.jsxs(Re,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading leads..."})]})})})}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Leads Management"})})]}),e.jsxs("div",{className:"flex flex-row gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:()=>{console.log(" Manual refresh triggered - refreshing entire page"),window.location.reload()}}),e.jsx(Ht.MonthYear,{onClick:()=>v(!0),text:me!==null&&L!==null?`${ie[me-1].slice(0,3)} ${String(L).slice(-2)}`:`${ie[ne-1].slice(0,3)} ${String(oe).slice(-2)}`}),(me!==M||L!==X)&&e.jsxs(P,{type:"button",onClick:()=>{H(M),he(X),Q(M),ge(X)},variant:"outline",className:"modern-btn modern-btn-secondary flex-1 sm:flex-none text-xs sm:text-sm px-3 sm:px-4 py-2",children:[e.jsx("span",{className:"hidden sm:inline",children:"Reset"}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(P,{type:"button",onClick:b,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{type:"button",onClick:()=>y(!0),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Lead"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Leads"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:W.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"All leads"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Closed Leads"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:W.filter(S=>S.status==="Closed").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Successful"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Reminder Leads"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:W.filter(S=>S.status==="Reminder").length}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Pending"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Not Interested"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:W.filter(S=>S.status==="Not Interested").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Declined"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx(Ie,{className:"crm-controls-card",children:e.jsx(Re,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ve,{type:"text",placeholder:"Search leads by name, phone, or category...",value:i,onChange:S=>o(S.target.value),className:"pl-10 pr-4 h-10 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsx("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:e.jsxs(At,{value:c,onValueChange:d,children:[e.jsx(Et,{className:"h-10 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"All",children:"All Status"}),e.jsx(Pe,{value:"Closed",children:"Closed"}),e.jsx(Pe,{value:"Reminder",children:"Reminder"}),e.jsx(Pe,{value:"Not Interested",children:"Not Interested"})]})]})})]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Name"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Ps,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Contact"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Category"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reminder Date"}),e.jsx("span",{className:"sm:hidden",children:"Reminder"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[W.slice((u-1)*p,u*p).map((S,D)=>e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:(u-1)*p+D+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:je(S.date)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:S.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:S.contactNumber}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:S.category}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:je(S.reminderDate)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:S.status==="Closed"?"default":S.status==="Reminder"?"secondary":"destructive",className:`
                          ${S.status==="Closed"?"bg-green-100 text-green-800 hover:bg-green-200":""}
                          ${S.status==="Reminder"?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":""}
                          ${S.status==="Not Interested"?"bg-red-100 text-red-800 hover:bg-red-200":""}
                        `,children:S.status})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>z(S),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Lead",children:e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>te(S),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Lead",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},S.id)),W.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No leads found"})})]})]})}),ue>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(u-1)*p+1," to ",Math.min(u*p,W.length)," of ",W.length," leads"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>x(S=>Math.max(S-1,1)),disabled:u===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(ue,5)},(S,D)=>{let R;return ue<=5||u<=3?R=D+1:u>=ue-2?R=ue-4+D:R=u-2+D,e.jsx(P,{variant:u===R?"default":"outline",size:"sm",onClick:()=>x(R),className:"crm-pagination-page",children:R},R)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>x(S=>Math.min(S+1,ue)),disabled:u===ue,className:"crm-pagination-btn",children:"Next"})]})]}),e.jsx($s,{open:f,onOpenChange:v,selectedMonth:ne,selectedYear:oe,onMonthChange:Q,onYearChange:ge,onApply:()=>{H(ne),he(oe),v(!1)},title:"Select Month & Year",description:"Filter leads by specific month and year",previewText:"leads"}),e.jsx($t,{open:h,onOpenChange:y,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(yi,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:j?"Edit Lead":"Add New Lead"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:j?"Update lead information":"Enter new lead details"})]})]})}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),U()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"name",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"}),"Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"name",value:ke.name,onChange:S=>V({...ke,name:S.target.value}),placeholder:"Enter lead name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"date",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Date"]}),e.jsx(Ve,{id:"date",type:"date",value:ke.date,onChange:S=>V({...ke,date:S.target.value}),className:"editpopup form crm-edit-form-input"})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"category",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:ke.category,onValueChange:S=>V({...ke,category:S}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select category"})}),e.jsx(Dt,{children:a.map(S=>e.jsx(Pe,{value:S.name,children:S.name},S.id))})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"contactNumber",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Contact Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"contactNumber",value:ke.contactNumber,onChange:S=>V({...ke,contactNumber:S.target.value}),placeholder:"Enter contact number",className:"editpopup form crm-edit-form-input",required:!0})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"reminderDate",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),"Reminder Date"]}),e.jsx(Ve,{id:"reminderDate",type:"date",value:ke.reminderDate,onChange:S=>V({...ke,reminderDate:S.target.value}),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:ke.status,onValueChange:S=>V({...ke,status:S}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Closed",children:"Closed"}),e.jsx(Pe,{value:"Reminder",children:"Reminder"}),e.jsx(Pe,{value:"Not Interested",children:"Not Interested"})]})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"description",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"description",value:ke.description,onChange:S=>V({...ke,description:S.target.value}),placeholder:"Enter description (optional)",className:"editpopup form crm-edit-form-input",rows:3})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{y(!1),N(null),J()},disabled:k,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:k,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:k?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):j?e.jsxs(e.Fragment,{children:[e.jsx(Ds,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Update Lead"]}):e.jsxs(e.Fragment,{children:[e.jsx(yi,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Add Lead"]})})]})]})]})}),e.jsx($t,{open:w,onOpenChange:g,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Lead"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this lead? This action cannot be undone."})]})]})}),E&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:E.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:E.contactNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:E.category})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{g(!1),C(null)},disabled:k,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:se,disabled:k,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:k?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Lead"]})})]})]})})]})})};let KY=class extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}};function Kp(t){if(!t)return"-";const s=new Date(t);if(!isNaN(s.getTime())){const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[a,r,n]=t.split("-");return`${n.padStart(2,"0")}/${r.padStart(2,"0")}/${a}`}return t}const lY=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState(!0),[n,l]=m.useState(0);Fe.useEffect(()=>{(async()=>{n>0&&console.log("Refreshing data...");try{const S=await fetch("http://localhost:4000/api/roles");if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);const D=await S.json(),R=(Array.isArray(D)?D:[]).map(F=>({...F,status:F.status||"active",name:F.name||"",description:F.description||"",createdAt:F.createdAt||new Date().toISOString()}));s(R)}catch(S){console.error("Error fetching roles:",S),s([])}finally{r(!1)}})()},[n]),Fe.useEffect(()=>{const S=setInterval(()=>{l(D=>D+1)},3e4);return()=>clearInterval(S)},[]);const i=Fe.useCallback(()=>{r(!0),l(S=>S+1)},[]),[o,c]=m.useState(!1),[d,u]=m.useState(""),[x,p]=m.useState("all"),[h,y]=m.useState(!1),[f,v]=m.useState(!1),[w,g]=m.useState(!1),[j,N]=m.useState(!1),[E,C]=m.useState(null),[k,A]=m.useState(null),[T,M]=m.useState(null),[X,ne]=m.useState({name:"",description:"",status:"active"}),{toast:Q}=ya(),oe=Fe.useCallback(async()=>{try{r(!0);const S=d,D=x,F=await(await fetch("http://localhost:4000/api/roles")).json();s(F),u(S),p(D),Q({title:"Success",description:"Data refreshed successfully"})}catch(S){console.error("Refresh error:",S),Q({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{r(!1)}},[d,x,Q]),ge=S=>{C(S),g(!0)},me=S=>{A(S),ne({name:S.name,description:S.description,status:S.status}),v(!0)},H=async()=>{if(!X.name.trim()){Q({title:"Error",description:"Please enter a role name",variant:"destructive"});return}try{if(c(!0),!(await fetch("http://localhost:4000/api/roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})).ok)throw new Error("Failed to add role");ne({name:"",description:"",status:"active"}),y(!1),Q({title:"Success",description:"Role added successfully"}),i()}catch(S){console.error("Error adding role:",S),Q({title:"Error",description:"Failed to add role",variant:"destructive"})}finally{c(!1)}},L=async()=>{if(!k||!X.name.trim()){Q({title:"Error",description:"Please enter a role name",variant:"destructive"});return}try{if(c(!0),!(await fetch(`http://localhost:4000/api/roles/${k.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})).ok)throw new Error("Failed to update role");v(!1),A(null),ne({name:"",description:"",status:"active"}),Q({title:"Success",description:"Role updated successfully"}),i()}catch(S){console.error("Error updating role:",S),Q({title:"Error",description:"Failed to update role",variant:"destructive"})}finally{c(!1)}},he=S=>{M(S),N(!0)},ie=async()=>{if(T)try{if(c(!0),!(await fetch(`http://localhost:4000/api/roles/${T.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete role");N(!1),M(null),Q({title:"Success",description:"Role deleted successfully"}),i()}catch(S){console.error("Error deleting role:",S),Q({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{c(!1)}},ke=S=>{switch(S){case"active":return"default";case"inactive":return"destructive";default:return"secondary"}},V=()=>{try{const S=["S No","Role Name","Description","Status","Created Date"],D=O.map((ce,de)=>[de+1,`"${ce.name}"`,`"${ce.description||"-"}"`,ce.status?ce.status.charAt(0).toUpperCase()+ce.status.slice(1):"Unknown",Kp(ce.createdAt)]),R=[S,...D].map(ce=>ce.join(",")).join(`
`),F=new Blob([R],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a");if(I.download!==void 0){const ce=URL.createObjectURL(F);I.setAttribute("href",ce);let _e=`user-roles-${new Date().toISOString().split("T")[0]}`;x!=="all"&&(_e+=`-${x}`),d&&(_e+="-filtered"),I.setAttribute("download",`${_e}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I),Q({title:"Success",description:`CSV exported successfully! ${O.length} roles exported.`})}}catch(S){console.error("Export error:",S),Q({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},O=t.filter(S=>{const D=S.name.toLowerCase().includes(d.toLowerCase())||(S.description||"").toLowerCase().includes(d.toLowerCase()),R=x==="all"||S.status===x;return D&&R}),[Y,W]=m.useState(1),ue=10,U=Math.ceil(O.length/ue),z=O.slice((Y-1)*ue,Y*ue),te=()=>W(S=>Math.max(1,S-1)),se=()=>W(S=>Math.min(U,S+1));Fe.useEffect(()=>{W(1)},[d,t.length,x]);const J=t.filter(S=>S.status==="active").length,je=t.filter(S=>S.status==="inactive").length,b=t.length;return a?e.jsx(Gr,{message:"Loading user roles..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Ks,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"User Roles Management"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:oe,loading:a,disabled:a}),e.jsxs(P,{onClick:V,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>y(!0),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Role"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Roles"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:b}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"System roles"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Roles"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:J}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Operational"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Roles"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:je}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(mc,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Disabled"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(mc,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"})}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search roles by name or description...",value:d,onChange:S=>u(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:x,onValueChange:p,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Ks,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["User Roles (",O.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Roles (",O.length,")"]})]})}),e.jsx(Re,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Ks,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Role Name"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Description"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Created Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsxs(os,{children:[z.map((S,D)=>{const R=(Y-1)*ue+D+1;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:R}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:S.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-xs truncate",children:S.description||"-"}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:ke(S.status),children:S.status?S.status.charAt(0).toUpperCase()+S.status.slice(1):"Unknown"})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Kp(S.createdAt)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>ge(S),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Details",children:e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>me(S),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Role",children:e.jsx(Kn,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>he(S),disabled:o,className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Role",children:e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},S.id)}),z.length===0&&e.jsx(nt,{children:e.jsx(q,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No roles found"})})]})]})})})]}),U>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(Y-1)*ue+1," to ",Math.min(Y*ue,O.length)," of ",O.length," roles"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:te,disabled:Y===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(U,5)},(S,D)=>{let R;return U<=5||Y<=3?R=D+1:Y>=U-2?R=U-4+D:R=Y-2+D,e.jsx(P,{variant:Y===R?"default":"outline",size:"sm",onClick:()=>W(R),className:"crm-pagination-page-btn",children:R},R)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:se,disabled:Y===U,className:"crm-pagination-btn",children:"Next"})]})]}),e.jsx($t,{open:h,onOpenChange:y,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Ks,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Add New Role"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Create a new user role with permissions"})]})]})}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),H()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"roleName",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"roleName",value:X.name,onChange:S=>ne({...X,name:S.target.value}),placeholder:"Enter role name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"roleDescription",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"roleDescription",value:X.description,onChange:S=>ne({...X,description:S.target.value}),placeholder:"Enter role description",rows:3,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"roleStatus",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:X.status,onValueChange:S=>ne({...X,status:S}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{y(!1),ne({name:"",description:"",status:"active"})},disabled:o,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:o,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:o?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Add Role"]})})]})]})]})}),e.jsx($t,{open:w,onOpenChange:g,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(vs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Role Details"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Complete information about this role"})]})]})}),E&&e.jsxs("div",{className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Role Name"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"font-semibold text-gray-900",children:E.name})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:E.description||"No description available"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx(kt,{variant:ke(E.status),children:E.status?E.status.charAt(0).toUpperCase()+E.status.slice(1):"Unknown"})})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Created Date"]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border",children:e.jsx("span",{className:"text-gray-900",children:Kp(E.createdAt)})})]})]}),e.jsx(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:e.jsxs(P,{variant:"outline",onClick:()=>g(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Close"]})})]})}),e.jsx($t,{open:f,onOpenChange:v,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Kn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Role"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update role information and permissions"})]})]})}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),L()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editRoleName",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"editRoleName",value:X.name,onChange:S=>ne({...X,name:S.target.value}),placeholder:"Enter role name",className:"editpopup form crm-edit-form-input",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editRoleDescription",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(As,{id:"editRoleDescription",value:X.description,onChange:S=>ne({...X,description:S.target.value}),placeholder:"Enter role description",rows:3,className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editRoleStatus",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:X.status,onValueChange:S=>ne({...X,status:S}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{v(!1),A(null),ne({name:"",description:"",status:"active"})},disabled:o,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:o,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:o?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kn,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Update Role"]})})]})]})]})}),e.jsx($t,{open:j,onOpenChange:N,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Role"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this role? This action cannot be undone."})]})]})}),T&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:T.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:T.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",T.status]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{N(!1),M(null)},disabled:o,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:ie,disabled:o,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:o?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Role"]})})]})]})})]})})};var Vh="Checkbox",[iY,QY]=Pl(Vh),[oY,Dv]=iY(Vh);function cY(t){const{__scopeCheckbox:s,checked:a,children:r,defaultChecked:n,disabled:l,form:i,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:x}=t,[p,h]=Oc({prop:a,defaultProp:n??!1,onChange:c,caller:Vh}),[y,f]=m.useState(null),[v,w]=m.useState(null),g=m.useRef(!1),j=y?!!i||!!y.closest("form"):!0,N={checked:p,disabled:l,setChecked:h,control:y,setControl:f,name:o,form:i,value:u,hasConsumerStoppedPropagationRef:g,required:d,defaultChecked:gi(n)?!1:n,isFormControl:j,bubbleInput:v,setBubbleInput:w};return e.jsx(oY,{scope:s,...N,children:dY(x)?x(N):r})}var v6="CheckboxTrigger",w6=m.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:a,...r},n)=>{const{control:l,value:i,disabled:o,checked:c,required:d,setControl:u,setChecked:x,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:y}=Dv(v6,t),f=Gs(n,u),v=m.useRef(c);return m.useEffect(()=>{const w=l==null?void 0:l.form;if(w){const g=()=>x(v.current);return w.addEventListener("reset",g),()=>w.removeEventListener("reset",g)}},[l,x]),e.jsx(ws.button,{type:"button",role:"checkbox","aria-checked":gi(c)?"mixed":c,"aria-required":d,"data-state":S6(c),"data-disabled":o?"":void 0,disabled:o,value:i,...r,ref:f,onKeyDown:ps(s,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:ps(a,w=>{x(g=>gi(g)?!0:!g),y&&h&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})})});w6.displayName=v6;var Av=m.forwardRef((t,s)=>{const{__scopeCheckbox:a,name:r,checked:n,defaultChecked:l,required:i,disabled:o,value:c,onCheckedChange:d,form:u,...x}=t;return e.jsx(cY,{__scopeCheckbox:a,checked:n,defaultChecked:l,disabled:o,required:i,onCheckedChange:d,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(w6,{...x,ref:s,__scopeCheckbox:a}),p&&e.jsx(b6,{__scopeCheckbox:a})]})})});Av.displayName=Vh;var y6="CheckboxIndicator",j6=m.forwardRef((t,s)=>{const{__scopeCheckbox:a,forceMount:r,...n}=t,l=Dv(y6,a);return e.jsx(Ti,{present:r||gi(l.checked)||l.checked===!0,children:e.jsx(ws.span,{"data-state":S6(l.checked),"data-disabled":l.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});j6.displayName=y6;var N6="CheckboxBubbleInput",b6=m.forwardRef(({__scopeCheckbox:t,...s},a)=>{const{control:r,hasConsumerStoppedPropagationRef:n,checked:l,defaultChecked:i,required:o,disabled:c,name:d,value:u,form:x,bubbleInput:p,setBubbleInput:h}=Dv(N6,t),y=Gs(a,h),f=w4(l),v=l4(r);m.useEffect(()=>{const g=p;if(!g)return;const j=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(j,"checked").set,C=!n.current;if(f!==l&&E){const k=new Event("click",{bubbles:C});g.indeterminate=gi(l),E.call(g,gi(l)?!1:l),g.dispatchEvent(k)}},[p,f,l,n]);const w=m.useRef(gi(l)?!1:l);return e.jsx(ws.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??w.current,required:o,disabled:c,name:d,value:u,form:x,...s,tabIndex:-1,ref:y,style:{...s.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});b6.displayName=N6;function dY(t){return typeof t=="function"}function gi(t){return t==="indeterminate"}function S6(t){return gi(t)?"indeterminate":t?"checked":"unchecked"}const w0=m.forwardRef(({className:t,...s},a)=>e.jsx(Av,{ref:a,className:bt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(j6,{className:bt("flex items-center justify-center text-current"),children:e.jsx(Ex,{className:"h-4 w-4"})})}));w0.displayName=Av.displayName;class ZY extends Fe.Component{componentDidCatch(s){this.props.onError(s)}render(){return this.props.children}}function Xp(t){if(!t)return"-";const s=new Date(t);if(!isNaN(s.getTime())){const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[a,r,n]=t.split("-");return`${n.padStart(2,"0")}/${r.padStart(2,"0")}/${a}`}return t}const mY=oP(),tN=dP(),uY=()=>{const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(!0),[i,o]=m.useState(0);Fe.useEffect(()=>{(async()=>{try{const ce=(await(await fetch("http://localhost:4000/api/roles")).json()).map(de=>({id:de.id.toString(),name:de.name}));r(ce)}catch(F){console.error("Error fetching role templates:",F)}})()},[]),Fe.useEffect(()=>{(async()=>{i>0&&console.log("Refreshing data...");try{const I=(await(await fetch("http://localhost:4000/api/roles")).json()).map(ce=>({id:ce.id.toString(),name:ce.name,description:ce.description||"",permissions:ce.permissions||[],status:ce.status||"active",createdAt:ce.createdAt||new Date().toISOString()}));s(I)}catch(R){console.error("Error fetching roles:",R)}finally{l(!1)}})()},[i]),Fe.useEffect(()=>{const R=setInterval(()=>{o(F=>F+1)},3e4);return()=>clearInterval(R)},[]);const c=Fe.useCallback(()=>{l(!0),o(R=>R+1)},[]),[d,u]=m.useState(!1),[x,p]=m.useState(""),[h,y]=m.useState("all"),[f,v]=m.useState(!1),[w,g]=m.useState(!1),[j,N]=m.useState(!1),[E,C]=m.useState(!1),[k,A]=m.useState(null),[T,M]=m.useState(null),[X,ne]=m.useState(null),[Q,oe]=m.useState({name:"",description:"",permissions:[],status:"active"}),{toast:ge}=ya(),me=Fe.useCallback(async()=>{try{l(!0);const R=x,F=h,de=(await(await fetch("http://localhost:4000/api/roles")).json()).map(ve=>({id:ve.id.toString(),name:ve.name,description:ve.description||"",permissions:ve.permissions||[],status:ve.status||"active",createdAt:ve.createdAt||new Date().toISOString()}));s(de),p(R),y(F),ge({title:"Success",description:"Data refreshed successfully"})}catch(R){console.error("Refresh error:",R),ge({title:"Error",description:"Failed to refresh data",variant:"destructive"})}finally{l(!1)}},[x,h,ge]),H=R=>{A(R),N(!0)},L=R=>{M(R),oe({name:R.name,description:R.description||"",permissions:R.permissions,status:R.status||"active"}),g(!0)},he=R=>{ne(R),C(!0)},ie=async()=>{if(!Q.name){ge({title:"Error",description:"Please select a role name",variant:"destructive"});return}try{if(u(!0),!(await fetch("http://localhost:4000/api/roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q.name,description:Q.description,permissions:Q.permissions,status:Q.status})})).ok)throw new Error("Failed to add role");oe({name:"",description:"",permissions:[],status:"active"}),v(!1),ge({title:"Success",description:"Role added successfully"}),c()}catch(R){console.error("Error adding role:",R),ge({title:"Error",description:"Failed to add role",variant:"destructive"})}finally{u(!1)}},ke=async()=>{if(!T||!Q.name){ge({title:"Error",description:"Please select a role name",variant:"destructive"});return}try{if(u(!0),!(await fetch(`http://localhost:4000/api/roles/${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Q.name,description:Q.description,permissions:Q.permissions,status:Q.status})})).ok)throw new Error("Failed to update role");g(!1),M(null),oe({name:"",description:"",permissions:[],status:"active"}),ge({title:"Success",description:"Role updated successfully"}),c()}catch(R){console.error("Error updating role:",R),ge({title:"Error",description:"Failed to update role",variant:"destructive"})}finally{u(!1)}},V=async()=>{if(X)try{if(u(!0),!(await fetch(`http://localhost:4000/api/roles/${X.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete role");ge({title:"Success",description:"Role deleted successfully"}),C(!1),ne(null),c()}catch(R){console.error("Error deleting role:",R),ge({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{u(!1)}},O=(R,F)=>{oe(F?{...Q,permissions:[...Q.permissions,R]}:{...Q,permissions:Q.permissions.filter(I=>I!==R)})},Y=R=>{switch(R){case"active":return"default";case"inactive":return"destructive";default:return"secondary"}},W=()=>{try{const R=["S No","Role Name","Description","Permissions Count","Status","Created Date"],F=ue.map((ve,_e)=>[_e+1,`"${ve.name}"`,`"${ve.description||"-"}"`,ve.permissions.length,(ve.status||"active").charAt(0).toUpperCase()+(ve.status||"active").slice(1),Xp(ve.createdAt)]),I=[R,...F].map(ve=>ve.join(",")).join(`
`),ce=new Blob([I],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a");if(de.download!==void 0){const ve=URL.createObjectURL(ce);de.setAttribute("href",ve);let be=`role-management-${new Date().toISOString().split("T")[0]}`;h!=="all"&&(be+=`-${h}`),x&&(be+="-filtered"),de.setAttribute("download",`${be}.csv`),de.style.visibility="hidden",document.body.appendChild(de),de.click(),document.body.removeChild(de),ge({title:"Success",description:`CSV exported successfully! ${ue.length} roles exported.`})}}catch(R){console.error("Export error:",R),ge({title:"Error",description:"Failed to export CSV file",variant:"destructive"})}},ue=t.filter(R=>{const F=R.name.toLowerCase().includes(x.toLowerCase())||(R.description||"").toLowerCase().includes(x.toLowerCase()),I=h==="all"||(R.status||"active")===h;return F&&I}),[U,z]=m.useState(1),te=10,se=Math.ceil(ue.length/te),J=ue.slice((U-1)*te,U*te),je=()=>z(R=>Math.max(1,R-1)),b=()=>z(R=>Math.min(se,R+1));Fe.useEffect(()=>{z(1)},[x,t.length,h]);const S=t.filter(R=>(R.status||"active")==="active").length;t.filter(R=>(R.status||"active")==="inactive").length;const D=t.length;return n?e.jsx(Gr,{message:"Loading roles..."}):e.jsx("div",{className:"crm-page-bg",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Ks,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Role Management"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsx(Ht.Refresh,{onClick:me,loading:n,disabled:n}),e.jsxs(P,{onClick:W,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:()=>v(!0),className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Role"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Roles"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:D}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"System roles"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Ks,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Roles"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:S}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Operational"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Permissions"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:mY.length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx($n,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Available"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx($n,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"})}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search roles by name or description...",value:x,onChange:R=>p(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:h,onValueChange:y,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"all",children:"All Status"}),e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Ks,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Role Management (",ue.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Roles (",ue.length,")"]})]})}),e.jsx(Re,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Ks,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Role Name"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Ld,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Description"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx($n,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Permissions"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Created Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsx(os,{children:J.map((R,F)=>{const I=(U-1)*te+F+1;return e.jsxs(nt,{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:I}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 font-medium text-center text-xs sm:text-sm whitespace-nowrap",children:R.name}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm max-w-xs truncate",children:R.description||"-"}),e.jsxs(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:[R.permissions.length," permissions"]}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsx(kt,{variant:Y(R.status||"active"),children:(R.status||"active").charAt(0).toUpperCase()+(R.status||"active").slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:Xp(R.createdAt)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>H(R),className:"action-btn-lead action-btn-view h-8 w-8 sm:h-9 sm:w-9 p-0",title:"View Details",children:[e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]}),e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>L(R),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit Role",children:[e.jsx(Kn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs(P,{size:"sm",variant:"outline",onClick:()=>he(R),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete Role",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},R.id)})})]})})})]}),se>1&&e.jsxs("div",{className:"crm-pagination-container",children:[e.jsxs("div",{className:"crm-pagination-info",children:["Showing ",(U-1)*te+1," to ",Math.min(U*te,ue.length)," of ",ue.length," roles"]}),e.jsxs("div",{className:"crm-pagination-controls",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:je,disabled:U===1,className:"crm-pagination-btn",children:"Previous"}),e.jsx("div",{className:"crm-pagination-pages",children:Array.from({length:Math.min(se,5)},(R,F)=>{let I;return se<=5||U<=3?I=F+1:U>=se-2?I=se-4+F:I=U-2+F,e.jsx(P,{variant:U===I?"default":"outline",size:"sm",onClick:()=>z(I),className:"crm-pagination-page-btn",children:I},I)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:b,disabled:U===se,className:"crm-pagination-btn",children:"Next"})]})]}),e.jsx($t,{open:f,onOpenChange:v,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Ks,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Add New Role"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Create a new user role with specific permissions"})]})]})}),e.jsxs("form",{onSubmit:R=>{R.preventDefault(),ie()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"roleName",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:Q.name,onValueChange:R=>oe({...Q,name:R}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select role name"})}),e.jsx(Dt,{children:a.map(R=>e.jsx(Pe,{value:R.name,children:R.name},R.id))})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"roleStatus",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:Q.status,onValueChange:R=>oe({...Q,status:R}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"roleDescription",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(Ve,{id:"roleDescription",value:Q.description,onChange:R=>oe({...Q,description:R.target.value}),placeholder:"Enter role description",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx($n,{className:"h-4 w-4"}),"Permissions"]}),e.jsx("div",{className:"max-h-80 overflow-y-auto border rounded-lg p-3 space-y-4 bg-gray-50/50",children:Object.entries(tN).map(([R,F])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm border-b pb-1",children:R}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 pl-2",children:F.map(I=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w0,{id:`add-${I.name}`,checked:Q.permissions.includes(I.id),onCheckedChange:ce=>O(I.id,ce)}),e.jsx(ae,{htmlFor:`add-${I.name}`,className:"text-sm",children:I.name})]},I.name))})]},R))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",Q.permissions.length," permissions"]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{v(!1),oe({name:"",description:"",permissions:[],status:"active"})},disabled:d,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:d,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:d?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Add Role"]})})]})]})]})}),k&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:e.jsxs("div",{className:"max-w-[95vw] max-h-[95vh] w-full sm:max-w-6xl overflow-hidden bg-gradient-to-br from-white to-blue-50/30 border-0 shadow-2xl p-0 m-4 rounded-xl",onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{className:"relative pb-3 sm:pb-4 md:pb-6 border-b border-blue-100 px-3 sm:px-4 md:px-6 pt-3 sm:pt-4 md:pt-6",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-blue-500"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mt-2 sm:mt-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-full object-cover border-2 sm:border-4 border-white shadow-lg overflow-hidden bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(Ks,{className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 lg:h-12 lg:w-12 text-white"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("div",{className:`border-2 border-white shadow-sm text-xs px-2 py-1 rounded-full ${(k.status||"active")==="active"?"bg-green-100 text-green-800":(k.status||"active")==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:(k.status||"active").charAt(0).toUpperCase()+(k.status||"active").slice(1)})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 lg:h-7 lg:w-7 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:k.name})]}),e.jsxs("div",{className:"text-xs sm:text-sm md:text-lg lg:text-xl mt-1 flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Role ID:"}),e.jsx("span",{className:"font-bold text-green-600 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:k.id?`RL${String(k.id).padStart(4,"0")}`:"N/A"})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>N(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(jt,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-100px)] sm:max-h-[calc(95vh-120px)] md:max-h-[calc(95vh-140px)] lg:max-h-[calc(95vh-200px)] custom-scrollbar",children:e.jsxs("div",{className:"p-2 sm:p-3 md:p-4 lg:p-6 space-y-3 sm:space-y-4 md:space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ks,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-blue-600"})}),"Role Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-blue-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 uppercase tracking-wide",children:"Role Name"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:k.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-green-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-green-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-green-600 uppercase tracking-wide",children:"Description"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate",children:k.description||"No description available"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-purple-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-purple-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-600 uppercase tracking-wide",children:"Status"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:(k.status||"active").charAt(0).toUpperCase()+(k.status||"active").slice(1)})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-2 sm:p-3 md:p-4 rounded-lg sm:rounded-xl border border-indigo-100",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Pt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-indigo-600"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-600 uppercase tracking-wide",children:"Created Date"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900",children:Xp(k.createdAt)})]})]})})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(cr,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-green-600"})}),"Role Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-blue-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx($n,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-blue-600",children:k.permissions.length}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-blue-600 uppercase tracking-wide",children:"Total Permissions"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-green-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Ns,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-green-600"})}),e.jsx("div",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-green-600",children:k.permissions.filter(R=>R.includes("read")||R.includes("view")).length}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-green-600 uppercase tracking-wide",children:"Read Permissions"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl border border-purple-100 text-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(Ld,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${(k.status||"active")==="active"?"bg-green-100 text-green-800":(k.status||"active")==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:(k.status||"active").charAt(0).toUpperCase()+(k.status||"active").slice(1)}),e.jsx("div",{className:"text-xs sm:text-sm font-medium text-purple-600 uppercase tracking-wide mt-2",children:"Role Status"})]})]})]}),k.permissions.length>0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm",children:[e.jsxs("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 mb-3 sm:mb-4 md:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx($n,{className:"h-3 w-3 sm:h-3 sm:w-3 md:h-4 md:w-4 text-purple-600"})}),"Permissions List (",k.permissions.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:k.permissions.map((R,F)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200/50 hover:shadow-md transition-shadow",children:[e.jsx(Ns,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium break-words",children:R})]},F))})]}),k.permissions.length===0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg sm:rounded-xl md:rounded-2xl p-3 sm:p-4 md:p-5 lg:p-6 border border-blue-100 shadow-sm text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Kf,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Permissions Assigned"}),e.jsx("p",{className:"text-gray-500",children:"This role has no specific permissions configured"})]})]})})]})}),e.jsx($t,{open:w,onOpenChange:g,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(Kn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit Role"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update role information and permissions"})]})]})}),e.jsxs("form",{onSubmit:R=>{R.preventDefault(),ke()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editRoleName",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4"}),"Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:Q.name,onValueChange:R=>oe({...Q,name:R}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select role name"})}),e.jsx(Dt,{children:a.map(R=>e.jsx(Pe,{value:R.name,children:R.name},R.id))})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editRoleStatus",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:Q.status,onValueChange:R=>oe({...Q,status:R}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"active",children:"Active"}),e.jsx(Pe,{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"editRoleDescription",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Description"]}),e.jsx(Ve,{id:"editRoleDescription",value:Q.description,onChange:R=>oe({...Q,description:R.target.value}),placeholder:"Enter role description",className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx($n,{className:"h-4 w-4"}),"Permissions"]}),e.jsx("div",{className:"max-h-80 overflow-y-auto border rounded-lg p-3 space-y-4 bg-gray-50/50",children:Object.entries(tN).map(([R,F])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm border-b pb-1",children:R}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 pl-2",children:F.map(I=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w0,{id:`edit-${I.name}`,checked:Q.permissions.includes(I.id),onCheckedChange:ce=>O(I.id,ce)}),e.jsx(ae,{htmlFor:`edit-${I.name}`,className:"text-sm",children:I.name})]},I.name))})]},R))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Selected: ",Q.permissions.length," permissions"]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{g(!1),M(null),oe({name:"",description:"",permissions:[],status:"active"})},disabled:d,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"submit",disabled:d,className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:d?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kn,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Update Role"]})})]})]})]})}),e.jsx($t,{open:E,onOpenChange:C,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete Role"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Are you sure you want to delete this role? This action cannot be undone."})]})]})}),X&&e.jsx("div",{className:"mx-4 my-4 p-4 bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:X.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:X.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ld,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Permissions: ",X.permissions.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["Status: ",X.status||"active"]})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>{C(!1),ne(null)},disabled:d,className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsx(P,{type:"button",onClick:V,disabled:d,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:d?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete Role"]})})]})]})})]})})},xY=t=>{if(!t)return"Not Set";try{const s=new Date(t);if(isNaN(s.getTime()))return"Invalid Date";const a=s.getDate().toString().padStart(2,"0"),r=(s.getMonth()+1).toString().padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}catch{return"Invalid Date"}},hY=()=>{js();const[t,s]=m.useState([]),[a,r]=m.useState([]),[n,l]=m.useState(!0),[i,o]=m.useState(""),[c,d]=m.useState("All"),[u,x]=m.useState(null),[p,h]=m.useState(!1),[y,f]=m.useState(!1),[v,w]=m.useState(!1),[g,j]=m.useState(null),[N,E]=m.useState(!1),[C,k]=m.useState(!1),[A,T]=m.useState({username:"",role:"",password:"",status:"Active"}),[M,X]=m.useState({username:"",role:"",password:"",status:"Active"});m.useEffect(()=>{ne(),Q()},[]);const ne=()=>{l(!0);const O="http://localhost:4000/api".replace("/api","")||"http://localhost:4000";fetch(`${O}/api/management-users`).then(Y=>Y.json()).then(Y=>{s(Y),l(!1)}).catch(()=>l(!1))},Q=async()=>{try{const O="http://localhost:4000/api".replace("/api","")||"http://localhost:4000",W=await(await fetch(`${O}/api/roles`)).json();r(W)}catch(O){console.error("Error fetching roles:",O)}},oe=O=>{x(O),T({username:O.username,role:O.role,password:"",status:O.status}),h(!0)},ge=()=>{X({username:"",role:"",password:"",status:"Active"}),f(!0)},me=async()=>{const O="http://localhost:4000/api".replace("/api","")||"http://localhost:4000";try{if((await fetch(`${O}/api/management-users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok)Te({title:"Success",description:"User created successfully"}),f(!1),ne();else throw new Error("Failed to create user")}catch{Te({title:"Error",description:"Failed to create user. Please try again.",variant:"destructive"})}},H=async()=>{if(!u)return;const O="http://localhost:4000/api".replace("/api","")||"http://localhost:4000";try{if((await fetch(`${O}/api/management-users/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)})).ok)Te({title:"Success",description:"User updated successfully"}),h(!1),ne();else throw new Error("Failed to update user")}catch{Te({title:"Error",description:"Failed to update user. Please try again.",variant:"destructive"})}},L=O=>{j(O),w(!0)},he=async()=>{if(!g)return;const O="http://localhost:4000/api".replace("/api","")||"http://localhost:4000";try{if((await fetch(`${O}/api/management-users/${g.id}`,{method:"DELETE"})).ok)Te({title:"Success",description:"User deleted successfully"}),w(!1),ne();else throw new Error("Failed to delete user")}catch{Te({title:"Error",description:"Failed to delete user. Please try again.",variant:"destructive"})}},ie=t.filter(O=>{const Y=O.username.toLowerCase().includes(i.toLowerCase())||O.role.toLowerCase().includes(i.toLowerCase()),W=c==="All"||O.status===c;return Y&&W}),ke=O=>{switch(O.toLowerCase()){case"active":return"bg-green-100 text-green-800 hover:bg-green-200";case"inactive":return"bg-red-100 text-red-800 hover:bg-red-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},V=()=>{const O=["S No","Username","Role","Status","Created Date"],Y=ie.map((te,se)=>[se+1,te.username,te.role,te.status,te.createdAt]),W=[O,...Y].map(te=>te.join(",")).join(`
`),ue=new Blob([W],{type:"text/csv"}),U=window.URL.createObjectURL(ue),z=document.createElement("a");z.href=U,z.download="users-list.csv",z.click(),window.URL.revokeObjectURL(U)};return e.jsxs("div",{className:"crm-page-bg",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"crm-header-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"crm-header-icon",children:e.jsx(Rt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"User Management"})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-row gap-1 sm:gap-3 w-full sm:w-auto",children:[e.jsxs(P,{onClick:()=>{console.log(" Manual refresh triggered"),ne()},disabled:n,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(es,{className:`h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 ${n?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(P,{onClick:V,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(P,{onClick:ge,className:"global-btn flex-1 sm:flex-none text-xs sm:text-sm px-2 sm:px-4 py-1 sm:py-2",children:[e.jsx(us,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add User"}),e.jsx("span",{className:"sm:hidden",children:"+"})]})]})]})}),e.jsxs("div",{className:"crm-stats-grid",children:[e.jsx(Ie,{className:"crm-stat-card crm-stat-card-blue",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-700 mb-1 truncate",children:"Total Users"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-900 mb-1",children:ie.length}),e.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Registered"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-blue",children:e.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-green",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-700 mb-1 truncate",children:"Active Users"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-900 mb-1",children:ie.filter(O=>O.status==="Active").length}),e.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Online"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-green",children:e.jsx(Ns,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-red",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-700 mb-1 truncate",children:"Inactive Users"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-900 mb-1",children:ie.filter(O=>O.status==="Inactive").length}),e.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[e.jsx(st,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Offline"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-red",children:e.jsx(st,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})}),e.jsx(Ie,{className:"crm-stat-card crm-stat-card-orange",children:e.jsx(Re,{className:"relative p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-orange-700 mb-1 truncate",children:"Last Updated"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-orange-900 mb-1",children:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"})}),e.jsxs("div",{className:"flex items-center text-xs text-orange-600",children:[e.jsx(Qt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Today"})]})]}),e.jsx("div",{className:"crm-stat-icon crm-stat-icon-orange",children:e.jsx(Qt,{className:"w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-white"})})]})})})]}),e.jsx("div",{className:"crm-controls-container",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users by name, role...",value:i,onChange:O=>o(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsxs(At,{value:c,onValueChange:d,children:[e.jsx(Et,{className:"w-full",children:e.jsx(_t,{placeholder:"Filter by status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"All",children:"All Status"}),e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"})]})]})})]})}),e.jsxs(Ie,{className:"crm-table-container",children:[e.jsx(Zt,{className:"crm-table-header",children:e.jsxs("div",{className:"crm-table-title",children:[e.jsx(Rt,{className:"crm-table-title-icon"}),e.jsxs("span",{className:"crm-table-title-text",children:["Users List (",ie.length,")"]}),e.jsxs("span",{className:"crm-table-title-text-mobile",children:["Users (",ie.length,")"]})]})}),e.jsx(Re,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ls,{className:"w-full min-w-[800px]",children:[e.jsx(is,{children:e.jsxs(nt,{className:"bg-gray-50 border-b",children:[e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"S No"})})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Username"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Ns,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Role"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(vs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Password"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(st,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Status"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[e.jsx(Qt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Created Date"})]})}),e.jsx(re,{className:"px-2 sm:px-3 lg:px-4 py-3 text-center font-medium text-gray-700 text-xs sm:text-sm whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx(os,{children:n?e.jsx(nt,{children:e.jsx(q,{colSpan:7,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(es,{className:"h-8 w-8 text-gray-400 animate-spin mb-2"}),e.jsx("span",{className:"text-gray-500",children:"Loading users..."})]})})}):ie.length===0?e.jsx(nt,{children:e.jsxs(q,{colSpan:7,className:"text-center py-12 bg-white",children:[e.jsx(Rt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No users found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No users match your search criteria. Try adjusting your filters."})]})}):ie.map((O,Y)=>e.jsxs(nt,{className:"hover:bg-gray-50 border-b",children:[e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:Y+1}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm font-medium text-gray-900 whitespace-nowrap",children:O.username}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:O.role}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:e.jsx("span",{className:"font-mono text-xs",children:O.password||e.jsx("span",{className:"text-gray-400",children:"Not Set"})})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsx(kt,{className:`${ke(O.status)} text-xs`,children:O.status.charAt(0).toUpperCase()+O.status.slice(1)})}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:xY(O.createdAt)}),e.jsx(q,{className:"px-2 sm:px-3 lg:px-4 py-2 lg:py-3 text-center whitespace-nowrap",children:e.jsxs("div",{className:"action-buttons-container",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>oe(O),className:"action-btn-lead action-btn-edit h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Edit User",children:e.jsx(Ds,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>L(O),className:"action-btn-lead action-btn-delete h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete User",children:e.jsx(mt,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})})]},O.id))})]})})})]})]}),e.jsx($t,{open:p,onOpenChange:h,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(an,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Edit User"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Update user information. Click save when you're done."})]})]})}),e.jsxs("form",{onSubmit:O=>{O.preventDefault(),H()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"username",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Username"]}),e.jsx(Ve,{id:"username",value:A.username,onChange:O=>T({...A,username:O.target.value}),className:"editpopup form crm-edit-form-input"})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"role",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Role"]}),e.jsxs(At,{value:A.role,onValueChange:O=>T({...A,role:O}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select role"})}),e.jsx(Dt,{children:a.map(O=>e.jsx(Pe,{value:O.name||O.role_name,children:O.name||O.role_name},O.id))})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"password",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx($n,{className:"h-4 w-4"}),"Password"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{id:"password",type:N?"text":"password",value:A.password,onChange:O=>T({...A,password:O.target.value}),className:"editpopup form crm-edit-form-input pr-10",placeholder:"Enter new password (leave blank to keep current)"}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>E(!N),children:N?e.jsx(iy,{className:"h-4 w-4 text-gray-400"}):e.jsx(vs,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:A.status,onValueChange:O=>T({...A,status:O}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>h(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(an,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Save Changes"]})]})]})]})}),e.jsx($t,{open:y,onOpenChange:f,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(yi,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title",children:"Add New User"}),e.jsx(Vt,{className:"editpopup form dialog-description",children:"Create a new user account. Fill in all required information."})]})]})}),e.jsxs("form",{onSubmit:O=>{O.preventDefault(),me()},className:"editpopup form crm-edit-form-content",children:[e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"add-username",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ve,{id:"add-username",value:M.username,onChange:O=>X({...M,username:O.target.value}),className:"editpopup form crm-edit-form-input",placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"add-role",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(Ks,{className:"h-4 w-4"}),"Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(At,{value:M.role,onValueChange:O=>X({...M,role:O}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select role"})}),e.jsx(Dt,{children:a.map(O=>e.jsx(Pe,{value:O.name||O.role_name,children:O.name||O.role_name},O.id))})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"add-password",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx($n,{className:"h-4 w-4"}),"Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{id:"add-password",type:C?"text":"password",value:M.password,onChange:O=>X({...M,password:O.target.value}),className:"editpopup form crm-edit-form-input pr-10",placeholder:"Enter password",required:!0}),e.jsx(P,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>k(!C),children:C?e.jsx(iy,{className:"h-4 w-4 text-gray-400"}):e.jsx(vs,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{className:"editpopup form crm-edit-form-group",children:[e.jsxs(ae,{htmlFor:"add-status",className:"editpopup form crm-edit-form-label flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Status"]}),e.jsxs(At,{value:M.status,onValueChange:O=>X({...M,status:O}),children:[e.jsx(Et,{className:"editpopup form crm-edit-form-select",children:e.jsx(_t,{placeholder:"Select status"})}),e.jsxs(Dt,{children:[e.jsx(Pe,{value:"Active",children:"Active"}),e.jsx(Pe,{value:"Inactive",children:"Inactive"})]})]})]}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>f(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"submit",className:"editpopup form footer-button-save w-full sm:w-auto global-btn",children:[e.jsx(yi,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Create User"]})]})]})]})}),e.jsx($t,{open:v,onOpenChange:w,children:e.jsxs(Ot,{className:"crm-modal-container",children:[e.jsx(Ut,{className:"editpopup form dialog-header",children:e.jsxs("div",{className:"editpopup form icon-title-container",children:[e.jsx("div",{className:"editpopup form dialog-icon",children:e.jsx(mt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),e.jsxs("div",{className:"editpopup form title-description",children:[e.jsx(Bt,{className:"editpopup form dialog-title text-red-700",children:"Delete User"}),e.jsxs(Vt,{className:"editpopup form dialog-description",children:['Are you sure you want to delete user "',g==null?void 0:g.username,'"? This action cannot be undone.']})]})]})}),e.jsxs(zt,{className:"editpopup form dialog-footer flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4 sm:pt-6 px-3 sm:px-4 md:px-6 pb-3 sm:pb-4 md:pb-6",children:[e.jsxs(P,{type:"button",variant:"outline",onClick:()=>w(!1),className:"editpopup form footer-button-cancel w-full sm:w-auto modern-btn modern-btn-secondary",children:[e.jsx(jt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Cancel"]}),e.jsxs(P,{type:"button",variant:"destructive",onClick:he,className:"editpopup form footer-button-delete w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(mt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Delete User"]})]})]})})]})},pY=new h_;function fY(){const[t,s]=m.useState(null),[a,r]=m.useState(!1),[n,l]=m.useState(!1),[i,o]=m.useState(!1),[c,d]=m.useState(!1);m.useEffect(()=>{(async()=>{try{console.log(" Gandhi Bai CRM - Initializing..."),document.title="Gandhi Bai De-Addiction Center CRM";const y=u(),f=new Promise(v=>setTimeout(v,3e3));await Promise.race([y,f]),console.log(" App initialization complete")}catch(y){console.warn(" Settings load failed, continuing with defaults:",y)}finally{o(!0),d(!0)}})()},[]);const u=async()=>{try{const{loadWebsiteSettings:h}=await ms(async()=>{const{loadWebsiteSettings:y}=await Promise.resolve().then(()=>rP);return{loadWebsiteSettings:y}},void 0);await h(),console.log(" Website settings loaded successfully")}catch(h){console.warn(" Failed to load website settings, using defaults:",h)}};m.useEffect(()=>{const h=localStorage.getItem("healthcare_user");if(h)try{s(JSON.parse(h))}catch(y){console.error("Invalid user data in localStorage:",y),localStorage.removeItem("healthcare_user")}else if(window.location.pathname==="/forgot-password"){l(!0);return}},[]);const x=h=>{s(h),localStorage.setItem("healthcare_user",JSON.stringify(h))},p=()=>{s(null),localStorage.removeItem("healthcare_user"),window.location.href="/"};return c?e.jsx(f_,{client:pY,children:e.jsx(oA,{children:e.jsxs("div",{className:"App",children:[n?e.jsx(lP,{onBack:()=>{l(!1),window.history.pushState(null,"","/")}}):t?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(mP,{user:t,onLogout:p,onCollapsedChange:r}),e.jsx("main",{className:bt("min-h-screen transition-all duration-300","lg:ml-64",a&&"lg:ml-20"),children:e.jsx("div",{className:"w-full",children:e.jsxs(tA,{children:[e.jsx(Xt,{path:"/",element:e.jsx(ey,{to:"/dashboard",replace:!0})}),e.jsx(Xt,{path:"/demo",element:e.jsx(uP,{})}),e.jsx(Xt,{path:"/dashboard",element:e.jsx(hy,{user:t})}),e.jsx(Xt,{path:"/home",element:e.jsx(hy,{user:t})}),e.jsx(Xt,{path:"/files",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Files"}),e.jsx("p",{children:"Files management coming soon..."})]})}),e.jsx(Xt,{path:"/messages",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Messages"}),e.jsx("p",{children:"Messages functionality coming soon..."})]})}),e.jsx(Xt,{path:"/notifications",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Notifications"}),e.jsx("p",{children:"Notifications center coming soon..."})]})}),e.jsx(Xt,{path:"/location",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Location"}),e.jsx("p",{children:"Location services coming soon..."})]})}),e.jsx(Xt,{path:"/graph",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Analytics"}),e.jsx("p",{children:"Advanced analytics coming soon..."})]})}),e.jsx(Xt,{path:"/patients/add",element:e.jsx(wR,{})}),e.jsx(Xt,{path:"/patients/list",element:e.jsx(OR,{})}),e.jsx(Xt,{path:"/patients/details/:patientId",element:e.jsx(LR,{})}),e.jsx(Xt,{path:"/patients/test-report-amount",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Test Report Amount"}),e.jsx("p",{children:"Test report management coming soon..."})]})}),e.jsx(Xt,{path:"/patients/deleted",element:e.jsx(Ez,{})}),e.jsx(Xt,{path:"/patients/attendance",element:e.jsx(Dz,{})}),e.jsx(Xt,{path:"/patients/medical-records",element:e.jsx(Tz,{})}),e.jsx(Xt,{path:"/patients/history",element:e.jsx(Az,{})}),e.jsx(Xt,{path:"/patients/call-records",element:e.jsx(Pz,{})}),e.jsx(Xt,{path:"/patients/payment-fees",element:e.jsx(_z,{})}),e.jsx(Xt,{path:"/management/add-staff",element:e.jsx(Mz,{})}),e.jsx(Xt,{path:"/management/staff-category",element:e.jsx(Iz,{})}),e.jsx(Xt,{path:"/management/staff",element:e.jsx(Rz,{})}),e.jsx(Xt,{path:"/management/deleted-staff",element:e.jsx(Oz,{})}),e.jsx(Xt,{path:"/management/attendance",element:e.jsx(Lz,{})}),e.jsx(Xt,{path:"/management/salary-payment",element:e.jsx($z,{})}),e.jsx(Xt,{path:"/management/doctors",element:e.jsx(Yz,{})}),e.jsx(Xt,{path:"/management/suppliers",element:e.jsx(Hj,{})}),e.jsx(Xt,{path:"/management/grocery",element:e.jsx(Qj,{})}),e.jsx(Xt,{path:"/management/add-doctor",element:e.jsx(Gz,{})}),e.jsx(Xt,{path:"/management/doctor-category",element:e.jsx(qz,{})}),e.jsx(Xt,{path:"/management/doctor-attendance",element:e.jsx(Jz,{})}),e.jsx(Xt,{path:"/management/doctor-salary",element:e.jsx(NV,{})}),e.jsx(Xt,{path:"/management/doctor-advance",element:e.jsx(bV,{})}),e.jsx(Xt,{path:"/management/staff-advance",element:e.jsx(CV,{})}),e.jsx(Xt,{path:"/management/test-report-amount",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Test Report Amount"}),e.jsx("p",{children:"Test report management coming soon..."})]})}),e.jsx(Xt,{path:"/management/deleted-doctors",element:e.jsx(BV,{})}),e.jsx(Xt,{path:"/management/user-role/add",element:e.jsx(lY,{})}),e.jsx(Xt,{path:"/management/user-role/roles",element:e.jsx(uY,{})}),e.jsx(Xt,{path:"/medicine/add",element:e.jsx(zV,{})}),e.jsx(Xt,{path:"/medicine/categories",element:e.jsx(VV,{})}),e.jsx(Xt,{path:"/medicine/suppliers",element:e.jsx(Hj,{})}),e.jsx(Xt,{path:"/medicine/stock",element:e.jsx(YV,{})}),e.jsx(Xt,{path:"/medicine/accounts",element:e.jsx(HV,{})}),e.jsx(Xt,{path:"/grocery",element:e.jsx(Qj,{})}),e.jsx(Xt,{path:"/grocery/categories",element:e.jsx(GV,{})}),e.jsx(Xt,{path:"/grocery/suppliers",element:e.jsx(qV,{})}),e.jsx(Xt,{path:"/grocery/stock",element:e.jsx(JV,{})}),e.jsx(Xt,{path:"/grocery/accounts",element:e.jsx(XV,{})}),e.jsx(Xt,{path:"/general/add",element:e.jsx(QV,{})}),e.jsx(Xt,{path:"/general/categories",element:e.jsx(ZV,{})}),e.jsx(Xt,{path:"/general/suppliers",element:e.jsx(eY,{})}),e.jsx(Xt,{path:"/general/stock",element:e.jsx(tY,{})}),e.jsx(Xt,{path:"/general/accounts",element:e.jsx(aY,{})}),e.jsx(Xt,{path:"/leads/add-category",element:e.jsx(rY,{})}),e.jsx(Xt,{path:"/leads/list",element:e.jsx(nY,{})}),e.jsx(Xt,{path:"/settings",element:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),e.jsx("p",{children:"Settings management coming soon..."})]})}),e.jsx(Xt,{path:"/administration",element:e.jsx(hY,{})}),e.jsx(Xt,{path:"*",element:e.jsx(ey,{to:"/dashboard",replace:!0})})]})})})]}):e.jsx(nP,{onLogin:x}),e.jsx(tP,{})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Gandhi Bai CRM"}),e.jsx("p",{className:"text-gray-600",children:"Loading your workspace..."})]})})}S1(document.getElementById("root")).render(e.jsx(Fe.StrictMode,{children:e.jsx(fY,{})}));
